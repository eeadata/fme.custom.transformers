#! <?xml version="1.0" encoding="UTF-8" ?>
#! <TRANSFORMER
# TRANSFORMER_BEGIN AzureBlobDownloader,2,"Web Services",32bc2afc-7a37-47eb-9dc9-89ff7e80b52b,"Linked by Default",No,NO_PARALLELISM,,No,19630,YES,No,36,No
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Download blob file from Azure and store into a local location. </p>
# 
# TRANSFORMER_END
#!   ATTR_TYPE_ENCODING="SDF"
#!   BLOCKED_LOOPING="No"
#!   CATEGORY="Web Services"
#!   DESCRIPTION="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Download blob file from Azure and store into a local location. &lt;/p&gt;&#10;"
#!   DOC_EXTENTS="5984.93 681.001"
#!   DOC_TOP_LEFT="-1901.77 -507.877"
#!   EXPLICIT_BOOKMARK_ORDER="false"
#!   FME_BUILD_NUM="19630"
#!   FME_DOCUMENT_GUID="32bc2afc-7a37-47eb-9dc9-89ff7e80b52b"
#!   FME_DOCUMENT_PRIORGUID="4e9ec45b-3973-4d4c-bc66-a5e492df7f30,e9729da6-020c-46cd-979d-80f4d8165bae,0558c371-645a-460b-8b33-f52235ed28af,b4bf42f8-e811-49f2-a06d-ff0220f0ebfb"
#!   FME_LINKED_TRANSFORMER_VERSION="2"
#!   FME_PROCESS_COUNT="NO_PARALLELISM"
#!   FME_PROCESS_GROUPS_ORDERED="No"
#!   FME_PROCESS_GROUP_BY=""
#!   FME_PROCESS_PRESERVE_GROUP_ATTR="No"
#!   FME_SERVER_SERVICES=""
#!   FMX_ATTRIBUTE_PROPOGATION_MODE="AUTO"
#!   FMX_INSERT_MODE="Linked by Default"
#!   HISTORY="16&lt;solidus&gt;11&lt;solidus&gt;2016,Peter&lt;space&gt;&lt;space&gt;Segerstedt,Initial&lt;space&gt;creator"
#!   ITERATION_COUNT_ATTR=""
#!   LAST_SAVE_BUILD="FME(R) 2019.1.2.0 (20190829 - Build 19630 - WIN64)"
#!   LAST_SAVE_DATE="2019-10-14T15:58:10"
#!   MARKDOWN_DESCRIPTION=""
#!   MARKDOWN_USAGE=""
#!   MAX_LOOP_ITERATIONS=""
#!   PASSWORD=""
#!   PYTHON_COMPATIBILITY="36"
#!   SHOW_ANNOTATIONS="true"
#!   SHOW_INFO_NODES="true"
#!   TITLE="AzureBlobDownloader"
#!   USAGE="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Storage account:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the storage account. Look for this under the portal.azure.com.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-weight:600;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Access key:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the access key for the blob inside Azure. You can find this when you select the storage inside the protal.azure.com website, go to settings and then search for &quot;Access keys&quot;.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Use access keys to authenticate your applications when making requests to this Azure storage account. Store your access keys securely - for example, using Azure Key Vault - and don&apos;t share them. We recommend regenerating your access keys regularly. You are provided two access keys so that you can maintain connections using one key while regenerating the other. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Container name:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The storage countainer name. These are listed directly under the storage account pannel. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Blob name:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The name of the blob you are about to delete. You can delete blobs in folders by simply using the &apos;/&apos; for example &quot;folder1/folder2/blobname&quot;. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Output Location:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The local path where the file should be stored. &lt;/p&gt;&#10;"
#!   USE_MARKDOWN=""
#!   VIEW_POSITION="-1440.64 1281.26"
#!   WARN_INVALID_XFORM_PARAM="Yes"
#!   WORKSPACE_VERSION="1"
#!   XFORM_DEPRECATED="No"
#!   ZOOM_SCALE="100"
#! >
#! <DATASETS>
#! </DATASETS>
#! <DATA_TYPES>
#! </DATA_TYPES>
#! <GEOM_TYPES>
#! </GEOM_TYPES>
#! <FEATURE_TYPES>
#! </FEATURE_TYPES>
#! <FMESERVER>
#! </FMESERVER>
#! <GLOBAL_PARAMETERS>
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR ACCOUNT &quot; &quot; Storage Account:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI PASSWORD_OR_ATTR KEY Access Key:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="true"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR CONTAINER &quot; &quot; Container Name:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR BLOB_NAME &quot; &quot; Blob Name:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI FILENAME_OR_ATTR TARGET_FILEPATH All_Files|*.* Output Location:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="true"
#! />
#! </GLOBAL_PARAMETERS>
#! <COMMENTS>
#! </COMMENTS>
#! <CONSTANTS>
#! </CONSTANTS>
#! <BOOKMARKS>
#! <BOOKMARK
#!   IDENTIFIER="39"
#!   NAME="IF DIR ADD BASENAME"
#!   DESCRIPTION=""
#!   TOP_LEFT="-190.68899999999999 173.124"
#!   ORDER="500000000000000"
#!   PALETTE_COLOR=""
#!   BOTTOM_RIGHT="990.44100000000014 -507.87699999999995"
#!   BOUNDING_RECT="-190.68899999999999 173.124 1181.1300000000001 681.00099999999998"
#!   STICKY="true"
#!   COLOUR="0.52156862745098043,0.58823529411764708,0.25490196078431371,0.39215686274509803"
#!   CONTENTS="26 37 31 24 35 30 36 22 23 "
#! >
#! </BOOKMARK>
#! </BOOKMARKS>
#! <TRANSFORMERS>
#! <TRANSFORMER
#!   IDENTIFIER="1"
#!   TYPE="AttributeCreator"
#!   VERSION="8"
#!   POSITION="-1286.3499999999999 -77.875600000000006"
#!   BOUNDING_RECT="-1286.3499999999999 -77.875600000000006 820.72799999999995 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_GRP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_HANDLING" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTR_TABLE" PARM_VALUE="&quot;&quot; _azure_blob_downloader_storage_account SET_TO $(ACCOUNT)  _azure_blob_downloader_key SET_TO $(KEY)  _azure_blob_downloader_container SET_TO $(CONTAINER)  _azure_blob_downloader_blob_name SET_TO $(BLOB_NAME)  _azure_blob_downloader_filepath SET_TO $(TARGET_FILEPATH)"/>
#!     <XFORM_PARM PARM_NAME="MULTI_FEATURE_MODE" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_MODE_DISPLAY" PARM_VALUE="No Substitution"/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_VALUE" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="NUM_PRIOR_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="NUM_SUBSEQUENT_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="FetchParamsAttributeCreator_2"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="4"
#!   TYPE="PythonCaller"
#!   VERSION="4"
#!   POSITION="1258.3900000000001 -118.501"
#!   BOUNDING_RECT="1258.3900000000001 -118.501 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="19630"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="ADVANCED_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="HIDE_ATTRIBUTES" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NEW_ATTRIBUTES" PARM_VALUE="_azure_blob_downloader_status"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PYTHONSOURCE" PARM_VALUE="from&lt;space&gt;fmeobjects&lt;space&gt;import&lt;space&gt;FMELogFile&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;DownloadFeatureProcessor&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile&lt;space&gt;=&lt;space&gt;FMELogFile&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;Make&lt;space&gt;sure&lt;space&gt;to&lt;space&gt;change&lt;space&gt;if&lt;space&gt;Custom&lt;space&gt;transformer&lt;space&gt;is&lt;space&gt;renamed&lt;space&gt;&lt;openparen&gt;not&lt;space&gt;transformer&lt;space&gt;instance&lt;space&gt;name&lt;space&gt;-&lt;space&gt;that&lt;apos&gt;s&lt;space&gt;what&lt;space&gt;we&lt;apos&gt;re&lt;space&gt;fetching&lt;closeparen&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.xformer_name&lt;space&gt;=&lt;space&gt;FME_MacroValues&lt;openbracket&gt;&lt;apos&gt;AzureBlobDownloader_WORKSPACE_NAME&lt;apos&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;info&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_WARN&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;while&lt;space&gt;developing&lt;space&gt;for&lt;space&gt;popping&lt;space&gt;out&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;debug&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s&lt;space&gt;&lt;openparen&gt;DEBUG&lt;closeparen&gt;:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_WARN&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;while&lt;space&gt;developing&lt;space&gt;for&lt;space&gt;popping&lt;space&gt;out&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;input&lt;openparen&gt;self&lt;comma&gt;feature&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;try:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;account&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_downloader_storage_account&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;secret&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_downloader_key&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_downloader_blob_name&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;container&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_downloader_container&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;target_filepath&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_downloader_filepath&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Downloading&lt;space&gt;blob&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;space&gt;to&lt;space&gt;file&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;blob_name&lt;comma&gt;&lt;space&gt;target_filepath&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;with&lt;space&gt;AzureAPI&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;self.logfile&lt;comma&gt;&lt;space&gt;logprefix&lt;space&gt;=&lt;space&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;loglevel&lt;space&gt;=&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;space&gt;as&lt;space&gt;azure:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;last_mod&lt;comma&gt;&lt;space&gt;blob_type&lt;comma&gt;&lt;space&gt;content_length&lt;comma&gt;&lt;space&gt;content_type&lt;comma&gt;&lt;space&gt;content_md5&lt;comma&gt;&lt;space&gt;accept_ranges&lt;comma&gt;&lt;space&gt;committed_block_count&lt;comma&gt;&lt;space&gt;=&lt;space&gt;azure.download_blob&lt;openparen&gt;container&lt;comma&gt;blob_name=blob_name&lt;comma&gt;target_filepath=target_filepath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;blob.last_modified&lt;apos&gt;&lt;comma&gt;&lt;space&gt;last_mod&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;blob.blob_type&lt;apos&gt;&lt;comma&gt;&lt;space&gt;blob_type&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;blob.content_length&lt;apos&gt;&lt;comma&gt;&lt;space&gt;content_length&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;blob.content_type&lt;apos&gt;&lt;comma&gt;&lt;space&gt;content_type&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;content_md5:&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;blob.md5&lt;apos&gt;&lt;comma&gt;&lt;space&gt;content_md5&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_downloader_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;initiator_success&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;except&lt;space&gt;Exception&lt;space&gt;as&lt;space&gt;e:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_downloader_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;initiator_fail&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_downloader_error_message&lt;apos&gt;&lt;comma&gt;&lt;space&gt;str&lt;openparen&gt;e&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logException&lt;openparen&gt;e&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.pyoutput&lt;openparen&gt;feature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;close&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;del&lt;space&gt;self.logfile&lt;lf&gt;#&lt;space&gt;common&lt;space&gt;api&lt;space&gt;below&lt;lf&gt;import&lt;space&gt;os&lt;lf&gt;import&lt;space&gt;os.path&lt;lf&gt;import&lt;space&gt;requests&lt;lf&gt;from&lt;space&gt;collections&lt;space&gt;import&lt;space&gt;OrderedDict&lt;lf&gt;import&lt;space&gt;datetime&lt;lf&gt;from&lt;space&gt;xml.etree&lt;space&gt;import&lt;space&gt;ElementTree&lt;lf&gt;from&lt;space&gt;io&lt;space&gt;import&lt;space&gt;StringIO&lt;lf&gt;from&lt;space&gt;threading&lt;space&gt;import&lt;space&gt;Thread&lt;lf&gt;import&lt;space&gt;io&lt;lf&gt;&lt;lf&gt;import&lt;space&gt;queue&lt;lf&gt;import&lt;space&gt;base64&lt;lf&gt;import&lt;space&gt;uuid&lt;lf&gt;import&lt;space&gt;hashlib&lt;lf&gt;import&lt;space&gt;hmac&lt;lf&gt;import&lt;space&gt;sys&lt;lf&gt;&lt;lf&gt;PUT_BLOB_LIMIT&lt;space&gt;=&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;64&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;64&lt;space&gt;MB&lt;lf&gt;PUT_BLOCK_CHUNK_SIZE&lt;space&gt;=&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;4&lt;space&gt;#&lt;space&gt;4&lt;space&gt;MB&lt;lf&gt;AZ_VERSION&lt;space&gt;=&lt;space&gt;&lt;apos&gt;2015-02-21&lt;apos&gt;&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;StdoutLogger&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;simple&lt;space&gt;log&lt;space&gt;class&lt;space&gt;to&lt;space&gt;mimic&lt;space&gt;fme&lt;space&gt;api&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;logMessageString&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;msg&lt;comma&gt;&lt;space&gt;level&lt;space&gt;=&lt;space&gt;0&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;print&lt;openparen&gt;msg&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;logException&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;e&lt;comma&gt;&lt;space&gt;level&lt;space&gt;=&lt;space&gt;0&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logMessageString&lt;openparen&gt;str&lt;openparen&gt;e&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;level&lt;closeparen&gt;&lt;lf&gt;class&lt;space&gt;AzureAPI&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;sys.version_info&lt;space&gt;&lt;lt&gt;&lt;space&gt;&lt;openparen&gt;3&lt;comma&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;from&lt;space&gt;collections&lt;space&gt;import&lt;space&gt;Iterable&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_unicode_type&lt;space&gt;=&lt;space&gt;unicode&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;from&lt;space&gt;collections.abc&lt;space&gt;import&lt;space&gt;Iterable&lt;space&gt;#&lt;space&gt;TODO:&lt;space&gt;this&lt;space&gt;code&lt;space&gt;was&lt;space&gt;found&lt;space&gt;somewhere&lt;space&gt;but&lt;space&gt;its&lt;space&gt;logic&lt;space&gt;is&lt;space&gt;not&lt;space&gt;clear&lt;space&gt;to&lt;space&gt;me...&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_unicode_type&lt;space&gt;=&lt;space&gt;str&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;logfile&lt;space&gt;=&lt;space&gt;StdoutLogger&lt;openparen&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;logprefix&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;comma&gt;&lt;space&gt;loglevel&lt;space&gt;=&lt;space&gt;0&lt;comma&gt;&lt;space&gt;session&lt;space&gt;=&lt;space&gt;requests.Session&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.session&lt;space&gt;=&lt;space&gt;session&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile&lt;space&gt;=&lt;space&gt;logfile&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logprefix&lt;space&gt;=&lt;space&gt;logprefix&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.loglevel&lt;space&gt;=&lt;space&gt;loglevel&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.account&lt;space&gt;=&lt;space&gt;account&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.secret&lt;space&gt;=&lt;space&gt;secret&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__enter__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;self&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__exit__&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;type&lt;comma&gt;&lt;space&gt;value&lt;comma&gt;&lt;space&gt;traceback&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Closing&lt;space&gt;Azure&lt;space&gt;Connection&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;del&lt;space&gt;self.logfile&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;del&lt;space&gt;self.session&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;isinstance&lt;openparen&gt;value&lt;comma&gt;&lt;space&gt;Exception&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;info&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.logprefix&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;self.loglevel&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;append_block&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=appendblock&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Appending&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp:appendblock&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;ERROR&lt;space&gt;status&lt;space&gt;%s:&lt;space&gt;`%s`&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;r.status_code&lt;comma&gt;&lt;space&gt;_string_to_sign&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_block&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;block_id&lt;space&gt;=&lt;space&gt;base64.b64encode&lt;openparen&gt;uuid.uuid4&lt;openparen&gt;&lt;closeparen&gt;.hex&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#https:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;mycontainer&lt;solidus&gt;myblob?comp=block&lt;amp&gt;blockid=id&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=block&lt;amp&gt;blockid=%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_id&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;block&lt;space&gt;of&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;blockid:%s&lt;backslash&gt;ncomp:block&lt;apos&gt;&lt;space&gt;%&lt;space&gt;block_id&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;block_id&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_block_list&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_list&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;list_fragments&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;s:&lt;space&gt;&lt;apos&gt;&lt;lt&gt;Uncommitted&lt;gt&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;lt&gt;&lt;solidus&gt;Uncommitted&lt;gt&gt;&lt;apos&gt;.format&lt;openparen&gt;s&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;block_list&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;lt&gt;?xml&lt;space&gt;version=&lt;quote&gt;1.0&lt;quote&gt;&lt;space&gt;encoding=&lt;quote&gt;utf-8&lt;quote&gt;?&lt;gt&gt;&lt;lt&gt;BlockList&lt;gt&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;lt&gt;&lt;solidus&gt;BlockList&lt;gt&gt;&lt;apos&gt;.format&lt;openparen&gt;list_fragments&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=blocklist&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp:blocklist&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_blob&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.seek&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;os.SEEK_END&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;size&lt;space&gt;=&lt;space&gt;fin.tell&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.seek&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;os.SEEK_SET&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;size&lt;space&gt;&lt;lt&gt;&lt;space&gt;PUT_BLOB_LIMIT:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;fin.read&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ids&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;offset&lt;space&gt;in&lt;space&gt;range&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;size&lt;comma&gt;&lt;space&gt;PUT_BLOCK_CHUNK_SIZE&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;`%s`&lt;comma&gt;&lt;space&gt;%s%%&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;blob_name&lt;comma&gt;&lt;space&gt;int&lt;openparen&gt;round&lt;openparen&gt;offset&lt;space&gt;*&lt;space&gt;100&lt;space&gt;&lt;solidus&gt;&lt;space&gt;size&lt;closeparen&gt;&lt;closeparen&gt;&lt;space&gt;&lt;closeparen&gt;&lt;space&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;block_size&lt;space&gt;=&lt;space&gt;min&lt;openparen&gt;PUT_BLOCK_CHUNK_SIZE&lt;comma&gt;&lt;space&gt;size&lt;space&gt;-&lt;space&gt;offset&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ids.append&lt;openparen&gt;self.put_block&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin.read&lt;openparen&gt;block_size&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.put_block_list&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;ids&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;&lt;apos&gt;ID&lt;space&gt;LIST&lt;space&gt;COMMITTED:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;backslash&gt;t&lt;apos&gt;.join&lt;openparen&gt;ids&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Done&lt;space&gt;uploading&lt;space&gt;%s&lt;space&gt;bytes&lt;space&gt;of&lt;space&gt;data&lt;apos&gt;&lt;space&gt;%&lt;space&gt;size&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;getblocklist&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#print&lt;space&gt;&lt;apos&gt;GET&lt;space&gt;http:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;movies&lt;solidus&gt;MOV1.avi?comp=blocklist&lt;amp&gt;blocklisttype=committed&lt;space&gt;HTTP&lt;solidus&gt;1.1&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;params&lt;space&gt;=&lt;space&gt;&lt;opencurly&gt;&lt;apos&gt;comp&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;blocklist&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;blocklisttype&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;committed&lt;apos&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;params&lt;space&gt;=&lt;space&gt;OrderedDict&lt;openparen&gt;sorted&lt;openparen&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;key=lambda&lt;space&gt;t:&lt;space&gt;t&lt;openbracket&gt;0&lt;closebracket&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;querystring&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;amp&gt;&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;t:&lt;space&gt;&lt;apos&gt;&lt;opencurly&gt;&lt;closecurly&gt;=&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;*t&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;t:&lt;space&gt;&lt;apos&gt;&lt;opencurly&gt;&lt;closecurly&gt;:&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;*t&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_path&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;.join&lt;openparen&gt;&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s?%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;blob_path&lt;comma&gt;querystring&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;blob_path&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;querystringencoded&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;GET&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;self.session.get&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;200:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;ERROR&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;ERROR&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;root&lt;space&gt;=&lt;space&gt;ElementTree.fromstring&lt;openparen&gt;r.content.decode&lt;openparen&gt;&lt;apos&gt;utf-8-sig&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;unicode&lt;openparen&gt;ElementTree.tostring&lt;openparen&gt;root&lt;comma&gt;&lt;space&gt;encoding=&lt;quote&gt;utf8&lt;quote&gt;&lt;comma&gt;&lt;space&gt;method=&lt;quote&gt;xml&lt;quote&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;utf8&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;offset&lt;space&gt;=&lt;space&gt;0&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;block&lt;space&gt;in&lt;space&gt;root.find&lt;openparen&gt;&lt;apos&gt;CommittedBlocks&lt;apos&gt;&lt;closeparen&gt;.iter&lt;openparen&gt;&lt;apos&gt;Block&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;name&lt;space&gt;=&lt;space&gt;base64.b64decode&lt;openparen&gt;block.find&lt;openparen&gt;&lt;apos&gt;Name&lt;apos&gt;&lt;closeparen&gt;.text&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;size&lt;space&gt;=&lt;space&gt;int&lt;openparen&gt;block.find&lt;openparen&gt;&lt;apos&gt;Size&lt;apos&gt;&lt;closeparen&gt;.text&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;name&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;size&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;offset&lt;space&gt;+=&lt;space&gt;size&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;getblock&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;length&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;range&lt;space&gt;=&lt;space&gt;&lt;apos&gt;bytes=&lt;opencurly&gt;&lt;closecurly&gt;-&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;offset&lt;comma&gt;&lt;space&gt;offset&lt;space&gt;+&lt;space&gt;length&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_path&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;.join&lt;openparen&gt;&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;blob_path&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;xtra_headers=&lt;opencurly&gt;&lt;apos&gt;x-ms-range&lt;apos&gt;:range&lt;closecurly&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;blob_path&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;GET&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;self.session.get&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;stream=True&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;not&lt;space&gt;r.status_code&lt;space&gt;in&lt;space&gt;&lt;openparen&gt;200&lt;comma&gt;&lt;space&gt;206&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;mycontainer&lt;solidus&gt;myblob&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;chunk&lt;space&gt;in&lt;space&gt;r.iter_content&lt;openparen&gt;io.DEFAULT_BUFFER_SIZE&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;chunk&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;get_blob_properties&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_path&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;.join&lt;openparen&gt;&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;blob_path&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;blob_path&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;HEAD&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;self.session.head&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;200:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;str&lt;openparen&gt;r.headers&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;opencurly&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;content-length&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;1368582383&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;AppendBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;accept-ranges&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;bytes&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-blob-committed-block-count&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;327&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;2015-02-21&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;server&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;Windows-Azure-Blob&lt;solidus&gt;1.0&lt;space&gt;Microsoft-HTTPAPI&lt;solidus&gt;2.0&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-write-protection&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;false&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;last-modified&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;Thu&lt;comma&gt;&lt;space&gt;23&lt;space&gt;Jun&lt;space&gt;2016&lt;space&gt;11:57:16&lt;space&gt;GMT&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;etag&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;&lt;quote&gt;0x8D39B5D855ED87F&lt;quote&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-lease-state&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;available&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;date&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;Wed&lt;comma&gt;&lt;space&gt;16&lt;space&gt;Nov&lt;space&gt;2016&lt;space&gt;17:59:04&lt;space&gt;GMT&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;content-type&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;application&lt;solidus&gt;octet-stream&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-request-id&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;414995ba-0001-0081-2433-40256f000000&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-lease-status&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;unlocked&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;map&lt;openparen&gt;r.headers.get&lt;comma&gt;&lt;space&gt;&lt;openbracket&gt;&lt;apos&gt;last-modified&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;content-length&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;content-type&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Content-MD5&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Accept-Ranges&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-blob-committed-block-count&lt;apos&gt;&lt;closebracket&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;download_blob&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;target_filepath&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;status&lt;space&gt;=&lt;space&gt;azure.download_blob&lt;openparen&gt;container&lt;comma&gt;blob_name&lt;comma&gt;target_filepath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;TODO:&lt;space&gt;Eiter&lt;space&gt;get&lt;space&gt;blob&lt;space&gt;type&lt;space&gt;as&lt;space&gt;parameter&lt;space&gt;or&lt;space&gt;perform&lt;space&gt;a&lt;space&gt;Get&lt;space&gt;Blob&lt;space&gt;Properties&lt;space&gt;request&lt;space&gt;in&lt;space&gt;order&lt;space&gt;to&lt;space&gt;find&lt;space&gt;out&lt;space&gt;how&lt;space&gt;to&lt;space&gt;access&lt;space&gt;data.&lt;space&gt;Currently&lt;space&gt;only&lt;space&gt;large&lt;space&gt;blobs&lt;space&gt;that&lt;space&gt;have&lt;space&gt;an&lt;space&gt;accosiated&lt;space&gt;bloclist&lt;space&gt;works.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;last_mod&lt;comma&gt;&lt;space&gt;blob_type&lt;comma&gt;&lt;space&gt;content_length&lt;comma&gt;&lt;space&gt;content_type&lt;comma&gt;&lt;space&gt;content_md5&lt;comma&gt;&lt;space&gt;accept_ranges&lt;comma&gt;&lt;space&gt;committed_block_count&lt;comma&gt;&lt;space&gt;=&lt;space&gt;self.get_blob_properties&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;content_length&lt;space&gt;=&lt;space&gt;int&lt;openparen&gt;content_length&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;blob_type&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;nthreads&lt;space&gt;=&lt;space&gt;10&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue&lt;space&gt;=&lt;space&gt;Queue&lt;openparen&gt;nthreads*2&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;writequeue&lt;space&gt;=&lt;space&gt;Queue&lt;openparen&gt;nthreads&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;target_filepath&lt;space&gt;=&lt;space&gt;os.path.normpath&lt;openparen&gt;target_filepath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;target_folder&lt;space&gt;=&lt;space&gt;os.path.dirname&lt;openparen&gt;target_filepath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;not&lt;space&gt;os.path.exists&lt;openparen&gt;target_folder&lt;closeparen&gt;:&lt;space&gt;os.makedirs&lt;openparen&gt;target_folder&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout&lt;space&gt;=&lt;space&gt;io.open&lt;openparen&gt;target_filepath&lt;comma&gt;&lt;space&gt;mode=&lt;apos&gt;w+b&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;get_data&lt;openparen&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;while&lt;space&gt;True:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blockid&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;length&lt;space&gt;=&lt;space&gt;readqueue.get&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;&lt;space&gt;downloading&lt;space&gt;part&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;blockid&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;bytesread&lt;space&gt;=&lt;space&gt;0&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;chunk&lt;space&gt;in&lt;space&gt;self.getblock&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;length&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;writequeue.put&lt;openparen&gt;&lt;openparen&gt;chunk&lt;comma&gt;&lt;space&gt;offset&lt;space&gt;+&lt;space&gt;bytesread&lt;comma&gt;&lt;space&gt;len&lt;openparen&gt;chunk&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;bytesread&lt;space&gt;+=&lt;space&gt;len&lt;openparen&gt;chunk&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.task_done&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;write_data&lt;openparen&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;while&lt;space&gt;True:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;length&lt;space&gt;=&lt;space&gt;writequeue.get&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout.seek&lt;openparen&gt;offset&lt;comma&gt;&lt;space&gt;0&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout.write&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;writequeue.task_done&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;i&lt;space&gt;in&lt;space&gt;range&lt;openparen&gt;nthreads&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;t&lt;space&gt;=&lt;space&gt;Thread&lt;openparen&gt;target=get_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;t.daemon&lt;space&gt;=&lt;space&gt;True&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;t.start&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;wt&lt;space&gt;=&lt;space&gt;Thread&lt;openparen&gt;target=write_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;wt.daemon&lt;space&gt;=&lt;space&gt;True&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;wt.start&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;blob_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;committed_block_count:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;block&lt;space&gt;in&lt;space&gt;self.getblocklist&lt;openparen&gt;container=container&lt;comma&gt;&lt;space&gt;blob_name=blob_name&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.put&lt;openparen&gt;block&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.put&lt;openparen&gt;&lt;openparen&gt;uuid.uuid4&lt;openparen&gt;&lt;closeparen&gt;.hex&lt;comma&gt;&lt;space&gt;0&lt;comma&gt;&lt;space&gt;content_length&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;elif&lt;space&gt;blob_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;AppendBlob&lt;apos&gt;&lt;space&gt;and&lt;space&gt;accept_ranges&lt;space&gt;==&lt;space&gt;&lt;apos&gt;bytes&lt;apos&gt;&lt;space&gt;and&lt;space&gt;committed_block_count:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;offset&lt;space&gt;in&lt;space&gt;range&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;content_length&lt;comma&gt;&lt;space&gt;PUT_BLOCK_CHUNK_SIZE&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.put&lt;openparen&gt;&lt;openparen&gt;uuid.uuid4&lt;openparen&gt;&lt;closeparen&gt;.hex&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;min&lt;openparen&gt;content_length-offset&lt;comma&gt;&lt;space&gt;PUT_BLOCK_CHUNK_SIZE&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.join&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;writequeue.join&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout.flush&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout.close&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;last_mod&lt;comma&gt;&lt;space&gt;blob_type&lt;comma&gt;&lt;space&gt;content_length&lt;comma&gt;&lt;space&gt;content_type&lt;comma&gt;&lt;space&gt;content_md5&lt;comma&gt;&lt;space&gt;accept_ranges&lt;comma&gt;&lt;space&gt;committed_block_count&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;list_blobs&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;prefix=None&lt;comma&gt;delimiter=&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;&lt;comma&gt;recursive=False&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;https:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;mycontainer?restype=container&lt;amp&gt;comp=list&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#CubeSourceDataFile&lt;solidus&gt;coast&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;params&lt;space&gt;=&lt;space&gt;&lt;opencurly&gt;&lt;apos&gt;delimiter&lt;apos&gt;&lt;space&gt;:&lt;space&gt;delimiter&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;list&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;restype&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;container&lt;apos&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;prefix:&lt;space&gt;params&lt;openbracket&gt;&lt;apos&gt;prefix&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;prefix&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;params&lt;space&gt;=&lt;space&gt;OrderedDict&lt;openparen&gt;sorted&lt;openparen&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;key=lambda&lt;space&gt;t:&lt;space&gt;t&lt;openbracket&gt;0&lt;closebracket&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;querystring&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;amp&gt;&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;t:&lt;space&gt;&lt;apos&gt;&lt;opencurly&gt;&lt;closecurly&gt;=&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;*t&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;t:&lt;space&gt;&lt;apos&gt;&lt;opencurly&gt;&lt;closecurly&gt;:&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;*t&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s?%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;querystring&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;querystringencoded&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;GET&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;&lt;apos&gt;Listing&lt;space&gt;blobs&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;self.session.get&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;200:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;root&lt;space&gt;=&lt;space&gt;ElementTree.fromstring&lt;openparen&gt;r.content.decode&lt;openparen&gt;&lt;apos&gt;utf-8-sig&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;blobprefix&lt;space&gt;in&lt;space&gt;root.iter&lt;openparen&gt;&lt;apos&gt;BlobPrefix&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;buf&lt;space&gt;=&lt;space&gt;StringIO&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ElementTree.ElementTree&lt;openparen&gt;blobprefix&lt;closeparen&gt;.write&lt;openparen&gt;buf&lt;comma&gt;&lt;space&gt;encoding=&lt;apos&gt;utf8&lt;apos&gt;&lt;comma&gt;&lt;space&gt;xml_declaration=False&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;&lt;apos&gt;BlobPrefix&lt;apos&gt;&lt;comma&gt;&lt;space&gt;prefix&lt;comma&gt;&lt;space&gt;buf.getvalue&lt;openparen&gt;&lt;closeparen&gt;.decode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;recursive:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;returntype&lt;comma&gt;&lt;space&gt;used_prefix&lt;comma&gt;&lt;space&gt;blob&lt;space&gt;in&lt;space&gt;self.list_blobs&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;prefix=blobprefix.findtext&lt;openparen&gt;&lt;apos&gt;Name&lt;apos&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;delimiter=delimiter&lt;comma&gt;recursive=True&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;returntype&lt;comma&gt;&lt;space&gt;used_prefix&lt;comma&gt;&lt;space&gt;blob&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;blob&lt;space&gt;in&lt;space&gt;root.iter&lt;openparen&gt;&lt;apos&gt;Blob&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;buf&lt;space&gt;=&lt;space&gt;StringIO&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ElementTree.ElementTree&lt;openparen&gt;blob&lt;closeparen&gt;.write&lt;openparen&gt;buf&lt;comma&gt;&lt;space&gt;encoding=&lt;apos&gt;utf8&lt;apos&gt;&lt;comma&gt;&lt;space&gt;xml_declaration=False&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;&lt;apos&gt;Blob&lt;apos&gt;&lt;comma&gt;&lt;space&gt;prefix&lt;comma&gt;&lt;space&gt;buf.getvalue&lt;openparen&gt;&lt;closeparen&gt;.decode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_authorize&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;headers&lt;comma&gt;&lt;space&gt;container_name&lt;comma&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;None&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;None&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;PUT&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;content_length&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Content-Length&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;!=&lt;space&gt;&lt;apos&gt;0&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;content_length&lt;space&gt;=&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Content-Length&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;http_method&lt;space&gt;#&lt;space&gt;VERB&lt;space&gt;&lt;openparen&gt;http-method&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-Encoding&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-Language&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;content_length&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-MD5&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Date&lt;apos&gt;&lt;comma&gt;&lt;apos&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;Date&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-Modified-Since&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-None-Match&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-Unmodified-Since&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Range&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;?&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;?&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;comma&gt;&lt;space&gt;None&lt;closeparen&gt;:&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-date:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-date&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-range&lt;apos&gt;&lt;comma&gt;&lt;space&gt;None&lt;closeparen&gt;:&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-range:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-range&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-version:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;blob_name:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container_name&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;querystringencoded:&lt;space&gt;fields.append&lt;openparen&gt;querystringencoded&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;.join&lt;openparen&gt;fields&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;signature&lt;space&gt;=&lt;space&gt;AzureAPI._sign_string&lt;openparen&gt;self.secret&lt;space&gt;&lt;comma&gt;&lt;space&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;Authorization&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;SharedKey&lt;space&gt;%s:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;signature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;_string_to_sign&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_create_headers&lt;openparen&gt;data&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;comma&gt;&lt;space&gt;xtra_headers=&lt;opencurly&gt;&lt;closecurly&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;&lt;opencurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;Content-Length&lt;apos&gt;:&lt;space&gt;str&lt;openparen&gt;len&lt;openparen&gt;data&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-date&lt;apos&gt;:&lt;space&gt;AzureAPI._httpdate&lt;openparen&gt;datetime.datetime.utcnow&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;:&lt;space&gt;AZ_VERSION&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers.update&lt;openparen&gt;xtra_headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;OrderedDict&lt;openparen&gt;sorted&lt;openparen&gt;headers.items&lt;openparen&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;key=lambda&lt;space&gt;t:&lt;space&gt;t&lt;openbracket&gt;0&lt;closebracket&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_httpdate&lt;openparen&gt;dt&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;Return&lt;space&gt;a&lt;space&gt;string&lt;space&gt;representation&lt;space&gt;of&lt;space&gt;a&lt;space&gt;date&lt;space&gt;according&lt;space&gt;to&lt;space&gt;RFC&lt;space&gt;1123&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;openparen&gt;HTTP&lt;solidus&gt;1.1&lt;closeparen&gt;.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;The&lt;space&gt;supplied&lt;space&gt;date&lt;space&gt;must&lt;space&gt;be&lt;space&gt;in&lt;space&gt;UTC.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;weekday&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;quote&gt;Mon&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Tue&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Wed&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Thu&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Fri&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sat&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sun&lt;quote&gt;&lt;closebracket&gt;&lt;openbracket&gt;dt.weekday&lt;openparen&gt;&lt;closeparen&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;month&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;quote&gt;Jan&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Feb&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Mar&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Apr&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;May&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Jun&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Jul&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Aug&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sep&lt;quote&gt;&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;Oct&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Nov&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Dec&lt;quote&gt;&lt;closebracket&gt;&lt;openbracket&gt;dt.month&lt;space&gt;-&lt;space&gt;1&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;&lt;quote&gt;%s&lt;comma&gt;&lt;space&gt;%02d&lt;space&gt;%s&lt;space&gt;%04d&lt;space&gt;%02d:%02d:%02d&lt;space&gt;GMT&lt;quote&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;weekday&lt;comma&gt;&lt;space&gt;dt.day&lt;comma&gt;&lt;space&gt;month&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;dt.year&lt;comma&gt;&lt;space&gt;dt.hour&lt;comma&gt;&lt;space&gt;dt.minute&lt;comma&gt;&lt;space&gt;dt.second&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_encode_base64&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;encoded&lt;space&gt;=&lt;space&gt;base64.b64encode&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;encoded.decode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_decode_base64_to_bytes&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;base64.b64decode&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_sign_string&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;string_to_sign&lt;comma&gt;&lt;space&gt;key_is_base64=True&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;key_is_base64:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;key&lt;space&gt;=&lt;space&gt;AzureAPI._decode_base64_to_bytes&lt;openparen&gt;key&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;key&lt;space&gt;=&lt;space&gt;key.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;string_to_sign&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;string_to_sign&lt;space&gt;=&lt;space&gt;string_to_sign.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;signed_hmac_sha256&lt;space&gt;=&lt;space&gt;hmac.HMAC&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;string_to_sign&lt;comma&gt;&lt;space&gt;hashlib.sha256&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;digest&lt;space&gt;=&lt;space&gt;signed_hmac_sha256.digest&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;encoded_digest&lt;space&gt;=&lt;space&gt;AzureAPI._encode_base64&lt;openparen&gt;digest&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;encoded_digest&lt;lf&gt;"/>
#!     <XFORM_PARM PARM_NAME="PYTHONSYMBOL" PARM_VALUE="DownloadFeatureProcessor"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="PythonCaller"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="8"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="3102.1599999999999 -118.501"
#!   BOUNDING_RECT="3102.1599999999999 -118.501 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.content_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.content_length" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.md5" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.last_modified" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.blob_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_azure_blob_downloader_storage_account,_azure_blob_downloader_container,_azure_blob_downloader_key,_azure_blob_downloader_status,_azure_blob_downloader_blob_name"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="32"
#!   TYPE="AttributeFilter"
#!   VERSION="5"
#!   POSITION="1833.3900000000001 -118.501"
#!   BOUNDING_RECT="1833.3900000000001 -118.501 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="initiator_success"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="&lt;lt&gt;EMPTY&lt;gt&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_status" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <OUTPUT_FEAT NAME="&lt;lt&gt;MISSING&lt;gt&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="2"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_status" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <OUTPUT_FEAT NAME="&lt;lt&gt;NULL&lt;gt&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="3"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_status" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <OUTPUT_FEAT NAME="&lt;lt&gt;UNFILTERED&lt;gt&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="4"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_status" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_PARM PARM_NAME="ATTR_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTR_NAME" PARM_VALUE="_azure_blob_downloader_status"/>
#!     <XFORM_PARM PARM_NAME="ATTR_VALUES" PARM_VALUE="initiator_success,&lt;lt&gt;EMPTY&lt;gt&gt;,&lt;lt&gt;MISSING&lt;gt&gt;,&lt;lt&gt;NULL&lt;gt&gt;,&lt;lt&gt;UNFILTERED&lt;gt&gt;"/>
#!     <XFORM_PARM PARM_NAME="ATTR_VALUES_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeFilter"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="25"
#!   TYPE="Logger"
#!   VERSION="3"
#!   POSITION="2478.02 -358.50099999999998"
#!   BOUNDING_RECT="2478.02 -358.50099999999998 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="LOGGED"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="FEATURE_TYPE" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="MAXCOORDS" PARM_VALUE="20"/>
#!     <XFORM_PARM PARM_NAME="MAXFEATS" PARM_VALUE="20"/>
#!     <XFORM_PARM PARM_NAME="MESSAGE" PARM_VALUE="Feature is:"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeFilter__Unfiltered_"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="17"
#!   TYPE="AttributeExposer"
#!   VERSION="0"
#!   POSITION="2399.02 -118.501"
#!   BOUNDING_RECT="2399.02 -118.501 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.content_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.content_length" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.md5" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.last_modified" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.blob_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="ATTR_LIST" PARM_VALUE="blob.content_type,blob.content_length,blob.md5,blob.last_modified,blob.blob_type"/>
#!     <XFORM_PARM PARM_NAME="ATTR_LIST_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeExposer"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="22"
#!   TYPE="PythonCaller"
#!   VERSION="4"
#!   POSITION="-116.68899999999999 -87.751599999999996"
#!   BOUNDING_RECT="-116.68899999999999 -87.751599999999996 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="ADVANCED_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="HIDE_ATTRIBUTES" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NEW_ATTRIBUTES" PARM_VALUE="_azure_blob_downloader_filepath_isdir _pathseperator"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PYTHONSOURCE" PARM_VALUE="import&lt;space&gt;fme&lt;lf&gt;import&lt;space&gt;fmeobjects&lt;lf&gt;import&lt;space&gt;os&lt;lf&gt;#&lt;space&gt;Template&lt;space&gt;Function&lt;space&gt;interface:&lt;lf&gt;#&lt;space&gt;When&lt;space&gt;using&lt;space&gt;this&lt;space&gt;function&lt;comma&gt;&lt;space&gt;make&lt;space&gt;sure&lt;space&gt;its&lt;space&gt;name&lt;space&gt;is&lt;space&gt;set&lt;space&gt;as&lt;space&gt;the&lt;space&gt;value&lt;space&gt;of&lt;lf&gt;#&lt;space&gt;the&lt;space&gt;&lt;apos&gt;Class&lt;space&gt;or&lt;space&gt;Function&lt;space&gt;to&lt;space&gt;Process&lt;space&gt;Features&lt;apos&gt;&lt;space&gt;transformer&lt;space&gt;parameter&lt;lf&gt;def&lt;space&gt;processFeature&lt;openparen&gt;feature&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;pass&lt;lf&gt;&lt;lf&gt;#&lt;space&gt;Template&lt;space&gt;Class&lt;space&gt;Interface:&lt;lf&gt;#&lt;space&gt;When&lt;space&gt;using&lt;space&gt;this&lt;space&gt;class&lt;comma&gt;&lt;space&gt;make&lt;space&gt;sure&lt;space&gt;its&lt;space&gt;name&lt;space&gt;is&lt;space&gt;set&lt;space&gt;as&lt;space&gt;the&lt;space&gt;value&lt;space&gt;of&lt;lf&gt;#&lt;space&gt;the&lt;space&gt;&lt;apos&gt;Class&lt;space&gt;or&lt;space&gt;Function&lt;space&gt;to&lt;space&gt;Process&lt;space&gt;Features&lt;apos&gt;&lt;space&gt;transformer&lt;space&gt;parameter&lt;lf&gt;class&lt;space&gt;FeatureProcessor&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;pass&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;input&lt;openparen&gt;self&lt;comma&gt;feature&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_azure_blob_downloader_filepath&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;quote&gt;_azure_blob_downloader_filepath&lt;quote&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;os.path.isdir&lt;openparen&gt;_azure_blob_downloader_filepath&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_azure_blob_downloader_filepath_isdir&lt;space&gt;=&lt;space&gt;1&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_azure_blob_downloader_filepath_isdir&lt;space&gt;=&lt;space&gt;0&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_downloader_filepath_isdir&lt;apos&gt;&lt;comma&gt;_azure_blob_downloader_filepath_isdir&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;check&lt;space&gt;if&lt;space&gt;we&lt;space&gt;use&lt;space&gt;&lt;solidus&gt;&lt;space&gt;or&lt;space&gt;&lt;backslash&gt;&lt;space&gt;inside&lt;space&gt;the&lt;space&gt;path&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;_azure_blob_downloader_filepath.find&lt;openparen&gt;&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;&lt;gt&gt;&lt;space&gt;0:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_pathseperator&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;_azure_blob_downloader_filepath.find&lt;openparen&gt;&lt;apos&gt;&lt;backslash&gt;&lt;backslash&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;&lt;gt&gt;&lt;space&gt;0:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_pathseperator&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;&lt;backslash&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_pathseperator&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_pathseperator&lt;apos&gt;&lt;comma&gt;_pathseperator&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.pyoutput&lt;openparen&gt;feature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;close&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;pass"/>
#!     <XFORM_PARM PARM_NAME="PYTHONSYMBOL" PARM_VALUE="FeatureProcessor"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="PythonCaller_2"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="23"
#!   TYPE="TestFilter"
#!   VERSION="1"
#!   POSITION="-116.68899999999999 -301.87700000000001"
#!   BOUNDING_RECT="-116.68899999999999 -301.87700000000001 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="IsAFolder"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="&lt;lt&gt;UNFILTERED&lt;gt&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_PARM PARM_NAME="DEFAULT_VALUE" PARM_VALUE="&lt;lt&gt;UNFILTERED&lt;gt&gt;"/>
#!     <XFORM_PARM PARM_NAME="TESTLISTGRP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TEST_LIST" PARM_VALUE="BOOL_OP&lt;comma&gt;OR&lt;comma&gt;COMPOSITE_TEST&lt;comma&gt;&lt;lt&gt;Unused&lt;gt&gt;&lt;comma&gt;TEST_CLAUSE&lt;comma&gt;&lt;quote&gt;TEST&lt;space&gt;&lt;lt&gt;at&lt;gt&gt;Value&lt;lt&gt;openparen&lt;gt&gt;_azure_blob_downloader_filepath_isdir&lt;lt&gt;closeparen&lt;gt&gt;&lt;space&gt;=&lt;space&gt;1&lt;quote&gt;,IsAFolder"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="TestFilter"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="24"
#!   TYPE="FilenamePartExtractor"
#!   VERSION="3"
#!   POSITION="510.44200000000001 83.124399999999994"
#!   BOUNDING_RECT="510.44200000000001 83.124399999999994 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_filename" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="DIRNAME_ATTR" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="DIRPATH_ATTR" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="EXTENSION_ATTR" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="FULLNAME_ATTR" PARM_VALUE="_filename"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ROOTNAME_ATTR" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="SRC_ATTR" PARM_VALUE="&lt;at&gt;Value&lt;openparen&gt;_azure_blob_downloader_blob_name&lt;closeparen&gt;"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="FilenamePartExtractor"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="26"
#!   TYPE="AttributeCreator"
#!   VERSION="8"
#!   POSITION="510.44200000000001 -87.751599999999996"
#!   BOUNDING_RECT="510.44200000000001 -87.751599999999996 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_filename" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_GRP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_HANDLING" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTR_TABLE" PARM_VALUE="&quot;&quot; _azure_blob_downloader_filepath SET_TO &lt;at&gt;Value&lt;openparen&gt;_azure_blob_downloader_filepath&lt;closeparen&gt;&lt;at&gt;Value&lt;openparen&gt;_pathseperator&lt;closeparen&gt;&lt;at&gt;Value&lt;openparen&gt;_filename&lt;closeparen&gt;"/>
#!     <XFORM_PARM PARM_NAME="MULTI_FEATURE_MODE" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_MODE_DISPLAY" PARM_VALUE="No Substitution"/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_VALUE" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="NUM_PRIOR_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="NUM_SUBSEQUENT_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeCreator"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="30"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="510.44200000000001 -252.501"
#!   BOUNDING_RECT="510.44200000000001 -252.501 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_filename"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover_2"/>
#! </TRANSFORMER>
#! </TRANSFORMERS>
#! <SUBDOCUMENT_IOS>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="2"
#!   NAME="Input"
#!   POSITION="-1901.77 -77.875600000000006"
#!   BOUNDING_RECT="-1901.77 -77.875600000000006 431 71"
#!   COLLAPSED="true"
#!   PUBLISHED="true"
#!   IS_SOURCE="true"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="6"
#!   NAME="Output"
#!   POSITION="3652.1599999999999 -118.501"
#!   BOUNDING_RECT="3652.1599999999999 -118.501 431 71"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="20"
#!   NAME="Rejected"
#!   POSITION="3652.1599999999999 -418.50099999999998"
#!   BOUNDING_RECT="3652.1599999999999 -418.50099999999998 431 71"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! </SUBDOCUMENT_IOS>
#! <FEAT_LINKS>
#! <FEAT_LINK
#!   IDENTIFIER="3"
#!   SOURCE_NODE="2"
#!   TARGET_NODE="1"
#!   SOURCE_PORT_DESC="0"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="38"
#!   SOURCE_NODE="1"
#!   TARGET_NODE="22"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="33"
#!   SOURCE_NODE="4"
#!   TARGET_NODE="32"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="10"
#!   SOURCE_NODE="8"
#!   TARGET_NODE="6"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="19"
#!   SOURCE_NODE="17"
#!   TARGET_NODE="8"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="31"
#!   SOURCE_NODE="22"
#!   TARGET_NODE="23"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="37"
#!   SOURCE_NODE="23"
#!   TARGET_NODE="24"
#!   SOURCE_PORT_DESC="fo 0 IsAFolder"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="35"
#!   SOURCE_NODE="24"
#!   TARGET_NODE="26"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="21"
#!   SOURCE_NODE="25"
#!   TARGET_NODE="20"
#!   SOURCE_PORT_DESC="fo 0 LOGGED"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="36"
#!   SOURCE_NODE="26"
#!   TARGET_NODE="30"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="5"
#!   SOURCE_NODE="30"
#!   TARGET_NODE="4"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="18"
#!   SOURCE_NODE="32"
#!   TARGET_NODE="17"
#!   SOURCE_PORT_DESC="fo 0 initiator_success"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="40"
#!   SOURCE_NODE="23"
#!   TARGET_NODE="4"
#!   SOURCE_PORT_DESC="fo 1 &lt;lt&gt;lt&lt;gt&gt;UNFILTERED&lt;lt&gt;gt&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS="1125 -462"
#! />
#! <FEAT_LINK
#!   IDENTIFIER="34"
#!   SOURCE_NODE="32"
#!   TARGET_NODE="25"
#!   SOURCE_PORT_DESC="fo 1 &lt;lt&gt;lt&lt;gt&gt;EMPTY&lt;lt&gt;gt&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="29"
#!   SOURCE_NODE="32"
#!   TARGET_NODE="25"
#!   SOURCE_PORT_DESC="fo 2 &lt;lt&gt;lt&lt;gt&gt;MISSING&lt;lt&gt;gt&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="28"
#!   SOURCE_NODE="32"
#!   TARGET_NODE="25"
#!   SOURCE_PORT_DESC="fo 3 &lt;lt&gt;lt&lt;gt&gt;NULL&lt;lt&gt;gt&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="27"
#!   SOURCE_NODE="32"
#!   TARGET_NODE="25"
#!   SOURCE_PORT_DESC="fo 4 &lt;lt&gt;lt&lt;gt&gt;UNFILTERED&lt;lt&gt;gt&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! </FEAT_LINKS>
#! <BREAKPOINTS>
#! </BREAKPOINTS>
#! <ATTR_LINKS>
#! </ATTR_LINKS>
#! <SUBDOCUMENTS>
#! </SUBDOCUMENTS>
#! <LOOKUP_TABLES>
#! </LOOKUP_TABLES>
#! </TRANSFORMER>

FME_PYTHON_VERSION 36
DEFAULT_MACRO $(AzureBlobDownloader_WORKSPACE_NAME)_ACCOUNT 
DEFAULT_MACRO $(AzureBlobDownloader_WORKSPACE_NAME)_KEY 
DEFAULT_MACRO $(AzureBlobDownloader_WORKSPACE_NAME)_CONTAINER 
DEFAULT_MACRO $(AzureBlobDownloader_WORKSPACE_NAME)_BLOB_NAME 
DEFAULT_MACRO $(AzureBlobDownloader_WORKSPACE_NAME)_TARGET_FILEPATH 
#! START_HEADER
#! END_HEADER

DEFAULT_MACRO WB_CURRENT_CONTEXT
DEFAULT_MACRO AzureBlobDownloader_WORKSPACE_NAME ""
INCLUDE [puts {MACRO WB_OLD_CONTEXT_$(AzureBlobDownloader_WORKSPACE_NAME) $(WB_CURRENT_CONTEXT)};          puts {MACRO WB_CURRENT_CONTEXT $(AzureBlobDownloader_WORKSPACE_NAME)}]
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDownloader_WORKSPACE_NAME)_Input1571061490 Input Splitter"   INPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_Input"   OUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_Input"
# -------------------------------------------------------------------------
FACTORY_DEF {*} AttrSetFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_FetchParamsAttributeCreator_2    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_Input"    MULTI_FEATURE_MODE NO    NULL_ATTR_MODE NO_OP     ATTRSET_CREATE_DIRECTIVES _PROPAGATE_MISSING_FDIV     ATTR_ACTION { "" "_azure_blob_downloader_storage_account" "SET_TO" "$($(AzureBlobDownloader_WORKSPACE_NAME)_ACCOUNT)" }      ATTR_ACTION { "" "_azure_blob_downloader_key" "SET_TO" "$($(AzureBlobDownloader_WORKSPACE_NAME)_KEY$encode)" }      ATTR_ACTION { "" "_azure_blob_downloader_container" "SET_TO" "$($(AzureBlobDownloader_WORKSPACE_NAME)_CONTAINER)" }      ATTR_ACTION { "" "_azure_blob_downloader_blob_name" "SET_TO" "$($(AzureBlobDownloader_WORKSPACE_NAME)_BLOB_NAME)" }      ATTR_ACTION { "" "_azure_blob_downloader_filepath" "SET_TO" "$($(AzureBlobDownloader_WORKSPACE_NAME)_TARGET_FILEPATH$encode)" }    OUTPUT OUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_FetchParamsAttributeCreator_2_OUTPUT"
# -------------------------------------------------------------------------
FME_PYTHON_PATH "$(FME_MF_DIR)"
FACTORY_DEF * PythonFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_PythonCaller_2    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_FetchParamsAttributeCreator_2_OUTPUT"    SYMBOL_NAME FeatureProcessor    PYTHON_NAMESPACE FMEOBJECTS    SOURCE_CODE import<space>fme<lf>import<space>fmeobjects<lf>import<space>os<lf>#<space>Template<space>Function<space>interface:<lf>#<space>When<space>using<space>this<space>function<comma><space>make<space>sure<space>its<space>name<space>is<space>set<space>as<space>the<space>value<space>of<lf>#<space>the<space><apos>Class<space>or<space>Function<space>to<space>Process<space>Features<apos><space>transformer<space>parameter<lf>def<space>processFeature<openparen>feature<closeparen>:<lf><space><space><space><space>pass<lf><lf>#<space>Template<space>Class<space>Interface:<lf>#<space>When<space>using<space>this<space>class<comma><space>make<space>sure<space>its<space>name<space>is<space>set<space>as<space>the<space>value<space>of<lf>#<space>the<space><apos>Class<space>or<space>Function<space>to<space>Process<space>Features<apos><space>transformer<space>parameter<lf>class<space>FeatureProcessor<openparen>object<closeparen>:<lf><space><space><space><space>def<space>__init__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>pass<lf><space><space><space><space>def<space>input<openparen>self<comma>feature<closeparen>:<lf><space><space><space><space><space><space><space><space>_azure_blob_downloader_filepath<space>=<space>feature.getAttribute<openparen><quote>_azure_blob_downloader_filepath<quote><closeparen><lf><space><space><space><space><space><space><space><space>if<space>os.path.isdir<openparen>_azure_blob_downloader_filepath<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space>_azure_blob_downloader_filepath_isdir<space>=<space>1<lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space>_azure_blob_downloader_filepath_isdir<space>=<space>0<lf><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_downloader_filepath_isdir<apos><comma>_azure_blob_downloader_filepath_isdir<closeparen><lf><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space>#<space>check<space>if<space>we<space>use<space><solidus><space>or<space><backslash><space>inside<space>the<space>path<lf><space><space><space><space><space><space><space><space>if<space>_azure_blob_downloader_filepath.find<openparen><apos><solidus><apos><closeparen><space><gt><space>0:<lf><space><space><space><space><space><space><space><space><space><space><space><space>_pathseperator<space>=<space><apos><solidus><apos><lf><space><space><space><space><space><space><space><space>else:<space><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>_azure_blob_downloader_filepath.find<openparen><apos><backslash><backslash><apos><closeparen><space><gt><space>0:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>_pathseperator<space>=<space><apos><backslash><backslash><apos><lf><space><space><space><space><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>_pathseperator<space>=<space><apos><solidus><apos><lf><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_pathseperator<apos><comma>_pathseperator<closeparen><lf><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space>self.pyoutput<openparen>feature<closeparen><lf><space><space><space><space>def<space>close<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>pass    OUTPUT PYOUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_PythonCaller_2_OUTPUT"
# -------------------------------------------------------------------------
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_PythonCaller_2_OUTPUT"    OUTPUT FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_TESTFILTERINPUTLINE_0
FACTORY_DEF * TestFactory FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_Condition_1 INPUT FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_TESTFILTERINPUTLINE_0 TEST @EvaluateExpression(FDIV,STRING_ENCODED,<at>Value<openparen>_azure_blob_downloader_filepath_isdir<closeparen>,$(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter) = 1 ENCODED BOOLEAN_OPERATOR OR COMPOSITE_TEST_EXPR <Unused> OUTPUT PASSED FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_IsAFolder OUTPUT FAILED FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_TESTFILTERINPUTLINE_1
FACTORY_DEF * TeeFactory FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_<lt>UNFILTERED<gt> INPUT FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_TESTFILTERINPUTLINE_1 OUTPUT FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_<lt>UNFILTERED<gt>
# -------------------------------------------------------------------------
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_FilenamePartExtractor    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_IsAFolder"    OUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_FilenamePartExtractor_OUTPUT"         @SupplyAttributes("_filename",@Filenamepart(ENCODED,FILENAME,"@EvaluateExpression(FDIV,STRING_ENCODED,<at>Value<openparen>_azure_blob_downloader_blob_name<closeparen>,$(AzureBlobDownloader_WORKSPACE_NAME)_FilenamePartExtractor)"))
# -------------------------------------------------------------------------
FACTORY_DEF {*} AttrSetFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeCreator    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_FilenamePartExtractor_OUTPUT"    MULTI_FEATURE_MODE NO    NULL_ATTR_MODE NO_OP     ATTRSET_CREATE_DIRECTIVES _PROPAGATE_MISSING_FDIV     ATTR_ACTION { "" "_azure_blob_downloader_filepath" "SET_TO" "<at>Value<openparen>_azure_blob_downloader_filepath<closeparen><at>Value<openparen>_pathseperator<closeparen><at>Value<openparen>_filename<closeparen>" }    OUTPUT OUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeCreator_OUTPUT"
# -------------------------------------------------------------------------
INCLUDE [    set macroLine "MACRO $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF {*} TeeFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover_2    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeCreator_OUTPUT"    OUTPUT { FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"        @RemoveAttributes(fme_encoded,_filename)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP)")         }
# -------------------------------------------------------------------------
FME_PYTHON_PATH "$(FME_MF_DIR)"
FACTORY_DEF * PythonFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_PythonCaller    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_<lt>UNFILTERED<gt>"    SYMBOL_NAME DownloadFeatureProcessor    PYTHON_NAMESPACE FMEOBJECTS    SOURCE_CODE from<space>fmeobjects<space>import<space>FMELogFile<comma><space>FME_ERROR<comma><space>FME_INFORM<lf><lf>class<space>DownloadFeatureProcessor<openparen>object<closeparen>:<lf><space><space><space><space>def<space>__init__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile<space>=<space>FMELogFile<openparen><closeparen><lf><space><space><space><space><space><space><space><space>#<space>Make<space>sure<space>to<space>change<space>if<space>Custom<space>transformer<space>is<space>renamed<space><openparen>not<space>transformer<space>instance<space>name<space>-<space>that<apos>s<space>what<space>we<apos>re<space>fetching<closeparen><space><lf><space><space><space><space><space><space><space><space>self.xformer_name<space>=<space>FME_MacroValues<openbracket><apos>AzureBlobDownloader_WORKSPACE_NAME<apos><closebracket><lf><space><space><space><space>def<space>info<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_INFORM<closeparen><lf><space><space><space><space><space><space><space><space>#self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_WARN<closeparen><space>#<space>while<space>developing<space>for<space>popping<space>out<lf><space><space><space><space>def<space>debug<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s<space><openparen>DEBUG<closeparen>:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_WARN<closeparen><space>#<space>while<space>developing<space>for<space>popping<space>out<lf><space><space><space><space>def<space>input<openparen>self<comma>feature<closeparen>:<lf><space><space><space><space><space><space><space><space>try:<lf><space><space><space><space><space><space><space><space><space><space><space><space>account<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_downloader_storage_account<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>secret<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_downloader_key<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>blob_name<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_downloader_blob_name<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>container<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_downloader_container<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>target_filepath<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_downloader_filepath<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Downloading<space>blob<space><opencurly><closecurly><space>to<space>file<space><opencurly><closecurly><apos>.format<openparen>blob_name<comma><space>target_filepath<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>with<space>AzureAPI<openparen>account<comma><space>secret<comma><space>self.logfile<comma><space>logprefix<space>=<space>self.xformer_name<comma><space>loglevel<space>=<space>FME_INFORM<closeparen><space>as<space>azure:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>last_mod<comma><space>blob_type<comma><space>content_length<comma><space>content_type<comma><space>content_md5<comma><space>accept_ranges<comma><space>committed_block_count<comma><space>=<space>azure.download_blob<openparen>container<comma>blob_name=blob_name<comma>target_filepath=target_filepath<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>blob.last_modified<apos><comma><space>last_mod<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>blob.blob_type<apos><comma><space>blob_type<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>blob.content_length<apos><comma><space>content_length<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>blob.content_type<apos><comma><space>content_type<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>if<space>content_md5:<space>feature.setAttribute<openparen><apos>blob.md5<apos><comma><space>content_md5<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_downloader_status<apos><comma><space><apos>initiator_success<apos><closeparen><lf><space><space><space><space><space><space><space><space>except<space>Exception<space>as<space>e:<lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_downloader_status<apos><comma><space><apos>initiator_fail<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_downloader_error_message<apos><comma><space>str<openparen>e<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.logfile.logException<openparen>e<comma><space>FME_ERROR<closeparen><lf><space><space><space><space><space><space><space><space>self.pyoutput<openparen>feature<closeparen><lf><space><space><space><space>def<space>close<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>del<space>self.logfile<lf>#<space>common<space>api<space>below<lf>import<space>os<lf>import<space>os.path<lf>import<space>requests<lf>from<space>collections<space>import<space>OrderedDict<lf>import<space>datetime<lf>from<space>xml.etree<space>import<space>ElementTree<lf>from<space>io<space>import<space>StringIO<lf>from<space>threading<space>import<space>Thread<lf>import<space>io<lf><lf>import<space>queue<lf>import<space>base64<lf>import<space>uuid<lf>import<space>hashlib<lf>import<space>hmac<lf>import<space>sys<lf><lf>PUT_BLOB_LIMIT<space>=<space>1024<space>*<space>1024<space>*<space>64<space><space><space><space><space><space>#<space>64<space>MB<lf>PUT_BLOCK_CHUNK_SIZE<space>=<space>1024<space>*<space>1024<space>*<space>4<space>#<space>4<space>MB<lf>AZ_VERSION<space>=<space><apos>2015-02-21<apos><lf><lf>class<space>StdoutLogger<openparen>object<closeparen>:<lf><space><space><space><space><apos><apos><apos><lf><space><space><space><space>simple<space>log<space>class<space>to<space>mimic<space>fme<space>api<lf><space><space><space><space><apos><apos><apos><lf><space><space><space><space>def<space>logMessageString<openparen>self<comma><space>msg<comma><space>level<space>=<space>0<closeparen>:<lf><space><space><space><space><space><space><space><space>print<openparen>msg<closeparen><lf><space><space><space><space>def<space>logException<openparen>self<comma><space>e<comma><space>level<space>=<space>0<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logMessageString<openparen>str<openparen>e<closeparen><comma><space>level<closeparen><lf>class<space>AzureAPI<openparen>object<closeparen>:<lf><space><space><space><space>if<space>sys.version_info<space><lt><space><openparen>3<comma><closeparen>:<lf><space><space><space><space><space><space><space><space>from<space>collections<space>import<space>Iterable<lf><space><space><space><space><space><space><space><space>_unicode_type<space>=<space>unicode<lf><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space>from<space>collections.abc<space>import<space>Iterable<space>#<space>TODO:<space>this<space>code<space>was<space>found<space>somewhere<space>but<space>its<space>logic<space>is<space>not<space>clear<space>to<space>me...<space><lf><space><space><space><space><space><space><space><space>_unicode_type<space>=<space>str<lf><space><space><space><space>def<space>__init__<openparen>self<comma><space>account<comma><space>secret<comma><space>logfile<space>=<space>StdoutLogger<openparen><closeparen><comma><space>logprefix<space>=<space><apos><apos><comma><space>loglevel<space>=<space>0<comma><space>session<space>=<space>requests.Session<openparen><closeparen><closeparen>:<lf><space><space><space><space><space><space><space><space>self.session<space>=<space>session<lf><space><space><space><space><space><space><space><space>self.logfile<space>=<space>logfile<space><lf><space><space><space><space><space><space><space><space>self.logprefix<space>=<space>logprefix<lf><space><space><space><space><space><space><space><space>self.loglevel<space>=<space>loglevel<lf><space><space><space><space><space><space><space><space>self.account<space>=<space>account<lf><space><space><space><space><space><space><space><space>self.secret<space>=<space>secret<lf><space><space><space><space>def<space>__enter__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>return<space>self<lf><space><space><space><space>def<space>__exit__<openparen>self<comma><space>type<comma><space>value<comma><space>traceback<closeparen>:<lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Closing<space>Azure<space>Connection<apos><closeparen><lf><space><space><space><space><space><space><space><space>del<space>self.logfile<lf><space><space><space><space><space><space><space><space>del<space>self.session<lf><space><space><space><space><space><space><space><space>return<space>isinstance<openparen>value<comma><space>Exception<closeparen><lf><space><space><space><space>def<space>info<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.logprefix<comma><space>message<closeparen><comma><space>self.loglevel<closeparen><lf><space><space><space><space>def<space>append_block<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_data<closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>block_data<closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=appendblock<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Appending<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>comp:appendblock<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data<space>=<space>block_data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>ERROR<space>status<space>%s:<space>`%s`<apos><space>%<space><openparen>r.status_code<comma><space>_string_to_sign<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space>def<space>put_block<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_data<closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>block_data<closeparen><lf><space><space><space><space><space><space><space><space>headers<openbracket><apos>x-ms-blob-type<apos><closebracket><space>=<space><apos>BlockBlob<apos><lf><space><space><space><space><space><space><space><space>block_id<space>=<space>base64.b64encode<openparen>uuid.uuid4<openparen><closeparen>.hex<closeparen><lf><space><space><space><space><space><space><space><space>#https:<solidus><solidus>myaccount.blob.core.windows.net<solidus>mycontainer<solidus>myblob?comp=block<amp>blockid=id<lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=block<amp>blockid=%s<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<comma><space>block_id<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>block<space>of<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>blockid:%s<backslash>ncomp:block<apos><space>%<space>block_id<closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=block_data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>return<space>block_id<lf><space><space><space><space>def<space>put_block_list<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_list<closeparen>:<lf><space><space><space><space><space><space><space><space>list_fragments<space>=<space><apos><apos>.join<openparen>map<openparen>lambda<space>s:<space><apos><lt>Uncommitted<gt><opencurly><closecurly><lt><solidus>Uncommitted<gt><apos>.format<openparen>s<closeparen><comma><space>block_list<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>data<space>=<space><apos><lt>?xml<space>version=<quote>1.0<quote><space>encoding=<quote>utf-8<quote>?<gt><lt>BlockList<gt><opencurly><closecurly><lt><solidus>BlockList<gt><apos>.format<openparen>list_fragments<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=blocklist<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>comp:blocklist<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space>def<space>put_blob<openparen>self<comma><space>container<comma><space>blob_name<comma><space>fin<closeparen>:<lf><space><space><space><space><space><space><space><space>fin.seek<openparen>0<comma><space>os.SEEK_END<closeparen><lf><space><space><space><space><space><space><space><space>size<space>=<space>fin.tell<openparen><closeparen><lf><space><space><space><space><space><space><space><space>fin.seek<openparen>0<comma><space>os.SEEK_SET<closeparen><lf><space><space><space><space><space><space><space><space>if<space>size<space><lt><space>PUT_BLOB_LIMIT:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>fin.read<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<openbracket><apos>x-ms-blob-type<apos><closebracket><space>=<space><apos>BlockBlob<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>ids<space>=<space><openbracket><closebracket><lf><space><space><space><space><space><space><space><space><space><space><space><space>for<space>offset<space>in<space>range<openparen>0<comma><space>size<comma><space>PUT_BLOCK_CHUNK_SIZE<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>`%s`<comma><space>%s%%<apos><space>%<space><openparen>blob_name<comma><space>int<openparen>round<openparen>offset<space>*<space>100<space><solidus><space>size<closeparen><closeparen><space><closeparen><space><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>block_size<space>=<space>min<openparen>PUT_BLOCK_CHUNK_SIZE<comma><space>size<space>-<space>offset<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>ids.append<openparen>self.put_block<openparen>container<comma><space>blob_name<comma><space>fin.read<openparen>block_size<closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.put_block_list<openparen>container<comma><space>blob_name<comma><space>ids<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>#self.info<openparen><apos>ID<space>LIST<space>COMMITTED:<space>%s<apos><space>%<space><apos><backslash>n<backslash>t<apos>.join<openparen>ids<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Done<space>uploading<space>%s<space>bytes<space>of<space>data<apos><space>%<space>size<closeparen><lf><space><space><space><space>def<space>getblocklist<openparen>self<comma><space>container<comma><space>blob_name<closeparen>:<lf><space><space><space><space><space><space><space><space>#print<space><apos>GET<space>http:<solidus><solidus>myaccount.blob.core.windows.net<solidus>movies<solidus>MOV1.avi?comp=blocklist<amp>blocklisttype=committed<space>HTTP<solidus>1.1<apos><lf><space><space><space><space><space><space><space><space>params<space>=<space><opencurly><apos>comp<apos>:<space><apos>blocklist<apos><comma><space><apos>blocklisttype<apos>:<space><apos>committed<apos><closecurly><lf><space><space><space><space><space><space><space><space>params<space>=<space>OrderedDict<openparen>sorted<openparen>params.items<openparen><closeparen><comma><space>key=lambda<space>t:<space>t<openbracket>0<closebracket><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>querystring<space>=<space><apos><amp><apos>.join<openparen>map<openparen>lambda<space>t:<space><apos><opencurly><closecurly>=<opencurly><closecurly><apos>.format<openparen>*t<closeparen><comma><space>params.items<openparen><closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>querystringencoded<space>=<space><apos><backslash>n<apos>.join<openparen>map<openparen>lambda<space>t:<space><apos><opencurly><closecurly>:<opencurly><closecurly><apos>.format<openparen>*t<closeparen><comma><space>params.items<openparen><closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>blob_path<space>=<space><apos><solidus><apos>.join<openparen><openparen>container<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s?%s<apos><space>%<space><openparen>self.account<comma><space>blob_path<comma>querystring<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen><closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>blob_path<comma><space>querystringencoded<space>=<space>querystringencoded<comma><space>http_method<space>=<space><apos>GET<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>self.session.get<openparen>url<comma><space>headers=headers<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>200:<lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>ERROR<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>ERROR<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>root<space>=<space>ElementTree.fromstring<openparen>r.content.decode<openparen><apos>utf-8-sig<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen>unicode<openparen>ElementTree.tostring<openparen>root<comma><space>encoding=<quote>utf8<quote><comma><space>method=<quote>xml<quote><closeparen><comma><space><apos>utf8<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>offset<space>=<space>0<lf><space><space><space><space><space><space><space><space>for<space>block<space>in<space>root.find<openparen><apos>CommittedBlocks<apos><closeparen>.iter<openparen><apos>Block<apos><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>name<space>=<space>base64.b64decode<openparen>block.find<openparen><apos>Name<apos><closeparen>.text<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>size<space>=<space>int<openparen>block.find<openparen><apos>Size<apos><closeparen>.text<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>yield<space>name<comma><space>offset<comma><space>size<lf><space><space><space><space><space><space><space><space><space><space><space><space>offset<space>+=<space>size<lf><space><space><space><space>def<space>getblock<openparen>self<comma><space>container<comma><space>blob_name<comma><space>offset<comma><space>length<closeparen>:<lf><space><space><space><space><space><space><space><space>range<space>=<space><apos>bytes=<opencurly><closecurly>-<opencurly><closecurly><apos>.format<openparen>offset<comma><space>offset<space>+<space>length<closeparen><lf><space><space><space><space><space><space><space><space>blob_path<space>=<space><apos><solidus><apos>.join<openparen><openparen>container<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>blob_path<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>xtra_headers=<opencurly><apos>x-ms-range<apos>:range<closecurly><closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>blob_path<comma><space>http_method<space>=<space><apos>GET<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>self.session.get<openparen>url<comma><space>headers=headers<comma><space>stream=True<closeparen><lf><space><space><space><space><space><space><space><space>if<space>not<space>r.status_code<space>in<space><openparen>200<comma><space>206<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><apos><apos><apos>https:<solidus><solidus>myaccount.blob.core.windows.net<solidus>mycontainer<solidus>myblob<apos><apos><apos><lf><space><space><space><space><space><space><space><space>for<space>chunk<space>in<space>r.iter_content<openparen>io.DEFAULT_BUFFER_SIZE<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>yield<space>chunk<lf><space><space><space><space>def<space>get_blob_properties<openparen>self<comma><space>container<comma><space>blob_name<closeparen>:<lf><space><space><space><space><space><space><space><space>blob_path<space>=<space><apos><solidus><apos>.join<openparen><openparen>container<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>blob_path<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen><closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>blob_path<comma><space>http_method<space>=<space><apos>HEAD<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>self.session.head<openparen>url<comma><space>headers=headers<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>200:<lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen>str<openparen>r.headers<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><apos><apos><apos><lf><space><space><space><space><space><space><space><space><opencurly><space><space><space><space><space><apos>content-length<apos>:<space><apos>1368582383<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-blob-type<apos>:<space><apos>AppendBlob<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>accept-ranges<apos>:<space><apos>bytes<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-blob-committed-block-count<apos>:<space><apos>327<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-version<apos>:<space><apos>2015-02-21<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>server<apos>:<space><apos>Windows-Azure-Blob<solidus>1.0<space>Microsoft-HTTPAPI<solidus>2.0<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-write-protection<apos>:<space><apos>false<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>last-modified<apos>:<space><apos>Thu<comma><space>23<space>Jun<space>2016<space>11:57:16<space>GMT<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>etag<apos>:<space><apos><quote>0x8D39B5D855ED87F<quote><apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-lease-state<apos>:<space><apos>available<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>date<apos>:<space><apos>Wed<comma><space>16<space>Nov<space>2016<space>17:59:04<space>GMT<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>content-type<apos>:<space><apos>application<solidus>octet-stream<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-request-id<apos>:<space><apos>414995ba-0001-0081-2433-40256f000000<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-lease-status<apos>:<space><apos>unlocked<apos><lf><space><space><space><space><space><space><space><space><closecurly><lf><space><space><space><space><space><space><space><space><apos><apos><apos><lf><space><space><space><space><space><space><space><space>return<space>map<openparen>r.headers.get<comma><space><openbracket><apos>last-modified<apos><comma><space><apos>x-ms-blob-type<apos><comma><space><apos>content-length<apos><comma><space><apos>content-type<apos><comma><space><apos>Content-MD5<apos><comma><space><apos>Accept-Ranges<apos><comma><space><apos>x-ms-blob-committed-block-count<apos><closebracket><closeparen><lf><space><space><space><space>def<space>download_blob<openparen>self<comma><space>container<comma><space>blob_name<comma><space>target_filepath<closeparen>:<lf><space><space><space><space><space><space><space><space><apos><apos><apos><lf><space><space><space><space><space><space><space><space>status<space>=<space>azure.download_blob<openparen>container<comma>blob_name<comma>target_filepath<closeparen><lf><space><space><space><space><space><space><space><space>TODO:<space>Eiter<space>get<space>blob<space>type<space>as<space>parameter<space>or<space>perform<space>a<space>Get<space>Blob<space>Properties<space>request<space>in<space>order<space>to<space>find<space>out<space>how<space>to<space>access<space>data.<space>Currently<space>only<space>large<space>blobs<space>that<space>have<space>an<space>accosiated<space>bloclist<space>works.<lf><space><space><space><space><space><space><space><space><apos><apos><apos><lf><space><space><space><space><space><space><space><space>last_mod<comma><space>blob_type<comma><space>content_length<comma><space>content_type<comma><space>content_md5<comma><space>accept_ranges<comma><space>committed_block_count<comma><space>=<space>self.get_blob_properties<openparen>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>content_length<space>=<space>int<openparen>content_length<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen>blob_type<closeparen><lf><space><space><space><space><space><space><space><space>nthreads<space>=<space>10<lf><space><space><space><space><space><space><space><space>readqueue<space>=<space>Queue<openparen>nthreads*2<closeparen><lf><space><space><space><space><space><space><space><space>writequeue<space>=<space>Queue<openparen>nthreads<closeparen><lf><space><space><space><space><space><space><space><space>target_filepath<space>=<space>os.path.normpath<openparen>target_filepath<closeparen><lf><space><space><space><space><space><space><space><space>target_folder<space>=<space>os.path.dirname<openparen>target_filepath<closeparen><lf><space><space><space><space><space><space><space><space>if<space>not<space>os.path.exists<openparen>target_folder<closeparen>:<space>os.makedirs<openparen>target_folder<closeparen><lf><space><space><space><space><space><space><space><space>fout<space>=<space>io.open<openparen>target_filepath<comma><space>mode=<apos>w+b<apos><closeparen><lf><space><space><space><space><space><space><space><space>def<space>get_data<openparen><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>while<space>True:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>blockid<comma><space>offset<comma><space>length<space>=<space>readqueue.get<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos><space>downloading<space>part<space><opencurly><closecurly><apos>.format<openparen>blockid<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>bytesread<space>=<space>0<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>for<space>chunk<space>in<space>self.getblock<openparen>container<comma><space>blob_name<comma><space>offset<comma><space>length<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>writequeue.put<openparen><openparen>chunk<comma><space>offset<space>+<space>bytesread<comma><space>len<openparen>chunk<closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>bytesread<space>+=<space>len<openparen>chunk<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>readqueue.task_done<openparen><closeparen><lf><space><space><space><space><space><space><space><space>def<space>write_data<openparen><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>while<space>True:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>data<comma><space>offset<comma><space>length<space>=<space>writequeue.get<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>fout.seek<openparen>offset<comma><space>0<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>fout.write<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>writequeue.task_done<openparen><closeparen><lf><space><space><space><space><space><space><space><space>for<space>i<space>in<space>range<openparen>nthreads<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>t<space>=<space>Thread<openparen>target=get_data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>t.daemon<space>=<space>True<lf><space><space><space><space><space><space><space><space><space><space><space><space>t.start<openparen><closeparen><lf><space><space><space><space><space><space><space><space>wt<space>=<space>Thread<openparen>target=write_data<closeparen><lf><space><space><space><space><space><space><space><space>wt.daemon<space>=<space>True<lf><space><space><space><space><space><space><space><space>wt.start<openparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>blob_type<space>==<space><apos>BlockBlob<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>committed_block_count:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>for<space>block<space>in<space>self.getblocklist<openparen>container=container<comma><space>blob_name=blob_name<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>readqueue.put<openparen>block<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>readqueue.put<openparen><openparen>uuid.uuid4<openparen><closeparen>.hex<comma><space>0<comma><space>content_length<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>elif<space>blob_type<space>==<space><apos>AppendBlob<apos><space>and<space>accept_ranges<space>==<space><apos>bytes<apos><space>and<space>committed_block_count:<lf><space><space><space><space><space><space><space><space><space><space><space><space>for<space>offset<space>in<space>range<openparen>0<comma><space>content_length<comma><space>PUT_BLOCK_CHUNK_SIZE<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>readqueue.put<openparen><openparen>uuid.uuid4<openparen><closeparen>.hex<comma><space>offset<comma><space>min<openparen>content_length-offset<comma><space>PUT_BLOCK_CHUNK_SIZE<closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>readqueue.join<openparen><closeparen><lf><space><space><space><space><space><space><space><space>writequeue.join<openparen><closeparen><lf><space><space><space><space><space><space><space><space>fout.flush<openparen><closeparen><lf><space><space><space><space><space><space><space><space>fout.close<openparen><closeparen><lf><space><space><space><space><space><space><space><space>return<space>last_mod<comma><space>blob_type<comma><space>content_length<comma><space>content_type<comma><space>content_md5<comma><space>accept_ranges<comma><space>committed_block_count<lf><space><space><space><space>def<space>list_blobs<openparen>self<comma><space>container<comma>prefix=None<comma>delimiter=<apos><solidus><apos><comma>recursive=False<closeparen>:<lf><space><space><space><space><space><space><space><space>#<space>https:<solidus><solidus>myaccount.blob.core.windows.net<solidus>mycontainer?restype=container<amp>comp=list<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen><closeparen><lf><space><space><space><space><space><space><space><space>#CubeSourceDataFile<solidus>coast<lf><space><space><space><space><space><space><space><space>#<lf><space><space><space><space><space><space><space><space>params<space>=<space><opencurly><apos>delimiter<apos><space>:<space>delimiter<comma><space><apos>comp<apos>:<space><apos>list<apos><comma><space><apos>restype<apos>:<space><apos>container<apos><closecurly><lf><space><space><space><space><space><space><space><space>if<space>prefix:<space>params<openbracket><apos>prefix<apos><closebracket><space>=<space>prefix<lf><space><space><space><space><space><space><space><space>params<space>=<space>OrderedDict<openparen>sorted<openparen>params.items<openparen><closeparen><comma><space>key=lambda<space>t:<space>t<openbracket>0<closebracket><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>querystring<space>=<space><apos><amp><apos>.join<openparen>map<openparen>lambda<space>t:<space><apos><opencurly><closecurly>=<opencurly><closecurly><apos>.format<openparen>*t<closeparen><comma><space>params.items<openparen><closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>querystringencoded<space>=<space><apos><backslash>n<apos>.join<openparen>map<openparen>lambda<space>t:<space><apos><opencurly><closecurly>:<opencurly><closecurly><apos>.format<openparen>*t<closeparen><comma><space>params.items<openparen><closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s?%s<apos><space>%<space><openparen>self.account<comma><space>container<comma>querystring<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>querystringencoded<space>=<space>querystringencoded<comma><space>http_method<space>=<space><apos>GET<apos><closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen><apos>Listing<space>blobs<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>self.session.get<openparen>url<comma><space>headers=headers<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>200:<lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>root<space>=<space>ElementTree.fromstring<openparen>r.content.decode<openparen><apos>utf-8-sig<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>for<space>blobprefix<space>in<space>root.iter<openparen><apos>BlobPrefix<apos><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>buf<space>=<space>StringIO<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>ElementTree.ElementTree<openparen>blobprefix<closeparen>.write<openparen>buf<comma><space>encoding=<apos>utf8<apos><comma><space>xml_declaration=False<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>yield<space><apos>BlobPrefix<apos><comma><space>prefix<comma><space>buf.getvalue<openparen><closeparen>.decode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>recursive:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>for<space>returntype<comma><space>used_prefix<comma><space>blob<space>in<space>self.list_blobs<openparen>container<comma><space>prefix=blobprefix.findtext<openparen><apos>Name<apos><closeparen><comma><space>delimiter=delimiter<comma>recursive=True<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>yield<space>returntype<comma><space>used_prefix<comma><space>blob<lf><space><space><space><space><space><space><space><space>for<space>blob<space>in<space>root.iter<openparen><apos>Blob<apos><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>buf<space>=<space>StringIO<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>ElementTree.ElementTree<openparen>blob<closeparen>.write<openparen>buf<comma><space>encoding=<apos>utf8<apos><comma><space>xml_declaration=False<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>yield<space><apos>Blob<apos><comma><space>prefix<comma><space>buf.getvalue<openparen><closeparen>.decode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space>def<space>_authorize<openparen>self<comma><space>headers<comma><space>container_name<comma><space>blob_name<space>=<space>None<comma><space>querystringencoded<space>=<space>None<comma><space>http_method<space>=<space><apos>PUT<apos><closeparen>:<lf><space><space><space><space><space><space><space><space>content_length<space>=<space><apos><apos><lf><space><space><space><space><space><space><space><space>if<space>headers.get<openparen><apos>Content-Length<apos><closeparen><space>!=<space><apos>0<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>content_length<space>=<space>headers.get<openparen><apos>Content-Length<apos><closeparen><lf><space><space><space><space><space><space><space><space>fields<space>=<space><openbracket><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>http_method<space>#<space>VERB<space><openparen>http-method<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-Encoding<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-Language<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space>content_length<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-MD5<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space>headers.get<openparen><apos>Date<apos><comma><apos><apos><closeparen><space>#<space>Date<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-Modified-Since<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-None-Match<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-Unmodified-Since<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Range<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>?<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>?<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><closebracket><lf><space><space><space><space><space><space><space><space>if<space>headers.get<openparen><apos>x-ms-blob-type<apos><comma><space>None<closeparen>:<space>fields.append<openparen><apos>x-ms-blob-type:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-blob-type<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>fields.append<openparen><apos>x-ms-date:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-date<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>headers.get<openparen><apos>x-ms-range<apos><comma><space>None<closeparen>:<space>fields.append<openparen><apos>x-ms-range:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-range<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>fields.append<openparen><apos>x-ms-version:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-version<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>blob_name:<lf><space><space><space><space><space><space><space><space><space><space><space><space>fields.append<openparen><apos><solidus>%s<solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container_name<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>fields.append<openparen><apos><solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>querystringencoded:<space>fields.append<openparen>querystringencoded<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space><apos><backslash>n<apos>.join<openparen>fields<closeparen><lf><space><space><space><space><space><space><space><space>signature<space>=<space>AzureAPI._sign_string<openparen>self.secret<space><comma><space>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>headers<openbracket><apos>Authorization<apos><closebracket><space>=<space><apos>SharedKey<space>%s:%s<apos><space>%<space><openparen>self.account<comma><space>signature<closeparen><lf><space><space><space><space><space><space><space><space>return<space>_string_to_sign<lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_create_headers<openparen>data<space>=<space><apos><apos><comma><space>xtra_headers=<opencurly><closecurly><closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space><opencurly><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><apos>Content-Length<apos>:<space>str<openparen>len<openparen>data<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-date<apos>:<space>AzureAPI._httpdate<openparen>datetime.datetime.utcnow<openparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-version<apos>:<space>AZ_VERSION<lf><space><space><space><space><space><space><space><space><space><space><space><space><closecurly><lf><space><space><space><space><space><space><space><space>headers.update<openparen>xtra_headers<closeparen><lf><space><space><space><space><space><space><space><space>return<space>OrderedDict<openparen>sorted<openparen>headers.items<openparen><closeparen><comma><space>key=lambda<space>t:<space>t<openbracket>0<closebracket><closeparen><closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_httpdate<openparen>dt<closeparen>:<lf><space><space><space><space><space><space><space><space><quote><quote><quote>Return<space>a<space>string<space>representation<space>of<space>a<space>date<space>according<space>to<space>RFC<space>1123<lf><space><space><space><space><space><space><space><space><openparen>HTTP<solidus>1.1<closeparen>.<lf><space><space><space><space><lf><space><space><space><space><space><space><space><space>The<space>supplied<space>date<space>must<space>be<space>in<space>UTC.<lf><space><space><space><space><lf><space><space><space><space><space><space><space><space><quote><quote><quote><lf><space><space><space><space><space><space><space><space>weekday<space>=<space><openbracket><quote>Mon<quote><comma><space><quote>Tue<quote><comma><space><quote>Wed<quote><comma><space><quote>Thu<quote><comma><space><quote>Fri<quote><comma><space><quote>Sat<quote><comma><space><quote>Sun<quote><closebracket><openbracket>dt.weekday<openparen><closeparen><closebracket><lf><space><space><space><space><space><space><space><space>month<space>=<space><openbracket><quote>Jan<quote><comma><space><quote>Feb<quote><comma><space><quote>Mar<quote><comma><space><quote>Apr<quote><comma><space><quote>May<quote><comma><space><quote>Jun<quote><comma><space><quote>Jul<quote><comma><space><quote>Aug<quote><comma><space><quote>Sep<quote><comma><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><quote>Oct<quote><comma><space><quote>Nov<quote><comma><space><quote>Dec<quote><closebracket><openbracket>dt.month<space>-<space>1<closebracket><lf><space><space><space><space><space><space><space><space>return<space><quote>%s<comma><space>%02d<space>%s<space>%04d<space>%02d:%02d:%02d<space>GMT<quote><space>%<space><openparen>weekday<comma><space>dt.day<comma><space>month<comma><lf><space><space><space><space><space><space><space><space><space><space><space><space>dt.year<comma><space>dt.hour<comma><space>dt.minute<comma><space>dt.second<closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_encode_base64<openparen>data<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>encoded<space>=<space>base64.b64encode<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space>return<space>encoded.decode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_decode_base64_to_bytes<openparen>data<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>return<space>base64.b64decode<openparen>data<closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_sign_string<openparen>key<comma><space>string_to_sign<comma><space>key_is_base64=True<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>key_is_base64:<lf><space><space><space><space><space><space><space><space><space><space><space><space>key<space>=<space>AzureAPI._decode_base64_to_bytes<openparen>key<closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>key<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>key<space>=<space>key.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>string_to_sign<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>string_to_sign<space>=<space>string_to_sign.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>signed_hmac_sha256<space>=<space>hmac.HMAC<openparen>key<comma><space>string_to_sign<comma><space>hashlib.sha256<closeparen><lf><space><space><space><space><space><space><space><space>digest<space>=<space>signed_hmac_sha256.digest<openparen><closeparen><lf><space><space><space><space><space><space><space><space>encoded_digest<space>=<space>AzureAPI._encode_base64<openparen>digest<closeparen><lf><space><space><space><space><space><space><space><space>return<space>encoded_digest<lf>    OUTPUT PYOUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_PythonCaller_OUTPUT"
# -------------------------------------------------------------------------
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_PythonCaller_OUTPUT"    OUTPUT FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_FILTER
FACTORY_DEF * AttributeFilterFactory FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_Filter COMMAND_PARM_EVALUATION SINGLE_PASS INPUT FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_FILTER FILTER_ATTRIBUTE _azure_blob_downloader_status FILTER_VALUES initiator_success <lt>EMPTY<gt> <lt>MISSING<gt> <lt>NULL<gt> <lt>UNFILTERED<gt> OUTPUT initiator_success FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_initiator_success OUTPUT <lt>EMPTY<gt> FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_<lt>EMPTY<gt> OUTPUT <lt>MISSING<gt> FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_<lt>MISSING<gt> OUTPUT <lt>NULL<gt> FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_<lt>NULL<gt> OUTPUT <lt>UNFILTERED<gt> FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_<lt>UNFILTERED<gt>
# -------------------------------------------------------------------------
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter__Unfiltered__Logger    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_<lt>EMPTY<gt>"    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_<lt>MISSING<gt>"    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_<lt>NULL<gt>"    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_<lt>UNFILTERED<gt>"    OUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter__Unfiltered__LOGGED"                  @Log("$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter__Unfiltered_: Feature is:","20","20")                  @FeatureType("$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter__Unfiltered__LOGGED")
# -------------------------------------------------------------------------
# Expose all attributes.  This ensures that if you expose fme_dataset, you will get it.
READER_META_ATTRIBUTES fme_feature_type fme_dataset fme_basename
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeExposer    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_initiator_success"    OUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeExposer_OUTPUT"
# -------------------------------------------------------------------------
INCLUDE [    set macroLine "MACRO $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF {*} TeeFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeExposer_OUTPUT"    OUTPUT { FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover_OUTPUT"        @RemoveAttributes(fme_encoded,_azure_blob_downloader_storage_account,_azure_blob_downloader_container,_azure_blob_downloader_key,_azure_blob_downloader_status,_azure_blob_downloader_blob_name)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover_LIST_EXP)")         }
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDownloader_WORKSPACE_NAME)_Output1571061490 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_Output"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDownloader_WORKSPACE_NAME)_Rejected1571061490 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter__Unfiltered__LOGGED"   OUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_Rejected"
INCLUDE [puts {MACRO WB_CURRENT_CONTEXT $(WB_OLD_CONTEXT_$(AzureBlobDownloader_WORKSPACE_NAME))}]
#! <?xml version="1.0" encoding="UTF-8" ?>
#! <TRANSFORMER
# TRANSFORMER_BEGIN AzureBlobDownloader,1,"Web Services",579bfcb6-6587-4554-848e-bd7ad9ce963c,"Linked by Default",No,NO_PARALLELISM,,No,19630,YES,No,36,No
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Download blob file from Azure and store into a local location. </p>
# 
# TRANSFORMER_END
#!   ATTR_TYPE_ENCODING="SDF"
#!   BLOCKED_LOOPING="No"
#!   CATEGORY="Web Services"
#!   DESCRIPTION="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Download blob file from Azure and store into a local location. &lt;/p&gt;&#10;"
#!   DOC_EXTENTS="5984.93 681.001"
#!   DOC_TOP_LEFT="-1901.77 -507.877"
#!   EXPLICIT_BOOKMARK_ORDER="false"
#!   FME_BUILD_NUM="19630"
#!   FME_DOCUMENT_GUID="579bfcb6-6587-4554-848e-bd7ad9ce963c"
#!   FME_DOCUMENT_PRIORGUID="9a828ed3-aeaf-49e7-a631-2bbb5628e4b1,ed5e227e-7a97-46d4-8cf8-cbe8d8cd804a,1ed1c970-e1d4-4d70-b11b-6bf81f3122b3,07920e7f-5cde-4031-b607-9785eedc5e8d"
#!   FME_LINKED_TRANSFORMER_VERSION="1"
#!   FME_PROCESS_COUNT="NO_PARALLELISM"
#!   FME_PROCESS_GROUPS_ORDERED="No"
#!   FME_PROCESS_GROUP_BY=""
#!   FME_PROCESS_PRESERVE_GROUP_ATTR="No"
#!   FME_SERVER_SERVICES=""
#!   FMX_ATTRIBUTE_PROPOGATION_MODE="AUTO"
#!   FMX_INSERT_MODE="Linked by Default"
#!   HISTORY="16&lt;solidus&gt;11&lt;solidus&gt;2016,Peter&lt;space&gt;&lt;space&gt;Segerstedt,Initial&lt;space&gt;creator"
#!   ITERATION_COUNT_ATTR=""
#!   LAST_SAVE_BUILD="FME(R) 2019.1.2.0 (20190829 - Build 19630 - WIN64)"
#!   LAST_SAVE_DATE="2019-10-14T11:39:04"
#!   MARKDOWN_DESCRIPTION=""
#!   MARKDOWN_USAGE=""
#!   MAX_LOOP_ITERATIONS=""
#!   PASSWORD=""
#!   PYTHON_COMPATIBILITY="36"
#!   SHOW_ANNOTATIONS="true"
#!   SHOW_INFO_NODES="true"
#!   TITLE="AzureBlobDownloader"
#!   USAGE="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Storage account:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the storage account. Look for this under the portal.azure.com.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-weight:600;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Access key:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the access key for the blob inside Azure. You can find this when you select the storage inside the protal.azure.com website, go to settings and then search for &quot;Access keys&quot;.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Use access keys to authenticate your applications when making requests to this Azure storage account. Store your access keys securely - for example, using Azure Key Vault - and don&apos;t share them. We recommend regenerating your access keys regularly. You are provided two access keys so that you can maintain connections using one key while regenerating the other. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Container name:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The storage countainer name. These are listed directly under the storage account pannel. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Blob name:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The name of the blob you are about to delete. You can delete blobs in folders by simply using the &apos;/&apos; for example &quot;folder1/folder2/blobname&quot;. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Output Location:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The local path where the file should be stored.&lt;/p&gt;&#10;"
#!   USE_MARKDOWN=""
#!   VIEW_POSITION="-1578.14 1115.64"
#!   WARN_INVALID_XFORM_PARAM="Yes"
#!   WORKSPACE_VERSION="1"
#!   XFORM_DEPRECATED="No"
#!   ZOOM_SCALE="100"
#! >
#! <DATASETS>
#! </DATASETS>
#! <DATA_TYPES>
#! </DATA_TYPES>
#! <GEOM_TYPES>
#! </GEOM_TYPES>
#! <FEATURE_TYPES>
#! </FEATURE_TYPES>
#! <FMESERVER>
#! </FMESERVER>
#! <GLOBAL_PARAMETERS>
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR ACCOUNT &quot; &quot; Storage Account:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI PASSWORD_OR_ATTR KEY Access Key:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="true"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR CONTAINER &quot; &quot; Container Name:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR BLOB_NAME &quot; &quot; Blob Name:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI FILENAME_OR_ATTR TARGET_FILEPATH All_Files|*.* Output Location:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="true"
#! />
#! </GLOBAL_PARAMETERS>
#! <COMMENTS>
#! </COMMENTS>
#! <CONSTANTS>
#! </CONSTANTS>
#! <BOOKMARKS>
#! <BOOKMARK
#!   IDENTIFIER="39"
#!   NAME="IF DIR ADD BASENAME"
#!   DESCRIPTION=""
#!   TOP_LEFT="-190.68899999999999 173.124"
#!   ORDER="500000000000000"
#!   PALETTE_COLOR=""
#!   BOTTOM_RIGHT="990.44100000000014 -507.87699999999995"
#!   BOUNDING_RECT="-190.68899999999999 173.124 1181.1300000000001 681.00099999999998"
#!   STICKY="true"
#!   COLOUR="0.52156862745098043,0.59215686274509804,0.25490196078431371,0.39215686274509803"
#!   CONTENTS="24 35 31 22 36 23 37 30 26 "
#! >
#! </BOOKMARK>
#! </BOOKMARKS>
#! <TRANSFORMERS>
#! <TRANSFORMER
#!   IDENTIFIER="1"
#!   TYPE="AttributeCreator"
#!   VERSION="8"
#!   POSITION="-1320.73 -77.875600000000006"
#!   BOUNDING_RECT="-1320.73 -77.875600000000006 820.72799999999995 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_GRP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_HANDLING" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTR_TABLE" PARM_VALUE="&quot;&quot; _azure_blob_downloader_storage_account SET_TO $(ACCOUNT)  _azure_blob_downloader_key SET_TO $(KEY)  _azure_blob_downloader_container SET_TO $(CONTAINER)  _azure_blob_downloader_blob_name SET_TO $(BLOB_NAME)  _azure_blob_downloader_filepath SET_TO $(TARGET_FILEPATH)"/>
#!     <XFORM_PARM PARM_NAME="MULTI_FEATURE_MODE" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_MODE_DISPLAY" PARM_VALUE="No Substitution"/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_VALUE" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="NUM_PRIOR_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="NUM_SUBSEQUENT_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="FetchParamsAttributeCreator_2"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="4"
#!   TYPE="PythonCaller"
#!   VERSION="4"
#!   POSITION="1258.3900000000001 -118.501"
#!   BOUNDING_RECT="1258.3900000000001 -118.501 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="ADVANCED_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="HIDE_ATTRIBUTES" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NEW_ATTRIBUTES" PARM_VALUE="_azure_blob_downloader_status"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PYTHONSOURCE" PARM_VALUE="from&lt;space&gt;fmeobjects&lt;space&gt;import&lt;space&gt;FMELogFile&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;DownloadFeatureProcessor&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile&lt;space&gt;=&lt;space&gt;FMELogFile&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;Make&lt;space&gt;sure&lt;space&gt;to&lt;space&gt;change&lt;space&gt;if&lt;space&gt;Custom&lt;space&gt;transformer&lt;space&gt;is&lt;space&gt;renamed&lt;space&gt;&lt;openparen&gt;not&lt;space&gt;transformer&lt;space&gt;instance&lt;space&gt;name&lt;space&gt;-&lt;space&gt;that&lt;apos&gt;s&lt;space&gt;what&lt;space&gt;we&lt;apos&gt;re&lt;space&gt;fetching&lt;closeparen&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.xformer_name&lt;space&gt;=&lt;space&gt;FME_MacroValues&lt;openbracket&gt;&lt;apos&gt;AzureBlobDownloader_WORKSPACE_NAME&lt;apos&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;info&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_WARN&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;while&lt;space&gt;developing&lt;space&gt;for&lt;space&gt;popping&lt;space&gt;out&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;debug&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s&lt;space&gt;&lt;openparen&gt;DEBUG&lt;closeparen&gt;:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_WARN&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;while&lt;space&gt;developing&lt;space&gt;for&lt;space&gt;popping&lt;space&gt;out&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;input&lt;openparen&gt;self&lt;comma&gt;feature&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;try:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;account&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_downloader_storage_account&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;secret&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_downloader_key&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_downloader_blob_name&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;container&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_downloader_container&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;target_filepath&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_downloader_filepath&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Downloading&lt;space&gt;blob&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;space&gt;to&lt;space&gt;file&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;blob_name&lt;comma&gt;&lt;space&gt;target_filepath&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;with&lt;space&gt;AzureAPI&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;self.logfile&lt;comma&gt;&lt;space&gt;logprefix&lt;space&gt;=&lt;space&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;loglevel&lt;space&gt;=&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;space&gt;as&lt;space&gt;azure:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;last_mod&lt;comma&gt;&lt;space&gt;blob_type&lt;comma&gt;&lt;space&gt;content_length&lt;comma&gt;&lt;space&gt;content_type&lt;comma&gt;&lt;space&gt;content_md5&lt;comma&gt;&lt;space&gt;accept_ranges&lt;comma&gt;&lt;space&gt;committed_block_count&lt;comma&gt;&lt;space&gt;=&lt;space&gt;azure.download_blob&lt;openparen&gt;container&lt;comma&gt;blob_name=blob_name&lt;comma&gt;target_filepath=target_filepath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;blob.last_modified&lt;apos&gt;&lt;comma&gt;&lt;space&gt;last_mod&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;blob.blob_type&lt;apos&gt;&lt;comma&gt;&lt;space&gt;blob_type&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;blob.content_length&lt;apos&gt;&lt;comma&gt;&lt;space&gt;content_length&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;blob.content_type&lt;apos&gt;&lt;comma&gt;&lt;space&gt;content_type&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;content_md5:&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;blob.md5&lt;apos&gt;&lt;comma&gt;&lt;space&gt;content_md5&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_downloader_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;initiator_success&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;except&lt;space&gt;Exception&lt;space&gt;as&lt;space&gt;e:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_downloader_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;initiator_fail&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_downloader_error_message&lt;apos&gt;&lt;comma&gt;&lt;space&gt;str&lt;openparen&gt;e&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logException&lt;openparen&gt;e&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.pyoutput&lt;openparen&gt;feature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;close&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;del&lt;space&gt;self.logfile&lt;lf&gt;#&lt;space&gt;common&lt;space&gt;api&lt;space&gt;below&lt;lf&gt;import&lt;space&gt;os&lt;lf&gt;import&lt;space&gt;os.path&lt;lf&gt;import&lt;space&gt;requests&lt;lf&gt;from&lt;space&gt;collections&lt;space&gt;import&lt;space&gt;OrderedDict&lt;lf&gt;import&lt;space&gt;datetime&lt;lf&gt;from&lt;space&gt;xml.etree&lt;space&gt;import&lt;space&gt;ElementTree&lt;lf&gt;from&lt;space&gt;cStringIO&lt;space&gt;import&lt;space&gt;StringIO&lt;lf&gt;from&lt;space&gt;Queue&lt;space&gt;import&lt;space&gt;Queue&lt;lf&gt;from&lt;space&gt;threading&lt;space&gt;import&lt;space&gt;Thread&lt;lf&gt;import&lt;space&gt;io&lt;lf&gt;&lt;lf&gt;import&lt;space&gt;base64&lt;lf&gt;import&lt;space&gt;uuid&lt;lf&gt;import&lt;space&gt;hashlib&lt;lf&gt;import&lt;space&gt;hmac&lt;lf&gt;import&lt;space&gt;sys&lt;lf&gt;&lt;lf&gt;PUT_BLOB_LIMIT&lt;space&gt;=&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;64&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;64&lt;space&gt;MB&lt;lf&gt;PUT_BLOCK_CHUNK_SIZE&lt;space&gt;=&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;4&lt;space&gt;#&lt;space&gt;4&lt;space&gt;MB&lt;lf&gt;AZ_VERSION&lt;space&gt;=&lt;space&gt;&lt;apos&gt;2015-02-21&lt;apos&gt;&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;StdoutLogger&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;simple&lt;space&gt;log&lt;space&gt;class&lt;space&gt;to&lt;space&gt;mimic&lt;space&gt;fme&lt;space&gt;api&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;logMessageString&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;msg&lt;comma&gt;&lt;space&gt;level&lt;space&gt;=&lt;space&gt;0&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;print&lt;space&gt;msg&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;logException&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;e&lt;comma&gt;&lt;space&gt;level&lt;space&gt;=&lt;space&gt;0&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logMessageString&lt;openparen&gt;str&lt;openparen&gt;e&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;level&lt;closeparen&gt;&lt;lf&gt;class&lt;space&gt;AzureAPI&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;sys.version_info&lt;space&gt;&lt;lt&gt;&lt;space&gt;&lt;openparen&gt;3&lt;comma&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;from&lt;space&gt;collections&lt;space&gt;import&lt;space&gt;Iterable&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_unicode_type&lt;space&gt;=&lt;space&gt;unicode&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;from&lt;space&gt;collections.abc&lt;space&gt;import&lt;space&gt;Iterable&lt;space&gt;#&lt;space&gt;TODO:&lt;space&gt;this&lt;space&gt;code&lt;space&gt;was&lt;space&gt;found&lt;space&gt;somewhere&lt;space&gt;but&lt;space&gt;its&lt;space&gt;logic&lt;space&gt;is&lt;space&gt;not&lt;space&gt;clear&lt;space&gt;to&lt;space&gt;me...&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_unicode_type&lt;space&gt;=&lt;space&gt;str&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;logfile&lt;space&gt;=&lt;space&gt;StdoutLogger&lt;openparen&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;logprefix&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;comma&gt;&lt;space&gt;loglevel&lt;space&gt;=&lt;space&gt;0&lt;comma&gt;&lt;space&gt;session&lt;space&gt;=&lt;space&gt;requests.Session&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.session&lt;space&gt;=&lt;space&gt;session&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile&lt;space&gt;=&lt;space&gt;logfile&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logprefix&lt;space&gt;=&lt;space&gt;logprefix&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.loglevel&lt;space&gt;=&lt;space&gt;loglevel&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.account&lt;space&gt;=&lt;space&gt;account&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.secret&lt;space&gt;=&lt;space&gt;secret&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__enter__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;self&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__exit__&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;type&lt;comma&gt;&lt;space&gt;value&lt;comma&gt;&lt;space&gt;traceback&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Closing&lt;space&gt;Azure&lt;space&gt;Connection&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;del&lt;space&gt;self.logfile&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;del&lt;space&gt;self.session&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;isinstance&lt;openparen&gt;value&lt;comma&gt;&lt;space&gt;Exception&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;info&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.logprefix&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;self.loglevel&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;append_block&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=appendblock&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Appending&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp:appendblock&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;ERROR&lt;space&gt;status&lt;space&gt;%s:&lt;space&gt;`%s`&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;r.status_code&lt;comma&gt;&lt;space&gt;_string_to_sign&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_block&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;block_id&lt;space&gt;=&lt;space&gt;base64.b64encode&lt;openparen&gt;uuid.uuid4&lt;openparen&gt;&lt;closeparen&gt;.hex&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#https:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;mycontainer&lt;solidus&gt;myblob?comp=block&lt;amp&gt;blockid=id&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=block&lt;amp&gt;blockid=%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_id&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;block&lt;space&gt;of&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;blockid:%s&lt;backslash&gt;ncomp:block&lt;apos&gt;&lt;space&gt;%&lt;space&gt;block_id&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;block_id&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_block_list&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_list&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;list_fragments&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;s:&lt;space&gt;&lt;apos&gt;&lt;lt&gt;Uncommitted&lt;gt&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;lt&gt;&lt;solidus&gt;Uncommitted&lt;gt&gt;&lt;apos&gt;.format&lt;openparen&gt;s&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;block_list&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;lt&gt;?xml&lt;space&gt;version=&lt;quote&gt;1.0&lt;quote&gt;&lt;space&gt;encoding=&lt;quote&gt;utf-8&lt;quote&gt;?&lt;gt&gt;&lt;lt&gt;BlockList&lt;gt&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;lt&gt;&lt;solidus&gt;BlockList&lt;gt&gt;&lt;apos&gt;.format&lt;openparen&gt;list_fragments&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=blocklist&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp:blocklist&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_blob&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.seek&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;os.SEEK_END&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;size&lt;space&gt;=&lt;space&gt;fin.tell&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.seek&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;os.SEEK_SET&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;size&lt;space&gt;&lt;lt&gt;&lt;space&gt;PUT_BLOB_LIMIT:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;fin.read&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ids&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;offset&lt;space&gt;in&lt;space&gt;range&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;size&lt;comma&gt;&lt;space&gt;PUT_BLOCK_CHUNK_SIZE&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;`%s`&lt;comma&gt;&lt;space&gt;%s%%&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;blob_name&lt;comma&gt;&lt;space&gt;int&lt;openparen&gt;round&lt;openparen&gt;offset&lt;space&gt;*&lt;space&gt;100&lt;space&gt;&lt;solidus&gt;&lt;space&gt;size&lt;closeparen&gt;&lt;closeparen&gt;&lt;space&gt;&lt;closeparen&gt;&lt;space&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;block_size&lt;space&gt;=&lt;space&gt;min&lt;openparen&gt;PUT_BLOCK_CHUNK_SIZE&lt;comma&gt;&lt;space&gt;size&lt;space&gt;-&lt;space&gt;offset&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ids.append&lt;openparen&gt;self.put_block&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin.read&lt;openparen&gt;block_size&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.put_block_list&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;ids&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;&lt;apos&gt;ID&lt;space&gt;LIST&lt;space&gt;COMMITTED:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;backslash&gt;t&lt;apos&gt;.join&lt;openparen&gt;ids&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Done&lt;space&gt;uploading&lt;space&gt;%s&lt;space&gt;bytes&lt;space&gt;of&lt;space&gt;data&lt;apos&gt;&lt;space&gt;%&lt;space&gt;size&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;getblocklist&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#print&lt;space&gt;&lt;apos&gt;GET&lt;space&gt;http:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;movies&lt;solidus&gt;MOV1.avi?comp=blocklist&lt;amp&gt;blocklisttype=committed&lt;space&gt;HTTP&lt;solidus&gt;1.1&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;params&lt;space&gt;=&lt;space&gt;&lt;opencurly&gt;&lt;apos&gt;comp&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;blocklist&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;blocklisttype&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;committed&lt;apos&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;params&lt;space&gt;=&lt;space&gt;OrderedDict&lt;openparen&gt;sorted&lt;openparen&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;key=lambda&lt;space&gt;t:&lt;space&gt;t&lt;openbracket&gt;0&lt;closebracket&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;querystring&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;amp&gt;&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;t:&lt;space&gt;&lt;apos&gt;&lt;opencurly&gt;&lt;closecurly&gt;=&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;*t&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;t:&lt;space&gt;&lt;apos&gt;&lt;opencurly&gt;&lt;closecurly&gt;:&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;*t&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_path&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;.join&lt;openparen&gt;&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s?%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;blob_path&lt;comma&gt;querystring&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;blob_path&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;querystringencoded&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;GET&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;self.session.get&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;200:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;ERROR&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;ERROR&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;root&lt;space&gt;=&lt;space&gt;ElementTree.fromstring&lt;openparen&gt;r.content.decode&lt;openparen&gt;&lt;apos&gt;utf-8-sig&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;unicode&lt;openparen&gt;ElementTree.tostring&lt;openparen&gt;root&lt;comma&gt;&lt;space&gt;encoding=&lt;quote&gt;utf8&lt;quote&gt;&lt;comma&gt;&lt;space&gt;method=&lt;quote&gt;xml&lt;quote&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;utf8&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;offset&lt;space&gt;=&lt;space&gt;0&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;block&lt;space&gt;in&lt;space&gt;root.find&lt;openparen&gt;&lt;apos&gt;CommittedBlocks&lt;apos&gt;&lt;closeparen&gt;.iter&lt;openparen&gt;&lt;apos&gt;Block&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;name&lt;space&gt;=&lt;space&gt;base64.b64decode&lt;openparen&gt;block.find&lt;openparen&gt;&lt;apos&gt;Name&lt;apos&gt;&lt;closeparen&gt;.text&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;size&lt;space&gt;=&lt;space&gt;int&lt;openparen&gt;block.find&lt;openparen&gt;&lt;apos&gt;Size&lt;apos&gt;&lt;closeparen&gt;.text&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;name&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;size&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;offset&lt;space&gt;+=&lt;space&gt;size&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;getblock&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;length&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;range&lt;space&gt;=&lt;space&gt;&lt;apos&gt;bytes=&lt;opencurly&gt;&lt;closecurly&gt;-&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;offset&lt;comma&gt;&lt;space&gt;offset&lt;space&gt;+&lt;space&gt;length&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_path&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;.join&lt;openparen&gt;&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;blob_path&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;xtra_headers=&lt;opencurly&gt;&lt;apos&gt;x-ms-range&lt;apos&gt;:range&lt;closecurly&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;blob_path&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;GET&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;self.session.get&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;stream=True&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;not&lt;space&gt;r.status_code&lt;space&gt;in&lt;space&gt;&lt;openparen&gt;200&lt;comma&gt;&lt;space&gt;206&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;mycontainer&lt;solidus&gt;myblob&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;chunk&lt;space&gt;in&lt;space&gt;r.iter_content&lt;openparen&gt;io.DEFAULT_BUFFER_SIZE&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;chunk&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;get_blob_properties&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_path&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;.join&lt;openparen&gt;&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;blob_path&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;blob_path&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;HEAD&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;self.session.head&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;200:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;str&lt;openparen&gt;r.headers&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;opencurly&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;content-length&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;1368582383&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;AppendBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;accept-ranges&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;bytes&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-blob-committed-block-count&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;327&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;2015-02-21&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;server&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;Windows-Azure-Blob&lt;solidus&gt;1.0&lt;space&gt;Microsoft-HTTPAPI&lt;solidus&gt;2.0&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-write-protection&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;false&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;last-modified&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;Thu&lt;comma&gt;&lt;space&gt;23&lt;space&gt;Jun&lt;space&gt;2016&lt;space&gt;11:57:16&lt;space&gt;GMT&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;etag&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;&lt;quote&gt;0x8D39B5D855ED87F&lt;quote&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-lease-state&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;available&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;date&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;Wed&lt;comma&gt;&lt;space&gt;16&lt;space&gt;Nov&lt;space&gt;2016&lt;space&gt;17:59:04&lt;space&gt;GMT&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;content-type&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;application&lt;solidus&gt;octet-stream&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-request-id&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;414995ba-0001-0081-2433-40256f000000&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-lease-status&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;unlocked&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;map&lt;openparen&gt;r.headers.get&lt;comma&gt;&lt;space&gt;&lt;openbracket&gt;&lt;apos&gt;last-modified&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;content-length&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;content-type&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Content-MD5&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Accept-Ranges&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-blob-committed-block-count&lt;apos&gt;&lt;closebracket&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;download_blob&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;target_filepath&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;status&lt;space&gt;=&lt;space&gt;azure.download_blob&lt;openparen&gt;container&lt;comma&gt;blob_name&lt;comma&gt;target_filepath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;TODO:&lt;space&gt;Eiter&lt;space&gt;get&lt;space&gt;blob&lt;space&gt;type&lt;space&gt;as&lt;space&gt;parameter&lt;space&gt;or&lt;space&gt;perform&lt;space&gt;a&lt;space&gt;Get&lt;space&gt;Blob&lt;space&gt;Properties&lt;space&gt;request&lt;space&gt;in&lt;space&gt;order&lt;space&gt;to&lt;space&gt;find&lt;space&gt;out&lt;space&gt;how&lt;space&gt;to&lt;space&gt;access&lt;space&gt;data.&lt;space&gt;Currently&lt;space&gt;only&lt;space&gt;large&lt;space&gt;blobs&lt;space&gt;that&lt;space&gt;have&lt;space&gt;an&lt;space&gt;accosiated&lt;space&gt;bloclist&lt;space&gt;works.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;last_mod&lt;comma&gt;&lt;space&gt;blob_type&lt;comma&gt;&lt;space&gt;content_length&lt;comma&gt;&lt;space&gt;content_type&lt;comma&gt;&lt;space&gt;content_md5&lt;comma&gt;&lt;space&gt;accept_ranges&lt;comma&gt;&lt;space&gt;committed_block_count&lt;comma&gt;&lt;space&gt;=&lt;space&gt;self.get_blob_properties&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;content_length&lt;space&gt;=&lt;space&gt;int&lt;openparen&gt;content_length&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;blob_type&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;nthreads&lt;space&gt;=&lt;space&gt;10&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue&lt;space&gt;=&lt;space&gt;Queue&lt;openparen&gt;nthreads*2&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;writequeue&lt;space&gt;=&lt;space&gt;Queue&lt;openparen&gt;nthreads&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;target_filepath&lt;space&gt;=&lt;space&gt;os.path.normpath&lt;openparen&gt;target_filepath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;target_folder&lt;space&gt;=&lt;space&gt;os.path.dirname&lt;openparen&gt;target_filepath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;not&lt;space&gt;os.path.exists&lt;openparen&gt;target_folder&lt;closeparen&gt;:&lt;space&gt;os.makedirs&lt;openparen&gt;target_folder&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout&lt;space&gt;=&lt;space&gt;io.open&lt;openparen&gt;target_filepath&lt;comma&gt;&lt;space&gt;mode=&lt;apos&gt;w+b&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;get_data&lt;openparen&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;while&lt;space&gt;True:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blockid&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;length&lt;space&gt;=&lt;space&gt;readqueue.get&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;&lt;space&gt;downloading&lt;space&gt;part&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;blockid&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;bytesread&lt;space&gt;=&lt;space&gt;0&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;chunk&lt;space&gt;in&lt;space&gt;self.getblock&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;length&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;writequeue.put&lt;openparen&gt;&lt;openparen&gt;chunk&lt;comma&gt;&lt;space&gt;offset&lt;space&gt;+&lt;space&gt;bytesread&lt;comma&gt;&lt;space&gt;len&lt;openparen&gt;chunk&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;bytesread&lt;space&gt;+=&lt;space&gt;len&lt;openparen&gt;chunk&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.task_done&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;write_data&lt;openparen&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;while&lt;space&gt;True:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;length&lt;space&gt;=&lt;space&gt;writequeue.get&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout.seek&lt;openparen&gt;offset&lt;comma&gt;&lt;space&gt;0&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout.write&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;writequeue.task_done&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;i&lt;space&gt;in&lt;space&gt;range&lt;openparen&gt;nthreads&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;t&lt;space&gt;=&lt;space&gt;Thread&lt;openparen&gt;target=get_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;t.daemon&lt;space&gt;=&lt;space&gt;True&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;t.start&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;wt&lt;space&gt;=&lt;space&gt;Thread&lt;openparen&gt;target=write_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;wt.daemon&lt;space&gt;=&lt;space&gt;True&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;wt.start&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;blob_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;committed_block_count:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;block&lt;space&gt;in&lt;space&gt;self.getblocklist&lt;openparen&gt;container=container&lt;comma&gt;&lt;space&gt;blob_name=blob_name&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.put&lt;openparen&gt;block&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.put&lt;openparen&gt;&lt;openparen&gt;uuid.uuid4&lt;openparen&gt;&lt;closeparen&gt;.hex&lt;comma&gt;&lt;space&gt;0&lt;comma&gt;&lt;space&gt;content_length&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;elif&lt;space&gt;blob_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;AppendBlob&lt;apos&gt;&lt;space&gt;and&lt;space&gt;accept_ranges&lt;space&gt;==&lt;space&gt;&lt;apos&gt;bytes&lt;apos&gt;&lt;space&gt;and&lt;space&gt;committed_block_count:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;offset&lt;space&gt;in&lt;space&gt;range&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;content_length&lt;comma&gt;&lt;space&gt;PUT_BLOCK_CHUNK_SIZE&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.put&lt;openparen&gt;&lt;openparen&gt;uuid.uuid4&lt;openparen&gt;&lt;closeparen&gt;.hex&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;min&lt;openparen&gt;content_length-offset&lt;comma&gt;&lt;space&gt;PUT_BLOCK_CHUNK_SIZE&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.join&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;writequeue.join&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout.flush&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout.close&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;last_mod&lt;comma&gt;&lt;space&gt;blob_type&lt;comma&gt;&lt;space&gt;content_length&lt;comma&gt;&lt;space&gt;content_type&lt;comma&gt;&lt;space&gt;content_md5&lt;comma&gt;&lt;space&gt;accept_ranges&lt;comma&gt;&lt;space&gt;committed_block_count&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;list_blobs&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;prefix=None&lt;comma&gt;delimiter=&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;&lt;comma&gt;recursive=False&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;https:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;mycontainer?restype=container&lt;amp&gt;comp=list&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#CubeSourceDataFile&lt;solidus&gt;coast&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;params&lt;space&gt;=&lt;space&gt;&lt;opencurly&gt;&lt;apos&gt;delimiter&lt;apos&gt;&lt;space&gt;:&lt;space&gt;delimiter&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;list&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;restype&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;container&lt;apos&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;prefix:&lt;space&gt;params&lt;openbracket&gt;&lt;apos&gt;prefix&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;prefix&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;params&lt;space&gt;=&lt;space&gt;OrderedDict&lt;openparen&gt;sorted&lt;openparen&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;key=lambda&lt;space&gt;t:&lt;space&gt;t&lt;openbracket&gt;0&lt;closebracket&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;querystring&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;amp&gt;&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;t:&lt;space&gt;&lt;apos&gt;&lt;opencurly&gt;&lt;closecurly&gt;=&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;*t&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;t:&lt;space&gt;&lt;apos&gt;&lt;opencurly&gt;&lt;closecurly&gt;:&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;*t&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s?%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;querystring&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;querystringencoded&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;GET&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;&lt;apos&gt;Listing&lt;space&gt;blobs&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;self.session.get&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;200:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;root&lt;space&gt;=&lt;space&gt;ElementTree.fromstring&lt;openparen&gt;r.content.decode&lt;openparen&gt;&lt;apos&gt;utf-8-sig&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;blobprefix&lt;space&gt;in&lt;space&gt;root.iter&lt;openparen&gt;&lt;apos&gt;BlobPrefix&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;buf&lt;space&gt;=&lt;space&gt;StringIO&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ElementTree.ElementTree&lt;openparen&gt;blobprefix&lt;closeparen&gt;.write&lt;openparen&gt;buf&lt;comma&gt;&lt;space&gt;encoding=&lt;apos&gt;utf8&lt;apos&gt;&lt;comma&gt;&lt;space&gt;xml_declaration=False&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;&lt;apos&gt;BlobPrefix&lt;apos&gt;&lt;comma&gt;&lt;space&gt;prefix&lt;comma&gt;&lt;space&gt;buf.getvalue&lt;openparen&gt;&lt;closeparen&gt;.decode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;recursive:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;returntype&lt;comma&gt;&lt;space&gt;used_prefix&lt;comma&gt;&lt;space&gt;blob&lt;space&gt;in&lt;space&gt;self.list_blobs&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;prefix=blobprefix.findtext&lt;openparen&gt;&lt;apos&gt;Name&lt;apos&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;delimiter=delimiter&lt;comma&gt;recursive=True&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;returntype&lt;comma&gt;&lt;space&gt;used_prefix&lt;comma&gt;&lt;space&gt;blob&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;blob&lt;space&gt;in&lt;space&gt;root.iter&lt;openparen&gt;&lt;apos&gt;Blob&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;buf&lt;space&gt;=&lt;space&gt;StringIO&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ElementTree.ElementTree&lt;openparen&gt;blob&lt;closeparen&gt;.write&lt;openparen&gt;buf&lt;comma&gt;&lt;space&gt;encoding=&lt;apos&gt;utf8&lt;apos&gt;&lt;comma&gt;&lt;space&gt;xml_declaration=False&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;&lt;apos&gt;Blob&lt;apos&gt;&lt;comma&gt;&lt;space&gt;prefix&lt;comma&gt;&lt;space&gt;buf.getvalue&lt;openparen&gt;&lt;closeparen&gt;.decode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_authorize&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;headers&lt;comma&gt;&lt;space&gt;container_name&lt;comma&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;None&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;None&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;PUT&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;content_length&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Content-Length&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;!=&lt;space&gt;&lt;apos&gt;0&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;content_length&lt;space&gt;=&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Content-Length&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;http_method&lt;space&gt;#&lt;space&gt;VERB&lt;space&gt;&lt;openparen&gt;http-method&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-Encoding&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-Language&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;content_length&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-MD5&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Date&lt;apos&gt;&lt;comma&gt;&lt;apos&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;Date&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-Modified-Since&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-None-Match&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-Unmodified-Since&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Range&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;?&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;?&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;comma&gt;&lt;space&gt;None&lt;closeparen&gt;:&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-date:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-date&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-range&lt;apos&gt;&lt;comma&gt;&lt;space&gt;None&lt;closeparen&gt;:&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-range:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-range&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-version:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;blob_name:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container_name&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;querystringencoded:&lt;space&gt;fields.append&lt;openparen&gt;querystringencoded&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;.join&lt;openparen&gt;fields&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;signature&lt;space&gt;=&lt;space&gt;AzureAPI._sign_string&lt;openparen&gt;self.secret&lt;space&gt;&lt;comma&gt;&lt;space&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;Authorization&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;SharedKey&lt;space&gt;%s:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;signature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;_string_to_sign&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_create_headers&lt;openparen&gt;data&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;comma&gt;&lt;space&gt;xtra_headers=&lt;opencurly&gt;&lt;closecurly&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;&lt;opencurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;Content-Length&lt;apos&gt;:&lt;space&gt;str&lt;openparen&gt;len&lt;openparen&gt;data&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-date&lt;apos&gt;:&lt;space&gt;AzureAPI._httpdate&lt;openparen&gt;datetime.datetime.utcnow&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;:&lt;space&gt;AZ_VERSION&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers.update&lt;openparen&gt;xtra_headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;OrderedDict&lt;openparen&gt;sorted&lt;openparen&gt;headers.items&lt;openparen&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;key=lambda&lt;space&gt;t:&lt;space&gt;t&lt;openbracket&gt;0&lt;closebracket&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_httpdate&lt;openparen&gt;dt&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;Return&lt;space&gt;a&lt;space&gt;string&lt;space&gt;representation&lt;space&gt;of&lt;space&gt;a&lt;space&gt;date&lt;space&gt;according&lt;space&gt;to&lt;space&gt;RFC&lt;space&gt;1123&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;openparen&gt;HTTP&lt;solidus&gt;1.1&lt;closeparen&gt;.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;The&lt;space&gt;supplied&lt;space&gt;date&lt;space&gt;must&lt;space&gt;be&lt;space&gt;in&lt;space&gt;UTC.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;weekday&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;quote&gt;Mon&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Tue&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Wed&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Thu&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Fri&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sat&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sun&lt;quote&gt;&lt;closebracket&gt;&lt;openbracket&gt;dt.weekday&lt;openparen&gt;&lt;closeparen&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;month&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;quote&gt;Jan&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Feb&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Mar&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Apr&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;May&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Jun&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Jul&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Aug&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sep&lt;quote&gt;&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;Oct&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Nov&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Dec&lt;quote&gt;&lt;closebracket&gt;&lt;openbracket&gt;dt.month&lt;space&gt;-&lt;space&gt;1&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;&lt;quote&gt;%s&lt;comma&gt;&lt;space&gt;%02d&lt;space&gt;%s&lt;space&gt;%04d&lt;space&gt;%02d:%02d:%02d&lt;space&gt;GMT&lt;quote&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;weekday&lt;comma&gt;&lt;space&gt;dt.day&lt;comma&gt;&lt;space&gt;month&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;dt.year&lt;comma&gt;&lt;space&gt;dt.hour&lt;comma&gt;&lt;space&gt;dt.minute&lt;comma&gt;&lt;space&gt;dt.second&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_encode_base64&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;encoded&lt;space&gt;=&lt;space&gt;base64.b64encode&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;encoded.decode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_decode_base64_to_bytes&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;base64.b64decode&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_sign_string&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;string_to_sign&lt;comma&gt;&lt;space&gt;key_is_base64=True&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;key_is_base64:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;key&lt;space&gt;=&lt;space&gt;AzureAPI._decode_base64_to_bytes&lt;openparen&gt;key&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;key&lt;space&gt;=&lt;space&gt;key.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;string_to_sign&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;string_to_sign&lt;space&gt;=&lt;space&gt;string_to_sign.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;signed_hmac_sha256&lt;space&gt;=&lt;space&gt;hmac.HMAC&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;string_to_sign&lt;comma&gt;&lt;space&gt;hashlib.sha256&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;digest&lt;space&gt;=&lt;space&gt;signed_hmac_sha256.digest&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;encoded_digest&lt;space&gt;=&lt;space&gt;AzureAPI._encode_base64&lt;openparen&gt;digest&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;encoded_digest&lt;lf&gt;"/>
#!     <XFORM_PARM PARM_NAME="PYTHONSYMBOL" PARM_VALUE="DownloadFeatureProcessor"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="PythonCaller"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="8"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="3102.1599999999999 -118.501"
#!   BOUNDING_RECT="3102.1599999999999 -118.501 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.content_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.content_length" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.md5" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.last_modified" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.blob_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_azure_blob_downloader_storage_account,_azure_blob_downloader_container,_azure_blob_downloader_key,_azure_blob_downloader_status,_azure_blob_downloader_blob_name"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="32"
#!   TYPE="AttributeFilter"
#!   VERSION="5"
#!   POSITION="1833.3900000000001 -118.501"
#!   BOUNDING_RECT="1833.3900000000001 -118.501 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="initiator_success"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="&lt;lt&gt;EMPTY&lt;gt&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_status" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <OUTPUT_FEAT NAME="&lt;lt&gt;MISSING&lt;gt&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="2"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_status" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <OUTPUT_FEAT NAME="&lt;lt&gt;NULL&lt;gt&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="3"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_status" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <OUTPUT_FEAT NAME="&lt;lt&gt;UNFILTERED&lt;gt&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="4"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_status" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_PARM PARM_NAME="ATTR_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTR_NAME" PARM_VALUE="_azure_blob_downloader_status"/>
#!     <XFORM_PARM PARM_NAME="ATTR_VALUES" PARM_VALUE="initiator_success,&lt;lt&gt;EMPTY&lt;gt&gt;,&lt;lt&gt;MISSING&lt;gt&gt;,&lt;lt&gt;NULL&lt;gt&gt;,&lt;lt&gt;UNFILTERED&lt;gt&gt;"/>
#!     <XFORM_PARM PARM_NAME="ATTR_VALUES_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeFilter"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="25"
#!   TYPE="Logger"
#!   VERSION="3"
#!   POSITION="2478.02 -358.50099999999998"
#!   BOUNDING_RECT="2478.02 -358.50099999999998 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="LOGGED"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="FEATURE_TYPE" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="MAXCOORDS" PARM_VALUE="20"/>
#!     <XFORM_PARM PARM_NAME="MAXFEATS" PARM_VALUE="20"/>
#!     <XFORM_PARM PARM_NAME="MESSAGE" PARM_VALUE="Feature is:"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeFilter__Unfiltered_"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="17"
#!   TYPE="AttributeExposer"
#!   VERSION="0"
#!   POSITION="2399.02 -118.501"
#!   BOUNDING_RECT="2399.02 -118.501 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.content_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.content_length" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.md5" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.last_modified" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="blob.blob_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="ATTR_LIST" PARM_VALUE="blob.content_type,blob.content_length,blob.md5,blob.last_modified,blob.blob_type"/>
#!     <XFORM_PARM PARM_NAME="ATTR_LIST_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeExposer"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="22"
#!   TYPE="PythonCaller"
#!   VERSION="4"
#!   POSITION="-116.68899999999999 -87.751599999999996"
#!   BOUNDING_RECT="-116.68899999999999 -87.751599999999996 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="ADVANCED_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="HIDE_ATTRIBUTES" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NEW_ATTRIBUTES" PARM_VALUE="_azure_blob_downloader_filepath_isdir _pathseperator"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PYTHONSOURCE" PARM_VALUE="import&lt;space&gt;fme&lt;lf&gt;import&lt;space&gt;fmeobjects&lt;lf&gt;import&lt;space&gt;os&lt;lf&gt;#&lt;space&gt;Template&lt;space&gt;Function&lt;space&gt;interface:&lt;lf&gt;#&lt;space&gt;When&lt;space&gt;using&lt;space&gt;this&lt;space&gt;function&lt;comma&gt;&lt;space&gt;make&lt;space&gt;sure&lt;space&gt;its&lt;space&gt;name&lt;space&gt;is&lt;space&gt;set&lt;space&gt;as&lt;space&gt;the&lt;space&gt;value&lt;space&gt;of&lt;lf&gt;#&lt;space&gt;the&lt;space&gt;&lt;apos&gt;Class&lt;space&gt;or&lt;space&gt;Function&lt;space&gt;to&lt;space&gt;Process&lt;space&gt;Features&lt;apos&gt;&lt;space&gt;transformer&lt;space&gt;parameter&lt;lf&gt;def&lt;space&gt;processFeature&lt;openparen&gt;feature&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;pass&lt;lf&gt;&lt;lf&gt;#&lt;space&gt;Template&lt;space&gt;Class&lt;space&gt;Interface:&lt;lf&gt;#&lt;space&gt;When&lt;space&gt;using&lt;space&gt;this&lt;space&gt;class&lt;comma&gt;&lt;space&gt;make&lt;space&gt;sure&lt;space&gt;its&lt;space&gt;name&lt;space&gt;is&lt;space&gt;set&lt;space&gt;as&lt;space&gt;the&lt;space&gt;value&lt;space&gt;of&lt;lf&gt;#&lt;space&gt;the&lt;space&gt;&lt;apos&gt;Class&lt;space&gt;or&lt;space&gt;Function&lt;space&gt;to&lt;space&gt;Process&lt;space&gt;Features&lt;apos&gt;&lt;space&gt;transformer&lt;space&gt;parameter&lt;lf&gt;class&lt;space&gt;FeatureProcessor&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;pass&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;input&lt;openparen&gt;self&lt;comma&gt;feature&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_azure_blob_downloader_filepath&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;quote&gt;_azure_blob_downloader_filepath&lt;quote&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;os.path.isdir&lt;openparen&gt;_azure_blob_downloader_filepath&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_azure_blob_downloader_filepath_isdir&lt;space&gt;=&lt;space&gt;1&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_azure_blob_downloader_filepath_isdir&lt;space&gt;=&lt;space&gt;0&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_downloader_filepath_isdir&lt;apos&gt;&lt;comma&gt;_azure_blob_downloader_filepath_isdir&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;check&lt;space&gt;if&lt;space&gt;we&lt;space&gt;use&lt;space&gt;&lt;solidus&gt;&lt;space&gt;or&lt;space&gt;&lt;backslash&gt;&lt;space&gt;inside&lt;space&gt;the&lt;space&gt;path&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;_azure_blob_downloader_filepath.find&lt;openparen&gt;&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;&lt;gt&gt;&lt;space&gt;0:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_pathseperator&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;_azure_blob_downloader_filepath.find&lt;openparen&gt;&lt;apos&gt;&lt;backslash&gt;&lt;backslash&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;&lt;gt&gt;&lt;space&gt;0:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_pathseperator&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;&lt;backslash&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_pathseperator&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_pathseperator&lt;apos&gt;&lt;comma&gt;_pathseperator&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.pyoutput&lt;openparen&gt;feature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;close&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;pass"/>
#!     <XFORM_PARM PARM_NAME="PYTHONSYMBOL" PARM_VALUE="FeatureProcessor"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="PythonCaller_2"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="23"
#!   TYPE="TestFilter"
#!   VERSION="1"
#!   POSITION="-116.68899999999999 -301.87700000000001"
#!   BOUNDING_RECT="-116.68899999999999 -301.87700000000001 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="IsAFolder"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="&lt;lt&gt;UNFILTERED&lt;gt&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_PARM PARM_NAME="DEFAULT_VALUE" PARM_VALUE="&lt;lt&gt;UNFILTERED&lt;gt&gt;"/>
#!     <XFORM_PARM PARM_NAME="TESTLISTGRP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TEST_LIST" PARM_VALUE="BOOL_OP&lt;comma&gt;OR&lt;comma&gt;COMPOSITE_TEST&lt;comma&gt;&lt;lt&gt;Unused&lt;gt&gt;&lt;comma&gt;TEST_CLAUSE&lt;comma&gt;&lt;quote&gt;TEST&lt;space&gt;&lt;lt&gt;at&lt;gt&gt;Value&lt;lt&gt;openparen&lt;gt&gt;_azure_blob_downloader_filepath_isdir&lt;lt&gt;closeparen&lt;gt&gt;&lt;space&gt;=&lt;space&gt;1&lt;quote&gt;,IsAFolder"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="TestFilter"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="24"
#!   TYPE="FilenamePartExtractor"
#!   VERSION="3"
#!   POSITION="510.44200000000001 83.124399999999994"
#!   BOUNDING_RECT="510.44200000000001 83.124399999999994 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_filename" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="DIRNAME_ATTR" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="DIRPATH_ATTR" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="EXTENSION_ATTR" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="FULLNAME_ATTR" PARM_VALUE="_filename"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ROOTNAME_ATTR" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="SRC_ATTR" PARM_VALUE="&lt;at&gt;Value&lt;openparen&gt;_azure_blob_downloader_blob_name&lt;closeparen&gt;"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="FilenamePartExtractor"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="26"
#!   TYPE="AttributeCreator"
#!   VERSION="8"
#!   POSITION="510.44200000000001 -87.751599999999996"
#!   BOUNDING_RECT="510.44200000000001 -87.751599999999996 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_filename" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_GRP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_HANDLING" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTR_TABLE" PARM_VALUE="&quot;&quot; _azure_blob_downloader_filepath SET_TO &lt;at&gt;Value&lt;openparen&gt;_azure_blob_downloader_filepath&lt;closeparen&gt;&lt;at&gt;Value&lt;openparen&gt;_pathseperator&lt;closeparen&gt;&lt;at&gt;Value&lt;openparen&gt;_filename&lt;closeparen&gt;"/>
#!     <XFORM_PARM PARM_NAME="MULTI_FEATURE_MODE" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_MODE_DISPLAY" PARM_VALUE="No Substitution"/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_VALUE" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="NUM_PRIOR_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="NUM_SUBSEQUENT_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeCreator"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="30"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="510.44200000000001 -252.501"
#!   BOUNDING_RECT="510.44200000000001 -252.501 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_downloader_filepath_isdir" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_pathseperator" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_filename"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover_2"/>
#! </TRANSFORMER>
#! </TRANSFORMERS>
#! <SUBDOCUMENT_IOS>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="2"
#!   NAME="Input"
#!   POSITION="-1901.77 -77.875600000000006"
#!   BOUNDING_RECT="-1901.77 -77.875600000000006 431 71"
#!   COLLAPSED="true"
#!   PUBLISHED="true"
#!   IS_SOURCE="true"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="6"
#!   NAME="Output"
#!   POSITION="3652.1599999999999 -118.501"
#!   BOUNDING_RECT="3652.1599999999999 -118.501 431 71"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="20"
#!   NAME="Rejected"
#!   POSITION="3652.1599999999999 -418.50099999999998"
#!   BOUNDING_RECT="3652.1599999999999 -418.50099999999998 431 71"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! </SUBDOCUMENT_IOS>
#! <FEAT_LINKS>
#! <FEAT_LINK
#!   IDENTIFIER="3"
#!   SOURCE_NODE="2"
#!   TARGET_NODE="1"
#!   SOURCE_PORT_DESC="0"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="38"
#!   SOURCE_NODE="1"
#!   TARGET_NODE="22"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="33"
#!   SOURCE_NODE="4"
#!   TARGET_NODE="32"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="10"
#!   SOURCE_NODE="8"
#!   TARGET_NODE="6"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="19"
#!   SOURCE_NODE="17"
#!   TARGET_NODE="8"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="31"
#!   SOURCE_NODE="22"
#!   TARGET_NODE="23"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="37"
#!   SOURCE_NODE="23"
#!   TARGET_NODE="24"
#!   SOURCE_PORT_DESC="fo 0 IsAFolder"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="35"
#!   SOURCE_NODE="24"
#!   TARGET_NODE="26"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="21"
#!   SOURCE_NODE="25"
#!   TARGET_NODE="20"
#!   SOURCE_PORT_DESC="fo 0 LOGGED"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="36"
#!   SOURCE_NODE="26"
#!   TARGET_NODE="30"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="5"
#!   SOURCE_NODE="30"
#!   TARGET_NODE="4"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="18"
#!   SOURCE_NODE="32"
#!   TARGET_NODE="17"
#!   SOURCE_PORT_DESC="fo 0 initiator_success"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="40"
#!   SOURCE_NODE="23"
#!   TARGET_NODE="4"
#!   SOURCE_PORT_DESC="fo 1 &lt;lt&gt;lt&lt;gt&gt;UNFILTERED&lt;lt&gt;gt&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS="1125 -462"
#! />
#! <FEAT_LINK
#!   IDENTIFIER="34"
#!   SOURCE_NODE="32"
#!   TARGET_NODE="25"
#!   SOURCE_PORT_DESC="fo 1 &lt;lt&gt;lt&lt;gt&gt;EMPTY&lt;lt&gt;gt&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="29"
#!   SOURCE_NODE="32"
#!   TARGET_NODE="25"
#!   SOURCE_PORT_DESC="fo 2 &lt;lt&gt;lt&lt;gt&gt;MISSING&lt;lt&gt;gt&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="28"
#!   SOURCE_NODE="32"
#!   TARGET_NODE="25"
#!   SOURCE_PORT_DESC="fo 3 &lt;lt&gt;lt&lt;gt&gt;NULL&lt;lt&gt;gt&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="27"
#!   SOURCE_NODE="32"
#!   TARGET_NODE="25"
#!   SOURCE_PORT_DESC="fo 4 &lt;lt&gt;lt&lt;gt&gt;UNFILTERED&lt;lt&gt;gt&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! </FEAT_LINKS>
#! <BREAKPOINTS>
#! </BREAKPOINTS>
#! <ATTR_LINKS>
#! </ATTR_LINKS>
#! <SUBDOCUMENTS>
#! </SUBDOCUMENTS>
#! <LOOKUP_TABLES>
#! </LOOKUP_TABLES>
#! </TRANSFORMER>

FME_PYTHON_VERSION 36
DEFAULT_MACRO $(AzureBlobDownloader_WORKSPACE_NAME)_ACCOUNT 
DEFAULT_MACRO $(AzureBlobDownloader_WORKSPACE_NAME)_KEY 
DEFAULT_MACRO $(AzureBlobDownloader_WORKSPACE_NAME)_CONTAINER 
DEFAULT_MACRO $(AzureBlobDownloader_WORKSPACE_NAME)_BLOB_NAME 
DEFAULT_MACRO $(AzureBlobDownloader_WORKSPACE_NAME)_TARGET_FILEPATH 
#! START_HEADER
#! END_HEADER

DEFAULT_MACRO WB_CURRENT_CONTEXT
DEFAULT_MACRO AzureBlobDownloader_WORKSPACE_NAME ""
INCLUDE [puts {MACRO WB_OLD_CONTEXT_$(AzureBlobDownloader_WORKSPACE_NAME) $(WB_CURRENT_CONTEXT)};          puts {MACRO WB_CURRENT_CONTEXT $(AzureBlobDownloader_WORKSPACE_NAME)}]
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDownloader_WORKSPACE_NAME)_Input1571045944 Input Splitter"   INPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_Input"   OUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_Input"
# -------------------------------------------------------------------------
FACTORY_DEF {*} AttrSetFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_FetchParamsAttributeCreator_2    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_Input"    MULTI_FEATURE_MODE NO    NULL_ATTR_MODE NO_OP     ATTRSET_CREATE_DIRECTIVES _PROPAGATE_MISSING_FDIV     ATTR_ACTION { "" "_azure_blob_downloader_storage_account" "SET_TO" "$($(AzureBlobDownloader_WORKSPACE_NAME)_ACCOUNT)" }      ATTR_ACTION { "" "_azure_blob_downloader_key" "SET_TO" "$($(AzureBlobDownloader_WORKSPACE_NAME)_KEY$encode)" }      ATTR_ACTION { "" "_azure_blob_downloader_container" "SET_TO" "$($(AzureBlobDownloader_WORKSPACE_NAME)_CONTAINER)" }      ATTR_ACTION { "" "_azure_blob_downloader_blob_name" "SET_TO" "$($(AzureBlobDownloader_WORKSPACE_NAME)_BLOB_NAME)" }      ATTR_ACTION { "" "_azure_blob_downloader_filepath" "SET_TO" "$($(AzureBlobDownloader_WORKSPACE_NAME)_TARGET_FILEPATH$encode)" }    OUTPUT OUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_FetchParamsAttributeCreator_2_OUTPUT"
# -------------------------------------------------------------------------
FME_PYTHON_PATH "$(FME_MF_DIR)"
FACTORY_DEF * PythonFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_PythonCaller_2    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_FetchParamsAttributeCreator_2_OUTPUT"    SYMBOL_NAME FeatureProcessor    PYTHON_NAMESPACE FMEOBJECTS    SOURCE_CODE import<space>fme<lf>import<space>fmeobjects<lf>import<space>os<lf>#<space>Template<space>Function<space>interface:<lf>#<space>When<space>using<space>this<space>function<comma><space>make<space>sure<space>its<space>name<space>is<space>set<space>as<space>the<space>value<space>of<lf>#<space>the<space><apos>Class<space>or<space>Function<space>to<space>Process<space>Features<apos><space>transformer<space>parameter<lf>def<space>processFeature<openparen>feature<closeparen>:<lf><space><space><space><space>pass<lf><lf>#<space>Template<space>Class<space>Interface:<lf>#<space>When<space>using<space>this<space>class<comma><space>make<space>sure<space>its<space>name<space>is<space>set<space>as<space>the<space>value<space>of<lf>#<space>the<space><apos>Class<space>or<space>Function<space>to<space>Process<space>Features<apos><space>transformer<space>parameter<lf>class<space>FeatureProcessor<openparen>object<closeparen>:<lf><space><space><space><space>def<space>__init__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>pass<lf><space><space><space><space>def<space>input<openparen>self<comma>feature<closeparen>:<lf><space><space><space><space><space><space><space><space>_azure_blob_downloader_filepath<space>=<space>feature.getAttribute<openparen><quote>_azure_blob_downloader_filepath<quote><closeparen><lf><space><space><space><space><space><space><space><space>if<space>os.path.isdir<openparen>_azure_blob_downloader_filepath<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space>_azure_blob_downloader_filepath_isdir<space>=<space>1<lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space>_azure_blob_downloader_filepath_isdir<space>=<space>0<lf><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_downloader_filepath_isdir<apos><comma>_azure_blob_downloader_filepath_isdir<closeparen><lf><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space>#<space>check<space>if<space>we<space>use<space><solidus><space>or<space><backslash><space>inside<space>the<space>path<lf><space><space><space><space><space><space><space><space>if<space>_azure_blob_downloader_filepath.find<openparen><apos><solidus><apos><closeparen><space><gt><space>0:<lf><space><space><space><space><space><space><space><space><space><space><space><space>_pathseperator<space>=<space><apos><solidus><apos><lf><space><space><space><space><space><space><space><space>else:<space><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>_azure_blob_downloader_filepath.find<openparen><apos><backslash><backslash><apos><closeparen><space><gt><space>0:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>_pathseperator<space>=<space><apos><backslash><backslash><apos><lf><space><space><space><space><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>_pathseperator<space>=<space><apos><solidus><apos><lf><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_pathseperator<apos><comma>_pathseperator<closeparen><lf><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space>self.pyoutput<openparen>feature<closeparen><lf><space><space><space><space>def<space>close<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>pass    OUTPUT PYOUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_PythonCaller_2_OUTPUT"
# -------------------------------------------------------------------------
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_PythonCaller_2_OUTPUT"    OUTPUT FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_TESTFILTERINPUTLINE_0
FACTORY_DEF * TestFactory FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_Condition_1 INPUT FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_TESTFILTERINPUTLINE_0 TEST @EvaluateExpression(FDIV,STRING_ENCODED,<at>Value<openparen>_azure_blob_downloader_filepath_isdir<closeparen>,$(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter) = 1 ENCODED BOOLEAN_OPERATOR OR COMPOSITE_TEST_EXPR <Unused> OUTPUT PASSED FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_IsAFolder OUTPUT FAILED FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_TESTFILTERINPUTLINE_1
FACTORY_DEF * TeeFactory FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_<lt>UNFILTERED<gt> INPUT FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_TESTFILTERINPUTLINE_1 OUTPUT FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_<lt>UNFILTERED<gt>
# -------------------------------------------------------------------------
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_FilenamePartExtractor    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_IsAFolder"    OUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_FilenamePartExtractor_OUTPUT"         @SupplyAttributes("_filename",@Filenamepart(ENCODED,FILENAME,"@EvaluateExpression(FDIV,STRING_ENCODED,<at>Value<openparen>_azure_blob_downloader_blob_name<closeparen>,$(AzureBlobDownloader_WORKSPACE_NAME)_FilenamePartExtractor)"))
# -------------------------------------------------------------------------
FACTORY_DEF {*} AttrSetFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeCreator    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_FilenamePartExtractor_OUTPUT"    MULTI_FEATURE_MODE NO    NULL_ATTR_MODE NO_OP     ATTRSET_CREATE_DIRECTIVES _PROPAGATE_MISSING_FDIV     ATTR_ACTION { "" "_azure_blob_downloader_filepath" "SET_TO" "<at>Value<openparen>_azure_blob_downloader_filepath<closeparen><at>Value<openparen>_pathseperator<closeparen><at>Value<openparen>_filename<closeparen>" }    OUTPUT OUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeCreator_OUTPUT"
# -------------------------------------------------------------------------
INCLUDE [    set macroLine "MACRO $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF {*} TeeFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover_2    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeCreator_OUTPUT"    OUTPUT { FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"        @RemoveAttributes(fme_encoded,_filename)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP)")         }
# -------------------------------------------------------------------------
FME_PYTHON_PATH "$(FME_MF_DIR)"
FACTORY_DEF * PythonFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_PythonCaller    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_TestFilter_<lt>UNFILTERED<gt>"    SYMBOL_NAME DownloadFeatureProcessor    PYTHON_NAMESPACE FMEOBJECTS    SOURCE_CODE from<space>fmeobjects<space>import<space>FMELogFile<comma><space>FME_ERROR<comma><space>FME_INFORM<lf><lf>class<space>DownloadFeatureProcessor<openparen>object<closeparen>:<lf><space><space><space><space>def<space>__init__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile<space>=<space>FMELogFile<openparen><closeparen><lf><space><space><space><space><space><space><space><space>#<space>Make<space>sure<space>to<space>change<space>if<space>Custom<space>transformer<space>is<space>renamed<space><openparen>not<space>transformer<space>instance<space>name<space>-<space>that<apos>s<space>what<space>we<apos>re<space>fetching<closeparen><space><lf><space><space><space><space><space><space><space><space>self.xformer_name<space>=<space>FME_MacroValues<openbracket><apos>AzureBlobDownloader_WORKSPACE_NAME<apos><closebracket><lf><space><space><space><space>def<space>info<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_INFORM<closeparen><lf><space><space><space><space><space><space><space><space>#self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_WARN<closeparen><space>#<space>while<space>developing<space>for<space>popping<space>out<lf><space><space><space><space>def<space>debug<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s<space><openparen>DEBUG<closeparen>:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_WARN<closeparen><space>#<space>while<space>developing<space>for<space>popping<space>out<lf><space><space><space><space>def<space>input<openparen>self<comma>feature<closeparen>:<lf><space><space><space><space><space><space><space><space>try:<lf><space><space><space><space><space><space><space><space><space><space><space><space>account<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_downloader_storage_account<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>secret<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_downloader_key<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>blob_name<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_downloader_blob_name<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>container<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_downloader_container<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>target_filepath<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_downloader_filepath<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Downloading<space>blob<space><opencurly><closecurly><space>to<space>file<space><opencurly><closecurly><apos>.format<openparen>blob_name<comma><space>target_filepath<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>with<space>AzureAPI<openparen>account<comma><space>secret<comma><space>self.logfile<comma><space>logprefix<space>=<space>self.xformer_name<comma><space>loglevel<space>=<space>FME_INFORM<closeparen><space>as<space>azure:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>last_mod<comma><space>blob_type<comma><space>content_length<comma><space>content_type<comma><space>content_md5<comma><space>accept_ranges<comma><space>committed_block_count<comma><space>=<space>azure.download_blob<openparen>container<comma>blob_name=blob_name<comma>target_filepath=target_filepath<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>blob.last_modified<apos><comma><space>last_mod<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>blob.blob_type<apos><comma><space>blob_type<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>blob.content_length<apos><comma><space>content_length<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>blob.content_type<apos><comma><space>content_type<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>if<space>content_md5:<space>feature.setAttribute<openparen><apos>blob.md5<apos><comma><space>content_md5<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_downloader_status<apos><comma><space><apos>initiator_success<apos><closeparen><lf><space><space><space><space><space><space><space><space>except<space>Exception<space>as<space>e:<lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_downloader_status<apos><comma><space><apos>initiator_fail<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_downloader_error_message<apos><comma><space>str<openparen>e<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.logfile.logException<openparen>e<comma><space>FME_ERROR<closeparen><lf><space><space><space><space><space><space><space><space>self.pyoutput<openparen>feature<closeparen><lf><space><space><space><space>def<space>close<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>del<space>self.logfile<lf>#<space>common<space>api<space>below<lf>import<space>os<lf>import<space>os.path<lf>import<space>requests<lf>from<space>collections<space>import<space>OrderedDict<lf>import<space>datetime<lf>from<space>xml.etree<space>import<space>ElementTree<lf>from<space>cStringIO<space>import<space>StringIO<lf>from<space>Queue<space>import<space>Queue<lf>from<space>threading<space>import<space>Thread<lf>import<space>io<lf><lf>import<space>base64<lf>import<space>uuid<lf>import<space>hashlib<lf>import<space>hmac<lf>import<space>sys<lf><lf>PUT_BLOB_LIMIT<space>=<space>1024<space>*<space>1024<space>*<space>64<space><space><space><space><space><space>#<space>64<space>MB<lf>PUT_BLOCK_CHUNK_SIZE<space>=<space>1024<space>*<space>1024<space>*<space>4<space>#<space>4<space>MB<lf>AZ_VERSION<space>=<space><apos>2015-02-21<apos><lf><lf>class<space>StdoutLogger<openparen>object<closeparen>:<lf><space><space><space><space><apos><apos><apos><lf><space><space><space><space>simple<space>log<space>class<space>to<space>mimic<space>fme<space>api<lf><space><space><space><space><apos><apos><apos><lf><space><space><space><space>def<space>logMessageString<openparen>self<comma><space>msg<comma><space>level<space>=<space>0<closeparen>:<lf><space><space><space><space><space><space><space><space>print<space>msg<lf><space><space><space><space>def<space>logException<openparen>self<comma><space>e<comma><space>level<space>=<space>0<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logMessageString<openparen>str<openparen>e<closeparen><comma><space>level<closeparen><lf>class<space>AzureAPI<openparen>object<closeparen>:<lf><space><space><space><space>if<space>sys.version_info<space><lt><space><openparen>3<comma><closeparen>:<lf><space><space><space><space><space><space><space><space>from<space>collections<space>import<space>Iterable<lf><space><space><space><space><space><space><space><space>_unicode_type<space>=<space>unicode<lf><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space>from<space>collections.abc<space>import<space>Iterable<space>#<space>TODO:<space>this<space>code<space>was<space>found<space>somewhere<space>but<space>its<space>logic<space>is<space>not<space>clear<space>to<space>me...<space><lf><space><space><space><space><space><space><space><space>_unicode_type<space>=<space>str<lf><space><space><space><space>def<space>__init__<openparen>self<comma><space>account<comma><space>secret<comma><space>logfile<space>=<space>StdoutLogger<openparen><closeparen><comma><space>logprefix<space>=<space><apos><apos><comma><space>loglevel<space>=<space>0<comma><space>session<space>=<space>requests.Session<openparen><closeparen><closeparen>:<lf><space><space><space><space><space><space><space><space>self.session<space>=<space>session<lf><space><space><space><space><space><space><space><space>self.logfile<space>=<space>logfile<space><lf><space><space><space><space><space><space><space><space>self.logprefix<space>=<space>logprefix<lf><space><space><space><space><space><space><space><space>self.loglevel<space>=<space>loglevel<lf><space><space><space><space><space><space><space><space>self.account<space>=<space>account<lf><space><space><space><space><space><space><space><space>self.secret<space>=<space>secret<lf><space><space><space><space>def<space>__enter__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>return<space>self<lf><space><space><space><space>def<space>__exit__<openparen>self<comma><space>type<comma><space>value<comma><space>traceback<closeparen>:<lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Closing<space>Azure<space>Connection<apos><closeparen><lf><space><space><space><space><space><space><space><space>del<space>self.logfile<lf><space><space><space><space><space><space><space><space>del<space>self.session<lf><space><space><space><space><space><space><space><space>return<space>isinstance<openparen>value<comma><space>Exception<closeparen><lf><space><space><space><space>def<space>info<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.logprefix<comma><space>message<closeparen><comma><space>self.loglevel<closeparen><lf><space><space><space><space>def<space>append_block<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_data<closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>block_data<closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=appendblock<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Appending<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>comp:appendblock<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data<space>=<space>block_data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>ERROR<space>status<space>%s:<space>`%s`<apos><space>%<space><openparen>r.status_code<comma><space>_string_to_sign<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space>def<space>put_block<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_data<closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>block_data<closeparen><lf><space><space><space><space><space><space><space><space>headers<openbracket><apos>x-ms-blob-type<apos><closebracket><space>=<space><apos>BlockBlob<apos><lf><space><space><space><space><space><space><space><space>block_id<space>=<space>base64.b64encode<openparen>uuid.uuid4<openparen><closeparen>.hex<closeparen><lf><space><space><space><space><space><space><space><space>#https:<solidus><solidus>myaccount.blob.core.windows.net<solidus>mycontainer<solidus>myblob?comp=block<amp>blockid=id<lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=block<amp>blockid=%s<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<comma><space>block_id<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>block<space>of<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>blockid:%s<backslash>ncomp:block<apos><space>%<space>block_id<closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=block_data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>return<space>block_id<lf><space><space><space><space>def<space>put_block_list<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_list<closeparen>:<lf><space><space><space><space><space><space><space><space>list_fragments<space>=<space><apos><apos>.join<openparen>map<openparen>lambda<space>s:<space><apos><lt>Uncommitted<gt><opencurly><closecurly><lt><solidus>Uncommitted<gt><apos>.format<openparen>s<closeparen><comma><space>block_list<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>data<space>=<space><apos><lt>?xml<space>version=<quote>1.0<quote><space>encoding=<quote>utf-8<quote>?<gt><lt>BlockList<gt><opencurly><closecurly><lt><solidus>BlockList<gt><apos>.format<openparen>list_fragments<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=blocklist<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>comp:blocklist<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space>def<space>put_blob<openparen>self<comma><space>container<comma><space>blob_name<comma><space>fin<closeparen>:<lf><space><space><space><space><space><space><space><space>fin.seek<openparen>0<comma><space>os.SEEK_END<closeparen><lf><space><space><space><space><space><space><space><space>size<space>=<space>fin.tell<openparen><closeparen><lf><space><space><space><space><space><space><space><space>fin.seek<openparen>0<comma><space>os.SEEK_SET<closeparen><lf><space><space><space><space><space><space><space><space>if<space>size<space><lt><space>PUT_BLOB_LIMIT:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>fin.read<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<openbracket><apos>x-ms-blob-type<apos><closebracket><space>=<space><apos>BlockBlob<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>ids<space>=<space><openbracket><closebracket><lf><space><space><space><space><space><space><space><space><space><space><space><space>for<space>offset<space>in<space>range<openparen>0<comma><space>size<comma><space>PUT_BLOCK_CHUNK_SIZE<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>`%s`<comma><space>%s%%<apos><space>%<space><openparen>blob_name<comma><space>int<openparen>round<openparen>offset<space>*<space>100<space><solidus><space>size<closeparen><closeparen><space><closeparen><space><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>block_size<space>=<space>min<openparen>PUT_BLOCK_CHUNK_SIZE<comma><space>size<space>-<space>offset<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>ids.append<openparen>self.put_block<openparen>container<comma><space>blob_name<comma><space>fin.read<openparen>block_size<closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.put_block_list<openparen>container<comma><space>blob_name<comma><space>ids<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>#self.info<openparen><apos>ID<space>LIST<space>COMMITTED:<space>%s<apos><space>%<space><apos><backslash>n<backslash>t<apos>.join<openparen>ids<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Done<space>uploading<space>%s<space>bytes<space>of<space>data<apos><space>%<space>size<closeparen><lf><space><space><space><space>def<space>getblocklist<openparen>self<comma><space>container<comma><space>blob_name<closeparen>:<lf><space><space><space><space><space><space><space><space>#print<space><apos>GET<space>http:<solidus><solidus>myaccount.blob.core.windows.net<solidus>movies<solidus>MOV1.avi?comp=blocklist<amp>blocklisttype=committed<space>HTTP<solidus>1.1<apos><lf><space><space><space><space><space><space><space><space>params<space>=<space><opencurly><apos>comp<apos>:<space><apos>blocklist<apos><comma><space><apos>blocklisttype<apos>:<space><apos>committed<apos><closecurly><lf><space><space><space><space><space><space><space><space>params<space>=<space>OrderedDict<openparen>sorted<openparen>params.items<openparen><closeparen><comma><space>key=lambda<space>t:<space>t<openbracket>0<closebracket><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>querystring<space>=<space><apos><amp><apos>.join<openparen>map<openparen>lambda<space>t:<space><apos><opencurly><closecurly>=<opencurly><closecurly><apos>.format<openparen>*t<closeparen><comma><space>params.items<openparen><closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>querystringencoded<space>=<space><apos><backslash>n<apos>.join<openparen>map<openparen>lambda<space>t:<space><apos><opencurly><closecurly>:<opencurly><closecurly><apos>.format<openparen>*t<closeparen><comma><space>params.items<openparen><closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>blob_path<space>=<space><apos><solidus><apos>.join<openparen><openparen>container<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s?%s<apos><space>%<space><openparen>self.account<comma><space>blob_path<comma>querystring<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen><closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>blob_path<comma><space>querystringencoded<space>=<space>querystringencoded<comma><space>http_method<space>=<space><apos>GET<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>self.session.get<openparen>url<comma><space>headers=headers<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>200:<lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>ERROR<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>ERROR<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>root<space>=<space>ElementTree.fromstring<openparen>r.content.decode<openparen><apos>utf-8-sig<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen>unicode<openparen>ElementTree.tostring<openparen>root<comma><space>encoding=<quote>utf8<quote><comma><space>method=<quote>xml<quote><closeparen><comma><space><apos>utf8<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>offset<space>=<space>0<lf><space><space><space><space><space><space><space><space>for<space>block<space>in<space>root.find<openparen><apos>CommittedBlocks<apos><closeparen>.iter<openparen><apos>Block<apos><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>name<space>=<space>base64.b64decode<openparen>block.find<openparen><apos>Name<apos><closeparen>.text<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>size<space>=<space>int<openparen>block.find<openparen><apos>Size<apos><closeparen>.text<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>yield<space>name<comma><space>offset<comma><space>size<lf><space><space><space><space><space><space><space><space><space><space><space><space>offset<space>+=<space>size<lf><space><space><space><space>def<space>getblock<openparen>self<comma><space>container<comma><space>blob_name<comma><space>offset<comma><space>length<closeparen>:<lf><space><space><space><space><space><space><space><space>range<space>=<space><apos>bytes=<opencurly><closecurly>-<opencurly><closecurly><apos>.format<openparen>offset<comma><space>offset<space>+<space>length<closeparen><lf><space><space><space><space><space><space><space><space>blob_path<space>=<space><apos><solidus><apos>.join<openparen><openparen>container<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>blob_path<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>xtra_headers=<opencurly><apos>x-ms-range<apos>:range<closecurly><closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>blob_path<comma><space>http_method<space>=<space><apos>GET<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>self.session.get<openparen>url<comma><space>headers=headers<comma><space>stream=True<closeparen><lf><space><space><space><space><space><space><space><space>if<space>not<space>r.status_code<space>in<space><openparen>200<comma><space>206<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><apos><apos><apos>https:<solidus><solidus>myaccount.blob.core.windows.net<solidus>mycontainer<solidus>myblob<apos><apos><apos><lf><space><space><space><space><space><space><space><space>for<space>chunk<space>in<space>r.iter_content<openparen>io.DEFAULT_BUFFER_SIZE<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>yield<space>chunk<lf><space><space><space><space>def<space>get_blob_properties<openparen>self<comma><space>container<comma><space>blob_name<closeparen>:<lf><space><space><space><space><space><space><space><space>blob_path<space>=<space><apos><solidus><apos>.join<openparen><openparen>container<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>blob_path<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen><closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>blob_path<comma><space>http_method<space>=<space><apos>HEAD<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>self.session.head<openparen>url<comma><space>headers=headers<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>200:<lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen>str<openparen>r.headers<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><apos><apos><apos><lf><space><space><space><space><space><space><space><space><opencurly><space><space><space><space><space><apos>content-length<apos>:<space><apos>1368582383<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-blob-type<apos>:<space><apos>AppendBlob<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>accept-ranges<apos>:<space><apos>bytes<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-blob-committed-block-count<apos>:<space><apos>327<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-version<apos>:<space><apos>2015-02-21<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>server<apos>:<space><apos>Windows-Azure-Blob<solidus>1.0<space>Microsoft-HTTPAPI<solidus>2.0<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-write-protection<apos>:<space><apos>false<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>last-modified<apos>:<space><apos>Thu<comma><space>23<space>Jun<space>2016<space>11:57:16<space>GMT<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>etag<apos>:<space><apos><quote>0x8D39B5D855ED87F<quote><apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-lease-state<apos>:<space><apos>available<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>date<apos>:<space><apos>Wed<comma><space>16<space>Nov<space>2016<space>17:59:04<space>GMT<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>content-type<apos>:<space><apos>application<solidus>octet-stream<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-request-id<apos>:<space><apos>414995ba-0001-0081-2433-40256f000000<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-lease-status<apos>:<space><apos>unlocked<apos><lf><space><space><space><space><space><space><space><space><closecurly><lf><space><space><space><space><space><space><space><space><apos><apos><apos><lf><space><space><space><space><space><space><space><space>return<space>map<openparen>r.headers.get<comma><space><openbracket><apos>last-modified<apos><comma><space><apos>x-ms-blob-type<apos><comma><space><apos>content-length<apos><comma><space><apos>content-type<apos><comma><space><apos>Content-MD5<apos><comma><space><apos>Accept-Ranges<apos><comma><space><apos>x-ms-blob-committed-block-count<apos><closebracket><closeparen><lf><space><space><space><space>def<space>download_blob<openparen>self<comma><space>container<comma><space>blob_name<comma><space>target_filepath<closeparen>:<lf><space><space><space><space><space><space><space><space><apos><apos><apos><lf><space><space><space><space><space><space><space><space>status<space>=<space>azure.download_blob<openparen>container<comma>blob_name<comma>target_filepath<closeparen><lf><space><space><space><space><space><space><space><space>TODO:<space>Eiter<space>get<space>blob<space>type<space>as<space>parameter<space>or<space>perform<space>a<space>Get<space>Blob<space>Properties<space>request<space>in<space>order<space>to<space>find<space>out<space>how<space>to<space>access<space>data.<space>Currently<space>only<space>large<space>blobs<space>that<space>have<space>an<space>accosiated<space>bloclist<space>works.<lf><space><space><space><space><space><space><space><space><apos><apos><apos><lf><space><space><space><space><space><space><space><space>last_mod<comma><space>blob_type<comma><space>content_length<comma><space>content_type<comma><space>content_md5<comma><space>accept_ranges<comma><space>committed_block_count<comma><space>=<space>self.get_blob_properties<openparen>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>content_length<space>=<space>int<openparen>content_length<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen>blob_type<closeparen><lf><space><space><space><space><space><space><space><space>nthreads<space>=<space>10<lf><space><space><space><space><space><space><space><space>readqueue<space>=<space>Queue<openparen>nthreads*2<closeparen><lf><space><space><space><space><space><space><space><space>writequeue<space>=<space>Queue<openparen>nthreads<closeparen><lf><space><space><space><space><space><space><space><space>target_filepath<space>=<space>os.path.normpath<openparen>target_filepath<closeparen><lf><space><space><space><space><space><space><space><space>target_folder<space>=<space>os.path.dirname<openparen>target_filepath<closeparen><lf><space><space><space><space><space><space><space><space>if<space>not<space>os.path.exists<openparen>target_folder<closeparen>:<space>os.makedirs<openparen>target_folder<closeparen><lf><space><space><space><space><space><space><space><space>fout<space>=<space>io.open<openparen>target_filepath<comma><space>mode=<apos>w+b<apos><closeparen><lf><space><space><space><space><space><space><space><space>def<space>get_data<openparen><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>while<space>True:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>blockid<comma><space>offset<comma><space>length<space>=<space>readqueue.get<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos><space>downloading<space>part<space><opencurly><closecurly><apos>.format<openparen>blockid<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>bytesread<space>=<space>0<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>for<space>chunk<space>in<space>self.getblock<openparen>container<comma><space>blob_name<comma><space>offset<comma><space>length<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>writequeue.put<openparen><openparen>chunk<comma><space>offset<space>+<space>bytesread<comma><space>len<openparen>chunk<closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>bytesread<space>+=<space>len<openparen>chunk<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>readqueue.task_done<openparen><closeparen><lf><space><space><space><space><space><space><space><space>def<space>write_data<openparen><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>while<space>True:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>data<comma><space>offset<comma><space>length<space>=<space>writequeue.get<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>fout.seek<openparen>offset<comma><space>0<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>fout.write<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>writequeue.task_done<openparen><closeparen><lf><space><space><space><space><space><space><space><space>for<space>i<space>in<space>range<openparen>nthreads<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>t<space>=<space>Thread<openparen>target=get_data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>t.daemon<space>=<space>True<lf><space><space><space><space><space><space><space><space><space><space><space><space>t.start<openparen><closeparen><lf><space><space><space><space><space><space><space><space>wt<space>=<space>Thread<openparen>target=write_data<closeparen><lf><space><space><space><space><space><space><space><space>wt.daemon<space>=<space>True<lf><space><space><space><space><space><space><space><space>wt.start<openparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>blob_type<space>==<space><apos>BlockBlob<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>committed_block_count:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>for<space>block<space>in<space>self.getblocklist<openparen>container=container<comma><space>blob_name=blob_name<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>readqueue.put<openparen>block<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>readqueue.put<openparen><openparen>uuid.uuid4<openparen><closeparen>.hex<comma><space>0<comma><space>content_length<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>elif<space>blob_type<space>==<space><apos>AppendBlob<apos><space>and<space>accept_ranges<space>==<space><apos>bytes<apos><space>and<space>committed_block_count:<lf><space><space><space><space><space><space><space><space><space><space><space><space>for<space>offset<space>in<space>range<openparen>0<comma><space>content_length<comma><space>PUT_BLOCK_CHUNK_SIZE<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>readqueue.put<openparen><openparen>uuid.uuid4<openparen><closeparen>.hex<comma><space>offset<comma><space>min<openparen>content_length-offset<comma><space>PUT_BLOCK_CHUNK_SIZE<closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>readqueue.join<openparen><closeparen><lf><space><space><space><space><space><space><space><space>writequeue.join<openparen><closeparen><lf><space><space><space><space><space><space><space><space>fout.flush<openparen><closeparen><lf><space><space><space><space><space><space><space><space>fout.close<openparen><closeparen><lf><space><space><space><space><space><space><space><space>return<space>last_mod<comma><space>blob_type<comma><space>content_length<comma><space>content_type<comma><space>content_md5<comma><space>accept_ranges<comma><space>committed_block_count<lf><space><space><space><space>def<space>list_blobs<openparen>self<comma><space>container<comma>prefix=None<comma>delimiter=<apos><solidus><apos><comma>recursive=False<closeparen>:<lf><space><space><space><space><space><space><space><space>#<space>https:<solidus><solidus>myaccount.blob.core.windows.net<solidus>mycontainer?restype=container<amp>comp=list<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen><closeparen><lf><space><space><space><space><space><space><space><space>#CubeSourceDataFile<solidus>coast<lf><space><space><space><space><space><space><space><space>#<lf><space><space><space><space><space><space><space><space>params<space>=<space><opencurly><apos>delimiter<apos><space>:<space>delimiter<comma><space><apos>comp<apos>:<space><apos>list<apos><comma><space><apos>restype<apos>:<space><apos>container<apos><closecurly><lf><space><space><space><space><space><space><space><space>if<space>prefix:<space>params<openbracket><apos>prefix<apos><closebracket><space>=<space>prefix<lf><space><space><space><space><space><space><space><space>params<space>=<space>OrderedDict<openparen>sorted<openparen>params.items<openparen><closeparen><comma><space>key=lambda<space>t:<space>t<openbracket>0<closebracket><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>querystring<space>=<space><apos><amp><apos>.join<openparen>map<openparen>lambda<space>t:<space><apos><opencurly><closecurly>=<opencurly><closecurly><apos>.format<openparen>*t<closeparen><comma><space>params.items<openparen><closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>querystringencoded<space>=<space><apos><backslash>n<apos>.join<openparen>map<openparen>lambda<space>t:<space><apos><opencurly><closecurly>:<opencurly><closecurly><apos>.format<openparen>*t<closeparen><comma><space>params.items<openparen><closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s?%s<apos><space>%<space><openparen>self.account<comma><space>container<comma>querystring<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>querystringencoded<space>=<space>querystringencoded<comma><space>http_method<space>=<space><apos>GET<apos><closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen><apos>Listing<space>blobs<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>self.session.get<openparen>url<comma><space>headers=headers<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>200:<lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>root<space>=<space>ElementTree.fromstring<openparen>r.content.decode<openparen><apos>utf-8-sig<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>for<space>blobprefix<space>in<space>root.iter<openparen><apos>BlobPrefix<apos><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>buf<space>=<space>StringIO<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>ElementTree.ElementTree<openparen>blobprefix<closeparen>.write<openparen>buf<comma><space>encoding=<apos>utf8<apos><comma><space>xml_declaration=False<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>yield<space><apos>BlobPrefix<apos><comma><space>prefix<comma><space>buf.getvalue<openparen><closeparen>.decode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>recursive:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>for<space>returntype<comma><space>used_prefix<comma><space>blob<space>in<space>self.list_blobs<openparen>container<comma><space>prefix=blobprefix.findtext<openparen><apos>Name<apos><closeparen><comma><space>delimiter=delimiter<comma>recursive=True<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>yield<space>returntype<comma><space>used_prefix<comma><space>blob<lf><space><space><space><space><space><space><space><space>for<space>blob<space>in<space>root.iter<openparen><apos>Blob<apos><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>buf<space>=<space>StringIO<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>ElementTree.ElementTree<openparen>blob<closeparen>.write<openparen>buf<comma><space>encoding=<apos>utf8<apos><comma><space>xml_declaration=False<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>yield<space><apos>Blob<apos><comma><space>prefix<comma><space>buf.getvalue<openparen><closeparen>.decode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space>def<space>_authorize<openparen>self<comma><space>headers<comma><space>container_name<comma><space>blob_name<space>=<space>None<comma><space>querystringencoded<space>=<space>None<comma><space>http_method<space>=<space><apos>PUT<apos><closeparen>:<lf><space><space><space><space><space><space><space><space>content_length<space>=<space><apos><apos><lf><space><space><space><space><space><space><space><space>if<space>headers.get<openparen><apos>Content-Length<apos><closeparen><space>!=<space><apos>0<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>content_length<space>=<space>headers.get<openparen><apos>Content-Length<apos><closeparen><lf><space><space><space><space><space><space><space><space>fields<space>=<space><openbracket><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>http_method<space>#<space>VERB<space><openparen>http-method<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-Encoding<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-Language<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space>content_length<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-MD5<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space>headers.get<openparen><apos>Date<apos><comma><apos><apos><closeparen><space>#<space>Date<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-Modified-Since<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-None-Match<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-Unmodified-Since<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Range<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>?<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>?<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><closebracket><lf><space><space><space><space><space><space><space><space>if<space>headers.get<openparen><apos>x-ms-blob-type<apos><comma><space>None<closeparen>:<space>fields.append<openparen><apos>x-ms-blob-type:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-blob-type<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>fields.append<openparen><apos>x-ms-date:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-date<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>headers.get<openparen><apos>x-ms-range<apos><comma><space>None<closeparen>:<space>fields.append<openparen><apos>x-ms-range:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-range<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>fields.append<openparen><apos>x-ms-version:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-version<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>blob_name:<lf><space><space><space><space><space><space><space><space><space><space><space><space>fields.append<openparen><apos><solidus>%s<solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container_name<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>fields.append<openparen><apos><solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>querystringencoded:<space>fields.append<openparen>querystringencoded<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space><apos><backslash>n<apos>.join<openparen>fields<closeparen><lf><space><space><space><space><space><space><space><space>signature<space>=<space>AzureAPI._sign_string<openparen>self.secret<space><comma><space>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>headers<openbracket><apos>Authorization<apos><closebracket><space>=<space><apos>SharedKey<space>%s:%s<apos><space>%<space><openparen>self.account<comma><space>signature<closeparen><lf><space><space><space><space><space><space><space><space>return<space>_string_to_sign<lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_create_headers<openparen>data<space>=<space><apos><apos><comma><space>xtra_headers=<opencurly><closecurly><closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space><opencurly><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><apos>Content-Length<apos>:<space>str<openparen>len<openparen>data<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-date<apos>:<space>AzureAPI._httpdate<openparen>datetime.datetime.utcnow<openparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-version<apos>:<space>AZ_VERSION<lf><space><space><space><space><space><space><space><space><space><space><space><space><closecurly><lf><space><space><space><space><space><space><space><space>headers.update<openparen>xtra_headers<closeparen><lf><space><space><space><space><space><space><space><space>return<space>OrderedDict<openparen>sorted<openparen>headers.items<openparen><closeparen><comma><space>key=lambda<space>t:<space>t<openbracket>0<closebracket><closeparen><closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_httpdate<openparen>dt<closeparen>:<lf><space><space><space><space><space><space><space><space><quote><quote><quote>Return<space>a<space>string<space>representation<space>of<space>a<space>date<space>according<space>to<space>RFC<space>1123<lf><space><space><space><space><space><space><space><space><openparen>HTTP<solidus>1.1<closeparen>.<lf><space><space><space><space><lf><space><space><space><space><space><space><space><space>The<space>supplied<space>date<space>must<space>be<space>in<space>UTC.<lf><space><space><space><space><lf><space><space><space><space><space><space><space><space><quote><quote><quote><lf><space><space><space><space><space><space><space><space>weekday<space>=<space><openbracket><quote>Mon<quote><comma><space><quote>Tue<quote><comma><space><quote>Wed<quote><comma><space><quote>Thu<quote><comma><space><quote>Fri<quote><comma><space><quote>Sat<quote><comma><space><quote>Sun<quote><closebracket><openbracket>dt.weekday<openparen><closeparen><closebracket><lf><space><space><space><space><space><space><space><space>month<space>=<space><openbracket><quote>Jan<quote><comma><space><quote>Feb<quote><comma><space><quote>Mar<quote><comma><space><quote>Apr<quote><comma><space><quote>May<quote><comma><space><quote>Jun<quote><comma><space><quote>Jul<quote><comma><space><quote>Aug<quote><comma><space><quote>Sep<quote><comma><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><quote>Oct<quote><comma><space><quote>Nov<quote><comma><space><quote>Dec<quote><closebracket><openbracket>dt.month<space>-<space>1<closebracket><lf><space><space><space><space><space><space><space><space>return<space><quote>%s<comma><space>%02d<space>%s<space>%04d<space>%02d:%02d:%02d<space>GMT<quote><space>%<space><openparen>weekday<comma><space>dt.day<comma><space>month<comma><lf><space><space><space><space><space><space><space><space><space><space><space><space>dt.year<comma><space>dt.hour<comma><space>dt.minute<comma><space>dt.second<closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_encode_base64<openparen>data<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>encoded<space>=<space>base64.b64encode<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space>return<space>encoded.decode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_decode_base64_to_bytes<openparen>data<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>return<space>base64.b64decode<openparen>data<closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_sign_string<openparen>key<comma><space>string_to_sign<comma><space>key_is_base64=True<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>key_is_base64:<lf><space><space><space><space><space><space><space><space><space><space><space><space>key<space>=<space>AzureAPI._decode_base64_to_bytes<openparen>key<closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>key<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>key<space>=<space>key.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>string_to_sign<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>string_to_sign<space>=<space>string_to_sign.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>signed_hmac_sha256<space>=<space>hmac.HMAC<openparen>key<comma><space>string_to_sign<comma><space>hashlib.sha256<closeparen><lf><space><space><space><space><space><space><space><space>digest<space>=<space>signed_hmac_sha256.digest<openparen><closeparen><lf><space><space><space><space><space><space><space><space>encoded_digest<space>=<space>AzureAPI._encode_base64<openparen>digest<closeparen><lf><space><space><space><space><space><space><space><space>return<space>encoded_digest<lf>    OUTPUT PYOUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_PythonCaller_OUTPUT"
# -------------------------------------------------------------------------
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_PythonCaller_OUTPUT"    OUTPUT FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_FILTER
FACTORY_DEF * AttributeFilterFactory FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_Filter COMMAND_PARM_EVALUATION SINGLE_PASS INPUT FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_FILTER FILTER_ATTRIBUTE _azure_blob_downloader_status FILTER_VALUES initiator_success <lt>EMPTY<gt> <lt>MISSING<gt> <lt>NULL<gt> <lt>UNFILTERED<gt> OUTPUT initiator_success FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_initiator_success OUTPUT <lt>EMPTY<gt> FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_<lt>EMPTY<gt> OUTPUT <lt>MISSING<gt> FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_<lt>MISSING<gt> OUTPUT <lt>NULL<gt> FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_<lt>NULL<gt> OUTPUT <lt>UNFILTERED<gt> FEATURE_TYPE $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_<lt>UNFILTERED<gt>
# -------------------------------------------------------------------------
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter__Unfiltered__Logger    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_<lt>EMPTY<gt>"    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_<lt>MISSING<gt>"    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_<lt>NULL<gt>"    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_<lt>UNFILTERED<gt>"    OUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter__Unfiltered__LOGGED"                  @Log("$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter__Unfiltered_: Feature is:","20","20")                  @FeatureType("$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter__Unfiltered__LOGGED")
# -------------------------------------------------------------------------
# Expose all attributes.  This ensures that if you expose fme_dataset, you will get it.
READER_META_ATTRIBUTES fme_feature_type fme_dataset fme_basename
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeExposer    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter_initiator_success"    OUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeExposer_OUTPUT"
# -------------------------------------------------------------------------
INCLUDE [    set macroLine "MACRO $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF {*} TeeFactory    FACTORY_NAME $(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover    INPUT  FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeExposer_OUTPUT"    OUTPUT { FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover_OUTPUT"        @RemoveAttributes(fme_encoded,_azure_blob_downloader_storage_account,_azure_blob_downloader_container,_azure_blob_downloader_key,_azure_blob_downloader_status,_azure_blob_downloader_blob_name)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover_LIST_EXP)")         }
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDownloader_WORKSPACE_NAME)_Output1571045944 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeRemover_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_Output"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDownloader_WORKSPACE_NAME)_Rejected1571045944 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_AttributeFilter__Unfiltered__LOGGED"   OUTPUT FEATURE_TYPE "$(AzureBlobDownloader_WORKSPACE_NAME)_Rejected"
INCLUDE [puts {MACRO WB_CURRENT_CONTEXT $(WB_OLD_CONTEXT_$(AzureBlobDownloader_WORKSPACE_NAME))}]



