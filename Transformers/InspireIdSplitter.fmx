#! <?xml version="1.0" encoding="windows-1252" ?>
#! <TRANSFORMER
# TRANSFORMER_BEGIN InspireIdSplitter,1,Manipulators,1b61fbc6-e626-473e-b365-0faa126c7fcf,"Linked by Default",No,NO_PARALLELISM,,No,14235,YES,No
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Splits a combinded inspireId to localId and namespace.</p>
# 
# TRANSFORMER_END
#! PASSWORD=""
#! ATTR_TYPE_ENCODING="SDF"
#! VIEW_POSITION="-423 -63"
#! SHOW_INFO_NODES="true"
#! FME_LINKED_TRANSFORMER_VERSION="1"
#! FMX_INSERT_MODE="Linked by Default"
#! BLOCKED_LOOPING="No"
#! DESCRIPTION="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Splits a combinded inspireId to localId and namespace.&lt;/p&gt;&#10;"
#! TITLE="InspireIdSplitter"
#! MAX_LOOP_ITERATIONS=""
#! ITERATION_COUNT_ATTR=""
#! FME_BUILD_NUM="14235"
#! ZOOM_SCALE="100"
#! CATEGORY="Manipulators"
#! LEGAL_TERMS_CONDITIONS="&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;"
#! FME_PROCESS_GROUP_BY=""
#! USAGE="&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;"
#! HISTORY=""
#! FME_DOCUMENT_PRIORGUID=""
#! DOC_TOP_LEFT="-347 -1225"
#! XFORM_DEPRECATED="No"
#! REQUIREMENTS_KEYWORD="none"
#! LAST_SAVE_DATE="2014-11-25T13:05:59"
#! WORKSPACE_VERSION="1"
#! LAST_SAVE_BUILD="FME(R) 2014 (20140120 - Build 14235 - WIN64)"
#! FME_SERVER_SERVICES=""
#! REQUIREMENTS="&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;"
#! DOC_EXTENTS="3581 991"
#! FME_DOCUMENT_GUID="1b61fbc6-e626-473e-b365-0faa126c7fcf"
#! FME_PROCESS_COUNT="NO_PARALLELISM"
#! SHOW_ANNOTATIONS="true"
#! FME_PROCESS_GROUPS_ORDERED="No"
#! WARN_INVALID_XFORM_PARAM="Yes"
#! >
#! <DATASETS>
#! </DATASETS>
#! <DATA_TYPES>
#! </DATA_TYPES>
#! <GEOM_TYPES>
#! </GEOM_TYPES>
#! <FEATURE_TYPES>
#! </FEATURE_TYPES>
#! <FMESERVER>
#! </FMESERVER>
#! <GLOBAL_PARAMETERS>
#! <GLOBAL_PARAMETER
#! GUI_LINE="GUI ATTR inspireId &quot; &quot; Attribute to Split:"
#! DEFAULT_VALUE=""
#! IS_STAND_ALONE="false"
#! />
#! </GLOBAL_PARAMETERS>
#! <COMMENTS>
#! <COMMENT
#! IDENTIFIER="22"
#! COMMENT_VALUE="&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0//EN&quot; &quot;http://www.w3.org/TR/REC-html40/strict.dtd&quot;&gt;&#10;&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;&#10;p, li { white-space: pre-wrap; }&#10;&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:&apos;MS Shell Dlg 2&apos;; font-size:11px; font-weight:400; font-style:normal;&quot;&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-size:11px;&quot;&gt;Remove localId from input/text_line_data&lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"
#! POSITION="2207 -267"
#! ORDER="5e+014"
#! FOLLOW_ANCHOR="true"
#! INFO_NODE="false"
#! TOP_LEFT="2207 -267"
#! BOTTOM_RIGHT="2957 -317"
#! COLOUR="1,1,0.784314,0.192157"
#! SIZE_POLICY="10"
#! COMMENT_TYPE="REGULAR"
#! ANCHORED_NODE="0"
#! />
#! <COMMENT
#! IDENTIFIER="23"
#! COMMENT_VALUE="&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0//EN&quot; &quot;http://www.w3.org/TR/REC-html40/strict.dtd&quot;&gt;&#10;&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;&#10;p, li { white-space: pre-wrap; }&#10;&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:&apos;MS Shell Dlg 2&apos;; font-size:11px; font-weight:400; font-style:normal;&quot;&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Remove las &amp;quot;/&amp;quot; from input&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"
#! POSITION="2180 -1225"
#! ORDER="5e+014"
#! FOLLOW_ANCHOR="true"
#! INFO_NODE="false"
#! TOP_LEFT="2180 -1225"
#! BOTTOM_RIGHT="2930 -1275"
#! COLOUR="1,1,0.784314,0.192157"
#! SIZE_POLICY="10"
#! COMMENT_TYPE="REGULAR"
#! ANCHORED_NODE="0"
#! />
#! </COMMENTS>
#! <CONSTANTS>
#! </CONSTANTS>
#! <BOOKMARKS>
#! <BOOKMARK
#! IDENTIFIER="16"
#! NAME="Get localId"
#! DESCRIPTION="&lt;html&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;"
#! TOP_LEFT="198 -116"
#! BOTTOM_RIGHT="1472 -1373"
#! STICKY="true"
#! COLOUR="0.0941176,0.411765,0.156863"
#! CONTENTS="7 3 10 6 28 9 26 "
#! />
#! <BOOKMARK
#! IDENTIFIER="21"
#! NAME="Get namespace"
#! DESCRIPTION="&lt;html&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;"
#! TOP_LEFT="1527 -122"
#! BOTTOM_RIGHT="3039 -1382"
#! STICKY="true"
#! COLOUR="0.658824,0.556863,0.556863"
#! CONTENTS="12 17 25 23 18 22 20 "
#! />
#! </BOOKMARKS>
#! <TRANSFORMERS>
#! <TRANSFORMER
#! IDENTIFIER="3"
#! TYPE="AttributeSplitter"
#! VERSION="2"
#! POSITION="903 -234"
#! ORDER="5e+014"
#! PARMS_EDITED="true"
#! ENABLED="true"
#! >
#! <OUTPUT_FEAT NAME="OUTPUT"/>
#! <XFORM_ATTR ATTR_NAME="url" IS_USER_CREATED="false" FEAT_INDEX="0" />
#! <XFORM_ATTR ATTR_NAME="_list{}" IS_USER_CREATED="false" FEAT_INDEX="0" />
#! <XFORM_PARM PARM_NAME="LIST_NAME" PARM_VALUE="_list"/>
#! <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="SplitSlash"/>
#! <XFORM_PARM PARM_NAME="ATTR_NAME" PARM_VALUE="url"/>
#! <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#! <XFORM_PARM PARM_NAME="DELIMITER" PARM_VALUE="&lt;solidus&gt;"/>
#! <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#! <XFORM_PARM PARM_NAME="TRIM_OPTION" PARM_VALUE="Both"/>
#! <XFORM_PARM PARM_NAME="DROP_EMPTY_PARTS" PARM_VALUE="No"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#! IDENTIFIER="6"
#! TYPE="ListIndexer"
#! VERSION="1"
#! POSITION="377 -584"
#! ORDER="5e+014"
#! PARMS_EDITED="true"
#! ENABLED="true"
#! >
#! <OUTPUT_FEAT NAME="OUTPUT"/>
#! <XFORM_ATTR ATTR_NAME="url" IS_USER_CREATED="false" FEAT_INDEX="0" />
#! <XFORM_ATTR ATTR_NAME="_list{}" IS_USER_CREATED="false" FEAT_INDEX="0" />
#! <XFORM_ATTR ATTR_NAME="_list" IS_USER_CREATED="false" FEAT_INDEX="0" />
#! <XFORM_PARM PARM_NAME="PREFIX" PARM_VALUE=""/>
#! <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="GetLastValue"/>
#! <XFORM_PARM PARM_NAME="LIST_ATTR" PARM_VALUE="_list{}"/>
#! <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#! <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#! <XFORM_PARM PARM_NAME="INDEX" PARM_VALUE="-1"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#! IDENTIFIER="9"
#! TYPE="AttributeRenamer"
#! VERSION="2"
#! POSITION="383 -993"
#! ORDER="5e+014"
#! PARMS_EDITED="true"
#! ENABLED="true"
#! >
#! <OUTPUT_FEAT NAME="OUTPUT"/>
#! <XFORM_ATTR ATTR_NAME="url" IS_USER_CREATED="false" FEAT_INDEX="0" />
#! <XFORM_ATTR ATTR_NAME="_list{}" IS_USER_CREATED="false" FEAT_INDEX="0" />
#! <XFORM_ATTR ATTR_NAME="localId" IS_USER_CREATED="false" FEAT_INDEX="0" />
#! <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="RenameLastValueToLocalId"/>
#! <XFORM_PARM PARM_NAME="ATTR_LIST" PARM_VALUE="_list,localId,&quot;&quot;"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#! IDENTIFIER="12"
#! TYPE="StringReplacer"
#! VERSION="3"
#! POSITION="1685 -242"
#! ORDER="5e+014"
#! PARMS_EDITED="true"
#! ENABLED="true"
#! >
#! <OUTPUT_FEAT NAME="OUTPUT"/>
#! <XFORM_ATTR ATTR_NAME="url" IS_USER_CREATED="false" FEAT_INDEX="0" />
#! <XFORM_ATTR ATTR_NAME="_list{}" IS_USER_CREATED="false" FEAT_INDEX="0" />
#! <XFORM_ATTR ATTR_NAME="localId" IS_USER_CREATED="false" FEAT_INDEX="0" />
#! <XFORM_PARM PARM_NAME="SRC_ATTRS" PARM_VALUE="url"/>
#! <XFORM_PARM PARM_NAME="REGEXP" PARM_VALUE="yes"/>
#! <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="RemoveLocalIdFromString"/>
#! <XFORM_PARM PARM_NAME="CASE" PARM_VALUE="no"/>
#! <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#! <XFORM_PARM PARM_NAME="REPLACE_TEXT" PARM_VALUE=""/>
#! <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#! <XFORM_PARM PARM_NAME="FIND_TEXT" PARM_VALUE="&lt;at&gt;Value&lt;openparen&gt;localId&lt;closeparen&gt;"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#! IDENTIFIER="17"
#! TYPE="AttributeRenamer"
#! VERSION="2"
#! POSITION="1657 -660"
#! ORDER="5e+014"
#! PARMS_EDITED="true"
#! ENABLED="true"
#! >
#! <OUTPUT_FEAT NAME="OUTPUT"/>
#! <XFORM_ATTR ATTR_NAME="namespace" IS_USER_CREATED="false" FEAT_INDEX="0" />
#! <XFORM_ATTR ATTR_NAME="_list{}" IS_USER_CREATED="false" FEAT_INDEX="0" />
#! <XFORM_ATTR ATTR_NAME="localId" IS_USER_CREATED="false" FEAT_INDEX="0" />
#! <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="RenameToNamespace"/>
#! <XFORM_PARM PARM_NAME="ATTR_LIST" PARM_VALUE="url,namespace,&quot;&quot;"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#! IDENTIFIER="18"
#! TYPE="StringReplacer"
#! VERSION="3"
#! POSITION="1666 -1031"
#! ORDER="5e+014"
#! PARMS_EDITED="true"
#! ENABLED="true"
#! >
#! <OUTPUT_FEAT NAME="OUTPUT"/>
#! <XFORM_ATTR ATTR_NAME="namespace" IS_USER_CREATED="false" FEAT_INDEX="0" />
#! <XFORM_ATTR ATTR_NAME="_list{}" IS_USER_CREATED="false" FEAT_INDEX="0" />
#! <XFORM_ATTR ATTR_NAME="localId" IS_USER_CREATED="false" FEAT_INDEX="0" />
#! <XFORM_PARM PARM_NAME="SRC_ATTRS" PARM_VALUE="namespace"/>
#! <XFORM_PARM PARM_NAME="REGEXP" PARM_VALUE="yes"/>
#! <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="RemoveLastSlash"/>
#! <XFORM_PARM PARM_NAME="CASE" PARM_VALUE="no"/>
#! <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#! <XFORM_PARM PARM_NAME="REPLACE_TEXT" PARM_VALUE=""/>
#! <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#! <XFORM_PARM PARM_NAME="FIND_TEXT" PARM_VALUE="&lt;backslash&gt;&lt;solidus&gt;&lt;dollar&gt;"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#! IDENTIFIER="26"
#! TYPE="AttributeCreator"
#! VERSION="4"
#! POSITION="271 -267"
#! ORDER="5e+014"
#! PARMS_EDITED="true"
#! ENABLED="true"
#! >
#! <OUTPUT_FEAT NAME="OUTPUT"/>
#! <FEAT_COLLAPSED COLLAPSED="0"/>
#! <XFORM_ATTR ATTR_NAME="url" IS_USER_CREATED="false" FEAT_INDEX="0" />
#! <XFORM_PARM PARM_NAME="NUM_PRIOR_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#! <XFORM_PARM PARM_NAME="MULTI_FEATURE_MODE" PARM_VALUE="NO"/>
#! <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="CreateAttributeFromInput"/>
#! <XFORM_PARM PARM_NAME="NULL_ATTR_MODE_DISPLAY" PARM_VALUE="&lt;Unused&gt;"/>
#! <XFORM_PARM PARM_NAME="NUM_SUBSEQUENT_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#! <XFORM_PARM PARM_NAME="NULL_ATTR_VALUE" PARM_VALUE="&lt;Unused&gt;"/>
#! <XFORM_PARM PARM_NAME="ATTR_LIST" PARM_VALUE="url,&lt;at&gt;Value&lt;openparen&gt;$(inspireId)&lt;closeparen&gt;"/>
#! </TRANSFORMER>
#! </TRANSFORMERS>
#! <SUBDOCUMENT_IOS>
#! <SUBDOCUMENT_IO
#! IDENTIFIER="1"
#! NAME="Input"
#! POSITION="-347 -264"
#! COLLAPSED="true"
#! PUBLISHED="true"
#! IS_SOURCE="true"
#! ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#! IDENTIFIER="2"
#! NAME="Output"
#! POSITION="3234 -339"
#! COLLAPSED="false"
#! IS_SOURCE="false"
#! ATTR_MODE="1"
#! >
#! <XFORM_ATTR ATTR_NAME="namespace" />
#! <XFORM_ATTR ATTR_NAME="localId" />
#! </SUBDOCUMENT_IO>
#! </SUBDOCUMENT_IOS>
#! <FEAT_LINKS>
#! <FEAT_LINK
#! IDENTIFIER="7"
#! SOURCE_NODE="3"
#! TARGET_NODE="6"
#! SOURCE_PORT_DESC="fo 0"
#! TARGET_PORT_DESC="fi 0"
#! ENABLED="true"
#! EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#! IDENTIFIER="10"
#! SOURCE_NODE="6"
#! TARGET_NODE="9"
#! SOURCE_PORT_DESC="fo 0"
#! TARGET_PORT_DESC="fi 0"
#! ENABLED="true"
#! EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#! IDENTIFIER="24"
#! SOURCE_NODE="9"
#! TARGET_NODE="12"
#! SOURCE_PORT_DESC="fo 0"
#! TARGET_PORT_DESC="fi 0"
#! ENABLED="true"
#! EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#! IDENTIFIER="25"
#! SOURCE_NODE="12"
#! TARGET_NODE="17"
#! SOURCE_PORT_DESC="fo 0"
#! TARGET_PORT_DESC="fi 0"
#! ENABLED="true"
#! EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#! IDENTIFIER="20"
#! SOURCE_NODE="17"
#! TARGET_NODE="18"
#! SOURCE_PORT_DESC="fo 0"
#! TARGET_PORT_DESC="fi 0"
#! ENABLED="true"
#! EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#! IDENTIFIER="19"
#! SOURCE_NODE="18"
#! TARGET_NODE="2"
#! SOURCE_PORT_DESC="fo 0"
#! TARGET_PORT_DESC="0"
#! ENABLED="true"
#! EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#! IDENTIFIER="27"
#! SOURCE_NODE="1"
#! TARGET_NODE="26"
#! SOURCE_PORT_DESC="0"
#! TARGET_PORT_DESC="fi 0"
#! ENABLED="true"
#! EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#! IDENTIFIER="28"
#! SOURCE_NODE="26"
#! TARGET_NODE="3"
#! SOURCE_PORT_DESC="fo 0"
#! TARGET_PORT_DESC="fi 0"
#! ENABLED="true"
#! EXTRA_POINTS=""
#! />
#! </FEAT_LINKS>
#! <BREAKPOINTS>
#! </BREAKPOINTS>
#! <ATTR_LINKS>
#! </ATTR_LINKS>
#! <SUBDOCUMENTS>
#! </SUBDOCUMENTS>
#! <LOOKUP_TABLES>
#! </LOOKUP_TABLES>
#! </TRANSFORMER>
#! 
DEFAULT_MACRO $(InspireIdSplitter_WORKSPACE_NAME)_inspireId 
#! START_HEADER
#! END_HEADER

LOG_FILTER_MASK -1
DEFAULT_MACRO WB_CURRENT_CONTEXT
DEFAULT_MACRO InspireIdSplitter_WORKSPACE_NAME ""
INCLUDE [puts {MACRO WB_OLD_CONTEXT_$(InspireIdSplitter_WORKSPACE_NAME) $(WB_CURRENT_CONTEXT)};          puts {MACRO WB_CURRENT_CONTEXT $(InspireIdSplitter_WORKSPACE_NAME)}]
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(InspireIdSplitter_WORKSPACE_NAME)_Input1416917159 Input Splitter"   INPUT FEATURE_TYPE "$(InspireIdSplitter_WORKSPACE_NAME)_Input"   OUTPUT FEATURE_TYPE "$(InspireIdSplitter_WORKSPACE_NAME)_Input"
# -------------------------------------------------------------------------
FACTORY_DEF * AttrSetFactory FACTORY_NAME $(InspireIdSplitter_WORKSPACE_NAME)_CreateAttributeFromInput INPUT  FEATURE_TYPE "$(InspireIdSplitter_WORKSPACE_NAME)_Input" ATTR url <at>Value<openparen>$($(InspireIdSplitter_WORKSPACE_NAME)_inspireId$encode)<closeparen>    OUTPUT OUTPUT FEATURE_TYPE "$(InspireIdSplitter_WORKSPACE_NAME)_CreateAttributeFromInput_OUTPUT" 
# -------------------------------------------------------------------------

Tcl2 set $(InspireIdSplitter_WORKSPACE_NAME)_SplitSlash_0a9cf764_38d3_45db_9edf_5c7780d142dd0_splitDelim [FME_DecodeText {<solidus>}];      if { [regexp {^([1-9][0-9]*s)+$} [set $(InspireIdSplitter_WORKSPACE_NAME)_SplitSlash_0a9cf764_38d3_45db_9edf_5c7780d142dd0_splitDelim]] }      {         set $(InspireIdSplitter_WORKSPACE_NAME)_SplitSlash_0a9cf764_38d3_45db_9edf_5c7780d142dd0_splitWidths [split [regsub -all {s$} {<solidus>} {}] s];         proc $(InspireIdSplitter_WORKSPACE_NAME)_SplitSlash_doSplit {}         {            global $(InspireIdSplitter_WORKSPACE_NAME)_SplitSlash_0a9cf764_38d3_45db_9edf_5c7780d142dd0_splitWidths;            set source [FME_GetAttribute {"url"}];            set attrNum 0;            set listName {_list};            set attrPos 0;            foreach width [set $(InspireIdSplitter_WORKSPACE_NAME)_SplitSlash_0a9cf764_38d3_45db_9edf_5c7780d142dd0_splitWidths]            {               set endPos [expr $attrPos + $width - 1];               set bit [string range $source $attrPos $endPos];               FME_SetAttribute "$listName{$attrNum}" [string trim $bit];               incr attrPos $width;               incr attrNum;            };         };      }      else      {         proc $(InspireIdSplitter_WORKSPACE_NAME)_SplitSlash_doSplit {}         {            global $(InspireIdSplitter_WORKSPACE_NAME)_SplitSlash_0a9cf764_38d3_45db_9edf_5c7780d142dd0_splitDelim;            set delim [set $(InspireIdSplitter_WORKSPACE_NAME)_SplitSlash_0a9cf764_38d3_45db_9edf_5c7780d142dd0_splitDelim];            set delimLength [string length $delim];            set source [FME_GetAttribute {"url"}];            set keepEmptyParts [string equal {No} {No}];            set bits {};            set startIndex 0;            set nextIndex [string first $delim $source $startIndex];            while {$nextIndex >= 0} {              set part [string range $source $startIndex [expr $nextIndex-1]];              if { $keepEmptyParts || $part != \"\" } {                 lappend bits $part;              };              set startIndex [expr $nextIndex + $delimLength];              set nextIndex [string first $delim $source $startIndex];            };            set lastPart [string range $source $startIndex end];            if { $keepEmptyParts || $lastPart != \"\" } { lappend bits $lastPart };            set listName {_list};            set attrNum 0;            foreach bit $bits            {               FME_SetAttribute "$listName{$attrNum}" [string trim $bit];               incr attrNum;            }          }       }
FACTORY_DEF * TeeFactory    FACTORY_NAME $(InspireIdSplitter_WORKSPACE_NAME)_SplitSlash    INPUT  FEATURE_TYPE "$(InspireIdSplitter_WORKSPACE_NAME)_CreateAttributeFromInput_OUTPUT"    OUTPUT FEATURE_TYPE "$(InspireIdSplitter_WORKSPACE_NAME)_SplitSlash_OUTPUT"         @Tcl2($(InspireIdSplitter_WORKSPACE_NAME)_SplitSlash_doSplit)

# -------------------------------------------------------------------------

Tcl2 proc $(InspireIdSplitter_WORKSPACE_NAME)_GetLastValue_indexer {index numElements prefix} {    if {$index < 0 } {       set index [expr $numElements + $index];    };    regsub \"{}\" {_list{}} \"{$index}\" listWithIndex;    regsub \"{}\" {_list{}} {} listBase;    set complexListExp "$listWithIndex\.";    set prefixLength [expr [string length $complexListExp]-1];    set prefix [FME_DecodeText $prefix];    foreach attr [FME_AttributeNames] {      set newAttr {};      if {$attr == $listWithIndex} {        set newAttr $listBase;      } elseif {[string first $complexListExp $attr] == 0} {        set newAttr [string replace $attr 0 $prefixLength];      };      if {$newAttr != {}} {          if {$prefix != {} } {            set newAttr $prefix$newAttr;          };          if {[string first {fme_} $newAttr] != 0} {              set first [string first {fme_} $newAttr];              lappend attrsToCopy $newAttr $attr;          };      };    };    if {[info exists attrsToCopy] && [llength $attrsToCopy] > 0} {      eval FME_Execute CopyAttributes $attrsToCopy;    }; }
FACTORY_DEF * TestFactory    FACTORY_NAME $(InspireIdSplitter_WORKSPACE_NAME)_GetLastValue    INPUT  FEATURE_TYPE "$(InspireIdSplitter_WORKSPACE_NAME)_SplitSlash_OUTPUT"    TEST -1 >= 0    OUTPUT PASSED FEATURE_TYPE "$(InspireIdSplitter_WORKSPACE_NAME)_GetLastValue_OUTPUT" @Tcl2("$(InspireIdSplitter_WORKSPACE_NAME)_GetLastValue_indexer -1 0 {}")    OUTPUT FAILED FEATURE_TYPE "$(InspireIdSplitter_WORKSPACE_NAME)_GetLastValue_OUTPUT" @Tcl2("$(InspireIdSplitter_WORKSPACE_NAME)_GetLastValue_indexer -1 @NumElements(_list{})  {}")
# -------------------------------------------------------------------------

FACTORY_DEF * TeeFactory    FACTORY_NAME $(InspireIdSplitter_WORKSPACE_NAME)_RenameLastValueToLocalId    INPUT  FEATURE_TYPE "$(InspireIdSplitter_WORKSPACE_NAME)_GetLastValue_OUTPUT"    OUTPUT FEATURE_TYPE "$(InspireIdSplitter_WORKSPACE_NAME)_RenameLastValueToLocalId_OUTPUT"         @RenameAttributes(ATTR_LIST_DEF_VAL, _list,localId,"")


# -------------------------------------------------------------------------

MACRO casemac
INCLUDE [ if { {no} == {no} } { puts {MACRO casemac -nocase}} ]
Tcl2 proc $(InspireIdSplitter_WORKSPACE_NAME)_RemoveLocalIdFromString_a46989b8_35c7_434f_80d6_06534c959c940_replacer { findText replaceText} {     set attrs [split \"url\" {,}];     set findValue [FME_DecodeText $findText];     set replaceValue [FME_DecodeText $replaceText];     foreach attr $attrs {       set attrVal [FME_GetAttribute $attr];       set length [string length $attrVal];       if {$length > 0} {          if {{yes} == {yes}} {             FME_SetAttribute $attr [regsub $(casemac) -all -- $findValue [FME_GetAttribute $attr] $replaceValue];          } else {             FME_SetAttribute $attr [string map $(casemac) [list $findValue $replaceValue] [FME_GetAttribute $attr]];          };       };     }; }
FACTORY_DEF * TeeFactory    FACTORY_NAME $(InspireIdSplitter_WORKSPACE_NAME)_RemoveLocalIdFromString    INPUT  FEATURE_TYPE "$(InspireIdSplitter_WORKSPACE_NAME)_RenameLastValueToLocalId_OUTPUT"    OUTPUT FEATURE_TYPE "$(InspireIdSplitter_WORKSPACE_NAME)_RemoveLocalIdFromString_OUTPUT"         @Tcl2("$(InspireIdSplitter_WORKSPACE_NAME)_RemoveLocalIdFromString_a46989b8_35c7_434f_80d6_06534c959c940_replacer {@EvaluateExpression(STRING_ENCODED,<at>Value<openparen>localId<closeparen>,$(InspireIdSplitter_WORKSPACE_NAME)_RemoveLocalIdFromString)} {}")

# -------------------------------------------------------------------------

FACTORY_DEF * TeeFactory    FACTORY_NAME $(InspireIdSplitter_WORKSPACE_NAME)_RenameToNamespace    INPUT  FEATURE_TYPE "$(InspireIdSplitter_WORKSPACE_NAME)_RemoveLocalIdFromString_OUTPUT"    OUTPUT FEATURE_TYPE "$(InspireIdSplitter_WORKSPACE_NAME)_RenameToNamespace_OUTPUT"         @RenameAttributes(ATTR_LIST_DEF_VAL, url,namespace,"")


# -------------------------------------------------------------------------

MACRO casemac
INCLUDE [ if { {no} == {no} } { puts {MACRO casemac -nocase}} ]
Tcl2 proc $(InspireIdSplitter_WORKSPACE_NAME)_RemoveLastSlash_d12c059a_9754_40b4_a322_cf06c47bfb720_replacer { findText replaceText} {     set attrs [split \"namespace\" {,}];     set findValue [FME_DecodeText $findText];     set replaceValue [FME_DecodeText $replaceText];     foreach attr $attrs {       set attrVal [FME_GetAttribute $attr];       set length [string length $attrVal];       if {$length > 0} {          if {{yes} == {yes}} {             FME_SetAttribute $attr [regsub $(casemac) -all -- $findValue [FME_GetAttribute $attr] $replaceValue];          } else {             FME_SetAttribute $attr [string map $(casemac) [list $findValue $replaceValue] [FME_GetAttribute $attr]];          };       };     }; }
FACTORY_DEF * TeeFactory    FACTORY_NAME $(InspireIdSplitter_WORKSPACE_NAME)_RemoveLastSlash    INPUT  FEATURE_TYPE "$(InspireIdSplitter_WORKSPACE_NAME)_RenameToNamespace_OUTPUT"    OUTPUT FEATURE_TYPE "$(InspireIdSplitter_WORKSPACE_NAME)_RemoveLastSlash_OUTPUT"         @Tcl2("$(InspireIdSplitter_WORKSPACE_NAME)_RemoveLastSlash_d12c059a_9754_40b4_a322_cf06c47bfb720_replacer {<backslash><solidus><dollar>} {}")

FACTORY_DEF * TeeFactory   FACTORY_NAME "$(InspireIdSplitter_WORKSPACE_NAME)_Output1416917159 Output Collector"   INPUT FEATURE_TYPE "$(InspireIdSplitter_WORKSPACE_NAME)_RemoveLastSlash_OUTPUT"   OUTPUT FEATURE_TYPE "$(InspireIdSplitter_WORKSPACE_NAME)_Output" @RemoveAttributes(fme_regexp_match,_list{})
INCLUDE [puts {MACRO WB_CURRENT_CONTEXT $(WB_OLD_CONTEXT_$(InspireIdSplitter_WORKSPACE_NAME))}]
