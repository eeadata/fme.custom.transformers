#! <?xml version="1.0" encoding="UTF-8" ?>
#! <TRANSFORMER
# TRANSFORMER_BEGIN AzureBlobDeleter,3,"Web Services",aacc2cf4-a644-4ac4-94ef-a1caf1a17f7b,"Linked by Default",No,NO_PARALLELISM,,No,19630,YES,No,36,No
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Deletes a blob from the Azure Blob Storage container</p>
# 
# TRANSFORMER_END
#!   ATTR_TYPE_ENCODING="SDF"
#!   BLOCKED_LOOPING="No"
#!   CATEGORY="Web Services"
#!   DESCRIPTION="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Deletes a blob from the Azure Blob Storage container&lt;/p&gt;&#10;"
#!   DOC_EXTENTS="4053.66 327.252"
#!   DOC_TOP_LEFT="-858.009 -458.504"
#!   EXPLICIT_BOOKMARK_ORDER="false"
#!   FME_BUILD_NUM="19630"
#!   FME_DOCUMENT_GUID="aacc2cf4-a644-4ac4-94ef-a1caf1a17f7b"
#!   FME_DOCUMENT_PRIORGUID="78b437bb-955a-4916-ba78-9dd2537ea4e8,1e3d64e6-3972-4d46-95b6-036258523f22"
#!   FME_LINKED_TRANSFORMER_VERSION="3"
#!   FME_PROCESS_COUNT="NO_PARALLELISM"
#!   FME_PROCESS_GROUPS_ORDERED="No"
#!   FME_PROCESS_GROUP_BY=""
#!   FME_PROCESS_PRESERVE_GROUP_ATTR="No"
#!   FME_SERVER_SERVICES=""
#!   FMX_ATTRIBUTE_PROPOGATION_MODE="AUTO"
#!   FMX_INSERT_MODE="Linked by Default"
#!   HISTORY="2016-08-08,peter.segerstedt&lt;at&gt;eea.europa.eu,Original&lt;space&gt;definition"
#!   ITERATION_COUNT_ATTR=""
#!   LAST_SAVE_BUILD="FME(R) 2019.1.2.0 (20190829 - Build 19630 - WIN64)"
#!   LAST_SAVE_DATE="2019-10-14T12:08:12"
#!   MARKDOWN_DESCRIPTION=""
#!   MARKDOWN_USAGE=""
#!   MAX_LOOP_ITERATIONS=""
#!   PASSWORD=""
#!   PYTHON_COMPATIBILITY="36"
#!   SHOW_ANNOTATIONS="true"
#!   SHOW_INFO_NODES="true"
#!   TITLE="AzureBlobDeleter"
#!   USAGE="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Storage account:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the storage account. Look for this under the portal.azure.com.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-weight:600;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Access key:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the access key for the blob inside Azure. You can find this when you select the storage inside the protal.azure.com website, go to settings and then search for &quot;Access keys&quot;.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Use access keys to authenticate your applications when making requests to this Azure storage account. Store your access keys securely - for example, using Azure Key Vault - and don&apos;t share them. We recommend regenerating your access keys regularly. You are provided two access keys so that you can maintain connections using one key while regenerating the other. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Container name:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The storage countainer name. These are listed directly under the storage account pannel. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Blob name:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The name of the blob you are about to delete. You can delete blobs in folders by simply using the &apos;/&apos; for example &quot;folder1/folder2/blobname&quot;. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;"
#!   USE_MARKDOWN=""
#!   VIEW_POSITION="-753.133 365.629"
#!   WARN_INVALID_XFORM_PARAM="Yes"
#!   WORKSPACE_VERSION="1"
#!   XFORM_DEPRECATED="No"
#!   ZOOM_SCALE="100"
#! >
#! <DATASETS>
#! </DATASETS>
#! <DATA_TYPES>
#! </DATA_TYPES>
#! <GEOM_TYPES>
#! </GEOM_TYPES>
#! <FEATURE_TYPES>
#! </FEATURE_TYPES>
#! <FMESERVER>
#! </FMESERVER>
#! <GLOBAL_PARAMETERS>
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR ACCOUNT &quot; &quot; Account:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI PASSWORD_OR_ATTR KEY Key:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="true"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR CONTAINER &quot; &quot; Container:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR BLOB_NAME &quot; &quot; Blob Name:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! </GLOBAL_PARAMETERS>
#! <COMMENTS>
#! </COMMENTS>
#! <CONSTANTS>
#! </CONSTANTS>
#! <BOOKMARKS>
#! </BOOKMARKS>
#! <TRANSFORMERS>
#! <TRANSFORMER
#!   IDENTIFIER="1"
#!   TYPE="AttributeCreator"
#!   VERSION="8"
#!   POSITION="-249.50299999999999 -131.25200000000001"
#!   BOUNDING_RECT="-249.50299999999999 -131.25200000000001 618.75599999999997 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_GRP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_HANDLING" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTR_TABLE" PARM_VALUE="&quot;&quot; _azure_blob_deleter_storage_account SET_TO $(ACCOUNT)  _azure_blob_deleter_key SET_TO $(KEY)  _azure_blob_deleter_container SET_TO $(CONTAINER)  _azure_blob_deleter_blob_name SET_TO $(BLOB_NAME)"/>
#!     <XFORM_PARM PARM_NAME="MULTI_FEATURE_MODE" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_MODE_DISPLAY" PARM_VALUE="No Substitution"/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_VALUE" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="NUM_PRIOR_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="NUM_SUBSEQUENT_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="FetchParamsAttributeCreator"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="2"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="1699.52 -131.25200000000001"
#!   BOUNDING_RECT="1699.52 -131.25200000000001 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_azure_blob_deleter_error_message,_azure_blob_deleter_storage_account,_azure_blob_deleter_status,_azure_blob_deleter_blob_name,_azure_blob_deleter_container,_azure_blob_deleter_key"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="3"
#!   TYPE="AttributeFilter"
#!   VERSION="4"
#!   POSITION="1105.77 -131.25200000000001"
#!   BOUNDING_RECT="1105.77 -131.25200000000001 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="&lt;EMPTY&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="&lt;MISSING&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <OUTPUT_FEAT NAME="&lt;NULL&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="2"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <OUTPUT_FEAT NAME="&lt;UNFILTERED&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="3"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <OUTPUT_FEAT NAME="success"/>
#!     <FEAT_COLLAPSED COLLAPSED="4"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <OUTPUT_FEAT NAME="fail"/>
#!     <FEAT_COLLAPSED COLLAPSED="5"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_PARM PARM_NAME="ATTR_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTR_NAME" PARM_VALUE="_azure_blob_deleter_status"/>
#!     <XFORM_PARM PARM_NAME="ATTR_VALUES" PARM_VALUE="&lt;lt&gt;EMPTY&lt;gt&gt;,&lt;lt&gt;MISSING&lt;gt&gt;,&lt;lt&gt;NULL&lt;gt&gt;,&lt;lt&gt;UNFILTERED&lt;gt&gt;,success,fail"/>
#!     <XFORM_PARM PARM_NAME="ATTR_VALUES_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeFilter"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="4"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="1699.52 -387.50400000000002"
#!   BOUNDING_RECT="1699.52 -387.50400000000002 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_azure_blob_deleter_storage_account,_azure_blob_deleter_status,_azure_blob_deleter_blob_name,_azure_blob_deleter_container,_azure_blob_deleter_key"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover_2"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="5"
#!   TYPE="PythonCaller"
#!   VERSION="4"
#!   POSITION="518.25699999999995 -131.25200000000001"
#!   BOUNDING_RECT="518.25699999999995 -131.25200000000001 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="18520"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="ADVANCED_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="HIDE_ATTRIBUTES" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NEW_ATTRIBUTES" PARM_VALUE="_azure_blob_deleter_status _azure_blob_deleter_error_message"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PYTHONSOURCE" PARM_VALUE="from&lt;space&gt;fmeobjects&lt;space&gt;import&lt;space&gt;FMELogFile&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;comma&gt;&lt;space&gt;FME_WARN&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;lf&gt;#from&lt;space&gt;cStringIO&lt;space&gt;import&lt;space&gt;StringIO&lt;lf&gt;from&lt;space&gt;io&lt;space&gt;import&lt;space&gt;StringIO&lt;comma&gt;&lt;space&gt;BytesIO&lt;lf&gt;from&lt;space&gt;AzureAPI&lt;space&gt;import&lt;space&gt;AzureAPI&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;DeleteFeatureProcessor&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile&lt;space&gt;=&lt;space&gt;FMELogFile&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;Make&lt;space&gt;sure&lt;space&gt;to&lt;space&gt;change&lt;space&gt;if&lt;space&gt;Custom&lt;space&gt;transformer&lt;space&gt;is&lt;space&gt;renamed&lt;space&gt;&lt;openparen&gt;not&lt;space&gt;transformer&lt;space&gt;instance&lt;space&gt;name&lt;space&gt;-&lt;space&gt;that&lt;apos&gt;s&lt;space&gt;what&lt;space&gt;we&lt;apos&gt;re&lt;space&gt;fetching&lt;closeparen&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.xformer_name&lt;space&gt;=&lt;space&gt;FME_MacroValues&lt;openbracket&gt;&lt;apos&gt;AzureBlobDeleter_WORKSPACE_NAME&lt;apos&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;info&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_WARN&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;while&lt;space&gt;developing&lt;space&gt;for&lt;space&gt;popping&lt;space&gt;out&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;input&lt;openparen&gt;self&lt;comma&gt;feature&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;try:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;account&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_storage_account&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;secret&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_key&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;azure&lt;space&gt;=&lt;space&gt;AzureAPI&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;self.logfile&lt;comma&gt;&lt;space&gt;logprefix&lt;space&gt;=&lt;space&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;loglevel&lt;space&gt;=&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;container&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_container&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_blob_name&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;azure.delete_blob&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;success&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;except&lt;space&gt;Exception&lt;space&gt;as&lt;space&gt;e:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;fail&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_error_message&lt;apos&gt;&lt;comma&gt;&lt;space&gt;str&lt;openparen&gt;e&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logException&lt;openparen&gt;e&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.pyoutput&lt;openparen&gt;feature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;close&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;del&lt;space&gt;self.logfile"/>
#!     <XFORM_PARM PARM_NAME="PYTHONSYMBOL" PARM_VALUE="DeleteFeatureProcessor"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="PythonCaller"/>
#! </TRANSFORMER>
#! </TRANSFORMERS>
#! <SUBDOCUMENT_IOS>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="10"
#!   NAME="Input"
#!   POSITION="-858.00900000000001 -131.25200000000001"
#!   BOUNDING_RECT="-858.00900000000001 -131.25200000000001 431 71"
#!   COLLAPSED="true"
#!   PUBLISHED="true"
#!   IS_SOURCE="true"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="12"
#!   NAME="Deleted"
#!   POSITION="2764.6500000000001 -199.75200000000001"
#!   BOUNDING_RECT="2764.6500000000001 -199.75200000000001 431 71"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="13"
#!   NAME="Fail"
#!   POSITION="2764.6500000000001 -387.50400000000002"
#!   BOUNDING_RECT="2764.6500000000001 -387.50400000000002 431 71"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! </SUBDOCUMENT_IOS>
#! <FEAT_LINKS>
#! <FEAT_LINK
#!   IDENTIFIER="11"
#!   SOURCE_NODE="10"
#!   TARGET_NODE="1"
#!   SOURCE_PORT_DESC="0"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="8"
#!   SOURCE_NODE="1"
#!   TARGET_NODE="5"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="14"
#!   SOURCE_NODE="2"
#!   TARGET_NODE="12"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="15"
#!   SOURCE_NODE="4"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="9"
#!   SOURCE_NODE="5"
#!   TARGET_NODE="3"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="6"
#!   SOURCE_NODE="3"
#!   TARGET_NODE="2"
#!   SOURCE_PORT_DESC="fo 4 success"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="7"
#!   SOURCE_NODE="3"
#!   TARGET_NODE="4"
#!   SOURCE_PORT_DESC="fo 5 fail"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! </FEAT_LINKS>
#! <BREAKPOINTS>
#! </BREAKPOINTS>
#! <ATTR_LINKS>
#! </ATTR_LINKS>
#! <SUBDOCUMENTS>
#! </SUBDOCUMENTS>
#! <LOOKUP_TABLES>
#! </LOOKUP_TABLES>
#! </TRANSFORMER>

FME_PYTHON_VERSION 36
DEFAULT_MACRO $(AzureBlobDeleter_WORKSPACE_NAME)_ACCOUNT 
DEFAULT_MACRO $(AzureBlobDeleter_WORKSPACE_NAME)_KEY 
DEFAULT_MACRO $(AzureBlobDeleter_WORKSPACE_NAME)_CONTAINER 
DEFAULT_MACRO $(AzureBlobDeleter_WORKSPACE_NAME)_BLOB_NAME 
#! START_HEADER
#! END_HEADER

DEFAULT_MACRO WB_CURRENT_CONTEXT
DEFAULT_MACRO AzureBlobDeleter_WORKSPACE_NAME ""
INCLUDE [puts {MACRO WB_OLD_CONTEXT_$(AzureBlobDeleter_WORKSPACE_NAME) $(WB_CURRENT_CONTEXT)};          puts {MACRO WB_CURRENT_CONTEXT $(AzureBlobDeleter_WORKSPACE_NAME)}]
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_Input1571047692 Input Splitter"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_Input"   OUTPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_Input"
# -------------------------------------------------------------------------
FACTORY_DEF {*} AttrSetFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_FetchParamsAttributeCreator    INPUT  FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_Input"    MULTI_FEATURE_MODE NO    NULL_ATTR_MODE NO_OP     ATTRSET_CREATE_DIRECTIVES _PROPAGATE_MISSING_FDIV     ATTR_ACTION { "" "_azure_blob_deleter_storage_account" "SET_TO" "$($(AzureBlobDeleter_WORKSPACE_NAME)_ACCOUNT)" }      ATTR_ACTION { "" "_azure_blob_deleter_key" "SET_TO" "$($(AzureBlobDeleter_WORKSPACE_NAME)_KEY$encode)" }      ATTR_ACTION { "" "_azure_blob_deleter_container" "SET_TO" "$($(AzureBlobDeleter_WORKSPACE_NAME)_CONTAINER)" }      ATTR_ACTION { "" "_azure_blob_deleter_blob_name" "SET_TO" "$($(AzureBlobDeleter_WORKSPACE_NAME)_BLOB_NAME)" }    OUTPUT OUTPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_FetchParamsAttributeCreator_OUTPUT"
# -------------------------------------------------------------------------
FME_PYTHON_PATH "$(FME_MF_DIR)"
FACTORY_DEF * PythonFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_PythonCaller    INPUT  FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_FetchParamsAttributeCreator_OUTPUT"    SYMBOL_NAME DeleteFeatureProcessor    PYTHON_NAMESPACE FMEOBJECTS    SOURCE_CODE from<space>fmeobjects<space>import<space>FMELogFile<comma><space>FME_INFORM<comma><space>FME_WARN<comma><space>FME_ERROR<lf>#from<space>cStringIO<space>import<space>StringIO<lf>from<space>io<space>import<space>StringIO<comma><space>BytesIO<lf>from<space>AzureAPI<space>import<space>AzureAPI<lf><lf>class<space>DeleteFeatureProcessor<openparen>object<closeparen>:<lf><space><space><space><space>def<space>__init__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile<space>=<space>FMELogFile<openparen><closeparen><lf><space><space><space><space><space><space><space><space>#<space>Make<space>sure<space>to<space>change<space>if<space>Custom<space>transformer<space>is<space>renamed<space><openparen>not<space>transformer<space>instance<space>name<space>-<space>that<apos>s<space>what<space>we<apos>re<space>fetching<closeparen><space><lf><space><space><space><space><space><space><space><space>self.xformer_name<space>=<space>FME_MacroValues<openbracket><apos>AzureBlobDeleter_WORKSPACE_NAME<apos><closebracket><lf><space><space><space><space>def<space>info<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_INFORM<closeparen><lf><space><space><space><space><space><space><space><space>#self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_WARN<closeparen><space>#<space>while<space>developing<space>for<space>popping<space>out<lf><space><space><space><space>def<space>input<openparen>self<comma>feature<closeparen>:<lf><space><space><space><space><space><space><space><space>try:<lf><space><space><space><space><space><space><space><space><space><space><space><space>account<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_deleter_storage_account<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>secret<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_deleter_key<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>azure<space>=<space>AzureAPI<openparen>account<comma><space>secret<comma><space>self.logfile<comma><space>logprefix<space>=<space>self.xformer_name<comma><space>loglevel<space>=<space>FME_INFORM<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>container<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_deleter_container<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>blob_name<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_deleter_blob_name<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>azure.delete_blob<openparen>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_deleter_status<apos><comma><space><apos>success<apos><closeparen><lf><space><space><space><space><space><space><space><space>except<space>Exception<space>as<space>e:<lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_deleter_status<apos><comma><space><apos>fail<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_deleter_error_message<apos><comma><space>str<openparen>e<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.logfile.logException<openparen>e<comma><space>FME_ERROR<closeparen><lf><space><space><space><space><space><space><space><space>self.pyoutput<openparen>feature<closeparen><lf><space><space><space><space>def<space>close<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>del<space>self.logfile    OUTPUT PYOUTPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_PythonCaller_OUTPUT"
# -------------------------------------------------------------------------
Lookup $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_AttributeFilterLut   success ok   fail ok   "" notok   ENCODED
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter    INPUT  FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_PythonCaller_OUTPUT"    TEST @Lookup($(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_AttributeFilterLut,_azure_blob_deleter_status,ENCODED_ATTR) == "ok"    OUTPUT PASSED FEATURE_TYPE * @FeatureType(SET_FROM_ATTR, _azure_blob_deleter_status, $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter)    OUTPUT FAILED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<NULL>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_NullFilter    INPUT FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<NULL>    TEST _azure_blob_deleter_status ATTRIBUTE_VALUE_NULL "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<NULL>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<MISSING>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_MissingFilter    INPUT FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<MISSING>    TEST _azure_blob_deleter_status ATTRIBUTE_IS_MISSING "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<MISSING>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_BlankFilter    INPUT FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>    TEST _azure_blob_deleter_status ATTRIBUTE_IS_EMPTY "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<EMPTY>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter <EMPTY> Transformer Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<EMPTY>"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter <MISSING> Transformer Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<MISSING>"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter <NULL> Transformer Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<NULL>"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter <UNFILTERED> Transformer Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>"
# -------------------------------------------------------------------------
INCLUDE [    set macroLine "MACRO $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF {*} TeeFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_2    INPUT  FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_fail"    OUTPUT { FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"        @RemoveAttributes(fme_encoded,_azure_blob_deleter_storage_account,_azure_blob_deleter_status,_azure_blob_deleter_blob_name,_azure_blob_deleter_container,_azure_blob_deleter_key)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP)")         }
# -------------------------------------------------------------------------
INCLUDE [    set macroLine "MACRO $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF {*} TeeFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover    INPUT  FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_success"    OUTPUT { FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_OUTPUT"        @RemoveAttributes(fme_encoded,_azure_blob_deleter_error_message,_azure_blob_deleter_storage_account,_azure_blob_deleter_status,_azure_blob_deleter_blob_name,_azure_blob_deleter_container,_azure_blob_deleter_key)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_LIST_EXP)")         }
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_Deleted1571047692 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_Deleted"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_Fail1571047692 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_Fail"
INCLUDE [puts {MACRO WB_CURRENT_CONTEXT $(WB_OLD_CONTEXT_$(AzureBlobDeleter_WORKSPACE_NAME))}]
#! <?xml version="1.0" encoding="UTF-8" ?>
#! <TRANSFORMER
# TRANSFORMER_BEGIN AzureBlobDeleter,2,"Web Services",fc8feed7-6213-414e-a976-7ec437d2afd3,"Linked by Default",No,NO_PARALLELISM,,No,17539,YES,No,
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Deletes a blob from the Azure Blob Storage container</p>
# 
# TRANSFORMER_END
#!   CATEGORY="Web Services"
#!   FMX_INSERT_MODE="Linked by Default"
#!   LAST_SAVE_DATE="2017-10-04T09:01:36"
#!   MAX_LOOP_ITERATIONS=""
#!   SHOW_INFO_NODES="true"
#!   DOC_TOP_LEFT="-858.009 -387.504"
#!   TITLE="AzureBlobDeleter"
#!   PYTHON_COMPATIBILITY=""
#!   FME_PROCESS_GROUP_BY=""
#!   USE_MARKDOWN=""
#!   USAGE="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Storage account:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the storage account. Look for this under the portal.azure.com.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-weight:600;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Access key:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the access key for the blob inside Azure. You can find this when you select the storage inside the protal.azure.com website, go to settings and then search for &quot;Access keys&quot;.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Use access keys to authenticate your applications when making requests to this Azure storage account. Store your access keys securely - for example, using Azure Key Vault - and don&apos;t share them. We recommend regenerating your access keys regularly. You are provided two access keys so that you can maintain connections using one key while regenerating the other. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Container name:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The storage countainer name. These are listed directly under the storage account pannel. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Blob name:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The name of the blob you are about to delete. You can delete blobs in folders by simply using the &apos;/&apos; for example &quot;folder1/folder2/blobname&quot;. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;"
#!   ITERATION_COUNT_ATTR=""
#!   FME_LINKED_TRANSFORMER_VERSION="2"
#!   FME_DOCUMENT_PRIORGUID=""
#!   FME_PROCESS_COUNT="NO_PARALLELISM"
#!   MARKDOWN_USAGE=""
#!   EXPLICIT_BOOKMARK_ORDER="false"
#!   MARKDOWN_DESCRIPTION=""
#!   XFORM_DEPRECATED="No"
#!   DESCRIPTION="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Deletes a blob from the Azure Blob Storage container&lt;/p&gt;&#10;"
#!   FME_PROCESS_GROUPS_ORDERED="No"
#!   FME_BUILD_NUM="17539"
#!   SHOW_ANNOTATIONS="true"
#!   ZOOM_SCALE="100"
#!   HISTORY="2016-08-08,peter.segerstedt&lt;at&gt;eea.europa.eu,Original&lt;space&gt;definition"
#!   BLOCKED_LOOPING="No"
#!   ATTR_TYPE_ENCODING="SDF"
#!   DOC_EXTENTS="3622.66 256.252"
#!   LAST_SAVE_BUILD="FME(R) 2017.1.0.0 (20170731 - Build 17539 - WIN64)"
#!   PASSWORD=""
#!   FMX_ATTRIBUTE_PROPOGATION_MODE="AUTO"
#!   FME_SERVER_SERVICES=""
#!   VIEW_POSITION="-1028.14 753.133"
#!   FME_DOCUMENT_GUID="fc8feed7-6213-414e-a976-7ec437d2afd3"
#!   WORKSPACE_VERSION="1"
#!   WARN_INVALID_XFORM_PARAM="Yes"
#! >
#! <DATASETS>
#! </DATASETS>
#! <DATA_TYPES>
#! </DATA_TYPES>
#! <GEOM_TYPES>
#! </GEOM_TYPES>
#! <FEATURE_TYPES>
#! </FEATURE_TYPES>
#! <FMESERVER>
#! </FMESERVER>
#! <GLOBAL_PARAMETERS>
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR ACCOUNT &quot; &quot; Account:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI PASSWORD_OR_ATTR KEY Key:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="true"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR CONTAINER &quot; &quot; Container:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR BLOB_NAME &quot; &quot; Blob Name:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! </GLOBAL_PARAMETERS>
#! <COMMENTS>
#! </COMMENTS>
#! <CONSTANTS>
#! </CONSTANTS>
#! <BOOKMARKS>
#! </BOOKMARKS>
#! <TRANSFORMERS>
#! <TRANSFORMER
#!   IDENTIFIER="1"
#!   TYPE="AttributeCreator"
#!   VERSION="8"
#!   POSITION="-249.503 -131.252"
#!   BOUNDING_RECT="-249.503 -131.252 618.756 71"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="MULTI_FEATURE_MODE" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="FetchParamsAttributeCreator"/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_HANDLING" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_VALUE" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="NUM_SUBSEQUENT_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_GRP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_MODE_DISPLAY" PARM_VALUE="No Substitution"/>
#!     <XFORM_PARM PARM_NAME="NUM_PRIOR_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="ATTR_TABLE" PARM_VALUE="&quot;&quot; _azure_blob_deleter_storage_account SET_TO $(ACCOUNT)  _azure_blob_deleter_key SET_TO $(KEY)  _azure_blob_deleter_container SET_TO $(CONTAINER)  _azure_blob_deleter_blob_name SET_TO $(BLOB_NAME)"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="2"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="1699.52 -131.252"
#!   BOUNDING_RECT="1699.52 -131.252 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover"/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_azure_blob_deleter_error_message,_azure_blob_deleter_storage_account,_azure_blob_deleter_status,_azure_blob_deleter_blob_name,_azure_blob_deleter_container,_azure_blob_deleter_key"/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="3"
#!   TYPE="AttributeFilter"
#!   VERSION="4"
#!   POSITION="1105.77 -131.252"
#!   BOUNDING_RECT="1105.77 -131.252 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="&lt;EMPTY&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="&lt;MISSING&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <OUTPUT_FEAT NAME="&lt;NULL&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="2"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <OUTPUT_FEAT NAME="&lt;UNFILTERED&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="3"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <OUTPUT_FEAT NAME="success"/>
#!     <FEAT_COLLAPSED COLLAPSED="4"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <OUTPUT_FEAT NAME="fail"/>
#!     <FEAT_COLLAPSED COLLAPSED="5"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_PARM PARM_NAME="ATTR_NAME" PARM_VALUE="_azure_blob_deleter_status"/>
#!     <XFORM_PARM PARM_NAME="ATTR_VALUES_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeFilter"/>
#!     <XFORM_PARM PARM_NAME="ATTR_VALUES" PARM_VALUE="&lt;lt&gt;EMPTY&lt;gt&gt;,&lt;lt&gt;MISSING&lt;gt&gt;,&lt;lt&gt;NULL&lt;gt&gt;,&lt;lt&gt;UNFILTERED&lt;gt&gt;,success,fail"/>
#!     <XFORM_PARM PARM_NAME="XFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTR_GROUP" PARM_VALUE=""/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="4"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="1699.52 -387.504"
#!   BOUNDING_RECT="1699.52 -387.504 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover_2"/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_azure_blob_deleter_storage_account,_azure_blob_deleter_status,_azure_blob_deleter_blob_name,_azure_blob_deleter_container,_azure_blob_deleter_key"/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="5"
#!   TYPE="PythonCaller"
#!   VERSION="4"
#!   POSITION="518.257 -131.252"
#!   BOUNDING_RECT="518.257 -131.252 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PYTHONSOURCE" PARM_VALUE="from&lt;space&gt;fmeobjects&lt;space&gt;import&lt;space&gt;FMELogFile&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;comma&gt;&lt;space&gt;FME_WARN&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;lf&gt;from&lt;space&gt;cStringIO&lt;space&gt;import&lt;space&gt;StringIO&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;DeleteFeatureProcessor&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile&lt;space&gt;=&lt;space&gt;FMELogFile&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;Make&lt;space&gt;sure&lt;space&gt;to&lt;space&gt;change&lt;space&gt;if&lt;space&gt;Custom&lt;space&gt;transformer&lt;space&gt;is&lt;space&gt;renamed&lt;space&gt;&lt;openparen&gt;not&lt;space&gt;transformer&lt;space&gt;instance&lt;space&gt;name&lt;space&gt;-&lt;space&gt;that&lt;apos&gt;s&lt;space&gt;what&lt;space&gt;we&lt;apos&gt;re&lt;space&gt;fetching&lt;closeparen&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.xformer_name&lt;space&gt;=&lt;space&gt;FME_MacroValues&lt;openbracket&gt;&lt;apos&gt;AzureBlobDeleter_WORKSPACE_NAME&lt;apos&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;info&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_WARN&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;while&lt;space&gt;developing&lt;space&gt;for&lt;space&gt;popping&lt;space&gt;out&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;input&lt;openparen&gt;self&lt;comma&gt;feature&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;try:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;account&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_storage_account&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;secret&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_key&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;azure&lt;space&gt;=&lt;space&gt;AzureAPI&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;self.logfile&lt;comma&gt;&lt;space&gt;logprefix&lt;space&gt;=&lt;space&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;loglevel&lt;space&gt;=&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;container&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_container&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_blob_name&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;azure.delete_blob&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;success&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;except&lt;space&gt;Exception&lt;space&gt;as&lt;space&gt;e:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;fail&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_error_message&lt;apos&gt;&lt;comma&gt;&lt;space&gt;str&lt;openparen&gt;e&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logException&lt;openparen&gt;e&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.pyoutput&lt;openparen&gt;feature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;close&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;del&lt;space&gt;self.logfile&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;#####&lt;space&gt;Code&lt;space&gt;below&lt;space&gt;*should*&lt;space&gt;be&lt;space&gt;more&lt;space&gt;or&lt;space&gt;less&lt;space&gt;standalone&lt;space&gt;&lt;openparen&gt;no&lt;space&gt;bindings&lt;space&gt;to&lt;space&gt;fme&lt;closeparen&gt;&lt;space&gt;#####&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;import&lt;space&gt;os&lt;lf&gt;import&lt;space&gt;requests&lt;lf&gt;from&lt;space&gt;collections&lt;space&gt;import&lt;space&gt;OrderedDict&lt;lf&gt;import&lt;space&gt;datetime&lt;lf&gt;&lt;lf&gt;&lt;lf&gt;import&lt;space&gt;base64&lt;lf&gt;import&lt;space&gt;uuid&lt;lf&gt;import&lt;space&gt;hashlib&lt;lf&gt;import&lt;space&gt;hmac&lt;lf&gt;import&lt;space&gt;sys&lt;lf&gt;&lt;lf&gt;PUT_BLOB_LIMIT&lt;space&gt;=&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;64&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;64&lt;space&gt;MB&lt;lf&gt;PUT_BLOCK_CHUNK_SIZE&lt;space&gt;=&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;4&lt;space&gt;#&lt;space&gt;4&lt;space&gt;MB&lt;lf&gt;AZ_VERSION&lt;space&gt;=&lt;space&gt;&lt;apos&gt;2015-02-21&lt;apos&gt;&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;StdoutLogger&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;simple&lt;space&gt;log&lt;space&gt;class&lt;space&gt;to&lt;space&gt;mimic&lt;space&gt;fme&lt;space&gt;api&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;logMessageString&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;msg&lt;comma&gt;&lt;space&gt;level&lt;space&gt;=&lt;space&gt;0&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;print&lt;space&gt;msg&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;logException&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;e&lt;comma&gt;&lt;space&gt;level&lt;space&gt;=&lt;space&gt;0&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logMessageString&lt;openparen&gt;str&lt;openparen&gt;e&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;level&lt;closeparen&gt;&lt;lf&gt;class&lt;space&gt;AzureAPI&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;sys.version_info&lt;space&gt;&lt;lt&gt;&lt;space&gt;&lt;openparen&gt;3&lt;comma&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;from&lt;space&gt;collections&lt;space&gt;import&lt;space&gt;Iterable&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_unicode_type&lt;space&gt;=&lt;space&gt;unicode&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;from&lt;space&gt;collections.abc&lt;space&gt;import&lt;space&gt;Iterable&lt;space&gt;#&lt;space&gt;TODO:&lt;space&gt;this&lt;space&gt;code&lt;space&gt;was&lt;space&gt;found&lt;space&gt;somewhere&lt;space&gt;but&lt;space&gt;its&lt;space&gt;logic&lt;space&gt;is&lt;space&gt;not&lt;space&gt;clear&lt;space&gt;to&lt;space&gt;me...&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_unicode_type&lt;space&gt;=&lt;space&gt;str&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;logfile&lt;space&gt;=&lt;space&gt;StdoutLogger&lt;openparen&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;logprefix&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;comma&gt;&lt;space&gt;loglevel&lt;space&gt;=&lt;space&gt;0&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile&lt;space&gt;=&lt;space&gt;logfile&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logprefix&lt;space&gt;=&lt;space&gt;logprefix&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.loglevel&lt;space&gt;=&lt;space&gt;loglevel&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.account&lt;space&gt;=&lt;space&gt;account&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.secret&lt;space&gt;=&lt;space&gt;secret&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;info&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.logprefix&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;self.loglevel&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;append_block&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=appendblock&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Appending&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp:appendblock&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;ERROR&lt;space&gt;status&lt;space&gt;%s:&lt;space&gt;`%s`&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;r.status_code&lt;comma&gt;&lt;space&gt;_string_to_sign&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_block&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;block_id&lt;space&gt;=&lt;space&gt;base64.b64encode&lt;openparen&gt;uuid.uuid4&lt;openparen&gt;&lt;closeparen&gt;.hex&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#https:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;mycontainer&lt;solidus&gt;myblob?comp=block&lt;amp&gt;blockid=id&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=block&lt;amp&gt;blockid=%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_id&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;block&lt;space&gt;of&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;blockid:%s&lt;backslash&gt;ncomp:block&lt;apos&gt;&lt;space&gt;%&lt;space&gt;block_id&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;block_id&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_block_list&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_list&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;list_fragments&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;s:&lt;space&gt;&lt;apos&gt;&lt;lt&gt;Uncommitted&lt;gt&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;lt&gt;&lt;solidus&gt;Uncommitted&lt;gt&gt;&lt;apos&gt;.format&lt;openparen&gt;s&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;block_list&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;lt&gt;?xml&lt;space&gt;version=&lt;quote&gt;1.0&lt;quote&gt;&lt;space&gt;encoding=&lt;quote&gt;utf-8&lt;quote&gt;?&lt;gt&gt;&lt;lt&gt;BlockList&lt;gt&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;lt&gt;&lt;solidus&gt;BlockList&lt;gt&gt;&lt;apos&gt;.format&lt;openparen&gt;list_fragments&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=blocklist&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp:blocklist&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_blob&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.seek&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;os.SEEK_END&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;size&lt;space&gt;=&lt;space&gt;fin.tell&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.seek&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;os.SEEK_SET&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;size&lt;space&gt;&lt;lt&gt;&lt;space&gt;PUT_BLOB_LIMIT:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;fin.read&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ids&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;offset&lt;space&gt;in&lt;space&gt;range&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;size&lt;comma&gt;&lt;space&gt;PUT_BLOCK_CHUNK_SIZE&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;`%s`&lt;comma&gt;&lt;space&gt;%s%%&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;blob_name&lt;comma&gt;&lt;space&gt;int&lt;openparen&gt;round&lt;openparen&gt;offset&lt;space&gt;*&lt;space&gt;100&lt;space&gt;&lt;solidus&gt;&lt;space&gt;size&lt;closeparen&gt;&lt;closeparen&gt;&lt;space&gt;&lt;closeparen&gt;&lt;space&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;block_size&lt;space&gt;=&lt;space&gt;min&lt;openparen&gt;PUT_BLOCK_CHUNK_SIZE&lt;comma&gt;&lt;space&gt;size&lt;space&gt;-&lt;space&gt;offset&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ids.append&lt;openparen&gt;self.put_block&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin.read&lt;openparen&gt;block_size&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.put_block_list&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;ids&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;&lt;apos&gt;ID&lt;space&gt;LIST&lt;space&gt;COMMITTED:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;backslash&gt;t&lt;apos&gt;.join&lt;openparen&gt;ids&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Done&lt;space&gt;uploading&lt;space&gt;%s&lt;space&gt;bytes&lt;space&gt;of&lt;space&gt;data&lt;apos&gt;&lt;space&gt;%&lt;space&gt;size&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;list_blobs&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;https:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;mycontainer?restype=container&lt;amp&gt;comp=list&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s?restype=container&lt;amp&gt;comp=list&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;&lt;apos&gt;comp:list&lt;backslash&gt;nrestype:container&lt;apos&gt;&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;GET&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;block&lt;space&gt;of&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.get&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;200:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;r.content&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;delete_blob&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;DELETE&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Deleting&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.delete&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;202:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_authorize&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;headers&lt;comma&gt;&lt;space&gt;container_name&lt;comma&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;None&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;None&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;PUT&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;content_length&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Content-Length&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;!=&lt;space&gt;&lt;apos&gt;0&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;content_length&lt;space&gt;=&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Content-Length&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;http_method&lt;space&gt;#&lt;space&gt;VERB&lt;space&gt;&lt;openparen&gt;http-method&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-Encoding&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-Language&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;content_length&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-MD5&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Date&lt;apos&gt;&lt;comma&gt;&lt;apos&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;Date&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-Modified-Since&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-None-Match&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-Unmodified-Since&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Range&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;?&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;?&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;comma&gt;&lt;space&gt;None&lt;closeparen&gt;:&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-date:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-date&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-version:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;blob_name:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container_name&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;querystringencoded:&lt;space&gt;fields.append&lt;openparen&gt;querystringencoded&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;.join&lt;openparen&gt;fields&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;signature&lt;space&gt;=&lt;space&gt;AzureAPI._sign_string&lt;openparen&gt;self.secret&lt;space&gt;&lt;comma&gt;&lt;space&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;Authorization&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;SharedKey&lt;space&gt;%s:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;signature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;_string_to_sign&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_create_headers&lt;openparen&gt;data&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;OrderedDict&lt;openparen&gt;&lt;opencurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;Content-Length&lt;apos&gt;:&lt;space&gt;str&lt;openparen&gt;len&lt;openparen&gt;data&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-date&lt;apos&gt;:&lt;space&gt;AzureAPI._httpdate&lt;openparen&gt;datetime.datetime.utcnow&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;:&lt;space&gt;AZ_VERSION&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closecurly&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_httpdate&lt;openparen&gt;dt&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;Return&lt;space&gt;a&lt;space&gt;string&lt;space&gt;representation&lt;space&gt;of&lt;space&gt;a&lt;space&gt;date&lt;space&gt;according&lt;space&gt;to&lt;space&gt;RFC&lt;space&gt;1123&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;openparen&gt;HTTP&lt;solidus&gt;1.1&lt;closeparen&gt;.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;The&lt;space&gt;supplied&lt;space&gt;date&lt;space&gt;must&lt;space&gt;be&lt;space&gt;in&lt;space&gt;UTC.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;weekday&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;quote&gt;Mon&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Tue&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Wed&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Thu&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Fri&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sat&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sun&lt;quote&gt;&lt;closebracket&gt;&lt;openbracket&gt;dt.weekday&lt;openparen&gt;&lt;closeparen&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;month&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;quote&gt;Jan&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Feb&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Mar&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Apr&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;May&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Jun&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Jul&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Aug&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sep&lt;quote&gt;&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;Oct&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Nov&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Dec&lt;quote&gt;&lt;closebracket&gt;&lt;openbracket&gt;dt.month&lt;space&gt;-&lt;space&gt;1&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;&lt;quote&gt;%s&lt;comma&gt;&lt;space&gt;%02d&lt;space&gt;%s&lt;space&gt;%04d&lt;space&gt;%02d:%02d:%02d&lt;space&gt;GMT&lt;quote&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;weekday&lt;comma&gt;&lt;space&gt;dt.day&lt;comma&gt;&lt;space&gt;month&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;dt.year&lt;comma&gt;&lt;space&gt;dt.hour&lt;comma&gt;&lt;space&gt;dt.minute&lt;comma&gt;&lt;space&gt;dt.second&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_encode_base64&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;encoded&lt;space&gt;=&lt;space&gt;base64.b64encode&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;encoded.decode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_decode_base64_to_bytes&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;base64.b64decode&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_sign_string&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;string_to_sign&lt;comma&gt;&lt;space&gt;key_is_base64=True&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;key_is_base64:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;key&lt;space&gt;=&lt;space&gt;AzureAPI._decode_base64_to_bytes&lt;openparen&gt;key&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;key&lt;space&gt;=&lt;space&gt;key.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;string_to_sign&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;string_to_sign&lt;space&gt;=&lt;space&gt;string_to_sign.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;signed_hmac_sha256&lt;space&gt;=&lt;space&gt;hmac.HMAC&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;string_to_sign&lt;comma&gt;&lt;space&gt;hashlib.sha256&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;digest&lt;space&gt;=&lt;space&gt;signed_hmac_sha256.digest&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;encoded_digest&lt;space&gt;=&lt;space&gt;AzureAPI._encode_base64&lt;openparen&gt;digest&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;encoded_digest&lt;lf&gt;"/>
#!     <XFORM_PARM PARM_NAME="NEW_ATTRIBUTES" PARM_VALUE="_azure_blob_deleter_status _azure_blob_deleter_error_message"/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="PythonCaller"/>
#!     <XFORM_PARM PARM_NAME="HIDE_ATTRIBUTES" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ADVANCED_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PYTHONSYMBOL" PARM_VALUE="DeleteFeatureProcessor"/>
#! </TRANSFORMER>
#! </TRANSFORMERS>
#! <SUBDOCUMENT_IOS>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="10"
#!   NAME="Input"
#!   POSITION="-858.009 -131.252"
#!   BOUNDING_RECT="-858.009 -131.252 -1 -1"
#!   COLLAPSED="true"
#!   PUBLISHED="true"
#!   IS_SOURCE="true"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="12"
#!   NAME="Deleted"
#!   POSITION="2764.65 -199.752"
#!   BOUNDING_RECT="2764.65 -199.752 -1 -1"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="13"
#!   NAME="Fail"
#!   POSITION="2764.65 -387.504"
#!   BOUNDING_RECT="2764.65 -387.504 -1 -1"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! </SUBDOCUMENT_IOS>
#! <FEAT_LINKS>
#! <FEAT_LINK
#!   IDENTIFIER="11"
#!   SOURCE_NODE="10"
#!   TARGET_NODE="1"
#!   SOURCE_PORT_DESC="0"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="8"
#!   SOURCE_NODE="1"
#!   TARGET_NODE="5"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="14"
#!   SOURCE_NODE="2"
#!   TARGET_NODE="12"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="15"
#!   SOURCE_NODE="4"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="9"
#!   SOURCE_NODE="5"
#!   TARGET_NODE="3"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="6"
#!   SOURCE_NODE="3"
#!   TARGET_NODE="2"
#!   SOURCE_PORT_DESC="fo 4 success"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="7"
#!   SOURCE_NODE="3"
#!   TARGET_NODE="4"
#!   SOURCE_PORT_DESC="fo 5 fail"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! </FEAT_LINKS>
#! <BREAKPOINTS>
#! </BREAKPOINTS>
#! <ATTR_LINKS>
#! </ATTR_LINKS>
#! <SUBDOCUMENTS>
#! </SUBDOCUMENTS>
#! <LOOKUP_TABLES>
#! </LOOKUP_TABLES>
#! </TRANSFORMER>
FME_PYTHON_VERSION 
DEFAULT_MACRO $(AzureBlobDeleter_WORKSPACE_NAME)_ACCOUNT 
DEFAULT_MACRO $(AzureBlobDeleter_WORKSPACE_NAME)_KEY 
DEFAULT_MACRO $(AzureBlobDeleter_WORKSPACE_NAME)_CONTAINER 
DEFAULT_MACRO $(AzureBlobDeleter_WORKSPACE_NAME)_BLOB_NAME 
#! START_HEADER
#! END_HEADER

LOG_TIMINGS YES
LOG_FILTER_MASK -1
DEFAULT_MACRO WB_CURRENT_CONTEXT
DEFAULT_MACRO AzureBlobDeleter_WORKSPACE_NAME ""
INCLUDE [puts {MACRO WB_OLD_CONTEXT_$(AzureBlobDeleter_WORKSPACE_NAME) $(WB_CURRENT_CONTEXT)};          puts {MACRO WB_CURRENT_CONTEXT $(AzureBlobDeleter_WORKSPACE_NAME)}]
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_Input1507100497 Input Splitter"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_Input"   OUTPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_Input"
# -------------------------------------------------------------------------

FACTORY_DEF {*} AttrSetFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_FetchParamsAttributeCreator    INPUT  FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_Input"    MULTI_FEATURE_MODE NO    NULL_ATTR_MODE NO_OP     ATTRSET_CREATE_DIRECTIVES _PROPAGATE_MISSING_FDIV     ATTR_ACTION { "" "_azure_blob_deleter_storage_account" "SET_TO" "$($(AzureBlobDeleter_WORKSPACE_NAME)_ACCOUNT)" }      ATTR_ACTION { "" "_azure_blob_deleter_key" "SET_TO" "$($(AzureBlobDeleter_WORKSPACE_NAME)_KEY$encode)" }      ATTR_ACTION { "" "_azure_blob_deleter_container" "SET_TO" "$($(AzureBlobDeleter_WORKSPACE_NAME)_CONTAINER)" }      ATTR_ACTION { "" "_azure_blob_deleter_blob_name" "SET_TO" "$($(AzureBlobDeleter_WORKSPACE_NAME)_BLOB_NAME)" }    OUTPUT OUTPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_FetchParamsAttributeCreator_OUTPUT"


# -------------------------------------------------------------------------


FME_PYTHON_PATH "$(FME_MF_DIR)"

FACTORY_DEF * PythonFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_PythonCaller    INPUT  FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_FetchParamsAttributeCreator_OUTPUT"    SYMBOL_NAME DeleteFeatureProcessor    PYTHON_NAMESPACE FMEOBJECTS    SOURCE_CODE from<space>fmeobjects<space>import<space>FMELogFile<comma><space>FME_INFORM<comma><space>FME_WARN<comma><space>FME_ERROR<lf>from<space>cStringIO<space>import<space>StringIO<lf><lf>class<space>DeleteFeatureProcessor<openparen>object<closeparen>:<lf><space><space><space><space>def<space>__init__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile<space>=<space>FMELogFile<openparen><closeparen><lf><space><space><space><space><space><space><space><space>#<space>Make<space>sure<space>to<space>change<space>if<space>Custom<space>transformer<space>is<space>renamed<space><openparen>not<space>transformer<space>instance<space>name<space>-<space>that<apos>s<space>what<space>we<apos>re<space>fetching<closeparen><space><lf><space><space><space><space><space><space><space><space>self.xformer_name<space>=<space>FME_MacroValues<openbracket><apos>AzureBlobDeleter_WORKSPACE_NAME<apos><closebracket><lf><space><space><space><space>def<space>info<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_INFORM<closeparen><lf><space><space><space><space><space><space><space><space>#self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_WARN<closeparen><space>#<space>while<space>developing<space>for<space>popping<space>out<lf><space><space><space><space>def<space>input<openparen>self<comma>feature<closeparen>:<lf><space><space><space><space><space><space><space><space>try:<lf><space><space><space><space><space><space><space><space><space><space><space><space>account<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_deleter_storage_account<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>secret<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_deleter_key<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>azure<space>=<space>AzureAPI<openparen>account<comma><space>secret<comma><space>self.logfile<comma><space>logprefix<space>=<space>self.xformer_name<comma><space>loglevel<space>=<space>FME_INFORM<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>container<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_deleter_container<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>blob_name<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_deleter_blob_name<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>azure.delete_blob<openparen>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_deleter_status<apos><comma><space><apos>success<apos><closeparen><lf><space><space><space><space><space><space><space><space>except<space>Exception<space>as<space>e:<lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_deleter_status<apos><comma><space><apos>fail<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_deleter_error_message<apos><comma><space>str<openparen>e<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.logfile.logException<openparen>e<comma><space>FME_ERROR<closeparen><lf><space><space><space><space><space><space><space><space>self.pyoutput<openparen>feature<closeparen><lf><space><space><space><space>def<space>close<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>del<space>self.logfile<lf><space><space><space><space><space><space><space><space><lf>#####<space>Code<space>below<space>*should*<space>be<space>more<space>or<space>less<space>standalone<space><openparen>no<space>bindings<space>to<space>fme<closeparen><space>#####<lf><space><space><space><space><space><space><space><space><lf>import<space>os<lf>import<space>requests<lf>from<space>collections<space>import<space>OrderedDict<lf>import<space>datetime<lf><lf><lf>import<space>base64<lf>import<space>uuid<lf>import<space>hashlib<lf>import<space>hmac<lf>import<space>sys<lf><lf>PUT_BLOB_LIMIT<space>=<space>1024<space>*<space>1024<space>*<space>64<space><space><space><space><space><space>#<space>64<space>MB<lf>PUT_BLOCK_CHUNK_SIZE<space>=<space>1024<space>*<space>1024<space>*<space>4<space>#<space>4<space>MB<lf>AZ_VERSION<space>=<space><apos>2015-02-21<apos><lf><lf>class<space>StdoutLogger<openparen>object<closeparen>:<lf><space><space><space><space><apos><apos><apos><lf><space><space><space><space>simple<space>log<space>class<space>to<space>mimic<space>fme<space>api<lf><space><space><space><space><apos><apos><apos><lf><space><space><space><space>def<space>logMessageString<openparen>self<comma><space>msg<comma><space>level<space>=<space>0<closeparen>:<lf><space><space><space><space><space><space><space><space>print<space>msg<lf><space><space><space><space>def<space>logException<openparen>self<comma><space>e<comma><space>level<space>=<space>0<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logMessageString<openparen>str<openparen>e<closeparen><comma><space>level<closeparen><lf>class<space>AzureAPI<openparen>object<closeparen>:<lf><space><space><space><space>if<space>sys.version_info<space><lt><space><openparen>3<comma><closeparen>:<lf><space><space><space><space><space><space><space><space>from<space>collections<space>import<space>Iterable<lf><space><space><space><space><space><space><space><space>_unicode_type<space>=<space>unicode<lf><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space>from<space>collections.abc<space>import<space>Iterable<space>#<space>TODO:<space>this<space>code<space>was<space>found<space>somewhere<space>but<space>its<space>logic<space>is<space>not<space>clear<space>to<space>me...<space><lf><space><space><space><space><space><space><space><space>_unicode_type<space>=<space>str<lf><space><space><space><space>def<space>__init__<openparen>self<comma><space>account<comma><space>secret<comma><space>logfile<space>=<space>StdoutLogger<openparen><closeparen><comma><space>logprefix<space>=<space><apos><apos><comma><space>loglevel<space>=<space>0<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile<space>=<space>logfile<space><lf><space><space><space><space><space><space><space><space>self.logprefix<space>=<space>logprefix<lf><space><space><space><space><space><space><space><space>self.loglevel<space>=<space>loglevel<lf><space><space><space><space><space><space><space><space>self.account<space>=<space>account<lf><space><space><space><space><space><space><space><space>self.secret<space>=<space>secret<lf><space><space><space><space>def<space>info<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.logprefix<comma><space>message<closeparen><comma><space>self.loglevel<closeparen><lf><space><space><space><space>def<space>append_block<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_data<closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>block_data<closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=appendblock<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Appending<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>comp:appendblock<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data<space>=<space>block_data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>ERROR<space>status<space>%s:<space>`%s`<apos><space>%<space><openparen>r.status_code<comma><space>_string_to_sign<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space>def<space>put_block<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_data<closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>block_data<closeparen><lf><space><space><space><space><space><space><space><space>headers<openbracket><apos>x-ms-blob-type<apos><closebracket><space>=<space><apos>BlockBlob<apos><lf><space><space><space><space><space><space><space><space>block_id<space>=<space>base64.b64encode<openparen>uuid.uuid4<openparen><closeparen>.hex<closeparen><lf><space><space><space><space><space><space><space><space>#https:<solidus><solidus>myaccount.blob.core.windows.net<solidus>mycontainer<solidus>myblob?comp=block<amp>blockid=id<lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=block<amp>blockid=%s<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<comma><space>block_id<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>block<space>of<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>blockid:%s<backslash>ncomp:block<apos><space>%<space>block_id<closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=block_data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>return<space>block_id<lf><space><space><space><space>def<space>put_block_list<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_list<closeparen>:<lf><space><space><space><space><space><space><space><space>list_fragments<space>=<space><apos><apos>.join<openparen>map<openparen>lambda<space>s:<space><apos><lt>Uncommitted<gt><opencurly><closecurly><lt><solidus>Uncommitted<gt><apos>.format<openparen>s<closeparen><comma><space>block_list<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>data<space>=<space><apos><lt>?xml<space>version=<quote>1.0<quote><space>encoding=<quote>utf-8<quote>?<gt><lt>BlockList<gt><opencurly><closecurly><lt><solidus>BlockList<gt><apos>.format<openparen>list_fragments<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=blocklist<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>comp:blocklist<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space>def<space>put_blob<openparen>self<comma><space>container<comma><space>blob_name<comma><space>fin<closeparen>:<lf><space><space><space><space><space><space><space><space>fin.seek<openparen>0<comma><space>os.SEEK_END<closeparen><lf><space><space><space><space><space><space><space><space>size<space>=<space>fin.tell<openparen><closeparen><lf><space><space><space><space><space><space><space><space>fin.seek<openparen>0<comma><space>os.SEEK_SET<closeparen><lf><space><space><space><space><space><space><space><space>if<space>size<space><lt><space>PUT_BLOB_LIMIT:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>fin.read<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<openbracket><apos>x-ms-blob-type<apos><closebracket><space>=<space><apos>BlockBlob<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>ids<space>=<space><openbracket><closebracket><lf><space><space><space><space><space><space><space><space><space><space><space><space>for<space>offset<space>in<space>range<openparen>0<comma><space>size<comma><space>PUT_BLOCK_CHUNK_SIZE<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>`%s`<comma><space>%s%%<apos><space>%<space><openparen>blob_name<comma><space>int<openparen>round<openparen>offset<space>*<space>100<space><solidus><space>size<closeparen><closeparen><space><closeparen><space><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>block_size<space>=<space>min<openparen>PUT_BLOCK_CHUNK_SIZE<comma><space>size<space>-<space>offset<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>ids.append<openparen>self.put_block<openparen>container<comma><space>blob_name<comma><space>fin.read<openparen>block_size<closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.put_block_list<openparen>container<comma><space>blob_name<comma><space>ids<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>#self.info<openparen><apos>ID<space>LIST<space>COMMITTED:<space>%s<apos><space>%<space><apos><backslash>n<backslash>t<apos>.join<openparen>ids<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Done<space>uploading<space>%s<space>bytes<space>of<space>data<apos><space>%<space>size<closeparen><lf><space><space><space><space>def<space>list_blobs<openparen>self<comma><space>container<closeparen>:<lf><space><space><space><space><space><space><space><space>#<space>https:<solidus><solidus>myaccount.blob.core.windows.net<solidus>mycontainer?restype=container<amp>comp=list<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s?restype=container<amp>comp=list<apos><space>%<space><openparen>self.account<comma><space>container<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>querystringencoded<space>=<space><apos>comp:list<backslash>nrestype:container<apos><comma><space>http_method<space>=<space><apos>GET<apos><closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>block<space>of<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.get<openparen>url<comma><space>headers=headers<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>200:<lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>return<space>r.content<lf><space><space><space><space>def<space>delete_blob<openparen>self<comma><space>container<comma><space>blob_name<closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<space>=<space>blob_name<comma><space>http_method<space>=<space><apos>DELETE<apos><closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Deleting<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.delete<openparen>url<comma><space>headers=headers<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>202:<lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space>def<space>_authorize<openparen>self<comma><space>headers<comma><space>container_name<comma><space>blob_name<space>=<space>None<comma><space>querystringencoded<space>=<space>None<comma><space>http_method<space>=<space><apos>PUT<apos><closeparen>:<lf><space><space><space><space><space><space><space><space>content_length<space>=<space><apos><apos><lf><space><space><space><space><space><space><space><space>if<space>headers.get<openparen><apos>Content-Length<apos><closeparen><space>!=<space><apos>0<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>content_length<space>=<space>headers.get<openparen><apos>Content-Length<apos><closeparen><lf><space><space><space><space><space><space><space><space>fields<space>=<space><openbracket><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>http_method<space>#<space>VERB<space><openparen>http-method<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-Encoding<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-Language<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space>content_length<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-MD5<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space>headers.get<openparen><apos>Date<apos><comma><apos><apos><closeparen><space>#<space>Date<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-Modified-Since<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-None-Match<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-Unmodified-Since<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Range<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>?<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>?<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><closebracket><lf><space><space><space><space><space><space><space><space>if<space>headers.get<openparen><apos>x-ms-blob-type<apos><comma><space>None<closeparen>:<space>fields.append<openparen><apos>x-ms-blob-type:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-blob-type<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>fields.append<openparen><apos>x-ms-date:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-date<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>fields.append<openparen><apos>x-ms-version:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-version<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>blob_name:<lf><space><space><space><space><space><space><space><space><space><space><space><space>fields.append<openparen><apos><solidus>%s<solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container_name<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>fields.append<openparen><apos><solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>querystringencoded:<space>fields.append<openparen>querystringencoded<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space><apos><backslash>n<apos>.join<openparen>fields<closeparen><lf><space><space><space><space><space><space><space><space>signature<space>=<space>AzureAPI._sign_string<openparen>self.secret<space><comma><space>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>headers<openbracket><apos>Authorization<apos><closebracket><space>=<space><apos>SharedKey<space>%s:%s<apos><space>%<space><openparen>self.account<comma><space>signature<closeparen><lf><space><space><space><space><space><space><space><space>return<space>_string_to_sign<lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_create_headers<openparen>data<space>=<space><apos><apos><closeparen>:<lf><space><space><space><space><space><space><space><space>return<space>OrderedDict<openparen><opencurly><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><apos>Content-Length<apos>:<space>str<openparen>len<openparen>data<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-date<apos>:<space>AzureAPI._httpdate<openparen>datetime.datetime.utcnow<openparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-version<apos>:<space>AZ_VERSION<lf><space><space><space><space><space><space><space><space><space><space><space><space><closecurly><closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_httpdate<openparen>dt<closeparen>:<lf><space><space><space><space><space><space><space><space><quote><quote><quote>Return<space>a<space>string<space>representation<space>of<space>a<space>date<space>according<space>to<space>RFC<space>1123<lf><space><space><space><space><space><space><space><space><openparen>HTTP<solidus>1.1<closeparen>.<lf><space><space><space><space><lf><space><space><space><space><space><space><space><space>The<space>supplied<space>date<space>must<space>be<space>in<space>UTC.<lf><space><space><space><space><lf><space><space><space><space><space><space><space><space><quote><quote><quote><lf><space><space><space><space><space><space><space><space>weekday<space>=<space><openbracket><quote>Mon<quote><comma><space><quote>Tue<quote><comma><space><quote>Wed<quote><comma><space><quote>Thu<quote><comma><space><quote>Fri<quote><comma><space><quote>Sat<quote><comma><space><quote>Sun<quote><closebracket><openbracket>dt.weekday<openparen><closeparen><closebracket><lf><space><space><space><space><space><space><space><space>month<space>=<space><openbracket><quote>Jan<quote><comma><space><quote>Feb<quote><comma><space><quote>Mar<quote><comma><space><quote>Apr<quote><comma><space><quote>May<quote><comma><space><quote>Jun<quote><comma><space><quote>Jul<quote><comma><space><quote>Aug<quote><comma><space><quote>Sep<quote><comma><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><quote>Oct<quote><comma><space><quote>Nov<quote><comma><space><quote>Dec<quote><closebracket><openbracket>dt.month<space>-<space>1<closebracket><lf><space><space><space><space><space><space><space><space>return<space><quote>%s<comma><space>%02d<space>%s<space>%04d<space>%02d:%02d:%02d<space>GMT<quote><space>%<space><openparen>weekday<comma><space>dt.day<comma><space>month<comma><lf><space><space><space><space><space><space><space><space><space><space><space><space>dt.year<comma><space>dt.hour<comma><space>dt.minute<comma><space>dt.second<closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_encode_base64<openparen>data<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>encoded<space>=<space>base64.b64encode<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space>return<space>encoded.decode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_decode_base64_to_bytes<openparen>data<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>return<space>base64.b64decode<openparen>data<closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_sign_string<openparen>key<comma><space>string_to_sign<comma><space>key_is_base64=True<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>key_is_base64:<lf><space><space><space><space><space><space><space><space><space><space><space><space>key<space>=<space>AzureAPI._decode_base64_to_bytes<openparen>key<closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>key<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>key<space>=<space>key.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>string_to_sign<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>string_to_sign<space>=<space>string_to_sign.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>signed_hmac_sha256<space>=<space>hmac.HMAC<openparen>key<comma><space>string_to_sign<comma><space>hashlib.sha256<closeparen><lf><space><space><space><space><space><space><space><space>digest<space>=<space>signed_hmac_sha256.digest<openparen><closeparen><lf><space><space><space><space><space><space><space><space>encoded_digest<space>=<space>AzureAPI._encode_base64<openparen>digest<closeparen><lf><space><space><space><space><space><space><space><space>return<space>encoded_digest<lf>    OUTPUT PYOUTPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_PythonCaller_OUTPUT"

# -------------------------------------------------------------------------
Lookup $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_AttributeFilterLut   success ok   fail ok   "" notok   ENCODED

FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter    INPUT  FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_PythonCaller_OUTPUT"    TEST @Lookup($(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_AttributeFilterLut,_azure_blob_deleter_status,ENCODED_ATTR) == "ok"    OUTPUT PASSED FEATURE_TYPE * @FeatureType(SET_FROM_ATTR, _azure_blob_deleter_status, $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter)    OUTPUT FAILED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<NULL>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_NullFilter    INPUT FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<NULL>    TEST _azure_blob_deleter_status ATTRIBUTE_VALUE_NULL "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<NULL>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<MISSING>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_MissingFilter    INPUT FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<MISSING>    TEST _azure_blob_deleter_status ATTRIBUTE_IS_MISSING "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<MISSING>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_BlankFilter    INPUT FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>    TEST _azure_blob_deleter_status ATTRIBUTE_IS_EMPTY "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<EMPTY>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>



FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter <EMPTY> Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<EMPTY>"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter <MISSING> Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<MISSING>"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter <NULL> Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<NULL>"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter <UNFILTERED> Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>"
# -------------------------------------------------------------------------

INCLUDE [    set macroLine "MACRO $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_2    INPUT  FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_fail"    OUTPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"        @RemoveAttributes(fme_encoded,_azure_blob_deleter_storage_account,_azure_blob_deleter_status,_azure_blob_deleter_blob_name,_azure_blob_deleter_container,_azure_blob_deleter_key)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP)")

# -------------------------------------------------------------------------

INCLUDE [    set macroLine "MACRO $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover    INPUT  FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_success"    OUTPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_OUTPUT"        @RemoveAttributes(fme_encoded,_azure_blob_deleter_error_message,_azure_blob_deleter_storage_account,_azure_blob_deleter_status,_azure_blob_deleter_blob_name,_azure_blob_deleter_container,_azure_blob_deleter_key)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_LIST_EXP)")

FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_Deleted1507100497 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_Deleted"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_Fail1507100497 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_Fail"
INCLUDE [puts {MACRO WB_CURRENT_CONTEXT $(WB_OLD_CONTEXT_$(AzureBlobDeleter_WORKSPACE_NAME))}]
#! <?xml version="1.0" encoding="UTF-8" ?>
#! <TRANSFORMER
# TRANSFORMER_BEGIN AzureBlobDeleter,1,"Web Services",104f5611-fc95-4644-9d7e-36173aaea147,"Linked by Default",No,NO_PARALLELISM,,No,16177,YES,No
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Deletes a blob from the Azure Blob Storage container</p>
# 
# TRANSFORMER_END
#!   FMX_INSERT_MODE="Linked by Default"
#!   SHOW_INFO_NODES="true"
#!   FME_PROCESS_GROUPS_ORDERED="No"
#!   FME_LINKED_TRANSFORMER_VERSION="1"
#!   FME_DOCUMENT_GUID="104f5611-fc95-4644-9d7e-36173aaea147"
#!   LAST_SAVE_BUILD="FME(R) 2016.0.1.1 (20160224 - Build 16177 - WIN64)"
#!   FME_SERVER_SERVICES=""
#!   WORKSPACE_VERSION="1"
#!   FME_PROCESS_GROUP_BY=""
#!   LAST_SAVE_DATE="2016-08-08T14:06:31"
#!   WARN_INVALID_XFORM_PARAM="Yes"
#!   SHOW_ANNOTATIONS="true"
#!   ITERATION_COUNT_ATTR=""
#!   LEGAL_TERMS_CONDITIONS="&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;"
#!   VIEW_POSITION="-1000.01 128.126"
#!   TITLE="AzureBlobDeleter"
#!   CATEGORY="Web Services"
#!   XFORM_DEPRECATED="No"
#!   ATTR_TYPE_ENCODING="SDF"
#!   REQUIREMENTS_KEYWORD="none"
#!   FME_PROCESS_COUNT="NO_PARALLELISM"
#!   DESCRIPTION="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Deletes a blob from the Azure Blob Storage container&lt;/p&gt;&#10;"
#!   ZOOM_SCALE="100"
#!   REQUIREMENTS="&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;"
#!   PASSWORD=""
#!   USAGE="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Storage account:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the storage account. Look for this under the portal.azure.com.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-weight:600;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Access key:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the access key for the blob inside Azure. You can find this when you select the storage inside the protal.azure.com website, go to settings and then search for &quot;Access keys&quot;.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Use access keys to authenticate your applications when making requests to this Azure storage account. Store your access keys securely - for example, using Azure Key Vault - and don&apos;t share them. We recommend regenerating your access keys regularly. You are provided two access keys so that you can maintain connections using one key while regenerating the other. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Container name:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The storage countainer name. These are listed directly under the storage account pannel. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Blob name:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The name of the blob you are about to delete. You can delete blobs in folders by simply using the &apos;/&apos; for example &quot;folder1/folder2/blobname&quot;. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;"
#!   DOC_TOP_LEFT="-726.758 -652.752"
#!   MAX_LOOP_ITERATIONS=""
#!   FME_DOCUMENT_PRIORGUID=""
#!   BLOCKED_LOOPING="No"
#!   HISTORY="2016-08-08,peter.segerstedt&lt;at&gt;eea.europa.eu,Original&lt;space&gt;definition"
#!   DOC_EXTENTS="3491.41 521.5"
#!   FME_BUILD_NUM="16177"
#! >
#! <DATASETS>
#! </DATASETS>
#! <DATA_TYPES>
#! </DATA_TYPES>
#! <GEOM_TYPES>
#! </GEOM_TYPES>
#! <FEATURE_TYPES>
#! </FEATURE_TYPES>
#! <FMESERVER>
#! </FMESERVER>
#! <GLOBAL_PARAMETERS>
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR ACCOUNT &quot; &quot; Account:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI PASSWORD_OR_ATTR KEY Key:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="true"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR CONTAINER &quot; &quot; Container:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR BLOB_NAME &quot; &quot; Blob Name:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! </GLOBAL_PARAMETERS>
#! <COMMENTS>
#! </COMMENTS>
#! <CONSTANTS>
#! </CONSTANTS>
#! <BOOKMARKS>
#! </BOOKMARKS>
#! <TRANSFORMERS>
#! <TRANSFORMER
#!   IDENTIFIER="1"
#!   TYPE="AttributeCreator"
#!   VERSION="8"
#!   POSITION="-249.503 -131.252"
#!   BOUNDING_RECT="-249.503 -131.252 618.756 71"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="NUM_SUBSEQUENT_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="ATTR_TABLE" PARM_VALUE="&quot;&quot; _azure_blob_deleter_storage_account SET_TO $(ACCOUNT)  _azure_blob_deleter_key SET_TO $(KEY)  _azure_blob_deleter_container SET_TO $(CONTAINER)  _azure_blob_deleter_blob_name SET_TO $(BLOB_NAME)"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_MODE_DISPLAY" PARM_VALUE="No Substitution"/>
#!     <XFORM_PARM PARM_NAME="NUM_PRIOR_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_VALUE" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_HANDLING" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_GRP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="FetchParamsAttributeCreator"/>
#!     <XFORM_PARM PARM_NAME="MULTI_FEATURE_MODE" PARM_VALUE="NO"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="2"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="1699.52 -131.252"
#!   BOUNDING_RECT="1699.52 -131.252 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover"/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_azure_blob_deleter_error_message,_azure_blob_deleter_storage_account,_azure_blob_deleter_status,_azure_blob_deleter_blob_name,_azure_blob_deleter_container,_azure_blob_deleter_key"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="3"
#!   TYPE="AttributeFilter"
#!   VERSION="4"
#!   POSITION="1105.77 -131.252"
#!   BOUNDING_RECT="1105.77 -131.252 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="&lt;EMPTY&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="&lt;MISSING&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <OUTPUT_FEAT NAME="&lt;NULL&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="2"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <OUTPUT_FEAT NAME="&lt;UNFILTERED&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="3"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <OUTPUT_FEAT NAME="success"/>
#!     <FEAT_COLLAPSED COLLAPSED="4"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <OUTPUT_FEAT NAME="fail"/>
#!     <FEAT_COLLAPSED COLLAPSED="5"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_PARM PARM_NAME="ATTR_NAME" PARM_VALUE="_azure_blob_deleter_status"/>
#!     <XFORM_PARM PARM_NAME="ATTR_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeFilter"/>
#!     <XFORM_PARM PARM_NAME="ATTR_VALUES" PARM_VALUE="&lt;lt&gt;EMPTY&lt;gt&gt;,&lt;lt&gt;MISSING&lt;gt&gt;,&lt;lt&gt;NULL&lt;gt&gt;,&lt;lt&gt;UNFILTERED&lt;gt&gt;,success,fail"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="4"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="1699.52 -387.504"
#!   BOUNDING_RECT="1699.52 -387.504 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover_2"/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_azure_blob_deleter_storage_account,_azure_blob_deleter_status,_azure_blob_deleter_blob_name,_azure_blob_deleter_container,_azure_blob_deleter_key"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="5"
#!   TYPE="PythonCaller"
#!   VERSION="4"
#!   POSITION="518.257 -131.252"
#!   BOUNDING_RECT="518.257 -131.252 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_deleter_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="PYTHONSOURCE" PARM_VALUE="from&lt;space&gt;fmeobjects&lt;space&gt;import&lt;space&gt;FMELogFile&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;comma&gt;&lt;space&gt;FME_WARN&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;lf&gt;from&lt;space&gt;cStringIO&lt;space&gt;import&lt;space&gt;StringIO&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;DeleteFeatureProcessor&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile&lt;space&gt;=&lt;space&gt;FMELogFile&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;Make&lt;space&gt;sure&lt;space&gt;to&lt;space&gt;change&lt;space&gt;if&lt;space&gt;Custom&lt;space&gt;transformer&lt;space&gt;is&lt;space&gt;renamed&lt;space&gt;&lt;openparen&gt;not&lt;space&gt;transformer&lt;space&gt;instance&lt;space&gt;name&lt;space&gt;-&lt;space&gt;that&lt;apos&gt;s&lt;space&gt;what&lt;space&gt;we&lt;apos&gt;re&lt;space&gt;fetching&lt;closeparen&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.xformer_name&lt;space&gt;=&lt;space&gt;FME_MacroValues&lt;openbracket&gt;&lt;apos&gt;AzureBlobDeleter_WORKSPACE_NAME&lt;apos&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;info&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_WARN&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;while&lt;space&gt;developing&lt;space&gt;for&lt;space&gt;popping&lt;space&gt;out&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;input&lt;openparen&gt;self&lt;comma&gt;feature&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;try:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;account&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_storage_account&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;secret&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_key&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;azure&lt;space&gt;=&lt;space&gt;AzureAPI&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;self.logfile&lt;comma&gt;&lt;space&gt;logprefix&lt;space&gt;=&lt;space&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;loglevel&lt;space&gt;=&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;container&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_container&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_blob_name&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;azure.delete_blob&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;success&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;except&lt;space&gt;Exception&lt;space&gt;as&lt;space&gt;e:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;fail&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_deleter_error_message&lt;apos&gt;&lt;comma&gt;&lt;space&gt;str&lt;openparen&gt;e&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logException&lt;openparen&gt;e&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.pyoutput&lt;openparen&gt;feature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;close&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;del&lt;space&gt;self.logfile&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;#####&lt;space&gt;Code&lt;space&gt;below&lt;space&gt;*should*&lt;space&gt;be&lt;space&gt;more&lt;space&gt;or&lt;space&gt;less&lt;space&gt;standalone&lt;space&gt;&lt;openparen&gt;no&lt;space&gt;bindings&lt;space&gt;to&lt;space&gt;fme&lt;closeparen&gt;&lt;space&gt;#####&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;import&lt;space&gt;os&lt;lf&gt;import&lt;space&gt;requests&lt;lf&gt;from&lt;space&gt;collections&lt;space&gt;import&lt;space&gt;OrderedDict&lt;lf&gt;import&lt;space&gt;datetime&lt;lf&gt;&lt;lf&gt;&lt;lf&gt;import&lt;space&gt;base64&lt;lf&gt;import&lt;space&gt;uuid&lt;lf&gt;import&lt;space&gt;hashlib&lt;lf&gt;import&lt;space&gt;hmac&lt;lf&gt;import&lt;space&gt;sys&lt;lf&gt;&lt;lf&gt;PUT_BLOB_LIMIT&lt;space&gt;=&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;64&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;64&lt;space&gt;MB&lt;lf&gt;PUT_BLOCK_CHUNK_SIZE&lt;space&gt;=&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;4&lt;space&gt;#&lt;space&gt;4&lt;space&gt;MB&lt;lf&gt;AZ_VERSION&lt;space&gt;=&lt;space&gt;&lt;apos&gt;2015-02-21&lt;apos&gt;&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;StdoutLogger&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;simple&lt;space&gt;log&lt;space&gt;class&lt;space&gt;to&lt;space&gt;mimic&lt;space&gt;fme&lt;space&gt;api&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;logMessageString&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;msg&lt;comma&gt;&lt;space&gt;level&lt;space&gt;=&lt;space&gt;0&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;print&lt;space&gt;msg&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;logException&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;e&lt;comma&gt;&lt;space&gt;level&lt;space&gt;=&lt;space&gt;0&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logMessageString&lt;openparen&gt;str&lt;openparen&gt;e&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;level&lt;closeparen&gt;&lt;lf&gt;class&lt;space&gt;AzureAPI&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;sys.version_info&lt;space&gt;&lt;lt&gt;&lt;space&gt;&lt;openparen&gt;3&lt;comma&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;from&lt;space&gt;collections&lt;space&gt;import&lt;space&gt;Iterable&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_unicode_type&lt;space&gt;=&lt;space&gt;unicode&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;from&lt;space&gt;collections.abc&lt;space&gt;import&lt;space&gt;Iterable&lt;space&gt;#&lt;space&gt;TODO:&lt;space&gt;this&lt;space&gt;code&lt;space&gt;was&lt;space&gt;found&lt;space&gt;somewhere&lt;space&gt;but&lt;space&gt;its&lt;space&gt;logic&lt;space&gt;is&lt;space&gt;not&lt;space&gt;clear&lt;space&gt;to&lt;space&gt;me...&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_unicode_type&lt;space&gt;=&lt;space&gt;str&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;logfile&lt;space&gt;=&lt;space&gt;StdoutLogger&lt;openparen&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;logprefix&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;comma&gt;&lt;space&gt;loglevel&lt;space&gt;=&lt;space&gt;0&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile&lt;space&gt;=&lt;space&gt;logfile&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logprefix&lt;space&gt;=&lt;space&gt;logprefix&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.loglevel&lt;space&gt;=&lt;space&gt;loglevel&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.account&lt;space&gt;=&lt;space&gt;account&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.secret&lt;space&gt;=&lt;space&gt;secret&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;info&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.logprefix&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;self.loglevel&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;append_block&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=appendblock&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Appending&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp:appendblock&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;ERROR&lt;space&gt;status&lt;space&gt;%s:&lt;space&gt;`%s`&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;r.status_code&lt;comma&gt;&lt;space&gt;_string_to_sign&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_block&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;block_id&lt;space&gt;=&lt;space&gt;base64.b64encode&lt;openparen&gt;uuid.uuid4&lt;openparen&gt;&lt;closeparen&gt;.hex&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#https:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;mycontainer&lt;solidus&gt;myblob?comp=block&lt;amp&gt;blockid=id&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=block&lt;amp&gt;blockid=%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_id&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;block&lt;space&gt;of&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;blockid:%s&lt;backslash&gt;ncomp:block&lt;apos&gt;&lt;space&gt;%&lt;space&gt;block_id&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;block_id&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_block_list&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_list&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;list_fragments&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;s:&lt;space&gt;&lt;apos&gt;&lt;lt&gt;Uncommitted&lt;gt&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;lt&gt;&lt;solidus&gt;Uncommitted&lt;gt&gt;&lt;apos&gt;.format&lt;openparen&gt;s&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;block_list&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;lt&gt;?xml&lt;space&gt;version=&lt;quote&gt;1.0&lt;quote&gt;&lt;space&gt;encoding=&lt;quote&gt;utf-8&lt;quote&gt;?&lt;gt&gt;&lt;lt&gt;BlockList&lt;gt&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;lt&gt;&lt;solidus&gt;BlockList&lt;gt&gt;&lt;apos&gt;.format&lt;openparen&gt;list_fragments&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=blocklist&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp:blocklist&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_blob&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.seek&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;os.SEEK_END&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;size&lt;space&gt;=&lt;space&gt;fin.tell&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.seek&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;os.SEEK_SET&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;size&lt;space&gt;&lt;lt&gt;&lt;space&gt;PUT_BLOB_LIMIT:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;fin.read&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ids&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;offset&lt;space&gt;in&lt;space&gt;range&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;size&lt;comma&gt;&lt;space&gt;PUT_BLOCK_CHUNK_SIZE&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;`%s`&lt;comma&gt;&lt;space&gt;%s%%&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;blob_name&lt;comma&gt;&lt;space&gt;int&lt;openparen&gt;round&lt;openparen&gt;offset&lt;space&gt;*&lt;space&gt;100&lt;space&gt;&lt;solidus&gt;&lt;space&gt;size&lt;closeparen&gt;&lt;closeparen&gt;&lt;space&gt;&lt;closeparen&gt;&lt;space&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;block_size&lt;space&gt;=&lt;space&gt;min&lt;openparen&gt;PUT_BLOCK_CHUNK_SIZE&lt;comma&gt;&lt;space&gt;size&lt;space&gt;-&lt;space&gt;offset&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ids.append&lt;openparen&gt;self.put_block&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin.read&lt;openparen&gt;block_size&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.put_block_list&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;ids&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;&lt;apos&gt;ID&lt;space&gt;LIST&lt;space&gt;COMMITTED:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;backslash&gt;t&lt;apos&gt;.join&lt;openparen&gt;ids&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Done&lt;space&gt;uploading&lt;space&gt;%s&lt;space&gt;bytes&lt;space&gt;of&lt;space&gt;data&lt;apos&gt;&lt;space&gt;%&lt;space&gt;size&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;list_blobs&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;https:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;mycontainer?restype=container&lt;amp&gt;comp=list&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s?restype=container&lt;amp&gt;comp=list&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;&lt;apos&gt;comp:list&lt;backslash&gt;nrestype:container&lt;apos&gt;&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;GET&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;block&lt;space&gt;of&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.get&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;200:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;r.content&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;delete_blob&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;DELETE&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Deleting&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.delete&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;202:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_authorize&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;headers&lt;comma&gt;&lt;space&gt;container_name&lt;comma&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;None&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;None&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;PUT&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;content_length&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Content-Length&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;!=&lt;space&gt;&lt;apos&gt;0&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;content_length&lt;space&gt;=&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Content-Length&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;http_method&lt;space&gt;#&lt;space&gt;VERB&lt;space&gt;&lt;openparen&gt;http-method&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-Encoding&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-Language&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;content_length&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-MD5&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Date&lt;apos&gt;&lt;comma&gt;&lt;apos&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;Date&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-Modified-Since&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-None-Match&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-Unmodified-Since&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Range&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;?&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;?&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;comma&gt;&lt;space&gt;None&lt;closeparen&gt;:&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-date:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-date&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-version:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;blob_name:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container_name&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;querystringencoded:&lt;space&gt;fields.append&lt;openparen&gt;querystringencoded&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;.join&lt;openparen&gt;fields&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;signature&lt;space&gt;=&lt;space&gt;AzureAPI._sign_string&lt;openparen&gt;self.secret&lt;space&gt;&lt;comma&gt;&lt;space&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;Authorization&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;SharedKey&lt;space&gt;%s:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;signature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;_string_to_sign&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_create_headers&lt;openparen&gt;data&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;OrderedDict&lt;openparen&gt;&lt;opencurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;Content-Length&lt;apos&gt;:&lt;space&gt;str&lt;openparen&gt;len&lt;openparen&gt;data&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-date&lt;apos&gt;:&lt;space&gt;AzureAPI._httpdate&lt;openparen&gt;datetime.datetime.utcnow&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;:&lt;space&gt;AZ_VERSION&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closecurly&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_httpdate&lt;openparen&gt;dt&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;Return&lt;space&gt;a&lt;space&gt;string&lt;space&gt;representation&lt;space&gt;of&lt;space&gt;a&lt;space&gt;date&lt;space&gt;according&lt;space&gt;to&lt;space&gt;RFC&lt;space&gt;1123&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;openparen&gt;HTTP&lt;solidus&gt;1.1&lt;closeparen&gt;.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;The&lt;space&gt;supplied&lt;space&gt;date&lt;space&gt;must&lt;space&gt;be&lt;space&gt;in&lt;space&gt;UTC.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;weekday&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;quote&gt;Mon&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Tue&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Wed&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Thu&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Fri&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sat&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sun&lt;quote&gt;&lt;closebracket&gt;&lt;openbracket&gt;dt.weekday&lt;openparen&gt;&lt;closeparen&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;month&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;quote&gt;Jan&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Feb&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Mar&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Apr&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;May&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Jun&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Jul&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Aug&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sep&lt;quote&gt;&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;Oct&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Nov&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Dec&lt;quote&gt;&lt;closebracket&gt;&lt;openbracket&gt;dt.month&lt;space&gt;-&lt;space&gt;1&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;&lt;quote&gt;%s&lt;comma&gt;&lt;space&gt;%02d&lt;space&gt;%s&lt;space&gt;%04d&lt;space&gt;%02d:%02d:%02d&lt;space&gt;GMT&lt;quote&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;weekday&lt;comma&gt;&lt;space&gt;dt.day&lt;comma&gt;&lt;space&gt;month&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;dt.year&lt;comma&gt;&lt;space&gt;dt.hour&lt;comma&gt;&lt;space&gt;dt.minute&lt;comma&gt;&lt;space&gt;dt.second&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_encode_base64&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;encoded&lt;space&gt;=&lt;space&gt;base64.b64encode&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;encoded.decode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_decode_base64_to_bytes&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;base64.b64decode&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_sign_string&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;string_to_sign&lt;comma&gt;&lt;space&gt;key_is_base64=True&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;key_is_base64:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;key&lt;space&gt;=&lt;space&gt;AzureAPI._decode_base64_to_bytes&lt;openparen&gt;key&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;key&lt;space&gt;=&lt;space&gt;key.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;string_to_sign&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;string_to_sign&lt;space&gt;=&lt;space&gt;string_to_sign.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;signed_hmac_sha256&lt;space&gt;=&lt;space&gt;hmac.HMAC&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;string_to_sign&lt;comma&gt;&lt;space&gt;hashlib.sha256&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;digest&lt;space&gt;=&lt;space&gt;signed_hmac_sha256.digest&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;encoded_digest&lt;space&gt;=&lt;space&gt;AzureAPI._encode_base64&lt;openparen&gt;digest&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;encoded_digest&lt;lf&gt;"/>
#!     <XFORM_PARM PARM_NAME="NEW_ATTRIBUTES" PARM_VALUE="_azure_blob_deleter_status _azure_blob_deleter_error_message"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PYTHONSYMBOL" PARM_VALUE="DeleteFeatureProcessor"/>
#!     <XFORM_PARM PARM_NAME="HIDE_ATTRIBUTES" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="PythonCaller"/>
#!     <XFORM_PARM PARM_NAME="ADVANCED_GROUP" PARM_VALUE=""/>
#! </TRANSFORMER>
#! </TRANSFORMERS>
#! <SUBDOCUMENT_IOS>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="10"
#!   NAME="Input"
#!   POSITION="-726.758 -652.752"
#!   BOUNDING_RECT="-726.758 -652.752 -1 -1"
#!   COLLAPSED="true"
#!   PUBLISHED="true"
#!   IS_SOURCE="true"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="12"
#!   NAME="Deleted"
#!   POSITION="2764.65 -199.752"
#!   BOUNDING_RECT="2764.65 -199.752 -1 -1"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="13"
#!   NAME="Fail"
#!   POSITION="2764.65 -387.504"
#!   BOUNDING_RECT="2764.65 -387.504 -1 -1"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! </SUBDOCUMENT_IOS>
#! <FEAT_LINKS>
#! <FEAT_LINK
#!   IDENTIFIER="6"
#!   SOURCE_NODE="3"
#!   TARGET_NODE="2"
#!   SOURCE_PORT_DESC="fo 4"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="7"
#!   SOURCE_NODE="3"
#!   TARGET_NODE="4"
#!   SOURCE_PORT_DESC="fo 5"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="8"
#!   SOURCE_NODE="1"
#!   TARGET_NODE="5"
#!   SOURCE_PORT_DESC="fo 0"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="9"
#!   SOURCE_NODE="5"
#!   TARGET_NODE="3"
#!   SOURCE_PORT_DESC="fo 0"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="11"
#!   SOURCE_NODE="10"
#!   TARGET_NODE="1"
#!   SOURCE_PORT_DESC="0"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="14"
#!   SOURCE_NODE="2"
#!   TARGET_NODE="12"
#!   SOURCE_PORT_DESC="fo 0"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="15"
#!   SOURCE_NODE="4"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 0"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! </FEAT_LINKS>
#! <BREAKPOINTS>
#! </BREAKPOINTS>
#! <ATTR_LINKS>
#! </ATTR_LINKS>
#! <SUBDOCUMENTS>
#! </SUBDOCUMENTS>
#! <LOOKUP_TABLES>
#! </LOOKUP_TABLES>
#! </TRANSFORMER>
DEFAULT_MACRO $(AzureBlobDeleter_WORKSPACE_NAME)_ACCOUNT 
DEFAULT_MACRO $(AzureBlobDeleter_WORKSPACE_NAME)_KEY 
DEFAULT_MACRO $(AzureBlobDeleter_WORKSPACE_NAME)_CONTAINER 
DEFAULT_MACRO $(AzureBlobDeleter_WORKSPACE_NAME)_BLOB_NAME 
#! START_HEADER
#! END_HEADER

LOG_FILTER_MASK -1
DEFAULT_MACRO WB_CURRENT_CONTEXT
DEFAULT_MACRO AzureBlobDeleter_WORKSPACE_NAME ""
INCLUDE [puts {MACRO WB_OLD_CONTEXT_$(AzureBlobDeleter_WORKSPACE_NAME) $(WB_CURRENT_CONTEXT)};          puts {MACRO WB_CURRENT_CONTEXT $(AzureBlobDeleter_WORKSPACE_NAME)}]
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_Input1470657991 Input Splitter"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_Input"   OUTPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_Input"
# -------------------------------------------------------------------------

FACTORY_DEF * AttrSetFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_FetchParamsAttributeCreator    INPUT  FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_Input"    MULTI_FEATURE_MODE NO 	 NULL_ATTR_MODE NO_OP 	 ATTRSET_CREATE_DIRECTIVES _PROPAGATE_MISSING_FDIV 	 ATTR_ACTION "" "_azure_blob_deleter_storage_account" "SET_TO" "$($(AzureBlobDeleter_WORKSPACE_NAME)_ACCOUNT)"     ATTR_ACTION "" "_azure_blob_deleter_key" "SET_TO" "$($(AzureBlobDeleter_WORKSPACE_NAME)_KEY$encode)"     ATTR_ACTION "" "_azure_blob_deleter_container" "SET_TO" "$($(AzureBlobDeleter_WORKSPACE_NAME)_CONTAINER)"     ATTR_ACTION "" "_azure_blob_deleter_blob_name" "SET_TO" "$($(AzureBlobDeleter_WORKSPACE_NAME)_BLOB_NAME)"    OUTPUT OUTPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_FetchParamsAttributeCreator_OUTPUT"


# -------------------------------------------------------------------------


FME_PYTHON_PATH "$(FME_MF_DIR)"

FACTORY_DEF * PythonFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_PythonCaller    INPUT  FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_FetchParamsAttributeCreator_OUTPUT"    SYMBOL_NAME DeleteFeatureProcessor    PYTHON_NAMESPACE FMEOBJECTS    SOURCE_CODE from<space>fmeobjects<space>import<space>FMELogFile<comma><space>FME_INFORM<comma><space>FME_WARN<comma><space>FME_ERROR<lf>from<space>cStringIO<space>import<space>StringIO<lf><lf>class<space>DeleteFeatureProcessor<openparen>object<closeparen>:<lf><space><space><space><space>def<space>__init__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile<space>=<space>FMELogFile<openparen><closeparen><lf><space><space><space><space><space><space><space><space>#<space>Make<space>sure<space>to<space>change<space>if<space>Custom<space>transformer<space>is<space>renamed<space><openparen>not<space>transformer<space>instance<space>name<space>-<space>that<apos>s<space>what<space>we<apos>re<space>fetching<closeparen><space><lf><space><space><space><space><space><space><space><space>self.xformer_name<space>=<space>FME_MacroValues<openbracket><apos>AzureBlobDeleter_WORKSPACE_NAME<apos><closebracket><lf><space><space><space><space>def<space>info<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_INFORM<closeparen><lf><space><space><space><space><space><space><space><space>#self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_WARN<closeparen><space>#<space>while<space>developing<space>for<space>popping<space>out<lf><space><space><space><space>def<space>input<openparen>self<comma>feature<closeparen>:<lf><space><space><space><space><space><space><space><space>try:<lf><space><space><space><space><space><space><space><space><space><space><space><space>account<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_deleter_storage_account<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>secret<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_deleter_key<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>azure<space>=<space>AzureAPI<openparen>account<comma><space>secret<comma><space>self.logfile<comma><space>logprefix<space>=<space>self.xformer_name<comma><space>loglevel<space>=<space>FME_INFORM<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>container<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_deleter_container<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>blob_name<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_deleter_blob_name<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>azure.delete_blob<openparen>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_deleter_status<apos><comma><space><apos>success<apos><closeparen><lf><space><space><space><space><space><space><space><space>except<space>Exception<space>as<space>e:<lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_deleter_status<apos><comma><space><apos>fail<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_deleter_error_message<apos><comma><space>str<openparen>e<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.logfile.logException<openparen>e<comma><space>FME_ERROR<closeparen><lf><space><space><space><space><space><space><space><space>self.pyoutput<openparen>feature<closeparen><lf><space><space><space><space>def<space>close<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>del<space>self.logfile<lf><space><space><space><space><space><space><space><space><lf>#####<space>Code<space>below<space>*should*<space>be<space>more<space>or<space>less<space>standalone<space><openparen>no<space>bindings<space>to<space>fme<closeparen><space>#####<lf><space><space><space><space><space><space><space><space><lf>import<space>os<lf>import<space>requests<lf>from<space>collections<space>import<space>OrderedDict<lf>import<space>datetime<lf><lf><lf>import<space>base64<lf>import<space>uuid<lf>import<space>hashlib<lf>import<space>hmac<lf>import<space>sys<lf><lf>PUT_BLOB_LIMIT<space>=<space>1024<space>*<space>1024<space>*<space>64<space><space><space><space><space><space>#<space>64<space>MB<lf>PUT_BLOCK_CHUNK_SIZE<space>=<space>1024<space>*<space>1024<space>*<space>4<space>#<space>4<space>MB<lf>AZ_VERSION<space>=<space><apos>2015-02-21<apos><lf><lf>class<space>StdoutLogger<openparen>object<closeparen>:<lf><space><space><space><space><apos><apos><apos><lf><space><space><space><space>simple<space>log<space>class<space>to<space>mimic<space>fme<space>api<lf><space><space><space><space><apos><apos><apos><lf><space><space><space><space>def<space>logMessageString<openparen>self<comma><space>msg<comma><space>level<space>=<space>0<closeparen>:<lf><space><space><space><space><space><space><space><space>print<space>msg<lf><space><space><space><space>def<space>logException<openparen>self<comma><space>e<comma><space>level<space>=<space>0<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logMessageString<openparen>str<openparen>e<closeparen><comma><space>level<closeparen><lf>class<space>AzureAPI<openparen>object<closeparen>:<lf><space><space><space><space>if<space>sys.version_info<space><lt><space><openparen>3<comma><closeparen>:<lf><space><space><space><space><space><space><space><space>from<space>collections<space>import<space>Iterable<lf><space><space><space><space><space><space><space><space>_unicode_type<space>=<space>unicode<lf><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space>from<space>collections.abc<space>import<space>Iterable<space>#<space>TODO:<space>this<space>code<space>was<space>found<space>somewhere<space>but<space>its<space>logic<space>is<space>not<space>clear<space>to<space>me...<space><lf><space><space><space><space><space><space><space><space>_unicode_type<space>=<space>str<lf><space><space><space><space>def<space>__init__<openparen>self<comma><space>account<comma><space>secret<comma><space>logfile<space>=<space>StdoutLogger<openparen><closeparen><comma><space>logprefix<space>=<space><apos><apos><comma><space>loglevel<space>=<space>0<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile<space>=<space>logfile<space><lf><space><space><space><space><space><space><space><space>self.logprefix<space>=<space>logprefix<lf><space><space><space><space><space><space><space><space>self.loglevel<space>=<space>loglevel<lf><space><space><space><space><space><space><space><space>self.account<space>=<space>account<lf><space><space><space><space><space><space><space><space>self.secret<space>=<space>secret<lf><space><space><space><space>def<space>info<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.logprefix<comma><space>message<closeparen><comma><space>self.loglevel<closeparen><lf><space><space><space><space>def<space>append_block<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_data<closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>block_data<closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=appendblock<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Appending<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>comp:appendblock<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data<space>=<space>block_data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>ERROR<space>status<space>%s:<space>`%s`<apos><space>%<space><openparen>r.status_code<comma><space>_string_to_sign<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space>def<space>put_block<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_data<closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>block_data<closeparen><lf><space><space><space><space><space><space><space><space>headers<openbracket><apos>x-ms-blob-type<apos><closebracket><space>=<space><apos>BlockBlob<apos><lf><space><space><space><space><space><space><space><space>block_id<space>=<space>base64.b64encode<openparen>uuid.uuid4<openparen><closeparen>.hex<closeparen><lf><space><space><space><space><space><space><space><space>#https:<solidus><solidus>myaccount.blob.core.windows.net<solidus>mycontainer<solidus>myblob?comp=block<amp>blockid=id<lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=block<amp>blockid=%s<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<comma><space>block_id<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>block<space>of<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>blockid:%s<backslash>ncomp:block<apos><space>%<space>block_id<closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=block_data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>return<space>block_id<lf><space><space><space><space>def<space>put_block_list<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_list<closeparen>:<lf><space><space><space><space><space><space><space><space>list_fragments<space>=<space><apos><apos>.join<openparen>map<openparen>lambda<space>s:<space><apos><lt>Uncommitted<gt><opencurly><closecurly><lt><solidus>Uncommitted<gt><apos>.format<openparen>s<closeparen><comma><space>block_list<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>data<space>=<space><apos><lt>?xml<space>version=<quote>1.0<quote><space>encoding=<quote>utf-8<quote>?<gt><lt>BlockList<gt><opencurly><closecurly><lt><solidus>BlockList<gt><apos>.format<openparen>list_fragments<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=blocklist<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>comp:blocklist<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space>def<space>put_blob<openparen>self<comma><space>container<comma><space>blob_name<comma><space>fin<closeparen>:<lf><space><space><space><space><space><space><space><space>fin.seek<openparen>0<comma><space>os.SEEK_END<closeparen><lf><space><space><space><space><space><space><space><space>size<space>=<space>fin.tell<openparen><closeparen><lf><space><space><space><space><space><space><space><space>fin.seek<openparen>0<comma><space>os.SEEK_SET<closeparen><lf><space><space><space><space><space><space><space><space>if<space>size<space><lt><space>PUT_BLOB_LIMIT:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>fin.read<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<openbracket><apos>x-ms-blob-type<apos><closebracket><space>=<space><apos>BlockBlob<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>ids<space>=<space><openbracket><closebracket><lf><space><space><space><space><space><space><space><space><space><space><space><space>for<space>offset<space>in<space>range<openparen>0<comma><space>size<comma><space>PUT_BLOCK_CHUNK_SIZE<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>`%s`<comma><space>%s%%<apos><space>%<space><openparen>blob_name<comma><space>int<openparen>round<openparen>offset<space>*<space>100<space><solidus><space>size<closeparen><closeparen><space><closeparen><space><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>block_size<space>=<space>min<openparen>PUT_BLOCK_CHUNK_SIZE<comma><space>size<space>-<space>offset<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>ids.append<openparen>self.put_block<openparen>container<comma><space>blob_name<comma><space>fin.read<openparen>block_size<closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.put_block_list<openparen>container<comma><space>blob_name<comma><space>ids<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>#self.info<openparen><apos>ID<space>LIST<space>COMMITTED:<space>%s<apos><space>%<space><apos><backslash>n<backslash>t<apos>.join<openparen>ids<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Done<space>uploading<space>%s<space>bytes<space>of<space>data<apos><space>%<space>size<closeparen><lf><space><space><space><space>def<space>list_blobs<openparen>self<comma><space>container<closeparen>:<lf><space><space><space><space><space><space><space><space>#<space>https:<solidus><solidus>myaccount.blob.core.windows.net<solidus>mycontainer?restype=container<amp>comp=list<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s?restype=container<amp>comp=list<apos><space>%<space><openparen>self.account<comma><space>container<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>querystringencoded<space>=<space><apos>comp:list<backslash>nrestype:container<apos><comma><space>http_method<space>=<space><apos>GET<apos><closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>block<space>of<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.get<openparen>url<comma><space>headers=headers<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>200:<lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>return<space>r.content<lf><space><space><space><space>def<space>delete_blob<openparen>self<comma><space>container<comma><space>blob_name<closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<space>=<space>blob_name<comma><space>http_method<space>=<space><apos>DELETE<apos><closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Deleting<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.delete<openparen>url<comma><space>headers=headers<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>202:<lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space>def<space>_authorize<openparen>self<comma><space>headers<comma><space>container_name<comma><space>blob_name<space>=<space>None<comma><space>querystringencoded<space>=<space>None<comma><space>http_method<space>=<space><apos>PUT<apos><closeparen>:<lf><space><space><space><space><space><space><space><space>content_length<space>=<space><apos><apos><lf><space><space><space><space><space><space><space><space>if<space>headers.get<openparen><apos>Content-Length<apos><closeparen><space>!=<space><apos>0<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>content_length<space>=<space>headers.get<openparen><apos>Content-Length<apos><closeparen><lf><space><space><space><space><space><space><space><space>fields<space>=<space><openbracket><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>http_method<space>#<space>VERB<space><openparen>http-method<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-Encoding<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-Language<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space>content_length<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-MD5<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space>headers.get<openparen><apos>Date<apos><comma><apos><apos><closeparen><space>#<space>Date<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-Modified-Since<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-None-Match<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-Unmodified-Since<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Range<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>?<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>?<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><closebracket><lf><space><space><space><space><space><space><space><space>if<space>headers.get<openparen><apos>x-ms-blob-type<apos><comma><space>None<closeparen>:<space>fields.append<openparen><apos>x-ms-blob-type:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-blob-type<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>fields.append<openparen><apos>x-ms-date:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-date<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>fields.append<openparen><apos>x-ms-version:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-version<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>blob_name:<lf><space><space><space><space><space><space><space><space><space><space><space><space>fields.append<openparen><apos><solidus>%s<solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container_name<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>fields.append<openparen><apos><solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>querystringencoded:<space>fields.append<openparen>querystringencoded<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space><apos><backslash>n<apos>.join<openparen>fields<closeparen><lf><space><space><space><space><space><space><space><space>signature<space>=<space>AzureAPI._sign_string<openparen>self.secret<space><comma><space>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>headers<openbracket><apos>Authorization<apos><closebracket><space>=<space><apos>SharedKey<space>%s:%s<apos><space>%<space><openparen>self.account<comma><space>signature<closeparen><lf><space><space><space><space><space><space><space><space>return<space>_string_to_sign<lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_create_headers<openparen>data<space>=<space><apos><apos><closeparen>:<lf><space><space><space><space><space><space><space><space>return<space>OrderedDict<openparen><opencurly><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><apos>Content-Length<apos>:<space>str<openparen>len<openparen>data<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-date<apos>:<space>AzureAPI._httpdate<openparen>datetime.datetime.utcnow<openparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-version<apos>:<space>AZ_VERSION<lf><space><space><space><space><space><space><space><space><space><space><space><space><closecurly><closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_httpdate<openparen>dt<closeparen>:<lf><space><space><space><space><space><space><space><space><quote><quote><quote>Return<space>a<space>string<space>representation<space>of<space>a<space>date<space>according<space>to<space>RFC<space>1123<lf><space><space><space><space><space><space><space><space><openparen>HTTP<solidus>1.1<closeparen>.<lf><space><space><space><space><lf><space><space><space><space><space><space><space><space>The<space>supplied<space>date<space>must<space>be<space>in<space>UTC.<lf><space><space><space><space><lf><space><space><space><space><space><space><space><space><quote><quote><quote><lf><space><space><space><space><space><space><space><space>weekday<space>=<space><openbracket><quote>Mon<quote><comma><space><quote>Tue<quote><comma><space><quote>Wed<quote><comma><space><quote>Thu<quote><comma><space><quote>Fri<quote><comma><space><quote>Sat<quote><comma><space><quote>Sun<quote><closebracket><openbracket>dt.weekday<openparen><closeparen><closebracket><lf><space><space><space><space><space><space><space><space>month<space>=<space><openbracket><quote>Jan<quote><comma><space><quote>Feb<quote><comma><space><quote>Mar<quote><comma><space><quote>Apr<quote><comma><space><quote>May<quote><comma><space><quote>Jun<quote><comma><space><quote>Jul<quote><comma><space><quote>Aug<quote><comma><space><quote>Sep<quote><comma><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><quote>Oct<quote><comma><space><quote>Nov<quote><comma><space><quote>Dec<quote><closebracket><openbracket>dt.month<space>-<space>1<closebracket><lf><space><space><space><space><space><space><space><space>return<space><quote>%s<comma><space>%02d<space>%s<space>%04d<space>%02d:%02d:%02d<space>GMT<quote><space>%<space><openparen>weekday<comma><space>dt.day<comma><space>month<comma><lf><space><space><space><space><space><space><space><space><space><space><space><space>dt.year<comma><space>dt.hour<comma><space>dt.minute<comma><space>dt.second<closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_encode_base64<openparen>data<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>encoded<space>=<space>base64.b64encode<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space>return<space>encoded.decode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_decode_base64_to_bytes<openparen>data<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>return<space>base64.b64decode<openparen>data<closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_sign_string<openparen>key<comma><space>string_to_sign<comma><space>key_is_base64=True<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>key_is_base64:<lf><space><space><space><space><space><space><space><space><space><space><space><space>key<space>=<space>AzureAPI._decode_base64_to_bytes<openparen>key<closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>key<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>key<space>=<space>key.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>string_to_sign<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>string_to_sign<space>=<space>string_to_sign.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>signed_hmac_sha256<space>=<space>hmac.HMAC<openparen>key<comma><space>string_to_sign<comma><space>hashlib.sha256<closeparen><lf><space><space><space><space><space><space><space><space>digest<space>=<space>signed_hmac_sha256.digest<openparen><closeparen><lf><space><space><space><space><space><space><space><space>encoded_digest<space>=<space>AzureAPI._encode_base64<openparen>digest<closeparen><lf><space><space><space><space><space><space><space><space>return<space>encoded_digest<lf>    OUTPUT PYOUTPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_PythonCaller_OUTPUT"

# -------------------------------------------------------------------------
Lookup $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_AttributeFilterLut   success ok   fail ok   "" notok   ENCODED

Tcl2 proc $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_setFeatType {} {     global FME_FeatureType;     set ft {$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_};     append ft [FME_EncodeText [FME_GetAttribute [FME_DecodeText {_azure_blob_deleter_status}]]];     set FME_FeatureType $ft; }
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter    INPUT  FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_PythonCaller_OUTPUT"    TEST @Lookup($(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_AttributeFilterLut,_azure_blob_deleter_status,ENCODED_ATTR) == "ok"    OUTPUT PASSED FEATURE_TYPE * @Tcl2($(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_setFeatType)    OUTPUT FAILED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<NULL>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_NullFilter    INPUT FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<NULL>    TEST _azure_blob_deleter_status ATTRIBUTE_VALUE_NULL "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<NULL>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<MISSING>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_MissingFilter    INPUT FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<MISSING>    TEST _azure_blob_deleter_status ATTRIBUTE_IS_MISSING "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<MISSING>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_BlankFilter    INPUT FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>    TEST _azure_blob_deleter_status ATTRIBUTE_IS_EMPTY "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<EMPTY>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>



FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter <EMPTY> Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<EMPTY>"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter <MISSING> Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<MISSING>"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter <NULL> Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<NULL>"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter <UNFILTERED> Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>"
# -------------------------------------------------------------------------

INCLUDE [    set macroLine "MACRO $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_2    INPUT  FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_fail"    OUTPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"        @RemoveAttributes(fme_encoded,_azure_blob_deleter_storage_account,_azure_blob_deleter_status,_azure_blob_deleter_blob_name,_azure_blob_deleter_container,_azure_blob_deleter_key)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP)")

# -------------------------------------------------------------------------

INCLUDE [    set macroLine "MACRO $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover    INPUT  FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeFilter_success"    OUTPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_OUTPUT"        @RemoveAttributes(fme_encoded,_azure_blob_deleter_error_message,_azure_blob_deleter_storage_account,_azure_blob_deleter_status,_azure_blob_deleter_blob_name,_azure_blob_deleter_container,_azure_blob_deleter_key)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_LIST_EXP)")

FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_Deleted1470657991 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_Deleted"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobDeleter_WORKSPACE_NAME)_Fail1470657991 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobDeleter_WORKSPACE_NAME)_Fail"
INCLUDE [puts {MACRO WB_CURRENT_CONTEXT $(WB_OLD_CONTEXT_$(AzureBlobDeleter_WORKSPACE_NAME))}]




