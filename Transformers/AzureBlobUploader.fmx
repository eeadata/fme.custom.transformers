#! <?xml version="1.0" encoding="UTF-8" ?>
#! <TRANSFORMER
# TRANSFORMER_BEGIN AzureBlobUploader,6,"Web Services",c8098d24-0997-43cf-904c-46702f25107b,"Linked by Default",No,NO_PARALLELISM,,No,19630,YES,No,37,No
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Uploads a file to Azure using the Azure Blob Service REST API (https://msdn.microsoft.com/en-us/library/azure/dd135733.aspx)</p>
# <p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">
#     <br/>
# </p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">A key is needed as well as the name of the storage account.</p>
# <p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">
#     <br/>
# </p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Source data can be either from an attribute or a filepath.</p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Maximum file size is roughly 195 GB. </p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Files larger than 64 MB will be uploaded in chunks of 4 MB. </p>
# 
# TRANSFORMER_END
#!   ATTR_TYPE_ENCODING="SDF"
#!   BLOCKED_LOOPING="No"
#!   CATEGORY="Web Services"
#!   DESCRIPTION="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Uploads a file to Azure using the Azure Blob Service REST API (https://msdn.microsoft.com/en-us/library/azure/dd135733.aspx)&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;A key is needed as well as the name of the storage account.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Source data can be either from an attribute or a filepath.&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Maximum file size is roughly 195 GB. &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Files larger than 64 MB will be uploaded in chunks of 4 MB. &lt;/p&gt;&#10;"
#!   DOC_EXTENTS="5306.79 930.383"
#!   DOC_TOP_LEFT="-130.065 -492.879"
#!   EXPLICIT_BOOKMARK_ORDER="false"
#!   FME_BUILD_NUM="19630"
#!   FME_DOCUMENT_GUID="c8098d24-0997-43cf-904c-46702f25107b"
#!   FME_DOCUMENT_PRIORGUID="a54bac5e-7c5a-40ac-977d-35d1fc1cc927,07900a68-b04a-419e-b3a3-23f6bded811d,25fed8bb-7ebe-4aea-bfc2-4c028271659f"
#!   FME_LINKED_TRANSFORMER_VERSION="6"
#!   FME_PROCESS_COUNT="NO_PARALLELISM"
#!   FME_PROCESS_GROUPS_ORDERED="No"
#!   FME_PROCESS_GROUP_BY=""
#!   FME_PROCESS_PRESERVE_GROUP_ATTR="No"
#!   FME_SERVER_SERVICES=""
#!   FMX_ATTRIBUTE_PROPOGATION_MODE="AUTO"
#!   FMX_INSERT_MODE="Linked by Default"
#!   HISTORY="2016-06-27,peter.segerstedt&lt;at&gt;eea.europa.eu,Original&lt;space&gt;definition,2016-08-08,peter.segerstedt&lt;at&gt;eea.europa.eu,python&lt;space&gt;code&lt;space&gt;now&lt;space&gt;shares&lt;space&gt;common&lt;space&gt;base&lt;space&gt;with&lt;space&gt;other&lt;space&gt;AzureBlob-transformers,2016-11-25,peter.segerstedt&lt;at&gt;eea.europa.eu,Added&lt;space&gt;option&lt;space&gt;to&lt;space&gt;provide&lt;space&gt;extra&lt;space&gt;headers&lt;space&gt;to&lt;space&gt;the&lt;space&gt;request."
#!   ITERATION_COUNT_ATTR=""
#!   LAST_SAVE_BUILD="FME(R) 2019.1.2.0 (20190829 - Build 19630 - WIN64)"
#!   LAST_SAVE_DATE="2019-10-30T09:42:53"
#!   MARKDOWN_DESCRIPTION=""
#!   MARKDOWN_USAGE=""
#!   MAX_LOOP_ITERATIONS=""
#!   PASSWORD=""
#!   PYTHON_COMPATIBILITY="37"
#!   SHOW_ANNOTATIONS="true"
#!   SHOW_INFO_NODES="true"
#!   TITLE="AzureBlobUploader"
#!   USAGE="&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0//EN&quot; &quot;http://www.w3.org/TR/REC-html40/strict.dtd&quot;&gt;&#10;&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;&#10;p, li { white-space: pre-wrap; }&#10;&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:&apos;MS Shell Dlg 2&apos;; font-size:8.25pt; font-weight:400; font-style:normal;&quot;&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-weight:600;&quot;&gt;Storage account:&lt;/span&gt; &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the storage account. Look for this under the portal.azure.com.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-weight:600;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-weight:600;&quot;&gt;Access key:&lt;/span&gt; &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the access key for the blob inside Azure. You can find this when you select the storage inside the protal.azure.com website, go to settings and then search for &amp;quot;Access keys&amp;quot;.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Use access keys to authenticate your applications when making requests to this Azure storage account. Store your access keys securely - for example, using Azure Key Vault - and don&apos;t share them. We recommend regenerating your access keys regularly. You are provided two access keys so that you can maintain connections using one key while regenerating the other. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-weight:600;&quot;&gt;Container name:&lt;/span&gt; &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The storage countainer name. These are listed directly under the storage account pannel. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-weight:600;&quot;&gt;Blob name:&lt;/span&gt; &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The name of the blob you are about to create. The filename of the source data will be used if this was not provided. You can create folders by simply using the &apos;/&apos; for example &amp;quot;folder1/folder2/blobname&amp;quot;. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-weight:600;&quot;&gt;Upload from:&lt;/span&gt; &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Describes what is provided inside the &amp;quot;source data&amp;quot; attribute. When set to &amp;quot;AttributeValue&amp;quot; it means that the source data is a binary file. When set to &amp;quot;file&amp;quot; it means that the source data is a path towards a file.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;This transformer currently only stores &amp;quot;block blobs&amp;quot;&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;block blob: &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Block blobs let you upload large blobs efficiently. Block blobs are comprised of blocks, each of which is identified by a block ID. You create or modify a block blob by writing a set of blocks and committing them by their block IDs. Each block can be a different size, up to a maximum of 4 MB, and a block blob can include up to 50,000 blocks. The maximum size of a block blob is therefore slightly more than 195 GB (4 MB X 50,000 blocks). If you are writing a block blob that is no more than 64 MB in size, you can upload it in its entirety with a single write operation&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;append blob:&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;An append blob is comprised of blocks and is optimized for append operations. When you modify an append blob, blocks are added to the end of the blob only, via the &lt;a href=&quot;https://msdn.microsoft.com/en-us/library/azure/mt427365.aspx&quot;&gt;&lt;span style=&quot; text-decoration: underline; color:#0000ff;&quot;&gt;Append Block &lt;/span&gt;&lt;/a&gt;operation. Updating or deleting of existing blocks is not supported. Unlike a block blob, an append blob does not expose its block IDs. &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Each block in an append blob can be a different size, up to a maximum of 4 MB, and an append blob can include up to 50,000 blocks. The maximum size of an append blob is therefore slightly more than 195 GB (4 MB X 50,000 blocks).&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;page blob:&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Page blobs are a collection of 512-byte pages optimized for random read and write operations. To create a page blob, you initialize the page blob and specify the maximum size the page blob will grow. To add or update the contents of a page blob, you write a page or pages by specifying an offset and a range that align to 512-byte page boundaries. A write to a page blob can overwrite just one page, some pages, or up to 4 MB of the page blob. Writes to page blobs happen in-place and are immediately committed to the blob. The maximum size for a page blob is 1 TB. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-weight:600;&quot;&gt;Request Headers&lt;/span&gt;: Additional headers that should be used when sending the request.&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Selected attributes will be used to build the headers, example:&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;If selected attributes are &lt;/p&gt;&#10;&lt;ul style=&quot;margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;&quot;&gt;&lt;li style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; color:#000000;&quot;&gt;Content-Encoding&lt;/span&gt;&lt;/li&gt;&#10;&lt;li style=&quot; color:#000000;&quot; style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Content-Type&lt;/li&gt;&#10;&lt;li style=&quot; color:#000000;&quot; style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;x-ms-blob-content-disposition&lt;/li&gt;&lt;/ul&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;and the feature entering the transformer have these attributes, something like this would be added to the headers used in the request:&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; color:#000000;&quot;&gt;x-ms-blob-content-disposition: attachment; filename=thedata.txt;&lt;/span&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; color:#000000;&quot;&gt;Content-Type: text/plain; charset=UTF-8&lt;/span&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; color:#000000;&quot;&gt;Content-Encoding: UTF-8&lt;/span&gt;&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;See also: https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/put-blob&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"
#!   USE_MARKDOWN=""
#!   VIEW_POSITION="2481.27 1562.52"
#!   WARN_INVALID_XFORM_PARAM="Yes"
#!   WORKSPACE_VERSION="1"
#!   XFORM_DEPRECATED="No"
#!   ZOOM_SCALE="100"
#! >
#! <DATASETS>
#! </DATASETS>
#! <DATA_TYPES>
#! </DATA_TYPES>
#! <GEOM_TYPES>
#! </GEOM_TYPES>
#! <FEATURE_TYPES>
#! </FEATURE_TYPES>
#! <FMESERVER>
#! </FMESERVER>
#! <GLOBAL_PARAMETERS>
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI PASSWORD_OR_ATTR KEY Access key:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="true"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI CHOICE_OR_ATTR SRC_TYPE AttributeValue%FilePath Upload From:"
#!   DEFAULT_VALUE="AttributeValue"
#!   IS_STAND_ALONE="true"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR ACCOUNT &quot; &quot; Storage account:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR CONTAINER &quot; &quot; Container:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR BLOB_NAME &quot; &quot; Blob Name:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR SRC_DATA &quot; &quot; Source Data:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI OPTIONAL ATTRLIST_COMMAS_OR_ATTR XTRA_HEADERS &quot;&quot; Request Headers:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="true"
#! />
#! </GLOBAL_PARAMETERS>
#! <COMMENTS>
#! </COMMENTS>
#! <CONSTANTS>
#! </CONSTANTS>
#! <BOOKMARKS>
#! </BOOKMARKS>
#! <TRANSFORMERS>
#! <TRANSFORMER
#!   IDENTIFIER="16"
#!   TYPE="StringReplacer"
#!   VERSION="4"
#!   POSITION="2442.0799999999999 437.50400000000002"
#!   BOUNDING_RECT="2442.0799999999999 437.50400000000002 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="CASE" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="FIND_TEXT" PARM_VALUE="&lt;backslash&gt;"/>
#!     <XFORM_PARM PARM_NAME="NO_MATCH" PARM_VALUE="_FME_NO_OP_"/>
#!     <XFORM_PARM PARM_NAME="NO_MATCH_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REGEXP" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="REPLACE_TEXT" PARM_VALUE="&lt;solidus&gt;"/>
#!     <XFORM_PARM PARM_NAME="SRC_ATTRS" PARM_VALUE="_azure_blob_uploader_blob_name"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="StringReplacer"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="10"
#!   TYPE="AttributeCreator"
#!   VERSION="8"
#!   POSITION="1700.51 437.50400000000002"
#!   BOUNDING_RECT="1700.51 437.50400000000002 618.75599999999997 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_GRP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_HANDLING" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTR_TABLE" PARM_VALUE="&quot;&quot; _azure_blob_uploader_storage_account SET_TO $(ACCOUNT)  _azure_blob_uploader_key SET_TO $(KEY)  _azure_blob_uploader_container SET_TO $(CONTAINER)  _azure_blob_uploader_blob_name SET_TO $(BLOB_NAME)  _azure_blob_uploader_src_type SET_TO $(SRC_TYPE)  _azure_blob_uploader_src_data SET_TO $(SRC_DATA)"/>
#!     <XFORM_PARM PARM_NAME="MULTI_FEATURE_MODE" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_MODE_DISPLAY" PARM_VALUE="No Substitution"/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_VALUE" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="NUM_PRIOR_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="NUM_SUBSEQUENT_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="FetchParamsAttributeCreator"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="11"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="4155.79 437.50400000000002"
#!   BOUNDING_RECT="4155.79 437.50400000000002 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_azure_blob_uploader_blob_name,_azure_blob_uploader_key,_azure_blob_uploader_src_data,_azure_blob_uploader_error_message,_azure_blob_uploader_src_type,_azure_blob_uploader_container,_azure_blob_uploader_status,_azure_blob_uploader_storage_account"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="12"
#!   TYPE="AttributeFilter"
#!   VERSION="4"
#!   POSITION="3562.04 437.50400000000002"
#!   BOUNDING_RECT="3562.04 437.50400000000002 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="success"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="&lt;EMPTY&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <OUTPUT_FEAT NAME="&lt;MISSING&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="2"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <OUTPUT_FEAT NAME="&lt;NULL&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="3"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <OUTPUT_FEAT NAME="&lt;UNFILTERED&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="4"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <OUTPUT_FEAT NAME="fail"/>
#!     <FEAT_COLLAPSED COLLAPSED="5"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_PARM PARM_NAME="ATTR_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTR_NAME" PARM_VALUE="_azure_blob_uploader_status"/>
#!     <XFORM_PARM PARM_NAME="ATTR_VALUES" PARM_VALUE="success,&lt;lt&gt;EMPTY&lt;gt&gt;,&lt;lt&gt;MISSING&lt;gt&gt;,&lt;lt&gt;NULL&lt;gt&gt;,&lt;lt&gt;UNFILTERED&lt;gt&gt;,fail"/>
#!     <XFORM_PARM PARM_NAME="ATTR_VALUES_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeFilter"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="13"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="4205.79 -421.87900000000002"
#!   BOUNDING_RECT="4205.79 -421.87900000000002 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_azure_blob_uploader_blob_name,_azure_blob_uploader_key,_azure_blob_uploader_src_data,_azure_blob_uploader_src_type,_azure_blob_uploader_container,_azure_blob_uploader_status,_azure_blob_uploader_storage_account"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover_2"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="14"
#!   TYPE="PythonCaller"
#!   VERSION="4"
#!   POSITION="2974.5300000000002 437.50400000000002"
#!   BOUNDING_RECT="2974.5300000000002 437.50400000000002 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="19630"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="ADVANCED_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="HIDE_ATTRIBUTES" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NEW_ATTRIBUTES" PARM_VALUE="_azure_blob_uploader_status _azure_blob_uploader_error_message"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PYTHONSOURCE" PARM_VALUE="from&lt;space&gt;fmeobjects&lt;space&gt;import&lt;space&gt;FMELogFile&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;comma&gt;&lt;space&gt;FME_WARN&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;lf&gt;from&lt;space&gt;io&lt;space&gt;import&lt;space&gt;StringIO&lt;comma&gt;&lt;space&gt;BytesIO&lt;lf&gt;from&lt;space&gt;AzureAPI&lt;space&gt;import&lt;space&gt;AzureAPI&lt;lf&gt;import&lt;space&gt;locale&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;UploadFeatureProcessor&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile&lt;space&gt;=&lt;space&gt;FMELogFile&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.enc&lt;space&gt;=&lt;space&gt;locale.getdefaultlocale&lt;openparen&gt;&lt;closeparen&gt;&lt;openbracket&gt;1&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;Make&lt;space&gt;sure&lt;space&gt;to&lt;space&gt;change&lt;space&gt;if&lt;space&gt;Custom&lt;space&gt;transformer&lt;space&gt;is&lt;space&gt;renamed&lt;space&gt;&lt;openparen&gt;not&lt;space&gt;transformer&lt;space&gt;instance&lt;space&gt;name&lt;space&gt;-&lt;space&gt;that&lt;apos&gt;s&lt;space&gt;what&lt;space&gt;we&lt;apos&gt;re&lt;space&gt;fetching&lt;closeparen&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.xformer_name&lt;space&gt;=&lt;space&gt;FME_MacroValues&lt;openbracket&gt;&lt;apos&gt;AzureBlobUploader_WORKSPACE_NAME&lt;apos&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;info&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_WARN&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;while&lt;space&gt;developing&lt;space&gt;for&lt;space&gt;popping&lt;space&gt;out&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;input&lt;openparen&gt;self&lt;comma&gt;feature&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;try:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#account&lt;space&gt;=&lt;space&gt;&lt;apos&gt;cwsblobstorage01&lt;apos&gt;&lt;space&gt;-&lt;space&gt;Changed&lt;space&gt;by&lt;space&gt;Peter&lt;space&gt;Kjeld&lt;comma&gt;&lt;space&gt;30.10.2019&lt;space&gt;-&lt;space&gt;the&lt;space&gt;account&lt;space&gt;should&lt;space&gt;not&lt;space&gt;be&lt;space&gt;hardcoded&lt;space&gt;but&lt;space&gt;use&lt;space&gt;the&lt;space&gt;passed&lt;space&gt;on&lt;space&gt;account&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;account&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_storage_account&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;secret&lt;space&gt;=&lt;space&gt;&lt;apos&gt;LOEJtyYZl6S0vq6&lt;solidus&gt;Ig2MGY213YSqfxl1kwC8yk4GE3f+0L1AwrArzfjSf5BAQOOH8R0qVnPsiSqmlcD37ktYBg==&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;azure&lt;space&gt;=&lt;space&gt;AzureAPI&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;self.logfile&lt;comma&gt;&lt;space&gt;logprefix&lt;space&gt;=&lt;space&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;loglevel&lt;space&gt;=&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;container&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_container&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_blob_name&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin&lt;space&gt;=&lt;space&gt;None&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;src_type&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_src_type&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;src_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;AttributeValue&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_src_data&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin&lt;space&gt;=&lt;space&gt;BytesIO&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;elif&lt;space&gt;src_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;FilePath&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin&lt;space&gt;=&lt;space&gt;open&lt;openparen&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_src_data&lt;apos&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;rb&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;&lt;apos&gt;Unrecognized&lt;space&gt;source&lt;space&gt;type&lt;space&gt;`%s`&lt;apos&gt;&lt;space&gt;%&lt;space&gt;src_type&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;extra_headers&lt;space&gt;=&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;n&lt;comma&gt;&lt;space&gt;m&lt;comma&gt;&lt;space&gt;t&lt;comma&gt;&lt;space&gt;=&lt;space&gt;feature.getAttributeNullMissingAndType&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_header_attributes&lt;opencurly&gt;0&lt;closecurly&gt;.part&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;not&lt;space&gt;m:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;attr&lt;space&gt;in&lt;space&gt;&lt;openbracket&gt;x&lt;space&gt;for&lt;space&gt;x&lt;space&gt;in&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_header_attributes&lt;opencurly&gt;&lt;closecurly&gt;.part&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;if&lt;space&gt;len&lt;openparen&gt;x&lt;closeparen&gt;&lt;space&gt;and&lt;space&gt;x&lt;space&gt;!=&lt;space&gt;&lt;apos&gt;&lt;quote&gt;&lt;apos&gt;&lt;closebracket&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;n&lt;comma&gt;&lt;space&gt;m&lt;comma&gt;&lt;space&gt;t&lt;comma&gt;&lt;space&gt;=&lt;space&gt;feature.getAttributeNullMissingAndType&lt;openparen&gt;attr.encode&lt;openparen&gt;self.enc&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;n&lt;space&gt;or&lt;space&gt;m:&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;continue&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;val&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;attr.encode&lt;openparen&gt;self.enc&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;extra_headers&lt;openbracket&gt;attr&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;val&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;len&lt;openparen&gt;extra_headers.keys&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Extra&lt;space&gt;request&lt;space&gt;headers&lt;space&gt;used:&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;extra_headers&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;No&lt;space&gt;Extra&lt;space&gt;request&lt;space&gt;headers&lt;space&gt;used&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#####&lt;space&gt;INSERT&lt;space&gt;CODE&lt;space&gt;HERE&lt;space&gt;TO&lt;space&gt;MANIPULATE&lt;space&gt;CONTENT&lt;space&gt;BEFORE&lt;space&gt;UPLOAD&lt;space&gt;#####&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;azure.put_blob&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin&lt;comma&gt;&lt;space&gt;extra_headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.close&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;success&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;except&lt;space&gt;Exception&lt;space&gt;as&lt;space&gt;e:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;fail&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_error_message&lt;apos&gt;&lt;comma&gt;&lt;space&gt;str&lt;openparen&gt;e&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logException&lt;openparen&gt;e&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.pyoutput&lt;openparen&gt;feature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;close&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;del&lt;space&gt;self.logfile&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;"/>
#!     <XFORM_PARM PARM_NAME="PYTHONSYMBOL" PARM_VALUE="UploadFeatureProcessor"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="PythonCaller"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="28"
#!   TYPE="ParameterFetcher"
#!   VERSION="4"
#!   POSITION="562.50599999999997 437.50400000000002"
#!   BOUNDING_RECT="562.50599999999997 437.50400000000002 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="ATTR_LIST" PARM_VALUE="_azure_blob_uploader_headers {$(XTRA_HEADERS)}"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="ParameterFetcher"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="29"
#!   TYPE="Tester"
#!   VERSION="2"
#!   POSITION="562.50599999999997 278.12799999999999"
#!   BOUNDING_RECT="562.50599999999997 278.12799999999999 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#!   OUTPUT_FT_ORDER="FAILED%PASSED"
#! >
#!     <OUTPUT_FEAT NAME="FAILED"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="PASSED"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_PARM PARM_NAME="BOOL_OP" PARM_VALUE="OR"/>
#!     <XFORM_PARM PARM_NAME="COMPOSITE_MSG" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="COMPOSITE_TEST" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="TEST_CLAUSE" PARM_VALUE="TEST &lt;at&gt;Value&lt;openparen&gt;_azure_blob_uploader_headers&lt;closeparen&gt; ATTRIBUTE_HAS_VALUE &quot;&quot;"/>
#!     <XFORM_PARM PARM_NAME="TEST_CLAUSE_GRP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TEST_MODE" PARM_VALUE="TEST"/>
#!     <XFORM_PARM PARM_NAME="TEST_PREVIEW_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="Tester"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="32"
#!   TYPE="StringSearcher"
#!   VERSION="3"
#!   POSITION="562.50599999999997 65.625299999999996"
#!   BOUNDING_RECT="562.50599999999997 65.625299999999996 431 71"
#!   ORDER="500000000000000"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="MATCHED"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="NOT_MATCHED"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_PARM PARM_NAME="ADVANCED_GROUP" PARM_VALUE="FME_DISCLOSURE_OPEN"/>
#!     <XFORM_PARM PARM_NAME="CASE" PARM_VALUE="no"/>
#!     <XFORM_PARM PARM_NAME="MATCHED_PARTS_ATTR" PARM_VALUE="_azure_blob_uploader_header_attributes"/>
#!     <XFORM_PARM PARM_NAME="MATCHED_RESULT_ATTR" PARM_VALUE="_first_match"/>
#!     <XFORM_PARM PARM_NAME="MATCHES_ATTR" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REGEXP" PARM_VALUE="&lt;openparen&gt;?:^|&lt;comma&gt;&lt;closeparen&gt;&lt;openparen&gt;?=&lt;openbracket&gt;^&lt;quote&gt;&lt;closebracket&gt;|&lt;openparen&gt;&lt;quote&gt;&lt;closeparen&gt;?&lt;closeparen&gt;&lt;quote&gt;?&lt;openparen&gt;&lt;openparen&gt;?&lt;openparen&gt;1&lt;closeparen&gt;&lt;openbracket&gt;^&lt;quote&gt;&lt;closebracket&gt;*|&lt;openbracket&gt;^&lt;comma&gt;&lt;quote&gt;&lt;closebracket&gt;*&lt;closeparen&gt;&lt;closeparen&gt;&lt;quote&gt;?&lt;openparen&gt;?=&lt;comma&gt;|&lt;dollar&gt;&lt;closeparen&gt;"/>
#!     <XFORM_PARM PARM_NAME="STRING_TO_SEARCH" PARM_VALUE="&lt;at&gt;Value&lt;openparen&gt;_azure_blob_uploader_headers&lt;closeparen&gt;"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="StringSearcher"/>
#! </TRANSFORMER>
#! </TRANSFORMERS>
#! <SUBDOCUMENT_IOS>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="6"
#!   NAME="Input"
#!   POSITION="-130.065 437.50400000000002"
#!   BOUNDING_RECT="-130.065 437.50400000000002 431 71"
#!   COLLAPSED="true"
#!   PUBLISHED="true"
#!   IS_SOURCE="true"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="7"
#!   NAME="Success"
#!   POSITION="4695.7299999999996 437.50400000000002"
#!   BOUNDING_RECT="4695.7299999999996 437.50400000000002 431 71"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="8"
#!   NAME="Fail"
#!   POSITION="4745.7299999999996 -421.87900000000002"
#!   BOUNDING_RECT="4745.7299999999996 -421.87900000000002 431 71"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! </SUBDOCUMENT_IOS>
#! <FEAT_LINKS>
#! <FEAT_LINK
#!   IDENTIFIER="30"
#!   SOURCE_NODE="6"
#!   TARGET_NODE="28"
#!   SOURCE_PORT_DESC="0"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="17"
#!   SOURCE_NODE="10"
#!   TARGET_NODE="16"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="19"
#!   SOURCE_NODE="11"
#!   TARGET_NODE="7"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="15"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="11"
#!   SOURCE_PORT_DESC="fo 0 success"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="23"
#!   SOURCE_NODE="13"
#!   TARGET_NODE="8"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="20"
#!   SOURCE_NODE="14"
#!   TARGET_NODE="12"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="22"
#!   SOURCE_NODE="16"
#!   TARGET_NODE="14"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="31"
#!   SOURCE_NODE="28"
#!   TARGET_NODE="29"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="33"
#!   SOURCE_NODE="29"
#!   TARGET_NODE="32"
#!   SOURCE_PORT_DESC="fo 1 PASSED"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="35"
#!   SOURCE_NODE="32"
#!   TARGET_NODE="10"
#!   SOURCE_PORT_DESC="fo 0 MATCHED"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="24"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 1 &lt;lt&gt;EMPTY&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="21"
#!   SOURCE_NODE="29"
#!   TARGET_NODE="10"
#!   SOURCE_PORT_DESC="fo 0 FAILED"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="34"
#!   SOURCE_NODE="32"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 1 NOT_MATCHED"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="25"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 2 &lt;lt&gt;MISSING&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="26"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 3 &lt;lt&gt;NULL&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="27"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 4 &lt;lt&gt;UNFILTERED&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="18"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 5 fail"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! </FEAT_LINKS>
#! <BREAKPOINTS>
#! </BREAKPOINTS>
#! <ATTR_LINKS>
#! </ATTR_LINKS>
#! <SUBDOCUMENTS>
#! </SUBDOCUMENTS>
#! <LOOKUP_TABLES>
#! </LOOKUP_TABLES>
#! </TRANSFORMER>

FME_PYTHON_VERSION 37
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_KEY 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_SRC_TYPE AttributeValue
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_ACCOUNT 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_CONTAINER 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_BLOB_NAME 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_SRC_DATA 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_XTRA_HEADERS 
#! START_HEADER
#! END_HEADER

DEFAULT_MACRO WB_CURRENT_CONTEXT
DEFAULT_MACRO AzureBlobUploader_WORKSPACE_NAME ""
INCLUDE [puts {MACRO WB_OLD_CONTEXT_$(AzureBlobUploader_WORKSPACE_NAME) $(WB_CURRENT_CONTEXT)};          puts {MACRO WB_CURRENT_CONTEXT $(AzureBlobUploader_WORKSPACE_NAME)}]
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_Input1572424973 Input Splitter"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Input"   OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Input"
# -------------------------------------------------------------------------
Tcl2 proc $(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher_doFetch {} {    foreach {name val} {"_azure_blob_uploader_headers {$($(AzureBlobUploader_WORKSPACE_NAME)_XTRA_HEADERS$encode)}"} {         if { [string match {*<at>*} $val] == 1 } {             set val [FME_Execute EvaluateExpression {STRING} $val {$(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher}];         } elseif {[string match {*FME_CONDITIONAL*} $val] == 1} {             set val [FME_Execute EvaluateExpression {STRING} $val {$(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher}];         } else {             set val [FME_DecodeTextOrAttr $val];         };       FME_SetAttribute [FME_DecodeText $name] $val    } }
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Input"    OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher_OUTPUT"         @Tcl2($(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher_doFetch)
# -------------------------------------------------------------------------
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_Tester    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher_OUTPUT"    TEST @EvaluateExpression(FDIV,STRING_ENCODED,<at>Value<openparen>_azure_blob_uploader_headers<closeparen>,$(AzureBlobUploader_WORKSPACE_NAME)_Tester) ATTRIBUTE_HAS_VALUE "" ENCODED    BOOLEAN_OPERATOR OR    COMPOSITE_TEST_EXPR "<Unused>"    OUTPUT PASSED FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Tester_PASSED"    OUTPUT FAILED FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Tester_FAILED"
# -------------------------------------------------------------------------
MACRO casemac
INCLUDE [ if { {no} == {no} } { puts {MACRO casemac -nocase}} ]
Tcl2 proc $(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher_8d19347e_4b8b_4327_9a5a_8808722967201_doGrep { stringToSearch regExp matchedChars matches matchedParts } {   set subMatches 1;   set matches [FME_DecodeText $matches];   set matchedParts [FME_DecodeText $matchedParts];   set stringToSearch [FME_ReplaceRegex "\015\012?" [FME_DecodeText $stringToSearch] "\012"];   set results [FME_GetRegex $(casemac) [FME_DecodeText $regExp] $stringToSearch];   if {[llength [lindex $results 0]] > 0} {      set attrName [FME_DecodeText $matchedChars];      FME_SetAttribute $attrName [lindex [lindex [lindex $results 0] 0] 0];      set index 0;      set parts [lindex $results 1];      foreach part $parts {         if {[llength $matchedParts] > 0} {             set attrName "$matchedParts{$index}.part";             FME_SetAttribute $attrName [lindex $part 0];             set attrName "$matchedParts{$index}.startIndex";             FME_SetAttribute $attrName [lindex $part 1];         };         incr index;      };      set index 0;      set regexMatches [lindex $results 0];      foreach part $regexMatches {         if {[llength $matches] > 0} {             set attrName "$matches{$index}.match";             FME_SetAttribute $attrName [lindex $part 0];             set attrName "$matches{$index}.startIndex";             FME_SetAttribute $attrName [lindex $part 1];         };         set isFirstMatch 0;         incr index;      };      return $index;   };   return -1; }
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Tester_PASSED"    TEST @Tcl2("$(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher_8d19347e_4b8b_4327_9a5a_8808722967201_doGrep {@EvaluateExpression(FDIV,STRING_ENCODED,<at>Value<openparen>_azure_blob_uploader_headers<closeparen>,$(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher)} {<openparen>?:^|<comma><closeparen><openparen>?=<openbracket>^<quote><closebracket>|<openparen><quote><closeparen>?<closeparen><quote>?<openparen><openparen>?<openparen>1<closeparen><openbracket>^<quote><closebracket>*|<openbracket>^<comma><quote><closebracket>*<closeparen><closeparen><quote>?<openparen>?=<comma>|<dollar><closeparen>} {_first_match} {} {_azure_blob_uploader_header_attributes}") > 0    OUTPUT PASSED FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher_MATCHED"    OUTPUT FAILED FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher_NOT_MATCHED"
# -------------------------------------------------------------------------
FACTORY_DEF {*} AttrSetFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_FetchParamsAttributeCreator    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher_MATCHED"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Tester_FAILED"    MULTI_FEATURE_MODE NO    NULL_ATTR_MODE NO_OP     ATTRSET_CREATE_DIRECTIVES _PROPAGATE_MISSING_FDIV     ATTR_ACTION { "" "_azure_blob_uploader_storage_account" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_ACCOUNT)" }      ATTR_ACTION { "" "_azure_blob_uploader_key" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_KEY$encode)" }      ATTR_ACTION { "" "_azure_blob_uploader_container" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_CONTAINER)" }      ATTR_ACTION { "" "_azure_blob_uploader_blob_name" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_BLOB_NAME)" }      ATTR_ACTION { "" "_azure_blob_uploader_src_type" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_SRC_TYPE$encode)" }      ATTR_ACTION { "" "_azure_blob_uploader_src_data" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_SRC_DATA)" }    OUTPUT OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_FetchParamsAttributeCreator_OUTPUT"
# -------------------------------------------------------------------------
MACRO casemac
INCLUDE [ if { {NO} == {NO} } { puts {MACRO casemac -nocase}} ]
Tcl2 proc $(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_7277d495_6387_40cd_b341_7cd670d914f31_replacer { findText replaceText invalidValue} {     set attrs [split \"_azure_blob_uploader_blob_name\" {,}];     set findValue [FME_DecodeText $findText];     set replaceValue [FME_DecodeText $replaceText];     foreach attr $attrs {       set attrVal [FME_GetAttribute $attr];       set noMatch true;       if {{NO} == {YES}} {         set newAttrVal [FME_ReplaceRegex $(casemac) $findValue $attrVal $replaceValue];       } else {         set newAttrVal [string map $(casemac) [list $findValue $replaceValue] $attrVal];       };       if { $newAttrVal ne $attrVal } {         set noMatch false;         FME_SetAttribute $attr $newAttrVal;       };       if {$noMatch} {          if { $invalidValue == {FME_NULL_VALUE} } {             FME_SetAttributeNull $attr;          } elseif { $invalidValue != {_FME_NO_OP_} }  {             FME_SetAttribute $attr [FME_DecodeText $invalidValue];          };       };     }; }
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_FetchParamsAttributeCreator_OUTPUT"    OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_OUTPUT"         @Tcl2("$(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_7277d495_6387_40cd_b341_7cd670d914f31_replacer {<backslash>} {<solidus>} {_FME_NO_OP_}")
# -------------------------------------------------------------------------
FME_PYTHON_PATH "$(FME_MF_DIR)"
FACTORY_DEF * PythonFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_PythonCaller    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_OUTPUT"    SYMBOL_NAME UploadFeatureProcessor    PYTHON_NAMESPACE FMEOBJECTS    SOURCE_CODE from<space>fmeobjects<space>import<space>FMELogFile<comma><space>FME_INFORM<comma><space>FME_WARN<comma><space>FME_ERROR<lf>from<space>io<space>import<space>StringIO<comma><space>BytesIO<lf>from<space>AzureAPI<space>import<space>AzureAPI<lf>import<space>locale<lf><lf>class<space>UploadFeatureProcessor<openparen>object<closeparen>:<lf><space><space><space><space>def<space>__init__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile<space>=<space>FMELogFile<openparen><closeparen><lf><space><space><space><space><space><space><space><space>self.enc<space>=<space>locale.getdefaultlocale<openparen><closeparen><openbracket>1<closebracket><lf><space><space><space><space><space><space><space><space>#<space>Make<space>sure<space>to<space>change<space>if<space>Custom<space>transformer<space>is<space>renamed<space><openparen>not<space>transformer<space>instance<space>name<space>-<space>that<apos>s<space>what<space>we<apos>re<space>fetching<closeparen><space><lf><space><space><space><space><space><space><space><space>self.xformer_name<space>=<space>FME_MacroValues<openbracket><apos>AzureBlobUploader_WORKSPACE_NAME<apos><closebracket><lf><space><space><space><space>def<space>info<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_INFORM<closeparen><lf><space><space><space><space><space><space><space><space>#self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_WARN<closeparen><space>#<space>while<space>developing<space>for<space>popping<space>out<lf><space><space><space><space>def<space>input<openparen>self<comma>feature<closeparen>:<lf><space><space><space><space><space><space><space><space>try:<lf><space><space><space><space><space><space><space><space><space><space><space><space>#account<space>=<space><apos>cwsblobstorage01<apos><space>-<space>Changed<space>by<space>Peter<space>Kjeld<comma><space>30.10.2019<space>-<space>the<space>account<space>should<space>not<space>be<space>hardcoded<space>but<space>use<space>the<space>passed<space>on<space>account<lf><space><space><space><space><space><space><space><space><space><space><space><space>account<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_storage_account<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>secret<space>=<space><apos>LOEJtyYZl6S0vq6<solidus>Ig2MGY213YSqfxl1kwC8yk4GE3f+0L1AwrArzfjSf5BAQOOH8R0qVnPsiSqmlcD37ktYBg==<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space>azure<space>=<space>AzureAPI<openparen>account<comma><space>secret<comma><space>self.logfile<comma><space>logprefix<space>=<space>self.xformer_name<comma><space>loglevel<space>=<space>FME_INFORM<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>container<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_container<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>blob_name<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_blob_name<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>fin<space>=<space>None<lf><space><space><space><space><space><space><space><space><space><space><space><space>src_type<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_src_type<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>src_type<space>==<space><apos>AttributeValue<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_src_data<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>AzureAPI._unicode_type<closeparen>:<space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>fin<space>=<space>BytesIO<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>elif<space>src_type<space>==<space><apos>FilePath<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>fin<space>=<space>open<openparen>feature.getAttribute<openparen><apos>_azure_blob_uploader_src_data<apos><closeparen><comma><space><apos>rb<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>else:<space>raise<space>Exception<openparen><apos>Unrecognized<space>source<space>type<space>`%s`<apos><space>%<space>src_type<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space>extra_headers<space>=<space><opencurly><closecurly><lf><space><space><space><space><space><space><space><space><space><space><space><space>n<comma><space>m<comma><space>t<comma><space>=<space>feature.getAttributeNullMissingAndType<openparen><apos>_azure_blob_uploader_header_attributes<opencurly>0<closecurly>.part<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>not<space>m:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>for<space>attr<space>in<space><openbracket>x<space>for<space>x<space>in<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_header_attributes<opencurly><closecurly>.part<apos><closeparen><space>if<space>len<openparen>x<closeparen><space>and<space>x<space>!=<space><apos><quote><apos><closebracket>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>n<comma><space>m<comma><space>t<comma><space>=<space>feature.getAttributeNullMissingAndType<openparen>attr.encode<openparen>self.enc<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>if<space>n<space>or<space>m:<space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>continue<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>val<space>=<space>feature.getAttribute<openparen>attr.encode<openparen>self.enc<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>extra_headers<openbracket>attr<closebracket><space>=<space>val<lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>len<openparen>extra_headers.keys<openparen><closeparen><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Extra<space>request<space>headers<space>used:<space><opencurly><closecurly><apos>.format<openparen>extra_headers<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>No<space>Extra<space>request<space>headers<space>used<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>#####<space>INSERT<space>CODE<space>HERE<space>TO<space>MANIPULATE<space>CONTENT<space>BEFORE<space>UPLOAD<space>#####<lf><space><space><space><space><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space>azure.put_blob<openparen>container<comma><space>blob_name<comma><space>fin<comma><space>extra_headers<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>fin.close<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_uploader_status<apos><comma><space><apos>success<apos><closeparen><lf><space><space><space><space><space><space><space><space>except<space>Exception<space>as<space>e:<lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_uploader_status<apos><comma><space><apos>fail<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_uploader_error_message<apos><comma><space>str<openparen>e<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.logfile.logException<openparen>e<comma><space>FME_ERROR<closeparen><lf><space><space><space><space><space><space><space><space>self.pyoutput<openparen>feature<closeparen><lf><space><space><space><space>def<space>close<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>del<space>self.logfile<lf><space><space><space><space><space><space><space><space>    OUTPUT PYOUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_PythonCaller_OUTPUT"
# -------------------------------------------------------------------------
Lookup $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_AttributeFilterLut   success ok   fail ok   "" notok   ENCODED
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_PythonCaller_OUTPUT"    TEST @Lookup($(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_AttributeFilterLut,_azure_blob_uploader_status,ENCODED_ATTR) == "ok"    OUTPUT PASSED FEATURE_TYPE * @FeatureType(SET_FROM_ATTR, _azure_blob_uploader_status, $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter)    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_NullFilter    INPUT FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>    TEST _azure_blob_uploader_status ATTRIBUTE_VALUE_NULL "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_MissingFilter    INPUT FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>    TEST _azure_blob_uploader_status ATTRIBUTE_IS_MISSING "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_BlankFilter    INPUT FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>    TEST _azure_blob_uploader_status ATTRIBUTE_IS_EMPTY "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<EMPTY>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>
# -------------------------------------------------------------------------
INCLUDE [    set macroLine "MACRO $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF {*} TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<EMPTY>"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher_NOT_MATCHED"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_fail"    OUTPUT { FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"        @RemoveAttributes(fme_encoded,_azure_blob_uploader_blob_name,_azure_blob_uploader_key,_azure_blob_uploader_src_data,_azure_blob_uploader_src_type,_azure_blob_uploader_container,_azure_blob_uploader_status,_azure_blob_uploader_storage_account)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP)")         }
# -------------------------------------------------------------------------
INCLUDE [    set macroLine "MACRO $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF {*} TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_success"    OUTPUT { FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_OUTPUT"        @RemoveAttributes(fme_encoded,_azure_blob_uploader_blob_name,_azure_blob_uploader_key,_azure_blob_uploader_src_data,_azure_blob_uploader_error_message,_azure_blob_uploader_src_type,_azure_blob_uploader_container,_azure_blob_uploader_status,_azure_blob_uploader_storage_account)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_LIST_EXP)")         }
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_Success1572424973 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Success"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_Fail1572424973 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Fail"
INCLUDE [puts {MACRO WB_CURRENT_CONTEXT $(WB_OLD_CONTEXT_$(AzureBlobUploader_WORKSPACE_NAME))}]
#! <?xml version="1.0" encoding="UTF-8" ?>
#! <TRANSFORMER
# TRANSFORMER_BEGIN AzureBlobUploader,5,"Web Services",2610ca53-f281-44ad-a3ab-abea25d8b995,"Linked by Default",No,NO_PARALLELISM,,No,17539,YES,No,
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Uploads a file to Azure using the Azure Blob Service REST API (https://msdn.microsoft.com/en-us/library/azure/dd135733.aspx)</p>
# <p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">
#     <br/>
# </p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">A key is needed as well as the name of the storage account.</p>
# <p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">
#     <br/>
# </p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Source data can be either from an attribute or a filepath.</p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Maximum file size is roughly 195 GB. </p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Files larger than 64 MB will be uploaded in chunks of 4 MB. </p>
# 
# TRANSFORMER_END
#!   FME_PROCESS_COUNT="NO_PARALLELISM"
#!   FME_PROCESS_GROUPS_ORDERED="No"
#!   DOC_EXTENTS="4875.8 859.383"
#!   FME_PROCESS_GROUP_BY=""
#!   WORKSPACE_VERSION="1"
#!   MAX_LOOP_ITERATIONS=""
#!   MARKDOWN_DESCRIPTION=""
#!   FME_LINKED_TRANSFORMER_VERSION="5"
#!   LAST_SAVE_DATE="2017-10-04T09:01:11"
#!   ZOOM_SCALE="100"
#!   SHOW_INFO_NODES="true"
#!   PASSWORD=""
#!   PYTHON_COMPATIBILITY=""
#!   ATTR_TYPE_ENCODING="SDF"
#!   MARKDOWN_USAGE=""
#!   FMX_INSERT_MODE="Linked by Default"
#!   HISTORY="2016-06-27,peter.segerstedt&lt;at&gt;eea.europa.eu,Original&lt;space&gt;definition,2016-08-08,peter.segerstedt&lt;at&gt;eea.europa.eu,python&lt;space&gt;code&lt;space&gt;now&lt;space&gt;shares&lt;space&gt;common&lt;space&gt;base&lt;space&gt;with&lt;space&gt;other&lt;space&gt;AzureBlob-transformers,2016-11-25,peter.segerstedt&lt;at&gt;eea.europa.eu,Added&lt;space&gt;option&lt;space&gt;to&lt;space&gt;provide&lt;space&gt;extra&lt;space&gt;headers&lt;space&gt;to&lt;space&gt;the&lt;space&gt;request."
#!   USAGE="&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0//EN&quot; &quot;http://www.w3.org/TR/REC-html40/strict.dtd&quot;&gt;&#10;&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;&#10;p, li { white-space: pre-wrap; }&#10;&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:&apos;MS Shell Dlg 2&apos;; font-size:8.25pt; font-weight:400; font-style:normal;&quot;&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-weight:600;&quot;&gt;Storage account:&lt;/span&gt; &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the storage account. Look for this under the portal.azure.com.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-weight:600;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-weight:600;&quot;&gt;Access key:&lt;/span&gt; &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the access key for the blob inside Azure. You can find this when you select the storage inside the protal.azure.com website, go to settings and then search for &amp;quot;Access keys&amp;quot;.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Use access keys to authenticate your applications when making requests to this Azure storage account. Store your access keys securely - for example, using Azure Key Vault - and don&apos;t share them. We recommend regenerating your access keys regularly. You are provided two access keys so that you can maintain connections using one key while regenerating the other. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-weight:600;&quot;&gt;Container name:&lt;/span&gt; &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The storage countainer name. These are listed directly under the storage account pannel. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-weight:600;&quot;&gt;Blob name:&lt;/span&gt; &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The name of the blob you are about to create. The filename of the source data will be used if this was not provided. You can create folders by simply using the &apos;/&apos; for example &amp;quot;folder1/folder2/blobname&amp;quot;. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-weight:600;&quot;&gt;Upload from:&lt;/span&gt; &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Describes what is provided inside the &amp;quot;source data&amp;quot; attribute. When set to &amp;quot;AttributeValue&amp;quot; it means that the source data is a binary file. When set to &amp;quot;file&amp;quot; it means that the source data is a path towards a file.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;This transformer currently only stores &amp;quot;block blobs&amp;quot;&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;block blob: &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Block blobs let you upload large blobs efficiently. Block blobs are comprised of blocks, each of which is identified by a block ID. You create or modify a block blob by writing a set of blocks and committing them by their block IDs. Each block can be a different size, up to a maximum of 4 MB, and a block blob can include up to 50,000 blocks. The maximum size of a block blob is therefore slightly more than 195 GB (4 MB X 50,000 blocks). If you are writing a block blob that is no more than 64 MB in size, you can upload it in its entirety with a single write operation&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;append blob:&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;An append blob is comprised of blocks and is optimized for append operations. When you modify an append blob, blocks are added to the end of the blob only, via the &lt;a href=&quot;https://msdn.microsoft.com/en-us/library/azure/mt427365.aspx&quot;&gt;&lt;span style=&quot; text-decoration: underline; color:#0000ff;&quot;&gt;Append Block &lt;/span&gt;&lt;/a&gt;operation. Updating or deleting of existing blocks is not supported. Unlike a block blob, an append blob does not expose its block IDs. &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Each block in an append blob can be a different size, up to a maximum of 4 MB, and an append blob can include up to 50,000 blocks. The maximum size of an append blob is therefore slightly more than 195 GB (4 MB X 50,000 blocks).&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;page blob:&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Page blobs are a collection of 512-byte pages optimized for random read and write operations. To create a page blob, you initialize the page blob and specify the maximum size the page blob will grow. To add or update the contents of a page blob, you write a page or pages by specifying an offset and a range that align to 512-byte page boundaries. A write to a page blob can overwrite just one page, some pages, or up to 4 MB of the page blob. Writes to page blobs happen in-place and are immediately committed to the blob. The maximum size for a page blob is 1 TB. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-weight:600;&quot;&gt;Request Headers&lt;/span&gt;: Additional headers that should be used when sending the request.&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Selected attributes will be used to build the headers, example:&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;If selected attributes are &lt;/p&gt;&#10;&lt;ul style=&quot;margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;&quot;&gt;&lt;li style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; color:#000000;&quot;&gt;Content-Encoding&lt;/span&gt;&lt;/li&gt;&#10;&lt;li style=&quot; color:#000000;&quot; style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Content-Type&lt;/li&gt;&#10;&lt;li style=&quot; color:#000000;&quot; style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;x-ms-blob-content-disposition&lt;/li&gt;&lt;/ul&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;and the feature entering the transformer have these attributes, something like this would be added to the headers used in the request:&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; color:#000000;&quot;&gt;x-ms-blob-content-disposition: attachment; filename=thedata.txt;&lt;/span&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; color:#000000;&quot;&gt;Content-Type: text/plain; charset=UTF-8&lt;/span&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; color:#000000;&quot;&gt;Content-Encoding: UTF-8&lt;/span&gt;&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;See also: https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/put-blob&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"
#!   DOC_TOP_LEFT="-130.065 -421.879"
#!   VIEW_POSITION="515.63 1087.51"
#!   FME_BUILD_NUM="17539"
#!   FMX_ATTRIBUTE_PROPOGATION_MODE="AUTO"
#!   BLOCKED_LOOPING="No"
#!   FME_SERVER_SERVICES=""
#!   SHOW_ANNOTATIONS="true"
#!   FME_DOCUMENT_GUID="2610ca53-f281-44ad-a3ab-abea25d8b995"
#!   DESCRIPTION="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Uploads a file to Azure using the Azure Blob Service REST API (https://msdn.microsoft.com/en-us/library/azure/dd135733.aspx)&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;A key is needed as well as the name of the storage account.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Source data can be either from an attribute or a filepath.&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Maximum file size is roughly 195 GB. &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Files larger than 64 MB will be uploaded in chunks of 4 MB. &lt;/p&gt;&#10;"
#!   WARN_INVALID_XFORM_PARAM="Yes"
#!   ITERATION_COUNT_ATTR=""
#!   FME_DOCUMENT_PRIORGUID=""
#!   USE_MARKDOWN=""
#!   EXPLICIT_BOOKMARK_ORDER="false"
#!   TITLE="AzureBlobUploader"
#!   CATEGORY="Web Services"
#!   LAST_SAVE_BUILD="FME(R) 2017.1.0.0 (20170731 - Build 17539 - WIN64)"
#!   XFORM_DEPRECATED="No"
#! >
#! <DATASETS>
#! </DATASETS>
#! <DATA_TYPES>
#! </DATA_TYPES>
#! <GEOM_TYPES>
#! </GEOM_TYPES>
#! <FEATURE_TYPES>
#! </FEATURE_TYPES>
#! <FMESERVER>
#! </FMESERVER>
#! <GLOBAL_PARAMETERS>
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI PASSWORD_OR_ATTR KEY Access key:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="true"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI CHOICE_OR_ATTR SRC_TYPE AttributeValue%FilePath Upload From:"
#!   DEFAULT_VALUE="AttributeValue"
#!   IS_STAND_ALONE="true"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR ACCOUNT &quot; &quot; Storage account:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR CONTAINER &quot; &quot; Container:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR BLOB_NAME &quot; &quot; Blob Name:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR SRC_DATA &quot; &quot; Source Data:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI OPTIONAL ATTRLIST_COMMAS_OR_ATTR XTRA_HEADERS &quot;&quot; Request Headers:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="true"
#! />
#! </GLOBAL_PARAMETERS>
#! <COMMENTS>
#! </COMMENTS>
#! <CONSTANTS>
#! </CONSTANTS>
#! <BOOKMARKS>
#! </BOOKMARKS>
#! <TRANSFORMERS>
#! <TRANSFORMER
#!   IDENTIFIER="16"
#!   TYPE="StringReplacer"
#!   VERSION="4"
#!   POSITION="2442.08 437.504"
#!   BOUNDING_RECT="2442.08 437.504 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="CASE" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="StringReplacer"/>
#!     <XFORM_PARM PARM_NAME="FIND_TEXT" PARM_VALUE="&lt;backslash&gt;"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REPLACE_TEXT" PARM_VALUE="&lt;solidus&gt;"/>
#!     <XFORM_PARM PARM_NAME="NO_MATCH" PARM_VALUE="_FME_NO_OP_"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REGEXP" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="NO_MATCH_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="SRC_ATTRS" PARM_VALUE="_azure_blob_uploader_blob_name"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="10"
#!   TYPE="AttributeCreator"
#!   VERSION="8"
#!   POSITION="1700.51 437.504"
#!   BOUNDING_RECT="1700.51 437.504 618.756 71"
#!   ORDER="5e+14"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="FetchParamsAttributeCreator"/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_VALUE" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="ATTR_TABLE" PARM_VALUE="&quot;&quot; _azure_blob_uploader_storage_account SET_TO $(ACCOUNT)  _azure_blob_uploader_key SET_TO $(KEY)  _azure_blob_uploader_container SET_TO $(CONTAINER)  _azure_blob_uploader_blob_name SET_TO $(BLOB_NAME)  _azure_blob_uploader_src_type SET_TO $(SRC_TYPE)  _azure_blob_uploader_src_data SET_TO $(SRC_DATA)"/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_GRP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_HANDLING" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NUM_PRIOR_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_MODE_DISPLAY" PARM_VALUE="No Substitution"/>
#!     <XFORM_PARM PARM_NAME="MULTI_FEATURE_MODE" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="NUM_SUBSEQUENT_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="11"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="4155.79 437.504"
#!   BOUNDING_RECT="4155.79 437.504 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover"/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_azure_blob_uploader_blob_name,_azure_blob_uploader_key,_azure_blob_uploader_src_data,_azure_blob_uploader_error_message,_azure_blob_uploader_src_type,_azure_blob_uploader_container,_azure_blob_uploader_status,_azure_blob_uploader_storage_account"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="12"
#!   TYPE="AttributeFilter"
#!   VERSION="4"
#!   POSITION="3562.04 437.504"
#!   BOUNDING_RECT="3562.04 437.504 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="success"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="&lt;EMPTY&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <OUTPUT_FEAT NAME="&lt;MISSING&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="2"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <OUTPUT_FEAT NAME="&lt;NULL&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="3"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <OUTPUT_FEAT NAME="&lt;UNFILTERED&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="4"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <OUTPUT_FEAT NAME="fail"/>
#!     <FEAT_COLLAPSED COLLAPSED="5"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_PARM PARM_NAME="ATTR_VALUES" PARM_VALUE="success,&lt;lt&gt;EMPTY&lt;gt&gt;,&lt;lt&gt;MISSING&lt;gt&gt;,&lt;lt&gt;NULL&lt;gt&gt;,&lt;lt&gt;UNFILTERED&lt;gt&gt;,fail"/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeFilter"/>
#!     <XFORM_PARM PARM_NAME="ATTR_NAME" PARM_VALUE="_azure_blob_uploader_status"/>
#!     <XFORM_PARM PARM_NAME="ATTR_VALUES_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTR_GROUP" PARM_VALUE=""/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="13"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="4205.79 -421.879"
#!   BOUNDING_RECT="4205.79 -421.879 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover_2"/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_azure_blob_uploader_blob_name,_azure_blob_uploader_key,_azure_blob_uploader_src_data,_azure_blob_uploader_src_type,_azure_blob_uploader_container,_azure_blob_uploader_status,_azure_blob_uploader_storage_account"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="14"
#!   TYPE="PythonCaller"
#!   VERSION="4"
#!   POSITION="2974.53 437.504"
#!   BOUNDING_RECT="2974.53 437.504 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="PythonCaller"/>
#!     <XFORM_PARM PARM_NAME="HIDE_ATTRIBUTES" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ADVANCED_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PYTHONSOURCE" PARM_VALUE="from&lt;space&gt;fmeobjects&lt;space&gt;import&lt;space&gt;FMELogFile&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;comma&gt;&lt;space&gt;FME_WARN&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;lf&gt;from&lt;space&gt;cStringIO&lt;space&gt;import&lt;space&gt;StringIO&lt;lf&gt;import&lt;space&gt;locale&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;UploadFeatureProcessor&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile&lt;space&gt;=&lt;space&gt;FMELogFile&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.enc&lt;space&gt;=&lt;space&gt;locale.getdefaultlocale&lt;openparen&gt;&lt;closeparen&gt;&lt;openbracket&gt;1&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;Make&lt;space&gt;sure&lt;space&gt;to&lt;space&gt;change&lt;space&gt;if&lt;space&gt;Custom&lt;space&gt;transformer&lt;space&gt;is&lt;space&gt;renamed&lt;space&gt;&lt;openparen&gt;not&lt;space&gt;transformer&lt;space&gt;instance&lt;space&gt;name&lt;space&gt;-&lt;space&gt;that&lt;apos&gt;s&lt;space&gt;what&lt;space&gt;we&lt;apos&gt;re&lt;space&gt;fetching&lt;closeparen&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.xformer_name&lt;space&gt;=&lt;space&gt;FME_MacroValues&lt;openbracket&gt;&lt;apos&gt;AzureBlobUploader_WORKSPACE_NAME&lt;apos&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;info&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_WARN&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;while&lt;space&gt;developing&lt;space&gt;for&lt;space&gt;popping&lt;space&gt;out&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;input&lt;openparen&gt;self&lt;comma&gt;feature&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;try:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;account&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_storage_account&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;secret&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_key&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;azure&lt;space&gt;=&lt;space&gt;AzureAPI&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;self.logfile&lt;comma&gt;&lt;space&gt;logprefix&lt;space&gt;=&lt;space&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;loglevel&lt;space&gt;=&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;container&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_container&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_blob_name&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin&lt;space&gt;=&lt;space&gt;None&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;src_type&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_src_type&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;src_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;AttributeValue&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_src_data&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin&lt;space&gt;=&lt;space&gt;StringIO&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;elif&lt;space&gt;src_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;FilePath&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin&lt;space&gt;=&lt;space&gt;open&lt;openparen&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_src_data&lt;apos&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;rb&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;&lt;apos&gt;Unrecognized&lt;space&gt;source&lt;space&gt;type&lt;space&gt;`%s`&lt;apos&gt;&lt;space&gt;%&lt;space&gt;src_type&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;extra_headers&lt;space&gt;=&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;n&lt;comma&gt;&lt;space&gt;m&lt;comma&gt;&lt;space&gt;t&lt;comma&gt;&lt;space&gt;=&lt;space&gt;feature.getAttributeNullMissingAndType&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_header_attributes&lt;opencurly&gt;0&lt;closecurly&gt;.part&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;not&lt;space&gt;m:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;attr&lt;space&gt;in&lt;space&gt;&lt;openbracket&gt;x&lt;space&gt;for&lt;space&gt;x&lt;space&gt;in&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_header_attributes&lt;opencurly&gt;&lt;closecurly&gt;.part&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;if&lt;space&gt;len&lt;openparen&gt;x&lt;closeparen&gt;&lt;space&gt;and&lt;space&gt;x&lt;space&gt;!=&lt;space&gt;&lt;apos&gt;&lt;quote&gt;&lt;apos&gt;&lt;closebracket&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;n&lt;comma&gt;&lt;space&gt;m&lt;comma&gt;&lt;space&gt;t&lt;comma&gt;&lt;space&gt;=&lt;space&gt;feature.getAttributeNullMissingAndType&lt;openparen&gt;attr.encode&lt;openparen&gt;self.enc&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;n&lt;space&gt;or&lt;space&gt;m:&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;continue&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;val&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;attr.encode&lt;openparen&gt;self.enc&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;extra_headers&lt;openbracket&gt;attr&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;val&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;len&lt;openparen&gt;extra_headers.keys&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Extra&lt;space&gt;request&lt;space&gt;headers&lt;space&gt;used:&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;extra_headers&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;No&lt;space&gt;Extra&lt;space&gt;request&lt;space&gt;headers&lt;space&gt;used&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#####&lt;space&gt;INSERT&lt;space&gt;CODE&lt;space&gt;HERE&lt;space&gt;TO&lt;space&gt;MANIPULATE&lt;space&gt;CONTENT&lt;space&gt;BEFORE&lt;space&gt;UPLOAD&lt;space&gt;#####&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;azure.put_blob&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin&lt;comma&gt;&lt;space&gt;extra_headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.close&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;success&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;except&lt;space&gt;Exception&lt;space&gt;as&lt;space&gt;e:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;fail&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_error_message&lt;apos&gt;&lt;comma&gt;&lt;space&gt;str&lt;openparen&gt;e&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logException&lt;openparen&gt;e&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.pyoutput&lt;openparen&gt;feature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;close&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;del&lt;space&gt;self.logfile&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;#####&lt;space&gt;Code&lt;space&gt;below&lt;space&gt;*should*&lt;space&gt;be&lt;space&gt;more&lt;space&gt;or&lt;space&gt;less&lt;space&gt;standalone&lt;space&gt;&lt;openparen&gt;no&lt;space&gt;bindings&lt;space&gt;to&lt;space&gt;fme&lt;closeparen&gt;&lt;space&gt;#####&lt;lf&gt;import&lt;space&gt;os.path&lt;lf&gt;import&lt;space&gt;requests&lt;lf&gt;from&lt;space&gt;collections&lt;space&gt;import&lt;space&gt;OrderedDict&lt;lf&gt;import&lt;space&gt;datetime&lt;lf&gt;from&lt;space&gt;xml.etree&lt;space&gt;import&lt;space&gt;ElementTree&lt;lf&gt;from&lt;space&gt;cStringIO&lt;space&gt;import&lt;space&gt;StringIO&lt;lf&gt;from&lt;space&gt;Queue&lt;space&gt;import&lt;space&gt;Queue&lt;lf&gt;from&lt;space&gt;threading&lt;space&gt;import&lt;space&gt;Thread&lt;lf&gt;import&lt;space&gt;io&lt;lf&gt;&lt;lf&gt;import&lt;space&gt;base64&lt;lf&gt;import&lt;space&gt;uuid&lt;lf&gt;import&lt;space&gt;hashlib&lt;lf&gt;import&lt;space&gt;hmac&lt;lf&gt;import&lt;space&gt;sys&lt;lf&gt;&lt;lf&gt;PUT_BLOB_LIMIT&lt;space&gt;=&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;64&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;64&lt;space&gt;MB&lt;lf&gt;PUT_BLOCK_CHUNK_SIZE&lt;space&gt;=&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;4&lt;space&gt;#&lt;space&gt;4&lt;space&gt;MB&lt;lf&gt;AZ_VERSION&lt;space&gt;=&lt;space&gt;&lt;apos&gt;2015-02-21&lt;apos&gt;&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;StdoutLogger&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;simple&lt;space&gt;log&lt;space&gt;class&lt;space&gt;to&lt;space&gt;mimic&lt;space&gt;fme&lt;space&gt;api&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;logMessageString&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;msg&lt;comma&gt;&lt;space&gt;level&lt;space&gt;=&lt;space&gt;0&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;level&lt;space&gt;==&lt;space&gt;0:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stdout.write&lt;openparen&gt;&lt;apos&gt;INFO&lt;space&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stdout.write&lt;openparen&gt;msg&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stdout.write&lt;openparen&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;level&lt;space&gt;==&lt;space&gt;1:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stderr.write&lt;openparen&gt;&lt;apos&gt;WARN&lt;space&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stderr.write&lt;openparen&gt;msg&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stderr.write&lt;openparen&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;level&lt;space&gt;==&lt;space&gt;2:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stderr.write&lt;openparen&gt;&lt;apos&gt;ERROR&lt;space&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stderr.write&lt;openparen&gt;msg&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stderr.write&lt;openparen&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;level&lt;space&gt;==&lt;space&gt;2:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stderr.write&lt;openparen&gt;&lt;apos&gt;FATAL&lt;space&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stderr.write&lt;openparen&gt;msg&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stderr.write&lt;openparen&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;logException&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;e&lt;comma&gt;&lt;space&gt;level&lt;space&gt;=&lt;space&gt;0&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logMessageString&lt;openparen&gt;str&lt;openparen&gt;e&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;level&lt;closeparen&gt;&lt;lf&gt;class&lt;space&gt;AzureAPI&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;sys.version_info&lt;space&gt;&lt;lt&gt;&lt;space&gt;&lt;openparen&gt;3&lt;comma&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;from&lt;space&gt;collections&lt;space&gt;import&lt;space&gt;Iterable&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_unicode_type&lt;space&gt;=&lt;space&gt;unicode&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;from&lt;space&gt;collections.abc&lt;space&gt;import&lt;space&gt;Iterable&lt;space&gt;#&lt;space&gt;TODO:&lt;space&gt;this&lt;space&gt;code&lt;space&gt;was&lt;space&gt;found&lt;space&gt;somewhere&lt;space&gt;but&lt;space&gt;its&lt;space&gt;logic&lt;space&gt;is&lt;space&gt;not&lt;space&gt;clear&lt;space&gt;to&lt;space&gt;me...&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_unicode_type&lt;space&gt;=&lt;space&gt;str&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;logfile&lt;space&gt;=&lt;space&gt;StdoutLogger&lt;openparen&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;logprefix&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;comma&gt;&lt;space&gt;loglevel&lt;space&gt;=&lt;space&gt;0&lt;comma&gt;&lt;space&gt;session&lt;space&gt;=&lt;space&gt;requests.Session&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.session&lt;space&gt;=&lt;space&gt;session&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile&lt;space&gt;=&lt;space&gt;logfile&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logprefix&lt;space&gt;=&lt;space&gt;logprefix&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.loglevel&lt;space&gt;=&lt;space&gt;loglevel&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.account&lt;space&gt;=&lt;space&gt;account&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.secret&lt;space&gt;=&lt;space&gt;secret&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__enter__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;self&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__exit__&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;type&lt;comma&gt;&lt;space&gt;value&lt;comma&gt;&lt;space&gt;traceback&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Closing&lt;space&gt;Azure&lt;space&gt;Connection&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;del&lt;space&gt;self.logfile&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;del&lt;space&gt;self.session&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;value&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;info&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.logprefix&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;self.loglevel&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;warn&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.logprefix&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;self.loglevel&lt;space&gt;+&lt;space&gt;1&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;append_block&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=appendblock&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Appending&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp:appendblock&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;ERROR&lt;space&gt;status&lt;space&gt;%s:&lt;space&gt;`%s`&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;r.status_code&lt;comma&gt;&lt;space&gt;_string_to_sign&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_block&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;block_id&lt;space&gt;=&lt;space&gt;base64.b64encode&lt;openparen&gt;uuid.uuid4&lt;openparen&gt;&lt;closeparen&gt;.hex&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#https:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;mycontainer&lt;solidus&gt;myblob?comp=block&lt;amp&gt;blockid=id&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=block&lt;amp&gt;blockid=%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_id&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;block&lt;space&gt;of&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;blockid:%s&lt;backslash&gt;ncomp:block&lt;apos&gt;&lt;space&gt;%&lt;space&gt;block_id&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;block_id&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_block_list&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_list&lt;comma&gt;&lt;space&gt;xtra_headers&lt;space&gt;=&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;list_fragments&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;s:&lt;space&gt;&lt;apos&gt;&lt;lt&gt;Uncommitted&lt;gt&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;lt&gt;&lt;solidus&gt;Uncommitted&lt;gt&gt;&lt;apos&gt;.format&lt;openparen&gt;s&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;block_list&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;lt&gt;?xml&lt;space&gt;version=&lt;quote&gt;1.0&lt;quote&gt;&lt;space&gt;encoding=&lt;quote&gt;utf-8&lt;quote&gt;?&lt;gt&gt;&lt;lt&gt;BlockList&lt;gt&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;lt&gt;&lt;solidus&gt;BlockList&lt;gt&gt;&lt;apos&gt;.format&lt;openparen&gt;list_fragments&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;xtra_headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=blocklist&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp:blocklist&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_blob&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin&lt;comma&gt;&lt;space&gt;xtra_headers&lt;space&gt;=&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.seek&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;os.SEEK_END&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;size&lt;space&gt;=&lt;space&gt;fin.tell&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.seek&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;os.SEEK_SET&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;size&lt;space&gt;&lt;lt&gt;&lt;space&gt;PUT_BLOB_LIMIT:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;fin.read&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;xtra_headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.warn&lt;openparen&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ids&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;offset&lt;space&gt;in&lt;space&gt;range&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;size&lt;comma&gt;&lt;space&gt;PUT_BLOCK_CHUNK_SIZE&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;`%s`&lt;comma&gt;&lt;space&gt;%s%%&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;blob_name&lt;comma&gt;&lt;space&gt;int&lt;openparen&gt;round&lt;openparen&gt;offset&lt;space&gt;*&lt;space&gt;100&lt;space&gt;&lt;solidus&gt;&lt;space&gt;size&lt;closeparen&gt;&lt;closeparen&gt;&lt;space&gt;&lt;closeparen&gt;&lt;space&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;block_size&lt;space&gt;=&lt;space&gt;min&lt;openparen&gt;PUT_BLOCK_CHUNK_SIZE&lt;comma&gt;&lt;space&gt;size&lt;space&gt;-&lt;space&gt;offset&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ids.append&lt;openparen&gt;self.put_block&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin.read&lt;openparen&gt;block_size&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.put_block_list&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;ids&lt;comma&gt;&lt;space&gt;xtra_headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;&lt;apos&gt;ID&lt;space&gt;LIST&lt;space&gt;COMMITTED:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;backslash&gt;t&lt;apos&gt;.join&lt;openparen&gt;ids&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Done&lt;space&gt;uploading&lt;space&gt;%s&lt;space&gt;bytes&lt;space&gt;of&lt;space&gt;data&lt;apos&gt;&lt;space&gt;%&lt;space&gt;size&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;getblocklist&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#print&lt;space&gt;&lt;apos&gt;GET&lt;space&gt;http:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;movies&lt;solidus&gt;MOV1.avi?comp=blocklist&lt;amp&gt;blocklisttype=committed&lt;space&gt;HTTP&lt;solidus&gt;1.1&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;params&lt;space&gt;=&lt;space&gt;&lt;opencurly&gt;&lt;apos&gt;comp&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;blocklist&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;blocklisttype&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;committed&lt;apos&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;params&lt;space&gt;=&lt;space&gt;OrderedDict&lt;openparen&gt;sorted&lt;openparen&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;key=lambda&lt;space&gt;t:&lt;space&gt;t&lt;openbracket&gt;0&lt;closebracket&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;querystring&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;amp&gt;&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;t:&lt;space&gt;&lt;apos&gt;&lt;opencurly&gt;&lt;closecurly&gt;=&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;*t&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;t:&lt;space&gt;&lt;apos&gt;&lt;opencurly&gt;&lt;closecurly&gt;:&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;*t&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_path&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;.join&lt;openparen&gt;&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s?%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;blob_path&lt;comma&gt;querystring&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;blob_path&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;querystringencoded&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;GET&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;self.session.get&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;200:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;ERROR&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;ERROR&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;root&lt;space&gt;=&lt;space&gt;ElementTree.fromstring&lt;openparen&gt;r.content.decode&lt;openparen&gt;&lt;apos&gt;utf-8-sig&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;unicode&lt;openparen&gt;ElementTree.tostring&lt;openparen&gt;root&lt;comma&gt;&lt;space&gt;encoding=&lt;quote&gt;utf8&lt;quote&gt;&lt;comma&gt;&lt;space&gt;method=&lt;quote&gt;xml&lt;quote&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;utf8&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;offset&lt;space&gt;=&lt;space&gt;0&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;block&lt;space&gt;in&lt;space&gt;root.find&lt;openparen&gt;&lt;apos&gt;CommittedBlocks&lt;apos&gt;&lt;closeparen&gt;.iter&lt;openparen&gt;&lt;apos&gt;Block&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;name&lt;space&gt;=&lt;space&gt;base64.b64decode&lt;openparen&gt;block.find&lt;openparen&gt;&lt;apos&gt;Name&lt;apos&gt;&lt;closeparen&gt;.text&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;size&lt;space&gt;=&lt;space&gt;int&lt;openparen&gt;block.find&lt;openparen&gt;&lt;apos&gt;Size&lt;apos&gt;&lt;closeparen&gt;.text&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;name&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;size&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;offset&lt;space&gt;+=&lt;space&gt;size&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;getblock&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;length&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;range&lt;space&gt;=&lt;space&gt;&lt;apos&gt;bytes=&lt;opencurly&gt;&lt;closecurly&gt;-&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;offset&lt;comma&gt;&lt;space&gt;offset&lt;space&gt;+&lt;space&gt;length&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_path&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;.join&lt;openparen&gt;&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;blob_path&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;xtra_headers=&lt;opencurly&gt;&lt;apos&gt;x-ms-range&lt;apos&gt;:range&lt;closecurly&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;blob_path&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;GET&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;self.session.get&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;stream=True&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;not&lt;space&gt;r.status_code&lt;space&gt;in&lt;space&gt;&lt;openparen&gt;200&lt;comma&gt;&lt;space&gt;206&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;mycontainer&lt;solidus&gt;myblob&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;chunk&lt;space&gt;in&lt;space&gt;r.iter_content&lt;openparen&gt;io.DEFAULT_BUFFER_SIZE&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;chunk&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;get_blob_properties&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;&lt;apos&gt;getting&lt;space&gt;properties&lt;space&gt;for&lt;space&gt;blob&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;solidus&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;&lt;opencurly&gt;&lt;closecurly&gt;.blob.core.windows.net&lt;solidus&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;solidus&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;HEAD&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;self.session.head&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;200:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.warn&lt;openparen&gt;r.status_code&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.warn&lt;openparen&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.warn&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;str&lt;openparen&gt;r.headers&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;opencurly&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;content-length&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;1368582383&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;AppendBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;accept-ranges&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;bytes&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-blob-committed-block-count&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;327&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;2015-02-21&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;server&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;Windows-Azure-Blob&lt;solidus&gt;1.0&lt;space&gt;Microsoft-HTTPAPI&lt;solidus&gt;2.0&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-write-protection&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;false&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;last-modified&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;Thu&lt;comma&gt;&lt;space&gt;23&lt;space&gt;Jun&lt;space&gt;2016&lt;space&gt;11:57:16&lt;space&gt;GMT&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;etag&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;&lt;quote&gt;0x8D39B5D855ED87F&lt;quote&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-lease-state&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;available&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;date&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;Wed&lt;comma&gt;&lt;space&gt;16&lt;space&gt;Nov&lt;space&gt;2016&lt;space&gt;17:59:04&lt;space&gt;GMT&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;content-type&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;application&lt;solidus&gt;octet-stream&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-request-id&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;414995ba-0001-0081-2433-40256f000000&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-lease-status&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;unlocked&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;map&lt;openparen&gt;r.headers.get&lt;comma&gt;&lt;space&gt;&lt;openbracket&gt;&lt;apos&gt;last-modified&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;content-length&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;content-type&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Content-MD5&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Accept-Ranges&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-blob-committed-block-count&lt;apos&gt;&lt;closebracket&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;download_blob&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;target_filepath&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;status&lt;space&gt;=&lt;space&gt;azure.download_blob&lt;openparen&gt;container&lt;comma&gt;blob_name&lt;comma&gt;target_filepath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;TODO:&lt;space&gt;Eiter&lt;space&gt;get&lt;space&gt;blob&lt;space&gt;type&lt;space&gt;as&lt;space&gt;parameter&lt;space&gt;or&lt;space&gt;perform&lt;space&gt;a&lt;space&gt;Get&lt;space&gt;Blob&lt;space&gt;Properties&lt;space&gt;request&lt;space&gt;in&lt;space&gt;order&lt;space&gt;to&lt;space&gt;find&lt;space&gt;out&lt;space&gt;how&lt;space&gt;to&lt;space&gt;access&lt;space&gt;data.&lt;space&gt;Currently&lt;space&gt;only&lt;space&gt;large&lt;space&gt;blobs&lt;space&gt;that&lt;space&gt;have&lt;space&gt;an&lt;space&gt;accosiated&lt;space&gt;bloclist&lt;space&gt;works.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;last_mod&lt;comma&gt;&lt;space&gt;blob_type&lt;comma&gt;&lt;space&gt;content_length&lt;comma&gt;&lt;space&gt;content_type&lt;comma&gt;&lt;space&gt;content_md5&lt;comma&gt;&lt;space&gt;accept_ranges&lt;comma&gt;&lt;space&gt;committed_block_count&lt;comma&gt;&lt;space&gt;=&lt;space&gt;self.get_blob_properties&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;content_length&lt;space&gt;=&lt;space&gt;int&lt;openparen&gt;content_length&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;blob_type&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;nthreads&lt;space&gt;=&lt;space&gt;10&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue&lt;space&gt;=&lt;space&gt;Queue&lt;openparen&gt;nthreads*2&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;writequeue&lt;space&gt;=&lt;space&gt;Queue&lt;openparen&gt;nthreads&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;target_filepath&lt;space&gt;=&lt;space&gt;os.path.normpath&lt;openparen&gt;target_filepath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;target_folder&lt;space&gt;=&lt;space&gt;os.path.dirname&lt;openparen&gt;target_filepath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;not&lt;space&gt;os.path.exists&lt;openparen&gt;target_folder&lt;closeparen&gt;:&lt;space&gt;os.makedirs&lt;openparen&gt;target_folder&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout&lt;space&gt;=&lt;space&gt;io.open&lt;openparen&gt;target_filepath&lt;comma&gt;&lt;space&gt;mode=&lt;apos&gt;w+b&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;get_data&lt;openparen&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;while&lt;space&gt;True:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blockid&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;length&lt;space&gt;=&lt;space&gt;readqueue.get&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;&lt;space&gt;downloading&lt;space&gt;part&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;blockid&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;bytesread&lt;space&gt;=&lt;space&gt;0&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;chunk&lt;space&gt;in&lt;space&gt;self.getblock&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;length&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;writequeue.put&lt;openparen&gt;&lt;openparen&gt;chunk&lt;comma&gt;&lt;space&gt;offset&lt;space&gt;+&lt;space&gt;bytesread&lt;comma&gt;&lt;space&gt;len&lt;openparen&gt;chunk&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;bytesread&lt;space&gt;+=&lt;space&gt;len&lt;openparen&gt;chunk&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.task_done&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;write_data&lt;openparen&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;while&lt;space&gt;True:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;length&lt;space&gt;=&lt;space&gt;writequeue.get&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout.seek&lt;openparen&gt;offset&lt;comma&gt;&lt;space&gt;0&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout.write&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;writequeue.task_done&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;i&lt;space&gt;in&lt;space&gt;range&lt;openparen&gt;nthreads&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;t&lt;space&gt;=&lt;space&gt;Thread&lt;openparen&gt;target=get_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;t.daemon&lt;space&gt;=&lt;space&gt;True&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;t.start&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;wt&lt;space&gt;=&lt;space&gt;Thread&lt;openparen&gt;target=write_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;wt.daemon&lt;space&gt;=&lt;space&gt;True&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;wt.start&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;blob_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;committed_block_count:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;block&lt;space&gt;in&lt;space&gt;self.getblocklist&lt;openparen&gt;container=container&lt;comma&gt;&lt;space&gt;blob_name=blob_name&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.put&lt;openparen&gt;block&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.put&lt;openparen&gt;&lt;openparen&gt;uuid.uuid4&lt;openparen&gt;&lt;closeparen&gt;.hex&lt;comma&gt;&lt;space&gt;0&lt;comma&gt;&lt;space&gt;content_length&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;elif&lt;space&gt;blob_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;AppendBlob&lt;apos&gt;&lt;space&gt;and&lt;space&gt;accept_ranges&lt;space&gt;==&lt;space&gt;&lt;apos&gt;bytes&lt;apos&gt;&lt;space&gt;and&lt;space&gt;committed_block_count:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;offset&lt;space&gt;in&lt;space&gt;range&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;content_length&lt;comma&gt;&lt;space&gt;PUT_BLOCK_CHUNK_SIZE&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.put&lt;openparen&gt;&lt;openparen&gt;uuid.uuid4&lt;openparen&gt;&lt;closeparen&gt;.hex&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;min&lt;openparen&gt;content_length-offset&lt;comma&gt;&lt;space&gt;PUT_BLOCK_CHUNK_SIZE&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.join&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;writequeue.join&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout.flush&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout.close&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;last_mod&lt;comma&gt;&lt;space&gt;blob_type&lt;comma&gt;&lt;space&gt;content_length&lt;comma&gt;&lt;space&gt;content_type&lt;comma&gt;&lt;space&gt;content_md5&lt;comma&gt;&lt;space&gt;accept_ranges&lt;comma&gt;&lt;space&gt;committed_block_count&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;list_blobs&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;prefix=None&lt;comma&gt;delimiter=&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;&lt;comma&gt;recursive=False&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;https:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;mycontainer?restype=container&lt;amp&gt;comp=list&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#CubeSourceDataFile&lt;solidus&gt;coast&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;params&lt;space&gt;=&lt;space&gt;&lt;opencurly&gt;&lt;apos&gt;delimiter&lt;apos&gt;&lt;space&gt;:&lt;space&gt;delimiter&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;list&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;restype&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;container&lt;apos&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;prefix:&lt;space&gt;params&lt;openbracket&gt;&lt;apos&gt;prefix&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;prefix&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;params&lt;space&gt;=&lt;space&gt;OrderedDict&lt;openparen&gt;sorted&lt;openparen&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;key=lambda&lt;space&gt;t:&lt;space&gt;t&lt;openbracket&gt;0&lt;closebracket&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;querystring&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;amp&gt;&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;t:&lt;space&gt;&lt;apos&gt;&lt;opencurly&gt;&lt;closecurly&gt;=&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;*t&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;t:&lt;space&gt;&lt;apos&gt;&lt;opencurly&gt;&lt;closecurly&gt;:&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;*t&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s?%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;querystring&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;querystringencoded&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;GET&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;&lt;apos&gt;Listing&lt;space&gt;blobs&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;self.session.get&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;200:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;root&lt;space&gt;=&lt;space&gt;ElementTree.fromstring&lt;openparen&gt;r.content.decode&lt;openparen&gt;&lt;apos&gt;utf-8-sig&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;blobprefix&lt;space&gt;in&lt;space&gt;root.iter&lt;openparen&gt;&lt;apos&gt;BlobPrefix&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;buf&lt;space&gt;=&lt;space&gt;StringIO&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ElementTree.ElementTree&lt;openparen&gt;blobprefix&lt;closeparen&gt;.write&lt;openparen&gt;buf&lt;comma&gt;&lt;space&gt;encoding=&lt;apos&gt;utf8&lt;apos&gt;&lt;comma&gt;&lt;space&gt;xml_declaration=False&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;&lt;apos&gt;BlobPrefix&lt;apos&gt;&lt;comma&gt;&lt;space&gt;prefix&lt;comma&gt;&lt;space&gt;buf.getvalue&lt;openparen&gt;&lt;closeparen&gt;.decode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;recursive:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;returntype&lt;comma&gt;&lt;space&gt;used_prefix&lt;comma&gt;&lt;space&gt;blob&lt;space&gt;in&lt;space&gt;self.list_blobs&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;prefix=blobprefix.findtext&lt;openparen&gt;&lt;apos&gt;Name&lt;apos&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;delimiter=delimiter&lt;comma&gt;recursive=True&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;returntype&lt;comma&gt;&lt;space&gt;used_prefix&lt;comma&gt;&lt;space&gt;blob&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;blob&lt;space&gt;in&lt;space&gt;root.iter&lt;openparen&gt;&lt;apos&gt;Blob&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;buf&lt;space&gt;=&lt;space&gt;StringIO&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ElementTree.ElementTree&lt;openparen&gt;blob&lt;closeparen&gt;.write&lt;openparen&gt;buf&lt;comma&gt;&lt;space&gt;encoding=&lt;apos&gt;utf8&lt;apos&gt;&lt;comma&gt;&lt;space&gt;xml_declaration=False&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;&lt;apos&gt;Blob&lt;apos&gt;&lt;comma&gt;&lt;space&gt;prefix&lt;comma&gt;&lt;space&gt;buf.getvalue&lt;openparen&gt;&lt;closeparen&gt;.decode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_authorize&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;headers&lt;comma&gt;&lt;space&gt;container_name&lt;comma&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;None&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;None&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;PUT&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;http_method&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;field_order&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;Content-Encoding&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;&lt;openparen&gt;name&lt;comma&gt;&lt;space&gt;always&lt;space&gt;produce&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Content-Language&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Content-Length&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Content-MD5&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Content-Type&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Date&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;If-Modified-Since&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;If-None-Match&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;If-Unmodified-Since&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Range&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;--unknown-filler-001--&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields&lt;space&gt;+=&lt;space&gt;&lt;openbracket&gt;headers&lt;openbracket&gt;x&lt;closebracket&gt;&lt;space&gt;if&lt;space&gt;x&lt;space&gt;in&lt;space&gt;headers&lt;space&gt;and&lt;space&gt;not&lt;space&gt;&lt;openparen&gt;x&lt;space&gt;==&lt;space&gt;&lt;apos&gt;Content-Length&lt;apos&gt;&lt;space&gt;and&lt;space&gt;headers&lt;openbracket&gt;x&lt;closebracket&gt;&lt;space&gt;==&lt;space&gt;&lt;apos&gt;0&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;else&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;for&lt;space&gt;x&lt;space&gt;in&lt;space&gt;field_order&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields&lt;space&gt;+=&lt;space&gt;&lt;openbracket&gt;u&lt;apos&gt;&lt;opencurly&gt;&lt;closecurly&gt;:&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;x&lt;comma&gt;&lt;space&gt;headers.get&lt;openparen&gt;x&lt;closeparen&gt;.strip&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;space&gt;for&lt;space&gt;x&lt;space&gt;in&lt;space&gt;sorted&lt;openparen&gt;headers.keys&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;space&gt;if&lt;space&gt;x.startswith&lt;openparen&gt;&lt;apos&gt;x-ms-&lt;apos&gt;&lt;closeparen&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;blob_name:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container_name&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;querystringencoded:&lt;space&gt;fields.append&lt;openparen&gt;querystringencoded&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;u&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;.join&lt;openparen&gt;fields&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;&lt;apos&gt;SIGNING&lt;space&gt;STRING:&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;signature&lt;space&gt;=&lt;space&gt;AzureAPI._sign_string&lt;openparen&gt;self.secret&lt;space&gt;&lt;comma&gt;&lt;space&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;&lt;apos&gt;SIGNATURE:&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;signature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;Authorization&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;SharedKey&lt;space&gt;%s:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;signature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;_string_to_sign&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_create_headers&lt;openparen&gt;data&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;comma&gt;&lt;space&gt;xtra_headers=&lt;opencurly&gt;&lt;closecurly&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;&lt;opencurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;Content-Length&lt;apos&gt;:&lt;space&gt;str&lt;openparen&gt;len&lt;openparen&gt;data&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-date&lt;apos&gt;:&lt;space&gt;AzureAPI._httpdate&lt;openparen&gt;datetime.datetime.utcnow&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;:&lt;space&gt;AZ_VERSION&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers.update&lt;openparen&gt;xtra_headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;OrderedDict&lt;openparen&gt;sorted&lt;openparen&gt;headers.items&lt;openparen&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;key=lambda&lt;space&gt;t:&lt;space&gt;t&lt;openbracket&gt;0&lt;closebracket&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_httpdate&lt;openparen&gt;dt&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;Return&lt;space&gt;a&lt;space&gt;string&lt;space&gt;representation&lt;space&gt;of&lt;space&gt;a&lt;space&gt;date&lt;space&gt;according&lt;space&gt;to&lt;space&gt;RFC&lt;space&gt;1123&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;openparen&gt;HTTP&lt;solidus&gt;1.1&lt;closeparen&gt;.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;The&lt;space&gt;supplied&lt;space&gt;date&lt;space&gt;must&lt;space&gt;be&lt;space&gt;in&lt;space&gt;UTC.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;weekday&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;quote&gt;Mon&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Tue&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Wed&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Thu&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Fri&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sat&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sun&lt;quote&gt;&lt;closebracket&gt;&lt;openbracket&gt;dt.weekday&lt;openparen&gt;&lt;closeparen&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;month&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;quote&gt;Jan&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Feb&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Mar&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Apr&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;May&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Jun&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Jul&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Aug&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sep&lt;quote&gt;&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;Oct&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Nov&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Dec&lt;quote&gt;&lt;closebracket&gt;&lt;openbracket&gt;dt.month&lt;space&gt;-&lt;space&gt;1&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;&lt;quote&gt;%s&lt;comma&gt;&lt;space&gt;%02d&lt;space&gt;%s&lt;space&gt;%04d&lt;space&gt;%02d:%02d:%02d&lt;space&gt;GMT&lt;quote&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;weekday&lt;comma&gt;&lt;space&gt;dt.day&lt;comma&gt;&lt;space&gt;month&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;dt.year&lt;comma&gt;&lt;space&gt;dt.hour&lt;comma&gt;&lt;space&gt;dt.minute&lt;comma&gt;&lt;space&gt;dt.second&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_encode_base64&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;encoded&lt;space&gt;=&lt;space&gt;base64.b64encode&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;encoded.decode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_decode_base64_to_bytes&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;base64.b64decode&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_sign_string&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;string_to_sign&lt;comma&gt;&lt;space&gt;key_is_base64=True&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;key_is_base64:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;key&lt;space&gt;=&lt;space&gt;AzureAPI._decode_base64_to_bytes&lt;openparen&gt;key&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;key&lt;space&gt;=&lt;space&gt;key.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;string_to_sign&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;string_to_sign&lt;space&gt;=&lt;space&gt;string_to_sign.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;signed_hmac_sha256&lt;space&gt;=&lt;space&gt;hmac.HMAC&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;string_to_sign&lt;comma&gt;&lt;space&gt;hashlib.sha256&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;digest&lt;space&gt;=&lt;space&gt;signed_hmac_sha256.digest&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;encoded_digest&lt;space&gt;=&lt;space&gt;AzureAPI._encode_base64&lt;openparen&gt;digest&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;encoded_digest"/>
#!     <XFORM_PARM PARM_NAME="PYTHONSYMBOL" PARM_VALUE="UploadFeatureProcessor"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NEW_ATTRIBUTES" PARM_VALUE="_azure_blob_uploader_status _azure_blob_uploader_error_message"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="28"
#!   TYPE="ParameterFetcher"
#!   VERSION="4"
#!   POSITION="562.506 437.504"
#!   BOUNDING_RECT="562.506 437.504 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="ParameterFetcher"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTR_LIST" PARM_VALUE="_azure_blob_uploader_headers {$(XTRA_HEADERS)}"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="29"
#!   TYPE="Tester"
#!   VERSION="2"
#!   POSITION="562.506 278.128"
#!   BOUNDING_RECT="562.506 278.128 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#!   OUTPUT_FT_ORDER="FAILED%PASSED"
#! >
#!     <OUTPUT_FEAT NAME="FAILED"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="PASSED"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_PARM PARM_NAME="TEST_LIST" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="Tester"/>
#!     <XFORM_PARM PARM_NAME="TEST_CLAUSE" PARM_VALUE="TEST &lt;at&gt;Value&lt;openparen&gt;_azure_blob_uploader_headers&lt;closeparen&gt; ATTRIBUTE_HAS_VALUE &quot;&quot;"/>
#!     <XFORM_PARM PARM_NAME="BOOL_OP" PARM_VALUE="OR"/>
#!     <XFORM_PARM PARM_NAME="COMPOSITE_TEST" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="TEST_MODE" PARM_VALUE="Automatic"/>
#!     <XFORM_PARM PARM_NAME="TEST_DESCRIPTION" PARM_VALUE="&quot;&quot;"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="32"
#!   TYPE="StringSearcher"
#!   VERSION="3"
#!   POSITION="562.506 65.6253"
#!   BOUNDING_RECT="562.506 65.6253 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="MATCHED"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="NOT_MATCHED"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_PARM PARM_NAME="CASE" PARM_VALUE="no"/>
#!     <XFORM_PARM PARM_NAME="MATCHED_RESULT_ATTR" PARM_VALUE="_first_match"/>
#!     <XFORM_PARM PARM_NAME="MATCHES_ATTR" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="StringSearcher"/>
#!     <XFORM_PARM PARM_NAME="ADVANCED_GROUP" PARM_VALUE="FME_DISCLOSURE_OPEN"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="MATCHED_PARTS_ATTR" PARM_VALUE="_azure_blob_uploader_header_attributes"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="STRING_TO_SEARCH" PARM_VALUE="&lt;at&gt;Value&lt;openparen&gt;_azure_blob_uploader_headers&lt;closeparen&gt;"/>
#!     <XFORM_PARM PARM_NAME="REGEXP" PARM_VALUE="&lt;openparen&gt;?:^|&lt;comma&gt;&lt;closeparen&gt;&lt;openparen&gt;?=&lt;openbracket&gt;^&lt;quote&gt;&lt;closebracket&gt;|&lt;openparen&gt;&lt;quote&gt;&lt;closeparen&gt;?&lt;closeparen&gt;&lt;quote&gt;?&lt;openparen&gt;&lt;openparen&gt;?&lt;openparen&gt;1&lt;closeparen&gt;&lt;openbracket&gt;^&lt;quote&gt;&lt;closebracket&gt;*|&lt;openbracket&gt;^&lt;comma&gt;&lt;quote&gt;&lt;closebracket&gt;*&lt;closeparen&gt;&lt;closeparen&gt;&lt;quote&gt;?&lt;openparen&gt;?=&lt;comma&gt;|&lt;dollar&gt;&lt;closeparen&gt;"/>
#! </TRANSFORMER>
#! </TRANSFORMERS>
#! <SUBDOCUMENT_IOS>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="6"
#!   NAME="Input"
#!   POSITION="-130.065 437.504"
#!   BOUNDING_RECT="-130.065 437.504 -1 -1"
#!   COLLAPSED="true"
#!   PUBLISHED="true"
#!   IS_SOURCE="true"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="7"
#!   NAME="Success"
#!   POSITION="4695.73 437.504"
#!   BOUNDING_RECT="4695.73 437.504 -1 -1"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="8"
#!   NAME="Fail"
#!   POSITION="4745.73 -421.879"
#!   BOUNDING_RECT="4745.73 -421.879 -1 -1"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! </SUBDOCUMENT_IOS>
#! <FEAT_LINKS>
#! <FEAT_LINK
#!   IDENTIFIER="30"
#!   SOURCE_NODE="6"
#!   TARGET_NODE="28"
#!   SOURCE_PORT_DESC="0"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="17"
#!   SOURCE_NODE="10"
#!   TARGET_NODE="16"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="19"
#!   SOURCE_NODE="11"
#!   TARGET_NODE="7"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="15"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="11"
#!   SOURCE_PORT_DESC="fo 0 success"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="23"
#!   SOURCE_NODE="13"
#!   TARGET_NODE="8"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="20"
#!   SOURCE_NODE="14"
#!   TARGET_NODE="12"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="22"
#!   SOURCE_NODE="16"
#!   TARGET_NODE="14"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="31"
#!   SOURCE_NODE="28"
#!   TARGET_NODE="29"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="33"
#!   SOURCE_NODE="29"
#!   TARGET_NODE="32"
#!   SOURCE_PORT_DESC="fo 1 PASSED"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="35"
#!   SOURCE_NODE="32"
#!   TARGET_NODE="10"
#!   SOURCE_PORT_DESC="fo 0 MATCHED"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="24"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 1 &lt;lt&gt;EMPTY&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="21"
#!   SOURCE_NODE="29"
#!   TARGET_NODE="10"
#!   SOURCE_PORT_DESC="fo 0 FAILED"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="34"
#!   SOURCE_NODE="32"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 1 NOT_MATCHED"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="25"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 2 &lt;lt&gt;MISSING&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="26"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 3 &lt;lt&gt;NULL&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="27"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 4 &lt;lt&gt;UNFILTERED&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="18"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 5 fail"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! </FEAT_LINKS>
#! <BREAKPOINTS>
#! </BREAKPOINTS>
#! <ATTR_LINKS>
#! </ATTR_LINKS>
#! <SUBDOCUMENTS>
#! </SUBDOCUMENTS>
#! <LOOKUP_TABLES>
#! </LOOKUP_TABLES>
#! </TRANSFORMER>
FME_PYTHON_VERSION 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_KEY 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_SRC_TYPE AttributeValue
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_ACCOUNT 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_CONTAINER 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_BLOB_NAME 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_SRC_DATA 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_XTRA_HEADERS 
#! START_HEADER
#! END_HEADER

LOG_TIMINGS YES
LOG_FILTER_MASK -1
DEFAULT_MACRO WB_CURRENT_CONTEXT
DEFAULT_MACRO AzureBlobUploader_WORKSPACE_NAME ""
INCLUDE [puts {MACRO WB_OLD_CONTEXT_$(AzureBlobUploader_WORKSPACE_NAME) $(WB_CURRENT_CONTEXT)};          puts {MACRO WB_CURRENT_CONTEXT $(AzureBlobUploader_WORKSPACE_NAME)}]
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_Input1507100471 Input Splitter"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Input"   OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Input"
# -------------------------------------------------------------------------

Tcl2 proc $(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher_doFetch {} {    foreach {name val} {"_azure_blob_uploader_headers {$($(AzureBlobUploader_WORKSPACE_NAME)_XTRA_HEADERS$encode)}"} {         if { [string match {*<at>*} $val] == 1 } {             set val [FME_Execute EvaluateExpression {STRING} $val {$(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher}];         } elseif {[string match {*FME_CONDITIONAL*} $val] == 1} {             set val [FME_Execute EvaluateExpression {STRING} $val {$(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher}];         } else {             set val [FME_DecodeTextOrAttr $val];         };       FME_SetAttribute [FME_DecodeText $name] $val    } }
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Input"    OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher_OUTPUT"         @Tcl2($(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher_doFetch)

# -------------------------------------------------------------------------

FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_Tester    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher_OUTPUT"    TEST @EvaluateExpression(FDIV,STRING_ENCODED,<at>Value<openparen>_azure_blob_uploader_headers<closeparen>,$(AzureBlobUploader_WORKSPACE_NAME)_Tester) ATTRIBUTE_HAS_VALUE "" ENCODED    BOOLEAN_OPERATOR OR    OUTPUT PASSED FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Tester_PASSED"    OUTPUT FAILED FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Tester_FAILED"
# -------------------------------------------------------------------------

MACRO casemac
INCLUDE [ if { {no} == {no} } { puts {MACRO casemac -nocase}} ]
Tcl2 proc $(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher_99beaa61_4a45_464e_974e_bda9be5863480_doGrep { stringToSearch regExp matchedChars matches matchedParts } {   set subMatches 1;   set matches [FME_DecodeText $matches];   set matchedParts [FME_DecodeText $matchedParts];   set results [FME_GetRegex $(casemac) [FME_DecodeText $regExp] [FME_DecodeText $stringToSearch]];   if {[llength [lindex $results 0]] > 0} {      set attrName [FME_DecodeText $matchedChars];      FME_SetAttribute $attrName [lindex [lindex [lindex $results 0] 0] 0];      set index 0;      set parts [lindex $results 1];      foreach part $parts {         if {[llength $matchedParts] > 0} {             set attrName "$matchedParts{$index}.part";             FME_SetAttribute $attrName [lindex $part 0];             set attrName "$matchedParts{$index}.startIndex";             FME_SetAttribute $attrName [lindex $part 1];         };         incr index;      };      set index 0;      set regexMatches [lindex $results 0];      foreach part $regexMatches {         if {[llength $matches] > 0} {             set attrName "$matches{$index}.match";             FME_SetAttribute $attrName [lindex $part 0];             set attrName "$matches{$index}.startIndex";             FME_SetAttribute $attrName [lindex $part 1];         };         set isFirstMatch 0;         incr index;      };      return $index;   };   return -1; }
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Tester_PASSED"    TEST @Tcl2("$(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher_99beaa61_4a45_464e_974e_bda9be5863480_doGrep {@EvaluateExpression(FDIV,STRING_ENCODED,<at>Value<openparen>_azure_blob_uploader_headers<closeparen>,$(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher)} {<openparen>?:^|<comma><closeparen><openparen>?=<openbracket>^<quote><closebracket>|<openparen><quote><closeparen>?<closeparen><quote>?<openparen><openparen>?<openparen>1<closeparen><openbracket>^<quote><closebracket>*|<openbracket>^<comma><quote><closebracket>*<closeparen><closeparen><quote>?<openparen>?=<comma>|<dollar><closeparen>} {_first_match} {} {_azure_blob_uploader_header_attributes}") > 0    OUTPUT PASSED FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher_MATCHED"    OUTPUT FAILED FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher_NOT_MATCHED"

# -------------------------------------------------------------------------

FACTORY_DEF {*} AttrSetFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_FetchParamsAttributeCreator    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher_MATCHED"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Tester_FAILED"    MULTI_FEATURE_MODE NO    NULL_ATTR_MODE NO_OP     ATTRSET_CREATE_DIRECTIVES _PROPAGATE_MISSING_FDIV     ATTR_ACTION { "" "_azure_blob_uploader_storage_account" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_ACCOUNT)" }      ATTR_ACTION { "" "_azure_blob_uploader_key" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_KEY$encode)" }      ATTR_ACTION { "" "_azure_blob_uploader_container" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_CONTAINER)" }      ATTR_ACTION { "" "_azure_blob_uploader_blob_name" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_BLOB_NAME)" }      ATTR_ACTION { "" "_azure_blob_uploader_src_type" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_SRC_TYPE$encode)" }      ATTR_ACTION { "" "_azure_blob_uploader_src_data" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_SRC_DATA)" }    OUTPUT OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_FetchParamsAttributeCreator_OUTPUT"


# -------------------------------------------------------------------------

MACRO casemac
INCLUDE [ if { {NO} == {NO} } { puts {MACRO casemac -nocase}} ]
Tcl2 proc $(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_031e7b63_30a1_481c_bab6_42ca07f5f2980_replacer { findText replaceText invalidValue} {     set attrs [split \"_azure_blob_uploader_blob_name\" {,}];     set findValue [FME_DecodeText $findText];     set replaceValue [FME_DecodeText $replaceText];     foreach attr $attrs {       set attrVal [FME_GetAttribute $attr];       set noMatch true;       if {{NO} == {YES}} {         set newAttrVal [FME_ReplaceRegex $(casemac) $findValue $attrVal $replaceValue];       } else {         set newAttrVal [string map $(casemac) [list $findValue $replaceValue] $attrVal];       };       if { $newAttrVal ne $attrVal } {         set noMatch false;         FME_SetAttribute $attr $newAttrVal;       };       if {$noMatch} {          if { $invalidValue == {FME_NULL_VALUE} } {             FME_SetAttributeNull $attr;          } elseif { $invalidValue != {_FME_NO_OP_} }  {             FME_SetAttribute $attr [FME_DecodeText $invalidValue];          };       };     }; }
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_FetchParamsAttributeCreator_OUTPUT"    OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_OUTPUT"         @Tcl2("$(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_031e7b63_30a1_481c_bab6_42ca07f5f2980_replacer {<backslash>} {<solidus>} {_FME_NO_OP_}")

# -------------------------------------------------------------------------


FME_PYTHON_PATH "$(FME_MF_DIR)"

FACTORY_DEF * PythonFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_PythonCaller    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_OUTPUT"    SYMBOL_NAME UploadFeatureProcessor    PYTHON_NAMESPACE FMEOBJECTS    SOURCE_CODE from<space>fmeobjects<space>import<space>FMELogFile<comma><space>FME_INFORM<comma><space>FME_WARN<comma><space>FME_ERROR<lf>from<space>cStringIO<space>import<space>StringIO<lf>import<space>locale<lf><lf>class<space>UploadFeatureProcessor<openparen>object<closeparen>:<lf><space><space><space><space>def<space>__init__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile<space>=<space>FMELogFile<openparen><closeparen><lf><space><space><space><space><space><space><space><space>self.enc<space>=<space>locale.getdefaultlocale<openparen><closeparen><openbracket>1<closebracket><lf><space><space><space><space><space><space><space><space>#<space>Make<space>sure<space>to<space>change<space>if<space>Custom<space>transformer<space>is<space>renamed<space><openparen>not<space>transformer<space>instance<space>name<space>-<space>that<apos>s<space>what<space>we<apos>re<space>fetching<closeparen><space><lf><space><space><space><space><space><space><space><space>self.xformer_name<space>=<space>FME_MacroValues<openbracket><apos>AzureBlobUploader_WORKSPACE_NAME<apos><closebracket><lf><space><space><space><space>def<space>info<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_INFORM<closeparen><lf><space><space><space><space><space><space><space><space>#self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_WARN<closeparen><space>#<space>while<space>developing<space>for<space>popping<space>out<lf><space><space><space><space>def<space>input<openparen>self<comma>feature<closeparen>:<lf><space><space><space><space><space><space><space><space>try:<lf><space><space><space><space><space><space><space><space><space><space><space><space>account<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_storage_account<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>secret<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_key<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>azure<space>=<space>AzureAPI<openparen>account<comma><space>secret<comma><space>self.logfile<comma><space>logprefix<space>=<space>self.xformer_name<comma><space>loglevel<space>=<space>FME_INFORM<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>container<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_container<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>blob_name<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_blob_name<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>fin<space>=<space>None<lf><space><space><space><space><space><space><space><space><space><space><space><space>src_type<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_src_type<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>src_type<space>==<space><apos>AttributeValue<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_src_data<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>AzureAPI._unicode_type<closeparen>:<space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>fin<space>=<space>StringIO<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>elif<space>src_type<space>==<space><apos>FilePath<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>fin<space>=<space>open<openparen>feature.getAttribute<openparen><apos>_azure_blob_uploader_src_data<apos><closeparen><comma><space><apos>rb<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>else:<space>raise<space>Exception<openparen><apos>Unrecognized<space>source<space>type<space>`%s`<apos><space>%<space>src_type<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space>extra_headers<space>=<space><opencurly><closecurly><lf><space><space><space><space><space><space><space><space><space><space><space><space>n<comma><space>m<comma><space>t<comma><space>=<space>feature.getAttributeNullMissingAndType<openparen><apos>_azure_blob_uploader_header_attributes<opencurly>0<closecurly>.part<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>not<space>m:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>for<space>attr<space>in<space><openbracket>x<space>for<space>x<space>in<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_header_attributes<opencurly><closecurly>.part<apos><closeparen><space>if<space>len<openparen>x<closeparen><space>and<space>x<space>!=<space><apos><quote><apos><closebracket>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>n<comma><space>m<comma><space>t<comma><space>=<space>feature.getAttributeNullMissingAndType<openparen>attr.encode<openparen>self.enc<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>if<space>n<space>or<space>m:<space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>continue<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>val<space>=<space>feature.getAttribute<openparen>attr.encode<openparen>self.enc<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>extra_headers<openbracket>attr<closebracket><space>=<space>val<lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>len<openparen>extra_headers.keys<openparen><closeparen><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Extra<space>request<space>headers<space>used:<space><opencurly><closecurly><apos>.format<openparen>extra_headers<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>No<space>Extra<space>request<space>headers<space>used<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>#####<space>INSERT<space>CODE<space>HERE<space>TO<space>MANIPULATE<space>CONTENT<space>BEFORE<space>UPLOAD<space>#####<lf><space><space><space><space><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space>azure.put_blob<openparen>container<comma><space>blob_name<comma><space>fin<comma><space>extra_headers<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>fin.close<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_uploader_status<apos><comma><space><apos>success<apos><closeparen><lf><space><space><space><space><space><space><space><space>except<space>Exception<space>as<space>e:<lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_uploader_status<apos><comma><space><apos>fail<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_uploader_error_message<apos><comma><space>str<openparen>e<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.logfile.logException<openparen>e<comma><space>FME_ERROR<closeparen><lf><space><space><space><space><space><space><space><space>self.pyoutput<openparen>feature<closeparen><lf><space><space><space><space>def<space>close<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>del<space>self.logfile<lf><space><space><space><space><space><space><space><space><lf>#####<space>Code<space>below<space>*should*<space>be<space>more<space>or<space>less<space>standalone<space><openparen>no<space>bindings<space>to<space>fme<closeparen><space>#####<lf>import<space>os.path<lf>import<space>requests<lf>from<space>collections<space>import<space>OrderedDict<lf>import<space>datetime<lf>from<space>xml.etree<space>import<space>ElementTree<lf>from<space>cStringIO<space>import<space>StringIO<lf>from<space>Queue<space>import<space>Queue<lf>from<space>threading<space>import<space>Thread<lf>import<space>io<lf><lf>import<space>base64<lf>import<space>uuid<lf>import<space>hashlib<lf>import<space>hmac<lf>import<space>sys<lf><lf>PUT_BLOB_LIMIT<space>=<space>1024<space>*<space>1024<space>*<space>64<space><space><space><space><space><space>#<space>64<space>MB<lf>PUT_BLOCK_CHUNK_SIZE<space>=<space>1024<space>*<space>1024<space>*<space>4<space>#<space>4<space>MB<lf>AZ_VERSION<space>=<space><apos>2015-02-21<apos><lf><lf>class<space>StdoutLogger<openparen>object<closeparen>:<lf><space><space><space><space><apos><apos><apos><lf><space><space><space><space>simple<space>log<space>class<space>to<space>mimic<space>fme<space>api<lf><space><space><space><space><apos><apos><apos><lf><space><space><space><space>def<space>logMessageString<openparen>self<comma><space>msg<comma><space>level<space>=<space>0<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>level<space>==<space>0:<lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stdout.write<openparen><apos>INFO<space><apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stdout.write<openparen>msg<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stdout.write<openparen><apos><backslash>n<apos><closeparen><lf><space><space><space><space><space><space><space><space>if<space>level<space>==<space>1:<lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stderr.write<openparen><apos>WARN<space><apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stderr.write<openparen>msg<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stderr.write<openparen><apos><backslash>n<apos><closeparen><lf><space><space><space><space><space><space><space><space>if<space>level<space>==<space>2:<lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stderr.write<openparen><apos>ERROR<space><apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stderr.write<openparen>msg<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stderr.write<openparen><apos><backslash>n<apos><closeparen><lf><space><space><space><space><space><space><space><space>if<space>level<space>==<space>2:<lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stderr.write<openparen><apos>FATAL<space><apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stderr.write<openparen>msg<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stderr.write<openparen><apos><backslash>n<apos><closeparen><lf><space><space><space><space>def<space>logException<openparen>self<comma><space>e<comma><space>level<space>=<space>0<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logMessageString<openparen>str<openparen>e<closeparen><comma><space>level<closeparen><lf>class<space>AzureAPI<openparen>object<closeparen>:<lf><space><space><space><space>if<space>sys.version_info<space><lt><space><openparen>3<comma><closeparen>:<lf><space><space><space><space><space><space><space><space>from<space>collections<space>import<space>Iterable<lf><space><space><space><space><space><space><space><space>_unicode_type<space>=<space>unicode<lf><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space>from<space>collections.abc<space>import<space>Iterable<space>#<space>TODO:<space>this<space>code<space>was<space>found<space>somewhere<space>but<space>its<space>logic<space>is<space>not<space>clear<space>to<space>me...<space><lf><space><space><space><space><space><space><space><space>_unicode_type<space>=<space>str<lf><space><space><space><space>def<space>__init__<openparen>self<comma><space>account<comma><space>secret<comma><space>logfile<space>=<space>StdoutLogger<openparen><closeparen><comma><space>logprefix<space>=<space><apos><apos><comma><space>loglevel<space>=<space>0<comma><space>session<space>=<space>requests.Session<openparen><closeparen><closeparen>:<lf><space><space><space><space><space><space><space><space>self.session<space>=<space>session<lf><space><space><space><space><space><space><space><space>self.logfile<space>=<space>logfile<space><lf><space><space><space><space><space><space><space><space>self.logprefix<space>=<space>logprefix<lf><space><space><space><space><space><space><space><space>self.loglevel<space>=<space>loglevel<lf><space><space><space><space><space><space><space><space>self.account<space>=<space>account<lf><space><space><space><space><space><space><space><space>self.secret<space>=<space>secret<lf><space><space><space><space>def<space>__enter__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>return<space>self<lf><space><space><space><space>def<space>__exit__<openparen>self<comma><space>type<comma><space>value<comma><space>traceback<closeparen>:<lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Closing<space>Azure<space>Connection<apos><closeparen><lf><space><space><space><space><space><space><space><space>del<space>self.logfile<lf><space><space><space><space><space><space><space><space>del<space>self.session<lf><space><space><space><space><space><space><space><space>return<space>value<lf><space><space><space><space>def<space>info<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.logprefix<comma><space>message<closeparen><comma><space>self.loglevel<closeparen><lf><space><space><space><space>def<space>warn<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.logprefix<comma><space>message<closeparen><comma><space>self.loglevel<space>+<space>1<closeparen><lf><space><space><space><space>def<space>append_block<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_data<closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>block_data<closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=appendblock<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Appending<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>comp:appendblock<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data<space>=<space>block_data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>ERROR<space>status<space>%s:<space>`%s`<apos><space>%<space><openparen>r.status_code<comma><space>_string_to_sign<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space>def<space>put_block<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_data<closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>block_data<closeparen><lf><space><space><space><space><space><space><space><space>headers<openbracket><apos>x-ms-blob-type<apos><closebracket><space>=<space><apos>BlockBlob<apos><lf><space><space><space><space><space><space><space><space>block_id<space>=<space>base64.b64encode<openparen>uuid.uuid4<openparen><closeparen>.hex<closeparen><lf><space><space><space><space><space><space><space><space>#https:<solidus><solidus>myaccount.blob.core.windows.net<solidus>mycontainer<solidus>myblob?comp=block<amp>blockid=id<lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=block<amp>blockid=%s<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<comma><space>block_id<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>block<space>of<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>blockid:%s<backslash>ncomp:block<apos><space>%<space>block_id<closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=block_data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>return<space>block_id<lf><space><space><space><space>def<space>put_block_list<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_list<comma><space>xtra_headers<space>=<space><opencurly><closecurly><closeparen>:<lf><space><space><space><space><space><space><space><space>list_fragments<space>=<space><apos><apos>.join<openparen>map<openparen>lambda<space>s:<space><apos><lt>Uncommitted<gt><opencurly><closecurly><lt><solidus>Uncommitted<gt><apos>.format<openparen>s<closeparen><comma><space>block_list<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>data<space>=<space><apos><lt>?xml<space>version=<quote>1.0<quote><space>encoding=<quote>utf-8<quote>?<gt><lt>BlockList<gt><opencurly><closecurly><lt><solidus>BlockList<gt><apos>.format<openparen>list_fragments<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>data<comma><space>xtra_headers<closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=blocklist<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>comp:blocklist<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space>def<space>put_blob<openparen>self<comma><space>container<comma><space>blob_name<comma><space>fin<comma><space>xtra_headers<space>=<space><opencurly><closecurly><closeparen>:<lf><space><space><space><space><space><space><space><space>fin.seek<openparen>0<comma><space>os.SEEK_END<closeparen><lf><space><space><space><space><space><space><space><space>size<space>=<space>fin.tell<openparen><closeparen><lf><space><space><space><space><space><space><space><space>fin.seek<openparen>0<comma><space>os.SEEK_SET<closeparen><lf><space><space><space><space><space><space><space><space>if<space>size<space><lt><space>PUT_BLOB_LIMIT:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>fin.read<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>data<comma><space>xtra_headers<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<openbracket><apos>x-ms-blob-type<apos><closebracket><space>=<space><apos>BlockBlob<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>#self.warn<openparen>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>ids<space>=<space><openbracket><closebracket><lf><space><space><space><space><space><space><space><space><space><space><space><space>for<space>offset<space>in<space>range<openparen>0<comma><space>size<comma><space>PUT_BLOCK_CHUNK_SIZE<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>`%s`<comma><space>%s%%<apos><space>%<space><openparen>blob_name<comma><space>int<openparen>round<openparen>offset<space>*<space>100<space><solidus><space>size<closeparen><closeparen><space><closeparen><space><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>block_size<space>=<space>min<openparen>PUT_BLOCK_CHUNK_SIZE<comma><space>size<space>-<space>offset<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>ids.append<openparen>self.put_block<openparen>container<comma><space>blob_name<comma><space>fin.read<openparen>block_size<closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.put_block_list<openparen>container<comma><space>blob_name<comma><space>ids<comma><space>xtra_headers<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>#self.info<openparen><apos>ID<space>LIST<space>COMMITTED:<space>%s<apos><space>%<space><apos><backslash>n<backslash>t<apos>.join<openparen>ids<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Done<space>uploading<space>%s<space>bytes<space>of<space>data<apos><space>%<space>size<closeparen><lf><space><space><space><space>def<space>getblocklist<openparen>self<comma><space>container<comma><space>blob_name<closeparen>:<lf><space><space><space><space><space><space><space><space>#print<space><apos>GET<space>http:<solidus><solidus>myaccount.blob.core.windows.net<solidus>movies<solidus>MOV1.avi?comp=blocklist<amp>blocklisttype=committed<space>HTTP<solidus>1.1<apos><lf><space><space><space><space><space><space><space><space>params<space>=<space><opencurly><apos>comp<apos>:<space><apos>blocklist<apos><comma><space><apos>blocklisttype<apos>:<space><apos>committed<apos><closecurly><lf><space><space><space><space><space><space><space><space>params<space>=<space>OrderedDict<openparen>sorted<openparen>params.items<openparen><closeparen><comma><space>key=lambda<space>t:<space>t<openbracket>0<closebracket><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>querystring<space>=<space><apos><amp><apos>.join<openparen>map<openparen>lambda<space>t:<space><apos><opencurly><closecurly>=<opencurly><closecurly><apos>.format<openparen>*t<closeparen><comma><space>params.items<openparen><closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>querystringencoded<space>=<space><apos><backslash>n<apos>.join<openparen>map<openparen>lambda<space>t:<space><apos><opencurly><closecurly>:<opencurly><closecurly><apos>.format<openparen>*t<closeparen><comma><space>params.items<openparen><closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>blob_path<space>=<space><apos><solidus><apos>.join<openparen><openparen>container<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s?%s<apos><space>%<space><openparen>self.account<comma><space>blob_path<comma>querystring<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen><closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>blob_path<comma><space>querystringencoded<space>=<space>querystringencoded<comma><space>http_method<space>=<space><apos>GET<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>self.session.get<openparen>url<comma><space>headers=headers<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>200:<lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>ERROR<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>ERROR<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>root<space>=<space>ElementTree.fromstring<openparen>r.content.decode<openparen><apos>utf-8-sig<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen>unicode<openparen>ElementTree.tostring<openparen>root<comma><space>encoding=<quote>utf8<quote><comma><space>method=<quote>xml<quote><closeparen><comma><space><apos>utf8<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>offset<space>=<space>0<lf><space><space><space><space><space><space><space><space>for<space>block<space>in<space>root.find<openparen><apos>CommittedBlocks<apos><closeparen>.iter<openparen><apos>Block<apos><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>name<space>=<space>base64.b64decode<openparen>block.find<openparen><apos>Name<apos><closeparen>.text<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>size<space>=<space>int<openparen>block.find<openparen><apos>Size<apos><closeparen>.text<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>yield<space>name<comma><space>offset<comma><space>size<lf><space><space><space><space><space><space><space><space><space><space><space><space>offset<space>+=<space>size<lf><space><space><space><space>def<space>getblock<openparen>self<comma><space>container<comma><space>blob_name<comma><space>offset<comma><space>length<closeparen>:<lf><space><space><space><space><space><space><space><space>range<space>=<space><apos>bytes=<opencurly><closecurly>-<opencurly><closecurly><apos>.format<openparen>offset<comma><space>offset<space>+<space>length<closeparen><lf><space><space><space><space><space><space><space><space>blob_path<space>=<space><apos><solidus><apos>.join<openparen><openparen>container<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>blob_path<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>xtra_headers=<opencurly><apos>x-ms-range<apos>:range<closecurly><closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>blob_path<comma><space>http_method<space>=<space><apos>GET<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>self.session.get<openparen>url<comma><space>headers=headers<comma><space>stream=True<closeparen><lf><space><space><space><space><space><space><space><space>if<space>not<space>r.status_code<space>in<space><openparen>200<comma><space>206<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><apos><apos><apos>https:<solidus><solidus>myaccount.blob.core.windows.net<solidus>mycontainer<solidus>myblob<apos><apos><apos><lf><space><space><space><space><space><space><space><space>for<space>chunk<space>in<space>r.iter_content<openparen>io.DEFAULT_BUFFER_SIZE<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>yield<space>chunk<lf><space><space><space><space>def<space>get_blob_properties<openparen>self<comma><space>container<comma><space>blob_name<closeparen>:<lf><space><space><space><space><space><space><space><space>#self.info<openparen><apos>getting<space>properties<space>for<space>blob<space><opencurly><closecurly><solidus><opencurly><closecurly><apos>.format<openparen>container<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus><opencurly><closecurly>.blob.core.windows.net<solidus><opencurly><closecurly><solidus><opencurly><closecurly><apos>.format<openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen><closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<space>=<space>blob_name<comma><space>http_method<space>=<space><apos>HEAD<apos><closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>self.session.head<openparen>url<comma><space>headers=headers<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>200:<lf><space><space><space><space><space><space><space><space><space><space><space><space>self.warn<openparen>r.status_code<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.warn<openparen>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.warn<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen>str<openparen>r.headers<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><apos><apos><apos><lf><space><space><space><space><space><space><space><space><opencurly><space><space><space><space><space><apos>content-length<apos>:<space><apos>1368582383<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-blob-type<apos>:<space><apos>AppendBlob<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>accept-ranges<apos>:<space><apos>bytes<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-blob-committed-block-count<apos>:<space><apos>327<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-version<apos>:<space><apos>2015-02-21<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>server<apos>:<space><apos>Windows-Azure-Blob<solidus>1.0<space>Microsoft-HTTPAPI<solidus>2.0<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-write-protection<apos>:<space><apos>false<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>last-modified<apos>:<space><apos>Thu<comma><space>23<space>Jun<space>2016<space>11:57:16<space>GMT<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>etag<apos>:<space><apos><quote>0x8D39B5D855ED87F<quote><apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-lease-state<apos>:<space><apos>available<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>date<apos>:<space><apos>Wed<comma><space>16<space>Nov<space>2016<space>17:59:04<space>GMT<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>content-type<apos>:<space><apos>application<solidus>octet-stream<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-request-id<apos>:<space><apos>414995ba-0001-0081-2433-40256f000000<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-lease-status<apos>:<space><apos>unlocked<apos><lf><space><space><space><space><space><space><space><space><closecurly><lf><space><space><space><space><space><space><space><space><apos><apos><apos><lf><space><space><space><space><space><space><space><space>return<space>map<openparen>r.headers.get<comma><space><openbracket><apos>last-modified<apos><comma><space><apos>x-ms-blob-type<apos><comma><space><apos>content-length<apos><comma><space><apos>content-type<apos><comma><space><apos>Content-MD5<apos><comma><space><apos>Accept-Ranges<apos><comma><space><apos>x-ms-blob-committed-block-count<apos><closebracket><closeparen><lf><space><space><space><space>def<space>download_blob<openparen>self<comma><space>container<comma><space>blob_name<comma><space>target_filepath<closeparen>:<lf><space><space><space><space><space><space><space><space><apos><apos><apos><lf><space><space><space><space><space><space><space><space>status<space>=<space>azure.download_blob<openparen>container<comma>blob_name<comma>target_filepath<closeparen><lf><space><space><space><space><space><space><space><space>TODO:<space>Eiter<space>get<space>blob<space>type<space>as<space>parameter<space>or<space>perform<space>a<space>Get<space>Blob<space>Properties<space>request<space>in<space>order<space>to<space>find<space>out<space>how<space>to<space>access<space>data.<space>Currently<space>only<space>large<space>blobs<space>that<space>have<space>an<space>accosiated<space>bloclist<space>works.<lf><space><space><space><space><space><space><space><space><apos><apos><apos><lf><space><space><space><space><space><space><space><space>last_mod<comma><space>blob_type<comma><space>content_length<comma><space>content_type<comma><space>content_md5<comma><space>accept_ranges<comma><space>committed_block_count<comma><space>=<space>self.get_blob_properties<openparen>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>content_length<space>=<space>int<openparen>content_length<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen>blob_type<closeparen><lf><space><space><space><space><space><space><space><space>nthreads<space>=<space>10<lf><space><space><space><space><space><space><space><space>readqueue<space>=<space>Queue<openparen>nthreads*2<closeparen><lf><space><space><space><space><space><space><space><space>writequeue<space>=<space>Queue<openparen>nthreads<closeparen><lf><space><space><space><space><space><space><space><space>target_filepath<space>=<space>os.path.normpath<openparen>target_filepath<closeparen><lf><space><space><space><space><space><space><space><space>target_folder<space>=<space>os.path.dirname<openparen>target_filepath<closeparen><lf><space><space><space><space><space><space><space><space>if<space>not<space>os.path.exists<openparen>target_folder<closeparen>:<space>os.makedirs<openparen>target_folder<closeparen><lf><space><space><space><space><space><space><space><space>fout<space>=<space>io.open<openparen>target_filepath<comma><space>mode=<apos>w+b<apos><closeparen><lf><space><space><space><space><space><space><space><space>def<space>get_data<openparen><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>while<space>True:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>blockid<comma><space>offset<comma><space>length<space>=<space>readqueue.get<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos><space>downloading<space>part<space><opencurly><closecurly><apos>.format<openparen>blockid<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>bytesread<space>=<space>0<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>for<space>chunk<space>in<space>self.getblock<openparen>container<comma><space>blob_name<comma><space>offset<comma><space>length<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>writequeue.put<openparen><openparen>chunk<comma><space>offset<space>+<space>bytesread<comma><space>len<openparen>chunk<closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>bytesread<space>+=<space>len<openparen>chunk<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>readqueue.task_done<openparen><closeparen><lf><space><space><space><space><space><space><space><space>def<space>write_data<openparen><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>while<space>True:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>data<comma><space>offset<comma><space>length<space>=<space>writequeue.get<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>fout.seek<openparen>offset<comma><space>0<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>fout.write<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>writequeue.task_done<openparen><closeparen><lf><space><space><space><space><space><space><space><space>for<space>i<space>in<space>range<openparen>nthreads<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>t<space>=<space>Thread<openparen>target=get_data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>t.daemon<space>=<space>True<lf><space><space><space><space><space><space><space><space><space><space><space><space>t.start<openparen><closeparen><lf><space><space><space><space><space><space><space><space>wt<space>=<space>Thread<openparen>target=write_data<closeparen><lf><space><space><space><space><space><space><space><space>wt.daemon<space>=<space>True<lf><space><space><space><space><space><space><space><space>wt.start<openparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>blob_type<space>==<space><apos>BlockBlob<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>committed_block_count:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>for<space>block<space>in<space>self.getblocklist<openparen>container=container<comma><space>blob_name=blob_name<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>readqueue.put<openparen>block<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>readqueue.put<openparen><openparen>uuid.uuid4<openparen><closeparen>.hex<comma><space>0<comma><space>content_length<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>elif<space>blob_type<space>==<space><apos>AppendBlob<apos><space>and<space>accept_ranges<space>==<space><apos>bytes<apos><space>and<space>committed_block_count:<lf><space><space><space><space><space><space><space><space><space><space><space><space>for<space>offset<space>in<space>range<openparen>0<comma><space>content_length<comma><space>PUT_BLOCK_CHUNK_SIZE<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>readqueue.put<openparen><openparen>uuid.uuid4<openparen><closeparen>.hex<comma><space>offset<comma><space>min<openparen>content_length-offset<comma><space>PUT_BLOCK_CHUNK_SIZE<closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>readqueue.join<openparen><closeparen><lf><space><space><space><space><space><space><space><space>writequeue.join<openparen><closeparen><lf><space><space><space><space><space><space><space><space>fout.flush<openparen><closeparen><lf><space><space><space><space><space><space><space><space>fout.close<openparen><closeparen><lf><space><space><space><space><space><space><space><space>return<space>last_mod<comma><space>blob_type<comma><space>content_length<comma><space>content_type<comma><space>content_md5<comma><space>accept_ranges<comma><space>committed_block_count<lf><space><space><space><space>def<space>list_blobs<openparen>self<comma><space>container<comma>prefix=None<comma>delimiter=<apos><solidus><apos><comma>recursive=False<closeparen>:<lf><space><space><space><space><space><space><space><space>#<space>https:<solidus><solidus>myaccount.blob.core.windows.net<solidus>mycontainer?restype=container<amp>comp=list<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen><closeparen><lf><space><space><space><space><space><space><space><space>#CubeSourceDataFile<solidus>coast<lf><space><space><space><space><space><space><space><space>#<lf><space><space><space><space><space><space><space><space>params<space>=<space><opencurly><apos>delimiter<apos><space>:<space>delimiter<comma><space><apos>comp<apos>:<space><apos>list<apos><comma><space><apos>restype<apos>:<space><apos>container<apos><closecurly><lf><space><space><space><space><space><space><space><space>if<space>prefix:<space>params<openbracket><apos>prefix<apos><closebracket><space>=<space>prefix<lf><space><space><space><space><space><space><space><space>params<space>=<space>OrderedDict<openparen>sorted<openparen>params.items<openparen><closeparen><comma><space>key=lambda<space>t:<space>t<openbracket>0<closebracket><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>querystring<space>=<space><apos><amp><apos>.join<openparen>map<openparen>lambda<space>t:<space><apos><opencurly><closecurly>=<opencurly><closecurly><apos>.format<openparen>*t<closeparen><comma><space>params.items<openparen><closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>querystringencoded<space>=<space><apos><backslash>n<apos>.join<openparen>map<openparen>lambda<space>t:<space><apos><opencurly><closecurly>:<opencurly><closecurly><apos>.format<openparen>*t<closeparen><comma><space>params.items<openparen><closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s?%s<apos><space>%<space><openparen>self.account<comma><space>container<comma>querystring<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>querystringencoded<space>=<space>querystringencoded<comma><space>http_method<space>=<space><apos>GET<apos><closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen><apos>Listing<space>blobs<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>self.session.get<openparen>url<comma><space>headers=headers<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>200:<lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>root<space>=<space>ElementTree.fromstring<openparen>r.content.decode<openparen><apos>utf-8-sig<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>for<space>blobprefix<space>in<space>root.iter<openparen><apos>BlobPrefix<apos><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>buf<space>=<space>StringIO<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>ElementTree.ElementTree<openparen>blobprefix<closeparen>.write<openparen>buf<comma><space>encoding=<apos>utf8<apos><comma><space>xml_declaration=False<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>yield<space><apos>BlobPrefix<apos><comma><space>prefix<comma><space>buf.getvalue<openparen><closeparen>.decode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>recursive:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>for<space>returntype<comma><space>used_prefix<comma><space>blob<space>in<space>self.list_blobs<openparen>container<comma><space>prefix=blobprefix.findtext<openparen><apos>Name<apos><closeparen><comma><space>delimiter=delimiter<comma>recursive=True<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>yield<space>returntype<comma><space>used_prefix<comma><space>blob<lf><space><space><space><space><space><space><space><space>for<space>blob<space>in<space>root.iter<openparen><apos>Blob<apos><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>buf<space>=<space>StringIO<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>ElementTree.ElementTree<openparen>blob<closeparen>.write<openparen>buf<comma><space>encoding=<apos>utf8<apos><comma><space>xml_declaration=False<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>yield<space><apos>Blob<apos><comma><space>prefix<comma><space>buf.getvalue<openparen><closeparen>.decode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space>def<space>_authorize<openparen>self<comma><space>headers<comma><space>container_name<comma><space>blob_name<space>=<space>None<comma><space>querystringencoded<space>=<space>None<comma><space>http_method<space>=<space><apos>PUT<apos><closeparen>:<lf><space><space><space><space><space><space><space><space>fields<space>=<space><openbracket>http_method<closebracket><lf><space><space><space><space><space><space><space><space>field_order<space>=<space><openbracket><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><apos>Content-Encoding<apos><space><space><space><space>#<space><openparen>name<comma><space>always<space>produce<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>Content-Language<apos><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>Content-Length<apos><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>Content-MD5<apos><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>Content-Type<apos><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>Date<apos><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>If-Modified-Since<apos><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>If-None-Match<apos><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>If-Unmodified-Since<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>Range<apos><space><space><space><space><space><space><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>--unknown-filler-001--<apos><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><closebracket><lf><space><space><space><space><space><space><space><space>fields<space>+=<space><openbracket>headers<openbracket>x<closebracket><space>if<space>x<space>in<space>headers<space>and<space>not<space><openparen>x<space>==<space><apos>Content-Length<apos><space>and<space>headers<openbracket>x<closebracket><space>==<space><apos>0<apos><closeparen><space>else<space><apos><apos><space>for<space>x<space>in<space>field_order<closebracket><lf><space><space><space><space><space><space><space><space>fields<space>+=<space><openbracket>u<apos><opencurly><closecurly>:<opencurly><closecurly><apos>.format<openparen>x<comma><space>headers.get<openparen>x<closeparen>.strip<openparen><closeparen><closeparen><space>for<space>x<space>in<space>sorted<openparen>headers.keys<openparen><closeparen><closeparen><space>if<space>x.startswith<openparen><apos>x-ms-<apos><closeparen><closebracket><lf><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space>if<space>blob_name:<lf><space><space><space><space><space><space><space><space><space><space><space><space>fields.append<openparen><apos><solidus>%s<solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container_name<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>fields.append<openparen><apos><solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>querystringencoded:<space>fields.append<openparen>querystringencoded<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>u<apos><backslash>n<apos>.join<openparen>fields<closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen><apos>SIGNING<space>STRING:<apos><closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>signature<space>=<space>AzureAPI._sign_string<openparen>self.secret<space><comma><space>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen><apos>SIGNATURE:<apos><closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen>signature<closeparen><lf><space><space><space><space><space><space><space><space>headers<openbracket><apos>Authorization<apos><closebracket><space>=<space><apos>SharedKey<space>%s:%s<apos><space>%<space><openparen>self.account<comma><space>signature<closeparen><lf><space><space><space><space><space><space><space><space>return<space>_string_to_sign<lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_create_headers<openparen>data<space>=<space><apos><apos><comma><space>xtra_headers=<opencurly><closecurly><closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space><opencurly><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><apos>Content-Length<apos>:<space>str<openparen>len<openparen>data<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-date<apos>:<space>AzureAPI._httpdate<openparen>datetime.datetime.utcnow<openparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-version<apos>:<space>AZ_VERSION<lf><space><space><space><space><space><space><space><space><space><space><space><space><closecurly><lf><space><space><space><space><space><space><space><space>headers.update<openparen>xtra_headers<closeparen><lf><space><space><space><space><space><space><space><space>return<space>OrderedDict<openparen>sorted<openparen>headers.items<openparen><closeparen><comma><space>key=lambda<space>t:<space>t<openbracket>0<closebracket><closeparen><closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_httpdate<openparen>dt<closeparen>:<lf><space><space><space><space><space><space><space><space><quote><quote><quote>Return<space>a<space>string<space>representation<space>of<space>a<space>date<space>according<space>to<space>RFC<space>1123<lf><space><space><space><space><space><space><space><space><openparen>HTTP<solidus>1.1<closeparen>.<lf><space><space><space><space><lf><space><space><space><space><space><space><space><space>The<space>supplied<space>date<space>must<space>be<space>in<space>UTC.<lf><space><space><space><space><lf><space><space><space><space><space><space><space><space><quote><quote><quote><lf><space><space><space><space><space><space><space><space>weekday<space>=<space><openbracket><quote>Mon<quote><comma><space><quote>Tue<quote><comma><space><quote>Wed<quote><comma><space><quote>Thu<quote><comma><space><quote>Fri<quote><comma><space><quote>Sat<quote><comma><space><quote>Sun<quote><closebracket><openbracket>dt.weekday<openparen><closeparen><closebracket><lf><space><space><space><space><space><space><space><space>month<space>=<space><openbracket><quote>Jan<quote><comma><space><quote>Feb<quote><comma><space><quote>Mar<quote><comma><space><quote>Apr<quote><comma><space><quote>May<quote><comma><space><quote>Jun<quote><comma><space><quote>Jul<quote><comma><space><quote>Aug<quote><comma><space><quote>Sep<quote><comma><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><quote>Oct<quote><comma><space><quote>Nov<quote><comma><space><quote>Dec<quote><closebracket><openbracket>dt.month<space>-<space>1<closebracket><lf><space><space><space><space><space><space><space><space>return<space><quote>%s<comma><space>%02d<space>%s<space>%04d<space>%02d:%02d:%02d<space>GMT<quote><space>%<space><openparen>weekday<comma><space>dt.day<comma><space>month<comma><lf><space><space><space><space><space><space><space><space><space><space><space><space>dt.year<comma><space>dt.hour<comma><space>dt.minute<comma><space>dt.second<closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_encode_base64<openparen>data<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>encoded<space>=<space>base64.b64encode<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space>return<space>encoded.decode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_decode_base64_to_bytes<openparen>data<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>return<space>base64.b64decode<openparen>data<closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_sign_string<openparen>key<comma><space>string_to_sign<comma><space>key_is_base64=True<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>key_is_base64:<lf><space><space><space><space><space><space><space><space><space><space><space><space>key<space>=<space>AzureAPI._decode_base64_to_bytes<openparen>key<closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>key<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>key<space>=<space>key.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>string_to_sign<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>string_to_sign<space>=<space>string_to_sign.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>signed_hmac_sha256<space>=<space>hmac.HMAC<openparen>key<comma><space>string_to_sign<comma><space>hashlib.sha256<closeparen><lf><space><space><space><space><space><space><space><space>digest<space>=<space>signed_hmac_sha256.digest<openparen><closeparen><lf><space><space><space><space><space><space><space><space>encoded_digest<space>=<space>AzureAPI._encode_base64<openparen>digest<closeparen><lf><space><space><space><space><space><space><space><space>return<space>encoded_digest    OUTPUT PYOUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_PythonCaller_OUTPUT"

# -------------------------------------------------------------------------
Lookup $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_AttributeFilterLut   success ok   fail ok   "" notok   ENCODED

FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_PythonCaller_OUTPUT"    TEST @Lookup($(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_AttributeFilterLut,_azure_blob_uploader_status,ENCODED_ATTR) == "ok"    OUTPUT PASSED FEATURE_TYPE * @FeatureType(SET_FROM_ATTR, _azure_blob_uploader_status, $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter)    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_NullFilter    INPUT FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>    TEST _azure_blob_uploader_status ATTRIBUTE_VALUE_NULL "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_MissingFilter    INPUT FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>    TEST _azure_blob_uploader_status ATTRIBUTE_IS_MISSING "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_BlankFilter    INPUT FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>    TEST _azure_blob_uploader_status ATTRIBUTE_IS_EMPTY "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<EMPTY>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>



# -------------------------------------------------------------------------

INCLUDE [    set macroLine "MACRO $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<EMPTY>"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher_NOT_MATCHED"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_fail"    OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"        @RemoveAttributes(fme_encoded,_azure_blob_uploader_blob_name,_azure_blob_uploader_key,_azure_blob_uploader_src_data,_azure_blob_uploader_src_type,_azure_blob_uploader_container,_azure_blob_uploader_status,_azure_blob_uploader_storage_account)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP)")

# -------------------------------------------------------------------------

INCLUDE [    set macroLine "MACRO $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_success"    OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_OUTPUT"        @RemoveAttributes(fme_encoded,_azure_blob_uploader_blob_name,_azure_blob_uploader_key,_azure_blob_uploader_src_data,_azure_blob_uploader_error_message,_azure_blob_uploader_src_type,_azure_blob_uploader_container,_azure_blob_uploader_status,_azure_blob_uploader_storage_account)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_LIST_EXP)")

FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_Success1507100471 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Success"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_Fail1507100471 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Fail"
INCLUDE [puts {MACRO WB_CURRENT_CONTEXT $(WB_OLD_CONTEXT_$(AzureBlobUploader_WORKSPACE_NAME))}]
#! <?xml version="1.0" encoding="UTF-8" ?>
#! <TRANSFORMER
# TRANSFORMER_BEGIN AzureBlobUploader,4,"Web Services",ceffa98c-8232-42de-b3b8-b6583580b54b,"Linked by Default",No,NO_PARALLELISM,,No,16674,YES,No
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Uploads a file to Azure using the Azure Blob Service REST API (https://msdn.microsoft.com/en-us/library/azure/dd135733.aspx)</p>
# <p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">
#     <br/>
# </p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">A key is needed as well as the name of the storage account.</p>
# <p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">
#     <br/>
# </p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Source data can be either from an attribute or a filepath.</p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Maximum file size is roughly 195 GB. </p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Files larger than 64 MB will be uploaded in chunks of 4 MB. </p>
# 
# TRANSFORMER_END
#!   BLOCKED_LOOPING="No"
#!   FME_PROCESS_GROUP_BY=""
#!   XFORM_DEPRECATED="No"
#!   FME_PROCESS_COUNT="NO_PARALLELISM"
#!   LAST_SAVE_BUILD="FME(R) 2016.1.2.1 (20160929 - Build 16674 - WIN64)"
#!   VIEW_POSITION="515.63 1090.64"
#!   ZOOM_SCALE="100"
#!   SHOW_ANNOTATIONS="true"
#!   CATEGORY="Web Services"
#!   MAX_LOOP_ITERATIONS=""
#!   DOC_EXTENTS="4875.8 859.383"
#!   ITERATION_COUNT_ATTR=""
#!   HISTORY="2016-06-27,peter.segerstedt&lt;at&gt;eea.europa.eu,Original&lt;space&gt;definition,2016-08-08,peter.segerstedt&lt;at&gt;eea.europa.eu,python&lt;space&gt;code&lt;space&gt;now&lt;space&gt;shares&lt;space&gt;common&lt;space&gt;base&lt;space&gt;with&lt;space&gt;other&lt;space&gt;AzureBlob-transformers,2016-11-25,peter.segerstedt&lt;at&gt;eea.europa.eu,Added&lt;space&gt;option&lt;space&gt;to&lt;space&gt;provide&lt;space&gt;extra&lt;space&gt;headers&lt;space&gt;to&lt;space&gt;the&lt;space&gt;request."
#!   ATTR_TYPE_ENCODING="SDF"
#!   LEGAL_TERMS_CONDITIONS="&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;"
#!   EXPLICIT_BOOKMARK_ORDER="false"
#!   TITLE="AzureBlobUploader"
#!   FME_SERVER_SERVICES=""
#!   FME_DOCUMENT_GUID="ceffa98c-8232-42de-b3b8-b6583580b54b"
#!   FME_DOCUMENT_PRIORGUID=""
#!   USAGE="&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0//EN&quot; &quot;http://www.w3.org/TR/REC-html40/strict.dtd&quot;&gt;&#10;&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;&#10;p, li { white-space: pre-wrap; }&#10;&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:&apos;MS Shell Dlg 2&apos;; font-size:8.25pt; font-weight:400; font-style:normal;&quot;&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-weight:600;&quot;&gt;Storage account:&lt;/span&gt; &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the storage account. Look for this under the portal.azure.com.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-weight:600;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-weight:600;&quot;&gt;Access key:&lt;/span&gt; &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the access key for the blob inside Azure. You can find this when you select the storage inside the protal.azure.com website, go to settings and then search for &amp;quot;Access keys&amp;quot;.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Use access keys to authenticate your applications when making requests to this Azure storage account. Store your access keys securely - for example, using Azure Key Vault - and don&apos;t share them. We recommend regenerating your access keys regularly. You are provided two access keys so that you can maintain connections using one key while regenerating the other. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-weight:600;&quot;&gt;Container name:&lt;/span&gt; &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The storage countainer name. These are listed directly under the storage account pannel. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-weight:600;&quot;&gt;Blob name:&lt;/span&gt; &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The name of the blob you are about to create. The filename of the source data will be used if this was not provided. You can create folders by simply using the &apos;/&apos; for example &amp;quot;folder1/folder2/blobname&amp;quot;. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-weight:600;&quot;&gt;Upload from:&lt;/span&gt; &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Describes what is provided inside the &amp;quot;source data&amp;quot; attribute. When set to &amp;quot;AttributeValue&amp;quot; it means that the source data is a binary file. When set to &amp;quot;file&amp;quot; it means that the source data is a path towards a file.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;This transformer currently only stores &amp;quot;block blobs&amp;quot;&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;block blob: &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Block blobs let you upload large blobs efficiently. Block blobs are comprised of blocks, each of which is identified by a block ID. You create or modify a block blob by writing a set of blocks and committing them by their block IDs. Each block can be a different size, up to a maximum of 4 MB, and a block blob can include up to 50,000 blocks. The maximum size of a block blob is therefore slightly more than 195 GB (4 MB X 50,000 blocks). If you are writing a block blob that is no more than 64 MB in size, you can upload it in its entirety with a single write operation&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;append blob:&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;An append blob is comprised of blocks and is optimized for append operations. When you modify an append blob, blocks are added to the end of the blob only, via the &lt;a href=&quot;https://msdn.microsoft.com/en-us/library/azure/mt427365.aspx&quot;&gt;&lt;span style=&quot; text-decoration: underline; color:#0000ff;&quot;&gt;Append Block &lt;/span&gt;&lt;/a&gt;operation. Updating or deleting of existing blocks is not supported. Unlike a block blob, an append blob does not expose its block IDs. &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Each block in an append blob can be a different size, up to a maximum of 4 MB, and an append blob can include up to 50,000 blocks. The maximum size of an append blob is therefore slightly more than 195 GB (4 MB X 50,000 blocks).&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;page blob:&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Page blobs are a collection of 512-byte pages optimized for random read and write operations. To create a page blob, you initialize the page blob and specify the maximum size the page blob will grow. To add or update the contents of a page blob, you write a page or pages by specifying an offset and a range that align to 512-byte page boundaries. A write to a page blob can overwrite just one page, some pages, or up to 4 MB of the page blob. Writes to page blobs happen in-place and are immediately committed to the blob. The maximum size for a page blob is 1 TB. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-weight:600;&quot;&gt;Request Headers&lt;/span&gt;: Additional headers that should be used when sending the request.&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Selected attributes will be used to build the headers, example:&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;If selected attributes are &lt;/p&gt;&#10;&lt;ul style=&quot;margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;&quot;&gt;&lt;li style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; color:#000000;&quot;&gt;Content-Encoding&lt;/span&gt;&lt;/li&gt;&#10;&lt;li style=&quot; color:#000000;&quot; style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Content-Type&lt;/li&gt;&#10;&lt;li style=&quot; color:#000000;&quot; style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;x-ms-blob-content-disposition&lt;/li&gt;&lt;/ul&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;and the feature entering the transformer have these attributes, something like this would be added to the headers used in the request:&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; color:#000000;&quot;&gt;x-ms-blob-content-disposition: attachment; filename=thedata.txt;&lt;/span&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; color:#000000;&quot;&gt;Content-Type: text/plain; charset=UTF-8&lt;/span&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; color:#000000;&quot;&gt;Content-Encoding: UTF-8&lt;/span&gt;&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;See also: https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/put-blob&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"
#!   LAST_SAVE_DATE="2016-11-25T16:05:54"
#!   FMX_ATTRIBUTE_PROPOGATION_MODE="AUTO"
#!   DESCRIPTION="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Uploads a file to Azure using the Azure Blob Service REST API (https://msdn.microsoft.com/en-us/library/azure/dd135733.aspx)&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;A key is needed as well as the name of the storage account.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Source data can be either from an attribute or a filepath.&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Maximum file size is roughly 195 GB. &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Files larger than 64 MB will be uploaded in chunks of 4 MB. &lt;/p&gt;&#10;"
#!   REQUIREMENTS_KEYWORD="none"
#!   FME_BUILD_NUM="16674"
#!   REQUIREMENTS="&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;"
#!   SHOW_INFO_NODES="true"
#!   FMX_INSERT_MODE="Linked by Default"
#!   FME_LINKED_TRANSFORMER_VERSION="4"
#!   WORKSPACE_VERSION="1"
#!   FME_PROCESS_GROUPS_ORDERED="No"
#!   WARN_INVALID_XFORM_PARAM="Yes"
#!   PASSWORD=""
#!   DOC_TOP_LEFT="-130.065 -421.879"
#! >
#! <DATASETS>
#! </DATASETS>
#! <DATA_TYPES>
#! </DATA_TYPES>
#! <GEOM_TYPES>
#! </GEOM_TYPES>
#! <FEATURE_TYPES>
#! </FEATURE_TYPES>
#! <FMESERVER>
#! </FMESERVER>
#! <GLOBAL_PARAMETERS>
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI PASSWORD_OR_ATTR KEY Access key:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="true"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI CHOICE_OR_ATTR SRC_TYPE AttributeValue%FilePath Upload From:"
#!   DEFAULT_VALUE="AttributeValue"
#!   IS_STAND_ALONE="true"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR ACCOUNT &quot; &quot; Storage account:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR CONTAINER &quot; &quot; Container:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR BLOB_NAME &quot; &quot; Blob Name:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR SRC_DATA &quot; &quot; Source Data:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI OPTIONAL ATTRLIST_COMMAS_OR_ATTR XTRA_HEADERS &quot;&quot; Request Headers:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="true"
#! />
#! </GLOBAL_PARAMETERS>
#! <COMMENTS>
#! </COMMENTS>
#! <CONSTANTS>
#! </CONSTANTS>
#! <BOOKMARKS>
#! </BOOKMARKS>
#! <TRANSFORMERS>
#! <TRANSFORMER
#!   IDENTIFIER="16"
#!   TYPE="StringReplacer"
#!   VERSION="4"
#!   POSITION="2442.08 437.504"
#!   BOUNDING_RECT="2442.08 437.504 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NO_MATCH_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="CASE" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="SRC_ATTRS" PARM_VALUE="_azure_blob_uploader_blob_name"/>
#!     <XFORM_PARM PARM_NAME="NO_MATCH" PARM_VALUE="_FME_NO_OP_"/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="StringReplacer"/>
#!     <XFORM_PARM PARM_NAME="FIND_TEXT" PARM_VALUE="&lt;backslash&gt;"/>
#!     <XFORM_PARM PARM_NAME="REGEXP" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="REPLACE_TEXT" PARM_VALUE="&lt;solidus&gt;"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="10"
#!   TYPE="AttributeCreator"
#!   VERSION="8"
#!   POSITION="1709.89 437.504"
#!   BOUNDING_RECT="1709.89 437.504 618.756 71"
#!   ORDER="5e+14"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="NUM_PRIOR_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_HANDLING" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_VALUE" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="ATTR_TABLE" PARM_VALUE="&quot;&quot; _azure_blob_uploader_storage_account SET_TO $(ACCOUNT)  _azure_blob_uploader_key SET_TO $(KEY)  _azure_blob_uploader_container SET_TO $(CONTAINER)  _azure_blob_uploader_blob_name SET_TO $(BLOB_NAME)  _azure_blob_uploader_src_type SET_TO $(SRC_TYPE)  _azure_blob_uploader_src_data SET_TO $(SRC_DATA)"/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="FetchParamsAttributeCreator"/>
#!     <XFORM_PARM PARM_NAME="MULTI_FEATURE_MODE" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_MODE_DISPLAY" PARM_VALUE="No Substitution"/>
#!     <XFORM_PARM PARM_NAME="NUM_SUBSEQUENT_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_GRP" PARM_VALUE=""/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="11"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="4155.79 437.504"
#!   BOUNDING_RECT="4155.79 437.504 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_azure_blob_uploader_blob_name,_azure_blob_uploader_key,_azure_blob_uploader_src_data,_azure_blob_uploader_error_message,_azure_blob_uploader_src_type,_azure_blob_uploader_container,_azure_blob_uploader_status,_azure_blob_uploader_storage_account"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="12"
#!   TYPE="AttributeFilter"
#!   VERSION="4"
#!   POSITION="3562.04 437.504"
#!   BOUNDING_RECT="3562.04 437.504 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="success"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="&lt;EMPTY&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <OUTPUT_FEAT NAME="&lt;MISSING&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="2"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <OUTPUT_FEAT NAME="&lt;NULL&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="3"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <OUTPUT_FEAT NAME="&lt;UNFILTERED&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="4"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <OUTPUT_FEAT NAME="fail"/>
#!     <FEAT_COLLAPSED COLLAPSED="5"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_PARM PARM_NAME="ATTR_NAME" PARM_VALUE="_azure_blob_uploader_status"/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeFilter"/>
#!     <XFORM_PARM PARM_NAME="ATTR_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTR_VALUES" PARM_VALUE="success,&lt;lt&gt;EMPTY&lt;gt&gt;,&lt;lt&gt;MISSING&lt;gt&gt;,&lt;lt&gt;NULL&lt;gt&gt;,&lt;lt&gt;UNFILTERED&lt;gt&gt;,fail"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="13"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="4205.79 -421.879"
#!   BOUNDING_RECT="4205.79 -421.879 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_azure_blob_uploader_blob_name,_azure_blob_uploader_key,_azure_blob_uploader_src_data,_azure_blob_uploader_src_type,_azure_blob_uploader_container,_azure_blob_uploader_status,_azure_blob_uploader_storage_account"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover_2"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="14"
#!   TYPE="PythonCaller"
#!   VERSION="4"
#!   POSITION="2974.53 437.504"
#!   BOUNDING_RECT="2974.53 437.504 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PYTHONSOURCE" PARM_VALUE="from&lt;space&gt;fmeobjects&lt;space&gt;import&lt;space&gt;FMELogFile&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;comma&gt;&lt;space&gt;FME_WARN&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;lf&gt;from&lt;space&gt;cStringIO&lt;space&gt;import&lt;space&gt;StringIO&lt;lf&gt;import&lt;space&gt;locale&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;UploadFeatureProcessor&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile&lt;space&gt;=&lt;space&gt;FMELogFile&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.enc&lt;space&gt;=&lt;space&gt;locale.getdefaultlocale&lt;openparen&gt;&lt;closeparen&gt;&lt;openbracket&gt;1&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;Make&lt;space&gt;sure&lt;space&gt;to&lt;space&gt;change&lt;space&gt;if&lt;space&gt;Custom&lt;space&gt;transformer&lt;space&gt;is&lt;space&gt;renamed&lt;space&gt;&lt;openparen&gt;not&lt;space&gt;transformer&lt;space&gt;instance&lt;space&gt;name&lt;space&gt;-&lt;space&gt;that&lt;apos&gt;s&lt;space&gt;what&lt;space&gt;we&lt;apos&gt;re&lt;space&gt;fetching&lt;closeparen&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.xformer_name&lt;space&gt;=&lt;space&gt;FME_MacroValues&lt;openbracket&gt;&lt;apos&gt;AzureBlobUploader_WORKSPACE_NAME&lt;apos&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;info&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_WARN&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;while&lt;space&gt;developing&lt;space&gt;for&lt;space&gt;popping&lt;space&gt;out&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;input&lt;openparen&gt;self&lt;comma&gt;feature&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;try:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;account&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_storage_account&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;secret&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_key&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;azure&lt;space&gt;=&lt;space&gt;AzureAPI&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;self.logfile&lt;comma&gt;&lt;space&gt;logprefix&lt;space&gt;=&lt;space&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;loglevel&lt;space&gt;=&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;container&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_container&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_blob_name&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin&lt;space&gt;=&lt;space&gt;None&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;src_type&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_src_type&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;src_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;AttributeValue&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_src_data&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin&lt;space&gt;=&lt;space&gt;StringIO&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;elif&lt;space&gt;src_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;FilePath&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin&lt;space&gt;=&lt;space&gt;open&lt;openparen&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_src_data&lt;apos&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;rb&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;&lt;apos&gt;Unrecognized&lt;space&gt;source&lt;space&gt;type&lt;space&gt;`%s`&lt;apos&gt;&lt;space&gt;%&lt;space&gt;src_type&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;extra_headers&lt;space&gt;=&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;n&lt;comma&gt;&lt;space&gt;m&lt;comma&gt;&lt;space&gt;t&lt;comma&gt;&lt;space&gt;=&lt;space&gt;feature.getAttributeNullMissingAndType&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_header_attributes&lt;opencurly&gt;0&lt;closecurly&gt;.part&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;not&lt;space&gt;m:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;attr&lt;space&gt;in&lt;space&gt;&lt;openbracket&gt;x&lt;space&gt;for&lt;space&gt;x&lt;space&gt;in&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_header_attributes&lt;opencurly&gt;&lt;closecurly&gt;.part&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;if&lt;space&gt;len&lt;openparen&gt;x&lt;closeparen&gt;&lt;space&gt;and&lt;space&gt;x&lt;space&gt;!=&lt;space&gt;&lt;apos&gt;&lt;quote&gt;&lt;apos&gt;&lt;closebracket&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;n&lt;comma&gt;&lt;space&gt;m&lt;comma&gt;&lt;space&gt;t&lt;comma&gt;&lt;space&gt;=&lt;space&gt;feature.getAttributeNullMissingAndType&lt;openparen&gt;attr.encode&lt;openparen&gt;self.enc&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;n&lt;space&gt;or&lt;space&gt;m:&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;continue&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;val&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;attr.encode&lt;openparen&gt;self.enc&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;extra_headers&lt;openbracket&gt;attr&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;val&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;len&lt;openparen&gt;extra_headers.keys&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Extra&lt;space&gt;request&lt;space&gt;headers&lt;space&gt;used:&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;extra_headers&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;No&lt;space&gt;Extra&lt;space&gt;request&lt;space&gt;headers&lt;space&gt;used&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#####&lt;space&gt;INSERT&lt;space&gt;CODE&lt;space&gt;HERE&lt;space&gt;TO&lt;space&gt;MANIPULATE&lt;space&gt;CONTENT&lt;space&gt;BEFORE&lt;space&gt;UPLOAD&lt;space&gt;#####&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;azure.put_blob&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin&lt;comma&gt;&lt;space&gt;extra_headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.close&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;success&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;except&lt;space&gt;Exception&lt;space&gt;as&lt;space&gt;e:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;fail&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_error_message&lt;apos&gt;&lt;comma&gt;&lt;space&gt;str&lt;openparen&gt;e&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logException&lt;openparen&gt;e&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.pyoutput&lt;openparen&gt;feature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;close&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;del&lt;space&gt;self.logfile&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;#####&lt;space&gt;Code&lt;space&gt;below&lt;space&gt;*should*&lt;space&gt;be&lt;space&gt;more&lt;space&gt;or&lt;space&gt;less&lt;space&gt;standalone&lt;space&gt;&lt;openparen&gt;no&lt;space&gt;bindings&lt;space&gt;to&lt;space&gt;fme&lt;closeparen&gt;&lt;space&gt;#####&lt;lf&gt;import&lt;space&gt;os.path&lt;lf&gt;import&lt;space&gt;requests&lt;lf&gt;from&lt;space&gt;collections&lt;space&gt;import&lt;space&gt;OrderedDict&lt;lf&gt;import&lt;space&gt;datetime&lt;lf&gt;from&lt;space&gt;xml.etree&lt;space&gt;import&lt;space&gt;ElementTree&lt;lf&gt;from&lt;space&gt;cStringIO&lt;space&gt;import&lt;space&gt;StringIO&lt;lf&gt;from&lt;space&gt;Queue&lt;space&gt;import&lt;space&gt;Queue&lt;lf&gt;from&lt;space&gt;threading&lt;space&gt;import&lt;space&gt;Thread&lt;lf&gt;import&lt;space&gt;io&lt;lf&gt;&lt;lf&gt;import&lt;space&gt;base64&lt;lf&gt;import&lt;space&gt;uuid&lt;lf&gt;import&lt;space&gt;hashlib&lt;lf&gt;import&lt;space&gt;hmac&lt;lf&gt;import&lt;space&gt;sys&lt;lf&gt;&lt;lf&gt;PUT_BLOB_LIMIT&lt;space&gt;=&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;64&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;64&lt;space&gt;MB&lt;lf&gt;PUT_BLOCK_CHUNK_SIZE&lt;space&gt;=&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;4&lt;space&gt;#&lt;space&gt;4&lt;space&gt;MB&lt;lf&gt;AZ_VERSION&lt;space&gt;=&lt;space&gt;&lt;apos&gt;2015-02-21&lt;apos&gt;&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;StdoutLogger&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;simple&lt;space&gt;log&lt;space&gt;class&lt;space&gt;to&lt;space&gt;mimic&lt;space&gt;fme&lt;space&gt;api&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;logMessageString&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;msg&lt;comma&gt;&lt;space&gt;level&lt;space&gt;=&lt;space&gt;0&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;level&lt;space&gt;==&lt;space&gt;0:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stdout.write&lt;openparen&gt;&lt;apos&gt;INFO&lt;space&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stdout.write&lt;openparen&gt;msg&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stdout.write&lt;openparen&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;level&lt;space&gt;==&lt;space&gt;1:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stderr.write&lt;openparen&gt;&lt;apos&gt;WARN&lt;space&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stderr.write&lt;openparen&gt;msg&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stderr.write&lt;openparen&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;level&lt;space&gt;==&lt;space&gt;2:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stderr.write&lt;openparen&gt;&lt;apos&gt;ERROR&lt;space&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stderr.write&lt;openparen&gt;msg&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stderr.write&lt;openparen&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;level&lt;space&gt;==&lt;space&gt;2:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stderr.write&lt;openparen&gt;&lt;apos&gt;FATAL&lt;space&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stderr.write&lt;openparen&gt;msg&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.stderr.write&lt;openparen&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;logException&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;e&lt;comma&gt;&lt;space&gt;level&lt;space&gt;=&lt;space&gt;0&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logMessageString&lt;openparen&gt;str&lt;openparen&gt;e&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;level&lt;closeparen&gt;&lt;lf&gt;class&lt;space&gt;AzureAPI&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;sys.version_info&lt;space&gt;&lt;lt&gt;&lt;space&gt;&lt;openparen&gt;3&lt;comma&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;from&lt;space&gt;collections&lt;space&gt;import&lt;space&gt;Iterable&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_unicode_type&lt;space&gt;=&lt;space&gt;unicode&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;from&lt;space&gt;collections.abc&lt;space&gt;import&lt;space&gt;Iterable&lt;space&gt;#&lt;space&gt;TODO:&lt;space&gt;this&lt;space&gt;code&lt;space&gt;was&lt;space&gt;found&lt;space&gt;somewhere&lt;space&gt;but&lt;space&gt;its&lt;space&gt;logic&lt;space&gt;is&lt;space&gt;not&lt;space&gt;clear&lt;space&gt;to&lt;space&gt;me...&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_unicode_type&lt;space&gt;=&lt;space&gt;str&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;logfile&lt;space&gt;=&lt;space&gt;StdoutLogger&lt;openparen&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;logprefix&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;comma&gt;&lt;space&gt;loglevel&lt;space&gt;=&lt;space&gt;0&lt;comma&gt;&lt;space&gt;session&lt;space&gt;=&lt;space&gt;requests.Session&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.session&lt;space&gt;=&lt;space&gt;session&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile&lt;space&gt;=&lt;space&gt;logfile&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logprefix&lt;space&gt;=&lt;space&gt;logprefix&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.loglevel&lt;space&gt;=&lt;space&gt;loglevel&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.account&lt;space&gt;=&lt;space&gt;account&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.secret&lt;space&gt;=&lt;space&gt;secret&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__enter__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;self&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__exit__&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;type&lt;comma&gt;&lt;space&gt;value&lt;comma&gt;&lt;space&gt;traceback&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Closing&lt;space&gt;Azure&lt;space&gt;Connection&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;del&lt;space&gt;self.logfile&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;del&lt;space&gt;self.session&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;value&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;info&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.logprefix&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;self.loglevel&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;warn&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.logprefix&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;self.loglevel&lt;space&gt;+&lt;space&gt;1&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;append_block&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=appendblock&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Appending&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp:appendblock&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;ERROR&lt;space&gt;status&lt;space&gt;%s:&lt;space&gt;`%s`&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;r.status_code&lt;comma&gt;&lt;space&gt;_string_to_sign&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_block&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;block_id&lt;space&gt;=&lt;space&gt;base64.b64encode&lt;openparen&gt;uuid.uuid4&lt;openparen&gt;&lt;closeparen&gt;.hex&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#https:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;mycontainer&lt;solidus&gt;myblob?comp=block&lt;amp&gt;blockid=id&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=block&lt;amp&gt;blockid=%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_id&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;block&lt;space&gt;of&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;blockid:%s&lt;backslash&gt;ncomp:block&lt;apos&gt;&lt;space&gt;%&lt;space&gt;block_id&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;block_id&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_block_list&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_list&lt;comma&gt;&lt;space&gt;xtra_headers&lt;space&gt;=&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;list_fragments&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;s:&lt;space&gt;&lt;apos&gt;&lt;lt&gt;Uncommitted&lt;gt&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;lt&gt;&lt;solidus&gt;Uncommitted&lt;gt&gt;&lt;apos&gt;.format&lt;openparen&gt;s&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;block_list&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;lt&gt;?xml&lt;space&gt;version=&lt;quote&gt;1.0&lt;quote&gt;&lt;space&gt;encoding=&lt;quote&gt;utf-8&lt;quote&gt;?&lt;gt&gt;&lt;lt&gt;BlockList&lt;gt&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;lt&gt;&lt;solidus&gt;BlockList&lt;gt&gt;&lt;apos&gt;.format&lt;openparen&gt;list_fragments&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;xtra_headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=blocklist&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp:blocklist&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_blob&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin&lt;comma&gt;&lt;space&gt;xtra_headers&lt;space&gt;=&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.seek&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;os.SEEK_END&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;size&lt;space&gt;=&lt;space&gt;fin.tell&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.seek&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;os.SEEK_SET&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;size&lt;space&gt;&lt;lt&gt;&lt;space&gt;PUT_BLOB_LIMIT:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;fin.read&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;xtra_headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.warn&lt;openparen&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ids&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;offset&lt;space&gt;in&lt;space&gt;range&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;size&lt;comma&gt;&lt;space&gt;PUT_BLOCK_CHUNK_SIZE&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;`%s`&lt;comma&gt;&lt;space&gt;%s%%&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;blob_name&lt;comma&gt;&lt;space&gt;int&lt;openparen&gt;round&lt;openparen&gt;offset&lt;space&gt;*&lt;space&gt;100&lt;space&gt;&lt;solidus&gt;&lt;space&gt;size&lt;closeparen&gt;&lt;closeparen&gt;&lt;space&gt;&lt;closeparen&gt;&lt;space&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;block_size&lt;space&gt;=&lt;space&gt;min&lt;openparen&gt;PUT_BLOCK_CHUNK_SIZE&lt;comma&gt;&lt;space&gt;size&lt;space&gt;-&lt;space&gt;offset&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ids.append&lt;openparen&gt;self.put_block&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin.read&lt;openparen&gt;block_size&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.put_block_list&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;ids&lt;comma&gt;&lt;space&gt;xtra_headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;&lt;apos&gt;ID&lt;space&gt;LIST&lt;space&gt;COMMITTED:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;backslash&gt;t&lt;apos&gt;.join&lt;openparen&gt;ids&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Done&lt;space&gt;uploading&lt;space&gt;%s&lt;space&gt;bytes&lt;space&gt;of&lt;space&gt;data&lt;apos&gt;&lt;space&gt;%&lt;space&gt;size&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;getblocklist&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#print&lt;space&gt;&lt;apos&gt;GET&lt;space&gt;http:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;movies&lt;solidus&gt;MOV1.avi?comp=blocklist&lt;amp&gt;blocklisttype=committed&lt;space&gt;HTTP&lt;solidus&gt;1.1&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;params&lt;space&gt;=&lt;space&gt;&lt;opencurly&gt;&lt;apos&gt;comp&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;blocklist&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;blocklisttype&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;committed&lt;apos&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;params&lt;space&gt;=&lt;space&gt;OrderedDict&lt;openparen&gt;sorted&lt;openparen&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;key=lambda&lt;space&gt;t:&lt;space&gt;t&lt;openbracket&gt;0&lt;closebracket&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;querystring&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;amp&gt;&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;t:&lt;space&gt;&lt;apos&gt;&lt;opencurly&gt;&lt;closecurly&gt;=&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;*t&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;t:&lt;space&gt;&lt;apos&gt;&lt;opencurly&gt;&lt;closecurly&gt;:&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;*t&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_path&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;.join&lt;openparen&gt;&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s?%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;blob_path&lt;comma&gt;querystring&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;blob_path&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;querystringencoded&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;GET&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;self.session.get&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;200:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;ERROR&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;ERROR&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;root&lt;space&gt;=&lt;space&gt;ElementTree.fromstring&lt;openparen&gt;r.content.decode&lt;openparen&gt;&lt;apos&gt;utf-8-sig&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;unicode&lt;openparen&gt;ElementTree.tostring&lt;openparen&gt;root&lt;comma&gt;&lt;space&gt;encoding=&lt;quote&gt;utf8&lt;quote&gt;&lt;comma&gt;&lt;space&gt;method=&lt;quote&gt;xml&lt;quote&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;utf8&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;offset&lt;space&gt;=&lt;space&gt;0&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;block&lt;space&gt;in&lt;space&gt;root.find&lt;openparen&gt;&lt;apos&gt;CommittedBlocks&lt;apos&gt;&lt;closeparen&gt;.iter&lt;openparen&gt;&lt;apos&gt;Block&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;name&lt;space&gt;=&lt;space&gt;base64.b64decode&lt;openparen&gt;block.find&lt;openparen&gt;&lt;apos&gt;Name&lt;apos&gt;&lt;closeparen&gt;.text&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;size&lt;space&gt;=&lt;space&gt;int&lt;openparen&gt;block.find&lt;openparen&gt;&lt;apos&gt;Size&lt;apos&gt;&lt;closeparen&gt;.text&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;name&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;size&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;offset&lt;space&gt;+=&lt;space&gt;size&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;getblock&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;length&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;range&lt;space&gt;=&lt;space&gt;&lt;apos&gt;bytes=&lt;opencurly&gt;&lt;closecurly&gt;-&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;offset&lt;comma&gt;&lt;space&gt;offset&lt;space&gt;+&lt;space&gt;length&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_path&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;.join&lt;openparen&gt;&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;blob_path&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;xtra_headers=&lt;opencurly&gt;&lt;apos&gt;x-ms-range&lt;apos&gt;:range&lt;closecurly&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;blob_path&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;GET&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;self.session.get&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;stream=True&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;not&lt;space&gt;r.status_code&lt;space&gt;in&lt;space&gt;&lt;openparen&gt;200&lt;comma&gt;&lt;space&gt;206&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;mycontainer&lt;solidus&gt;myblob&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;chunk&lt;space&gt;in&lt;space&gt;r.iter_content&lt;openparen&gt;io.DEFAULT_BUFFER_SIZE&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;chunk&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;get_blob_properties&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;&lt;apos&gt;getting&lt;space&gt;properties&lt;space&gt;for&lt;space&gt;blob&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;solidus&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;&lt;opencurly&gt;&lt;closecurly&gt;.blob.core.windows.net&lt;solidus&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;solidus&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;HEAD&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;self.session.head&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;200:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.warn&lt;openparen&gt;r.status_code&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.warn&lt;openparen&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.warn&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;str&lt;openparen&gt;r.headers&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;opencurly&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;content-length&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;1368582383&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;AppendBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;accept-ranges&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;bytes&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-blob-committed-block-count&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;327&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;2015-02-21&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;server&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;Windows-Azure-Blob&lt;solidus&gt;1.0&lt;space&gt;Microsoft-HTTPAPI&lt;solidus&gt;2.0&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-write-protection&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;false&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;last-modified&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;Thu&lt;comma&gt;&lt;space&gt;23&lt;space&gt;Jun&lt;space&gt;2016&lt;space&gt;11:57:16&lt;space&gt;GMT&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;etag&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;&lt;quote&gt;0x8D39B5D855ED87F&lt;quote&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-lease-state&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;available&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;date&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;Wed&lt;comma&gt;&lt;space&gt;16&lt;space&gt;Nov&lt;space&gt;2016&lt;space&gt;17:59:04&lt;space&gt;GMT&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;content-type&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;application&lt;solidus&gt;octet-stream&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-request-id&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;414995ba-0001-0081-2433-40256f000000&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-lease-status&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;unlocked&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;map&lt;openparen&gt;r.headers.get&lt;comma&gt;&lt;space&gt;&lt;openbracket&gt;&lt;apos&gt;last-modified&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;content-length&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;content-type&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Content-MD5&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Accept-Ranges&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-blob-committed-block-count&lt;apos&gt;&lt;closebracket&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;download_blob&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;target_filepath&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;status&lt;space&gt;=&lt;space&gt;azure.download_blob&lt;openparen&gt;container&lt;comma&gt;blob_name&lt;comma&gt;target_filepath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;TODO:&lt;space&gt;Eiter&lt;space&gt;get&lt;space&gt;blob&lt;space&gt;type&lt;space&gt;as&lt;space&gt;parameter&lt;space&gt;or&lt;space&gt;perform&lt;space&gt;a&lt;space&gt;Get&lt;space&gt;Blob&lt;space&gt;Properties&lt;space&gt;request&lt;space&gt;in&lt;space&gt;order&lt;space&gt;to&lt;space&gt;find&lt;space&gt;out&lt;space&gt;how&lt;space&gt;to&lt;space&gt;access&lt;space&gt;data.&lt;space&gt;Currently&lt;space&gt;only&lt;space&gt;large&lt;space&gt;blobs&lt;space&gt;that&lt;space&gt;have&lt;space&gt;an&lt;space&gt;accosiated&lt;space&gt;bloclist&lt;space&gt;works.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;last_mod&lt;comma&gt;&lt;space&gt;blob_type&lt;comma&gt;&lt;space&gt;content_length&lt;comma&gt;&lt;space&gt;content_type&lt;comma&gt;&lt;space&gt;content_md5&lt;comma&gt;&lt;space&gt;accept_ranges&lt;comma&gt;&lt;space&gt;committed_block_count&lt;comma&gt;&lt;space&gt;=&lt;space&gt;self.get_blob_properties&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;content_length&lt;space&gt;=&lt;space&gt;int&lt;openparen&gt;content_length&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;blob_type&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;nthreads&lt;space&gt;=&lt;space&gt;10&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue&lt;space&gt;=&lt;space&gt;Queue&lt;openparen&gt;nthreads*2&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;writequeue&lt;space&gt;=&lt;space&gt;Queue&lt;openparen&gt;nthreads&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;target_filepath&lt;space&gt;=&lt;space&gt;os.path.normpath&lt;openparen&gt;target_filepath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;target_folder&lt;space&gt;=&lt;space&gt;os.path.dirname&lt;openparen&gt;target_filepath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;not&lt;space&gt;os.path.exists&lt;openparen&gt;target_folder&lt;closeparen&gt;:&lt;space&gt;os.makedirs&lt;openparen&gt;target_folder&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout&lt;space&gt;=&lt;space&gt;io.open&lt;openparen&gt;target_filepath&lt;comma&gt;&lt;space&gt;mode=&lt;apos&gt;w+b&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;get_data&lt;openparen&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;while&lt;space&gt;True:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blockid&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;length&lt;space&gt;=&lt;space&gt;readqueue.get&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;&lt;space&gt;downloading&lt;space&gt;part&lt;space&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;blockid&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;bytesread&lt;space&gt;=&lt;space&gt;0&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;chunk&lt;space&gt;in&lt;space&gt;self.getblock&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;length&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;writequeue.put&lt;openparen&gt;&lt;openparen&gt;chunk&lt;comma&gt;&lt;space&gt;offset&lt;space&gt;+&lt;space&gt;bytesread&lt;comma&gt;&lt;space&gt;len&lt;openparen&gt;chunk&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;bytesread&lt;space&gt;+=&lt;space&gt;len&lt;openparen&gt;chunk&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.task_done&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;write_data&lt;openparen&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;while&lt;space&gt;True:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;length&lt;space&gt;=&lt;space&gt;writequeue.get&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout.seek&lt;openparen&gt;offset&lt;comma&gt;&lt;space&gt;0&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout.write&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;writequeue.task_done&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;i&lt;space&gt;in&lt;space&gt;range&lt;openparen&gt;nthreads&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;t&lt;space&gt;=&lt;space&gt;Thread&lt;openparen&gt;target=get_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;t.daemon&lt;space&gt;=&lt;space&gt;True&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;t.start&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;wt&lt;space&gt;=&lt;space&gt;Thread&lt;openparen&gt;target=write_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;wt.daemon&lt;space&gt;=&lt;space&gt;True&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;wt.start&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;blob_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;committed_block_count:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;block&lt;space&gt;in&lt;space&gt;self.getblocklist&lt;openparen&gt;container=container&lt;comma&gt;&lt;space&gt;blob_name=blob_name&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.put&lt;openparen&gt;block&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.put&lt;openparen&gt;&lt;openparen&gt;uuid.uuid4&lt;openparen&gt;&lt;closeparen&gt;.hex&lt;comma&gt;&lt;space&gt;0&lt;comma&gt;&lt;space&gt;content_length&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;elif&lt;space&gt;blob_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;AppendBlob&lt;apos&gt;&lt;space&gt;and&lt;space&gt;accept_ranges&lt;space&gt;==&lt;space&gt;&lt;apos&gt;bytes&lt;apos&gt;&lt;space&gt;and&lt;space&gt;committed_block_count:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;offset&lt;space&gt;in&lt;space&gt;range&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;content_length&lt;comma&gt;&lt;space&gt;PUT_BLOCK_CHUNK_SIZE&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.put&lt;openparen&gt;&lt;openparen&gt;uuid.uuid4&lt;openparen&gt;&lt;closeparen&gt;.hex&lt;comma&gt;&lt;space&gt;offset&lt;comma&gt;&lt;space&gt;min&lt;openparen&gt;content_length-offset&lt;comma&gt;&lt;space&gt;PUT_BLOCK_CHUNK_SIZE&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;readqueue.join&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;writequeue.join&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout.flush&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fout.close&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;last_mod&lt;comma&gt;&lt;space&gt;blob_type&lt;comma&gt;&lt;space&gt;content_length&lt;comma&gt;&lt;space&gt;content_type&lt;comma&gt;&lt;space&gt;content_md5&lt;comma&gt;&lt;space&gt;accept_ranges&lt;comma&gt;&lt;space&gt;committed_block_count&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;list_blobs&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;prefix=None&lt;comma&gt;delimiter=&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;&lt;comma&gt;recursive=False&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;https:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;mycontainer?restype=container&lt;amp&gt;comp=list&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#CubeSourceDataFile&lt;solidus&gt;coast&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;params&lt;space&gt;=&lt;space&gt;&lt;opencurly&gt;&lt;apos&gt;delimiter&lt;apos&gt;&lt;space&gt;:&lt;space&gt;delimiter&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;list&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;restype&lt;apos&gt;:&lt;space&gt;&lt;apos&gt;container&lt;apos&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;prefix:&lt;space&gt;params&lt;openbracket&gt;&lt;apos&gt;prefix&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;prefix&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;params&lt;space&gt;=&lt;space&gt;OrderedDict&lt;openparen&gt;sorted&lt;openparen&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;key=lambda&lt;space&gt;t:&lt;space&gt;t&lt;openbracket&gt;0&lt;closebracket&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;querystring&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;amp&gt;&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;t:&lt;space&gt;&lt;apos&gt;&lt;opencurly&gt;&lt;closecurly&gt;=&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;*t&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;t:&lt;space&gt;&lt;apos&gt;&lt;opencurly&gt;&lt;closecurly&gt;:&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;*t&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;params.items&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s?%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;querystring&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;querystringencoded&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;GET&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;&lt;apos&gt;Listing&lt;space&gt;blobs&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;self.session.get&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;200:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;root&lt;space&gt;=&lt;space&gt;ElementTree.fromstring&lt;openparen&gt;r.content.decode&lt;openparen&gt;&lt;apos&gt;utf-8-sig&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;blobprefix&lt;space&gt;in&lt;space&gt;root.iter&lt;openparen&gt;&lt;apos&gt;BlobPrefix&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;buf&lt;space&gt;=&lt;space&gt;StringIO&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ElementTree.ElementTree&lt;openparen&gt;blobprefix&lt;closeparen&gt;.write&lt;openparen&gt;buf&lt;comma&gt;&lt;space&gt;encoding=&lt;apos&gt;utf8&lt;apos&gt;&lt;comma&gt;&lt;space&gt;xml_declaration=False&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;&lt;apos&gt;BlobPrefix&lt;apos&gt;&lt;comma&gt;&lt;space&gt;prefix&lt;comma&gt;&lt;space&gt;buf.getvalue&lt;openparen&gt;&lt;closeparen&gt;.decode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;recursive:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;returntype&lt;comma&gt;&lt;space&gt;used_prefix&lt;comma&gt;&lt;space&gt;blob&lt;space&gt;in&lt;space&gt;self.list_blobs&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;prefix=blobprefix.findtext&lt;openparen&gt;&lt;apos&gt;Name&lt;apos&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;delimiter=delimiter&lt;comma&gt;recursive=True&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;returntype&lt;comma&gt;&lt;space&gt;used_prefix&lt;comma&gt;&lt;space&gt;blob&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;blob&lt;space&gt;in&lt;space&gt;root.iter&lt;openparen&gt;&lt;apos&gt;Blob&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;buf&lt;space&gt;=&lt;space&gt;StringIO&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ElementTree.ElementTree&lt;openparen&gt;blob&lt;closeparen&gt;.write&lt;openparen&gt;buf&lt;comma&gt;&lt;space&gt;encoding=&lt;apos&gt;utf8&lt;apos&gt;&lt;comma&gt;&lt;space&gt;xml_declaration=False&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;yield&lt;space&gt;&lt;apos&gt;Blob&lt;apos&gt;&lt;comma&gt;&lt;space&gt;prefix&lt;comma&gt;&lt;space&gt;buf.getvalue&lt;openparen&gt;&lt;closeparen&gt;.decode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_authorize&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;headers&lt;comma&gt;&lt;space&gt;container_name&lt;comma&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;None&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;None&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;PUT&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;http_method&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;field_order&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;Content-Encoding&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;&lt;openparen&gt;name&lt;comma&gt;&lt;space&gt;always&lt;space&gt;produce&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Content-Language&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Content-Length&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Content-MD5&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Content-Type&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Date&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;If-Modified-Since&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;If-None-Match&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;If-Unmodified-Since&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;Range&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;--unknown-filler-001--&lt;apos&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields&lt;space&gt;+=&lt;space&gt;&lt;openbracket&gt;headers&lt;openbracket&gt;x&lt;closebracket&gt;&lt;space&gt;if&lt;space&gt;x&lt;space&gt;in&lt;space&gt;headers&lt;space&gt;and&lt;space&gt;not&lt;space&gt;&lt;openparen&gt;x&lt;space&gt;==&lt;space&gt;&lt;apos&gt;Content-Length&lt;apos&gt;&lt;space&gt;and&lt;space&gt;headers&lt;openbracket&gt;x&lt;closebracket&gt;&lt;space&gt;==&lt;space&gt;&lt;apos&gt;0&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;else&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;for&lt;space&gt;x&lt;space&gt;in&lt;space&gt;field_order&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields&lt;space&gt;+=&lt;space&gt;&lt;openbracket&gt;u&lt;apos&gt;&lt;opencurly&gt;&lt;closecurly&gt;:&lt;opencurly&gt;&lt;closecurly&gt;&lt;apos&gt;.format&lt;openparen&gt;x&lt;comma&gt;&lt;space&gt;headers.get&lt;openparen&gt;x&lt;closeparen&gt;.strip&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;space&gt;for&lt;space&gt;x&lt;space&gt;in&lt;space&gt;sorted&lt;openparen&gt;headers.keys&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;space&gt;if&lt;space&gt;x.startswith&lt;openparen&gt;&lt;apos&gt;x-ms-&lt;apos&gt;&lt;closeparen&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;blob_name:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container_name&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;querystringencoded:&lt;space&gt;fields.append&lt;openparen&gt;querystringencoded&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;u&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;.join&lt;openparen&gt;fields&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;&lt;apos&gt;SIGNING&lt;space&gt;STRING:&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;signature&lt;space&gt;=&lt;space&gt;AzureAPI._sign_string&lt;openparen&gt;self.secret&lt;space&gt;&lt;comma&gt;&lt;space&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;&lt;apos&gt;SIGNATURE:&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;signature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;Authorization&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;SharedKey&lt;space&gt;%s:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;signature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;_string_to_sign&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_create_headers&lt;openparen&gt;data&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;comma&gt;&lt;space&gt;xtra_headers=&lt;opencurly&gt;&lt;closecurly&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;&lt;opencurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;Content-Length&lt;apos&gt;:&lt;space&gt;str&lt;openparen&gt;len&lt;openparen&gt;data&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-date&lt;apos&gt;:&lt;space&gt;AzureAPI._httpdate&lt;openparen&gt;datetime.datetime.utcnow&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;:&lt;space&gt;AZ_VERSION&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers.update&lt;openparen&gt;xtra_headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;OrderedDict&lt;openparen&gt;sorted&lt;openparen&gt;headers.items&lt;openparen&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;key=lambda&lt;space&gt;t:&lt;space&gt;t&lt;openbracket&gt;0&lt;closebracket&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_httpdate&lt;openparen&gt;dt&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;Return&lt;space&gt;a&lt;space&gt;string&lt;space&gt;representation&lt;space&gt;of&lt;space&gt;a&lt;space&gt;date&lt;space&gt;according&lt;space&gt;to&lt;space&gt;RFC&lt;space&gt;1123&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;openparen&gt;HTTP&lt;solidus&gt;1.1&lt;closeparen&gt;.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;The&lt;space&gt;supplied&lt;space&gt;date&lt;space&gt;must&lt;space&gt;be&lt;space&gt;in&lt;space&gt;UTC.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;weekday&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;quote&gt;Mon&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Tue&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Wed&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Thu&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Fri&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sat&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sun&lt;quote&gt;&lt;closebracket&gt;&lt;openbracket&gt;dt.weekday&lt;openparen&gt;&lt;closeparen&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;month&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;quote&gt;Jan&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Feb&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Mar&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Apr&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;May&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Jun&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Jul&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Aug&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sep&lt;quote&gt;&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;Oct&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Nov&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Dec&lt;quote&gt;&lt;closebracket&gt;&lt;openbracket&gt;dt.month&lt;space&gt;-&lt;space&gt;1&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;&lt;quote&gt;%s&lt;comma&gt;&lt;space&gt;%02d&lt;space&gt;%s&lt;space&gt;%04d&lt;space&gt;%02d:%02d:%02d&lt;space&gt;GMT&lt;quote&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;weekday&lt;comma&gt;&lt;space&gt;dt.day&lt;comma&gt;&lt;space&gt;month&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;dt.year&lt;comma&gt;&lt;space&gt;dt.hour&lt;comma&gt;&lt;space&gt;dt.minute&lt;comma&gt;&lt;space&gt;dt.second&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_encode_base64&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;encoded&lt;space&gt;=&lt;space&gt;base64.b64encode&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;encoded.decode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_decode_base64_to_bytes&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;base64.b64decode&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_sign_string&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;string_to_sign&lt;comma&gt;&lt;space&gt;key_is_base64=True&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;key_is_base64:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;key&lt;space&gt;=&lt;space&gt;AzureAPI._decode_base64_to_bytes&lt;openparen&gt;key&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;key&lt;space&gt;=&lt;space&gt;key.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;string_to_sign&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;string_to_sign&lt;space&gt;=&lt;space&gt;string_to_sign.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;signed_hmac_sha256&lt;space&gt;=&lt;space&gt;hmac.HMAC&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;string_to_sign&lt;comma&gt;&lt;space&gt;hashlib.sha256&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;digest&lt;space&gt;=&lt;space&gt;signed_hmac_sha256.digest&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;encoded_digest&lt;space&gt;=&lt;space&gt;AzureAPI._encode_base64&lt;openparen&gt;digest&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;encoded_digest"/>
#!     <XFORM_PARM PARM_NAME="HIDE_ATTRIBUTES" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NEW_ATTRIBUTES" PARM_VALUE="_azure_blob_uploader_status _azure_blob_uploader_error_message"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PYTHONSYMBOL" PARM_VALUE="UploadFeatureProcessor"/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="PythonCaller"/>
#!     <XFORM_PARM PARM_NAME="ADVANCED_GROUP" PARM_VALUE=""/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="28"
#!   TYPE="ParameterFetcher"
#!   VERSION="4"
#!   POSITION="562.506 437.504"
#!   BOUNDING_RECT="562.506 437.504 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="ParameterFetcher"/>
#!     <XFORM_PARM PARM_NAME="ATTR_LIST" PARM_VALUE="_azure_blob_uploader_headers {$(XTRA_HEADERS)}"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="29"
#!   TYPE="Tester"
#!   VERSION="2"
#!   POSITION="562.506 278.128"
#!   BOUNDING_RECT="562.506 278.128 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#!   OUTPUT_FT_ORDER="FAILED%PASSED"
#! >
#!     <OUTPUT_FEAT NAME="FAILED"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="PASSED"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_PARM PARM_NAME="TEST_CLAUSE" PARM_VALUE="TEST &lt;at&gt;Value&lt;openparen&gt;_azure_blob_uploader_headers&lt;closeparen&gt; ATTRIBUTE_HAS_VALUE &quot;&quot;"/>
#!     <XFORM_PARM PARM_NAME="COMPOSITE_TEST" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="TEST_LIST" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="BOOL_OP" PARM_VALUE="OR"/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="Tester"/>
#!     <XFORM_PARM PARM_NAME="TEST_MODE" PARM_VALUE="Automatic"/>
#!     <XFORM_PARM PARM_NAME="TEST_DESCRIPTION" PARM_VALUE="&quot;&quot;"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="32"
#!   TYPE="StringSearcher"
#!   VERSION="3"
#!   POSITION="562.506 65.6253"
#!   BOUNDING_RECT="562.506 65.6253 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16674"
#! >
#!     <OUTPUT_FEAT NAME="MATCHED"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_first_match" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.part" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_header_attributes{}.startIndex" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="NOT_MATCHED"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_headers" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="MATCHES_ATTR" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="CASE" PARM_VALUE="no"/>
#!     <XFORM_PARM PARM_NAME="MATCHED_RESULT_ATTR" PARM_VALUE="_first_match"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="StringSearcher"/>
#!     <XFORM_PARM PARM_NAME="STRING_TO_SEARCH" PARM_VALUE="&lt;at&gt;Value&lt;openparen&gt;_azure_blob_uploader_headers&lt;closeparen&gt;"/>
#!     <XFORM_PARM PARM_NAME="REGEXP" PARM_VALUE="&lt;openparen&gt;?:^|&lt;comma&gt;&lt;closeparen&gt;&lt;openparen&gt;?=&lt;openbracket&gt;^&lt;quote&gt;&lt;closebracket&gt;|&lt;openparen&gt;&lt;quote&gt;&lt;closeparen&gt;?&lt;closeparen&gt;&lt;quote&gt;?&lt;openparen&gt;&lt;openparen&gt;?&lt;openparen&gt;1&lt;closeparen&gt;&lt;openbracket&gt;^&lt;quote&gt;&lt;closebracket&gt;*|&lt;openbracket&gt;^&lt;comma&gt;&lt;quote&gt;&lt;closebracket&gt;*&lt;closeparen&gt;&lt;closeparen&gt;&lt;quote&gt;?&lt;openparen&gt;?=&lt;comma&gt;|&lt;dollar&gt;&lt;closeparen&gt;"/>
#!     <XFORM_PARM PARM_NAME="MATCHED_PARTS_ATTR" PARM_VALUE="_azure_blob_uploader_header_attributes"/>
#!     <XFORM_PARM PARM_NAME="ADVANCED_GROUP" PARM_VALUE="FME_DISCLOSURE_OPEN"/>
#! </TRANSFORMER>
#! </TRANSFORMERS>
#! <SUBDOCUMENT_IOS>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="6"
#!   NAME="Input"
#!   POSITION="-130.065 437.504"
#!   BOUNDING_RECT="-130.065 437.504 -1 -1"
#!   COLLAPSED="true"
#!   PUBLISHED="true"
#!   IS_SOURCE="true"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="7"
#!   NAME="Success"
#!   POSITION="4695.73 437.504"
#!   BOUNDING_RECT="4695.73 437.504 -1 -1"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="8"
#!   NAME="Fail"
#!   POSITION="4745.73 -421.879"
#!   BOUNDING_RECT="4745.73 -421.879 -1 -1"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! </SUBDOCUMENT_IOS>
#! <FEAT_LINKS>
#! <FEAT_LINK
#!   IDENTIFIER="30"
#!   SOURCE_NODE="6"
#!   TARGET_NODE="28"
#!   SOURCE_PORT_DESC="0"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="17"
#!   SOURCE_NODE="10"
#!   TARGET_NODE="16"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="19"
#!   SOURCE_NODE="11"
#!   TARGET_NODE="7"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="15"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="11"
#!   SOURCE_PORT_DESC="fo 0 success"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="23"
#!   SOURCE_NODE="13"
#!   TARGET_NODE="8"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="20"
#!   SOURCE_NODE="14"
#!   TARGET_NODE="12"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="22"
#!   SOURCE_NODE="16"
#!   TARGET_NODE="14"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="31"
#!   SOURCE_NODE="28"
#!   TARGET_NODE="29"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="33"
#!   SOURCE_NODE="29"
#!   TARGET_NODE="32"
#!   SOURCE_PORT_DESC="fo 1 PASSED"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="35"
#!   SOURCE_NODE="32"
#!   TARGET_NODE="10"
#!   SOURCE_PORT_DESC="fo 0 MATCHED"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="24"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 1 &lt;lt&gt;EMPTY&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="21"
#!   SOURCE_NODE="29"
#!   TARGET_NODE="10"
#!   SOURCE_PORT_DESC="fo 0 FAILED"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="34"
#!   SOURCE_NODE="32"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 1 NOT_MATCHED"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="25"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 2 &lt;lt&gt;MISSING&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="26"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 3 &lt;lt&gt;NULL&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="27"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 4 &lt;lt&gt;UNFILTERED&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="18"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 5 fail"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! </FEAT_LINKS>
#! <BREAKPOINTS>
#! </BREAKPOINTS>
#! <ATTR_LINKS>
#! </ATTR_LINKS>
#! <SUBDOCUMENTS>
#! </SUBDOCUMENTS>
#! <LOOKUP_TABLES>
#! </LOOKUP_TABLES>
#! </TRANSFORMER>
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_KEY 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_SRC_TYPE AttributeValue
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_ACCOUNT 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_CONTAINER 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_BLOB_NAME 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_SRC_DATA 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_XTRA_HEADERS 
#! START_HEADER
#! END_HEADER

LOG_FILTER_MASK -1
DEFAULT_MACRO WB_CURRENT_CONTEXT
DEFAULT_MACRO AzureBlobUploader_WORKSPACE_NAME ""
INCLUDE [puts {MACRO WB_OLD_CONTEXT_$(AzureBlobUploader_WORKSPACE_NAME) $(WB_CURRENT_CONTEXT)};          puts {MACRO WB_CURRENT_CONTEXT $(AzureBlobUploader_WORKSPACE_NAME)}]
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_Input1480086354 Input Splitter"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Input"   OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Input"
# -------------------------------------------------------------------------

Tcl2 proc $(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher_doFetch {} {    foreach {name val} {"_azure_blob_uploader_headers {$($(AzureBlobUploader_WORKSPACE_NAME)_XTRA_HEADERS$encode)}"} {         if { [string match {*<at>*} $val] == 1 } {             set val [FME_Execute EvaluateExpression {STRING} $val {$(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher}];         } elseif {[string match {*FME_CONDITIONAL*} $val] == 1} {             set val [FME_Execute EvaluateExpression {STRING} $val {$(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher}];         } else {             set val [FME_DecodeTextOrAttr $val];         };       FME_SetAttribute [FME_DecodeText $name] $val    } }
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Input"    OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher_OUTPUT"         @Tcl2($(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher_doFetch)

# -------------------------------------------------------------------------

FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_Tester    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_ParameterFetcher_OUTPUT"    TEST @EvaluateExpression(FDIV,STRING_ENCODED,<at>Value<openparen>_azure_blob_uploader_headers<closeparen>,$(AzureBlobUploader_WORKSPACE_NAME)_Tester) ATTRIBUTE_HAS_VALUE "" ENCODED    BOOLEAN_OPERATOR OR    OUTPUT PASSED FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Tester_PASSED"    OUTPUT FAILED FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Tester_FAILED"
# -------------------------------------------------------------------------

MACRO casemac
INCLUDE [ if { {no} == {no} } { puts {MACRO casemac -nocase}} ]
Tcl2 proc $(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher_4bb6f6c3_25f4_455b_ad1b_93d6132dbca47_doGrep { stringToSearch regExp matchedChars matches matchedParts } {   set subMatches 1;   set results [FME_GetRegex $(casemac) [FME_DecodeText $regExp] [FME_DecodeText $stringToSearch]];   if {[llength [lindex $results 0]] > 0} {      set attrName $matchedChars;      FME_SetAttribute $attrName [lindex [lindex [lindex $results 0] 0] 0];      set index 0;      set parts [lindex $results 1];      foreach part $parts {         if {[llength $matchedParts] > 0} {             set attrName "$matchedParts{$index}.part";             FME_SetAttribute $attrName [lindex $part 0];             set attrName "$matchedParts{$index}.startIndex";             FME_SetAttribute $attrName [lindex $part 1];         };         incr index;      };      set index 0;      set regexMatches [lindex $results 0];      foreach part $regexMatches {         if {[llength $matches] > 0} {             set attrName "$matches{$index}.match";             FME_SetAttribute $attrName [lindex $part 0];             set attrName "$matches{$index}.startIndex";             FME_SetAttribute $attrName [lindex $part 1];         };         set isFirstMatch 0;         incr index;      };      return $index;   };   return -1; }
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Tester_PASSED"    TEST @Tcl2("$(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher_4bb6f6c3_25f4_455b_ad1b_93d6132dbca47_doGrep {@EvaluateExpression(FDIV,STRING_ENCODED,<at>Value<openparen>_azure_blob_uploader_headers<closeparen>,$(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher)} {<openparen>?:^|<comma><closeparen><openparen>?=<openbracket>^<quote><closebracket>|<openparen><quote><closeparen>?<closeparen><quote>?<openparen><openparen>?<openparen>1<closeparen><openbracket>^<quote><closebracket>*|<openbracket>^<comma><quote><closebracket>*<closeparen><closeparen><quote>?<openparen>?=<comma>|<dollar><closeparen>} {_first_match} {} {_azure_blob_uploader_header_attributes}") > 0    OUTPUT PASSED FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher_MATCHED"    OUTPUT FAILED FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher_NOT_MATCHED"

# -------------------------------------------------------------------------

FACTORY_DEF * AttrSetFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_FetchParamsAttributeCreator    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Tester_FAILED"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher_MATCHED"    MULTI_FEATURE_MODE NO 	 NULL_ATTR_MODE NO_OP 	 ATTRSET_CREATE_DIRECTIVES _PROPAGATE_MISSING_FDIV 	 ATTR_ACTION "" "_azure_blob_uploader_storage_account" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_ACCOUNT)"     ATTR_ACTION "" "_azure_blob_uploader_key" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_KEY$encode)"     ATTR_ACTION "" "_azure_blob_uploader_container" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_CONTAINER)"     ATTR_ACTION "" "_azure_blob_uploader_blob_name" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_BLOB_NAME)"     ATTR_ACTION "" "_azure_blob_uploader_src_type" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_SRC_TYPE$encode)"     ATTR_ACTION "" "_azure_blob_uploader_src_data" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_SRC_DATA)"    OUTPUT OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_FetchParamsAttributeCreator_OUTPUT"


# -------------------------------------------------------------------------

MACRO casemac
INCLUDE [ if { {NO} == {NO} } { puts {MACRO casemac -nocase}} ]
Tcl2 proc $(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_ce1a0a2a_07e7_4a44_8641_f2b94b8264fe8_replacer { findText replaceText invalidValue} {     set attrs [split \"_azure_blob_uploader_blob_name\" {,}];     set findValue [FME_DecodeText $findText];     set replaceValue [FME_DecodeText $replaceText];     foreach attr $attrs {       set attrVal [FME_GetAttribute $attr];       set noMatch true;       if {{NO} == {YES}} {         set newAttrVal [FME_ReplaceRegex $(casemac) $findValue $attrVal $replaceValue];       } else {         set newAttrVal [string map $(casemac) [list $findValue $replaceValue] $attrVal];       };       if { $newAttrVal ne $attrVal } {         set noMatch false;         FME_SetAttribute $attr $newAttrVal;       };       if {$noMatch} {          if { $invalidValue == {FME_NULL_VALUE} } {             FME_SetAttributeNull $attr;          } elseif { $invalidValue != {_FME_NO_OP_} }  {             FME_SetAttribute $attr [FME_DecodeText $invalidValue];          };       };     }; }
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_FetchParamsAttributeCreator_OUTPUT"    OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_OUTPUT"         @Tcl2("$(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_ce1a0a2a_07e7_4a44_8641_f2b94b8264fe8_replacer {<backslash>} {<solidus>} {_FME_NO_OP_}")

# -------------------------------------------------------------------------


FME_PYTHON_PATH "$(FME_MF_DIR)"

FACTORY_DEF * PythonFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_PythonCaller    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_OUTPUT"    SYMBOL_NAME UploadFeatureProcessor    PYTHON_NAMESPACE FMEOBJECTS    SOURCE_CODE from<space>fmeobjects<space>import<space>FMELogFile<comma><space>FME_INFORM<comma><space>FME_WARN<comma><space>FME_ERROR<lf>from<space>cStringIO<space>import<space>StringIO<lf>import<space>locale<lf><lf>class<space>UploadFeatureProcessor<openparen>object<closeparen>:<lf><space><space><space><space>def<space>__init__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile<space>=<space>FMELogFile<openparen><closeparen><lf><space><space><space><space><space><space><space><space>self.enc<space>=<space>locale.getdefaultlocale<openparen><closeparen><openbracket>1<closebracket><lf><space><space><space><space><space><space><space><space>#<space>Make<space>sure<space>to<space>change<space>if<space>Custom<space>transformer<space>is<space>renamed<space><openparen>not<space>transformer<space>instance<space>name<space>-<space>that<apos>s<space>what<space>we<apos>re<space>fetching<closeparen><space><lf><space><space><space><space><space><space><space><space>self.xformer_name<space>=<space>FME_MacroValues<openbracket><apos>AzureBlobUploader_WORKSPACE_NAME<apos><closebracket><lf><space><space><space><space>def<space>info<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_INFORM<closeparen><lf><space><space><space><space><space><space><space><space>#self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_WARN<closeparen><space>#<space>while<space>developing<space>for<space>popping<space>out<lf><space><space><space><space>def<space>input<openparen>self<comma>feature<closeparen>:<lf><space><space><space><space><space><space><space><space>try:<lf><space><space><space><space><space><space><space><space><space><space><space><space>account<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_storage_account<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>secret<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_key<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>azure<space>=<space>AzureAPI<openparen>account<comma><space>secret<comma><space>self.logfile<comma><space>logprefix<space>=<space>self.xformer_name<comma><space>loglevel<space>=<space>FME_INFORM<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>container<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_container<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>blob_name<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_blob_name<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>fin<space>=<space>None<lf><space><space><space><space><space><space><space><space><space><space><space><space>src_type<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_src_type<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>src_type<space>==<space><apos>AttributeValue<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_src_data<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>AzureAPI._unicode_type<closeparen>:<space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>fin<space>=<space>StringIO<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>elif<space>src_type<space>==<space><apos>FilePath<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>fin<space>=<space>open<openparen>feature.getAttribute<openparen><apos>_azure_blob_uploader_src_data<apos><closeparen><comma><space><apos>rb<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>else:<space>raise<space>Exception<openparen><apos>Unrecognized<space>source<space>type<space>`%s`<apos><space>%<space>src_type<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space>extra_headers<space>=<space><opencurly><closecurly><lf><space><space><space><space><space><space><space><space><space><space><space><space>n<comma><space>m<comma><space>t<comma><space>=<space>feature.getAttributeNullMissingAndType<openparen><apos>_azure_blob_uploader_header_attributes<opencurly>0<closecurly>.part<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>not<space>m:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>for<space>attr<space>in<space><openbracket>x<space>for<space>x<space>in<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_header_attributes<opencurly><closecurly>.part<apos><closeparen><space>if<space>len<openparen>x<closeparen><space>and<space>x<space>!=<space><apos><quote><apos><closebracket>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>n<comma><space>m<comma><space>t<comma><space>=<space>feature.getAttributeNullMissingAndType<openparen>attr.encode<openparen>self.enc<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>if<space>n<space>or<space>m:<space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>continue<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>val<space>=<space>feature.getAttribute<openparen>attr.encode<openparen>self.enc<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>extra_headers<openbracket>attr<closebracket><space>=<space>val<lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>len<openparen>extra_headers.keys<openparen><closeparen><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Extra<space>request<space>headers<space>used:<space><opencurly><closecurly><apos>.format<openparen>extra_headers<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>No<space>Extra<space>request<space>headers<space>used<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>#####<space>INSERT<space>CODE<space>HERE<space>TO<space>MANIPULATE<space>CONTENT<space>BEFORE<space>UPLOAD<space>#####<lf><space><space><space><space><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space>azure.put_blob<openparen>container<comma><space>blob_name<comma><space>fin<comma><space>extra_headers<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>fin.close<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_uploader_status<apos><comma><space><apos>success<apos><closeparen><lf><space><space><space><space><space><space><space><space>except<space>Exception<space>as<space>e:<lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_uploader_status<apos><comma><space><apos>fail<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_uploader_error_message<apos><comma><space>str<openparen>e<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.logfile.logException<openparen>e<comma><space>FME_ERROR<closeparen><lf><space><space><space><space><space><space><space><space>self.pyoutput<openparen>feature<closeparen><lf><space><space><space><space>def<space>close<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>del<space>self.logfile<lf><space><space><space><space><space><space><space><space><lf>#####<space>Code<space>below<space>*should*<space>be<space>more<space>or<space>less<space>standalone<space><openparen>no<space>bindings<space>to<space>fme<closeparen><space>#####<lf>import<space>os.path<lf>import<space>requests<lf>from<space>collections<space>import<space>OrderedDict<lf>import<space>datetime<lf>from<space>xml.etree<space>import<space>ElementTree<lf>from<space>cStringIO<space>import<space>StringIO<lf>from<space>Queue<space>import<space>Queue<lf>from<space>threading<space>import<space>Thread<lf>import<space>io<lf><lf>import<space>base64<lf>import<space>uuid<lf>import<space>hashlib<lf>import<space>hmac<lf>import<space>sys<lf><lf>PUT_BLOB_LIMIT<space>=<space>1024<space>*<space>1024<space>*<space>64<space><space><space><space><space><space>#<space>64<space>MB<lf>PUT_BLOCK_CHUNK_SIZE<space>=<space>1024<space>*<space>1024<space>*<space>4<space>#<space>4<space>MB<lf>AZ_VERSION<space>=<space><apos>2015-02-21<apos><lf><lf>class<space>StdoutLogger<openparen>object<closeparen>:<lf><space><space><space><space><apos><apos><apos><lf><space><space><space><space>simple<space>log<space>class<space>to<space>mimic<space>fme<space>api<lf><space><space><space><space><apos><apos><apos><lf><space><space><space><space>def<space>logMessageString<openparen>self<comma><space>msg<comma><space>level<space>=<space>0<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>level<space>==<space>0:<lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stdout.write<openparen><apos>INFO<space><apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stdout.write<openparen>msg<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stdout.write<openparen><apos><backslash>n<apos><closeparen><lf><space><space><space><space><space><space><space><space>if<space>level<space>==<space>1:<lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stderr.write<openparen><apos>WARN<space><apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stderr.write<openparen>msg<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stderr.write<openparen><apos><backslash>n<apos><closeparen><lf><space><space><space><space><space><space><space><space>if<space>level<space>==<space>2:<lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stderr.write<openparen><apos>ERROR<space><apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stderr.write<openparen>msg<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stderr.write<openparen><apos><backslash>n<apos><closeparen><lf><space><space><space><space><space><space><space><space>if<space>level<space>==<space>2:<lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stderr.write<openparen><apos>FATAL<space><apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stderr.write<openparen>msg<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>sys.stderr.write<openparen><apos><backslash>n<apos><closeparen><lf><space><space><space><space>def<space>logException<openparen>self<comma><space>e<comma><space>level<space>=<space>0<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logMessageString<openparen>str<openparen>e<closeparen><comma><space>level<closeparen><lf>class<space>AzureAPI<openparen>object<closeparen>:<lf><space><space><space><space>if<space>sys.version_info<space><lt><space><openparen>3<comma><closeparen>:<lf><space><space><space><space><space><space><space><space>from<space>collections<space>import<space>Iterable<lf><space><space><space><space><space><space><space><space>_unicode_type<space>=<space>unicode<lf><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space>from<space>collections.abc<space>import<space>Iterable<space>#<space>TODO:<space>this<space>code<space>was<space>found<space>somewhere<space>but<space>its<space>logic<space>is<space>not<space>clear<space>to<space>me...<space><lf><space><space><space><space><space><space><space><space>_unicode_type<space>=<space>str<lf><space><space><space><space>def<space>__init__<openparen>self<comma><space>account<comma><space>secret<comma><space>logfile<space>=<space>StdoutLogger<openparen><closeparen><comma><space>logprefix<space>=<space><apos><apos><comma><space>loglevel<space>=<space>0<comma><space>session<space>=<space>requests.Session<openparen><closeparen><closeparen>:<lf><space><space><space><space><space><space><space><space>self.session<space>=<space>session<lf><space><space><space><space><space><space><space><space>self.logfile<space>=<space>logfile<space><lf><space><space><space><space><space><space><space><space>self.logprefix<space>=<space>logprefix<lf><space><space><space><space><space><space><space><space>self.loglevel<space>=<space>loglevel<lf><space><space><space><space><space><space><space><space>self.account<space>=<space>account<lf><space><space><space><space><space><space><space><space>self.secret<space>=<space>secret<lf><space><space><space><space>def<space>__enter__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>return<space>self<lf><space><space><space><space>def<space>__exit__<openparen>self<comma><space>type<comma><space>value<comma><space>traceback<closeparen>:<lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Closing<space>Azure<space>Connection<apos><closeparen><lf><space><space><space><space><space><space><space><space>del<space>self.logfile<lf><space><space><space><space><space><space><space><space>del<space>self.session<lf><space><space><space><space><space><space><space><space>return<space>value<lf><space><space><space><space>def<space>info<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.logprefix<comma><space>message<closeparen><comma><space>self.loglevel<closeparen><lf><space><space><space><space>def<space>warn<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.logprefix<comma><space>message<closeparen><comma><space>self.loglevel<space>+<space>1<closeparen><lf><space><space><space><space>def<space>append_block<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_data<closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>block_data<closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=appendblock<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Appending<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>comp:appendblock<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data<space>=<space>block_data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>ERROR<space>status<space>%s:<space>`%s`<apos><space>%<space><openparen>r.status_code<comma><space>_string_to_sign<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space>def<space>put_block<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_data<closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>block_data<closeparen><lf><space><space><space><space><space><space><space><space>headers<openbracket><apos>x-ms-blob-type<apos><closebracket><space>=<space><apos>BlockBlob<apos><lf><space><space><space><space><space><space><space><space>block_id<space>=<space>base64.b64encode<openparen>uuid.uuid4<openparen><closeparen>.hex<closeparen><lf><space><space><space><space><space><space><space><space>#https:<solidus><solidus>myaccount.blob.core.windows.net<solidus>mycontainer<solidus>myblob?comp=block<amp>blockid=id<lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=block<amp>blockid=%s<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<comma><space>block_id<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>block<space>of<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>blockid:%s<backslash>ncomp:block<apos><space>%<space>block_id<closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=block_data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>return<space>block_id<lf><space><space><space><space>def<space>put_block_list<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_list<comma><space>xtra_headers<space>=<space><opencurly><closecurly><closeparen>:<lf><space><space><space><space><space><space><space><space>list_fragments<space>=<space><apos><apos>.join<openparen>map<openparen>lambda<space>s:<space><apos><lt>Uncommitted<gt><opencurly><closecurly><lt><solidus>Uncommitted<gt><apos>.format<openparen>s<closeparen><comma><space>block_list<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>data<space>=<space><apos><lt>?xml<space>version=<quote>1.0<quote><space>encoding=<quote>utf-8<quote>?<gt><lt>BlockList<gt><opencurly><closecurly><lt><solidus>BlockList<gt><apos>.format<openparen>list_fragments<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>data<comma><space>xtra_headers<closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=blocklist<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>comp:blocklist<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space>def<space>put_blob<openparen>self<comma><space>container<comma><space>blob_name<comma><space>fin<comma><space>xtra_headers<space>=<space><opencurly><closecurly><closeparen>:<lf><space><space><space><space><space><space><space><space>fin.seek<openparen>0<comma><space>os.SEEK_END<closeparen><lf><space><space><space><space><space><space><space><space>size<space>=<space>fin.tell<openparen><closeparen><lf><space><space><space><space><space><space><space><space>fin.seek<openparen>0<comma><space>os.SEEK_SET<closeparen><lf><space><space><space><space><space><space><space><space>if<space>size<space><lt><space>PUT_BLOB_LIMIT:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>fin.read<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>data<comma><space>xtra_headers<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<openbracket><apos>x-ms-blob-type<apos><closebracket><space>=<space><apos>BlockBlob<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>#self.warn<openparen>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>ids<space>=<space><openbracket><closebracket><lf><space><space><space><space><space><space><space><space><space><space><space><space>for<space>offset<space>in<space>range<openparen>0<comma><space>size<comma><space>PUT_BLOCK_CHUNK_SIZE<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>`%s`<comma><space>%s%%<apos><space>%<space><openparen>blob_name<comma><space>int<openparen>round<openparen>offset<space>*<space>100<space><solidus><space>size<closeparen><closeparen><space><closeparen><space><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>block_size<space>=<space>min<openparen>PUT_BLOCK_CHUNK_SIZE<comma><space>size<space>-<space>offset<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>ids.append<openparen>self.put_block<openparen>container<comma><space>blob_name<comma><space>fin.read<openparen>block_size<closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.put_block_list<openparen>container<comma><space>blob_name<comma><space>ids<comma><space>xtra_headers<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>#self.info<openparen><apos>ID<space>LIST<space>COMMITTED:<space>%s<apos><space>%<space><apos><backslash>n<backslash>t<apos>.join<openparen>ids<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Done<space>uploading<space>%s<space>bytes<space>of<space>data<apos><space>%<space>size<closeparen><lf><space><space><space><space>def<space>getblocklist<openparen>self<comma><space>container<comma><space>blob_name<closeparen>:<lf><space><space><space><space><space><space><space><space>#print<space><apos>GET<space>http:<solidus><solidus>myaccount.blob.core.windows.net<solidus>movies<solidus>MOV1.avi?comp=blocklist<amp>blocklisttype=committed<space>HTTP<solidus>1.1<apos><lf><space><space><space><space><space><space><space><space>params<space>=<space><opencurly><apos>comp<apos>:<space><apos>blocklist<apos><comma><space><apos>blocklisttype<apos>:<space><apos>committed<apos><closecurly><lf><space><space><space><space><space><space><space><space>params<space>=<space>OrderedDict<openparen>sorted<openparen>params.items<openparen><closeparen><comma><space>key=lambda<space>t:<space>t<openbracket>0<closebracket><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>querystring<space>=<space><apos><amp><apos>.join<openparen>map<openparen>lambda<space>t:<space><apos><opencurly><closecurly>=<opencurly><closecurly><apos>.format<openparen>*t<closeparen><comma><space>params.items<openparen><closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>querystringencoded<space>=<space><apos><backslash>n<apos>.join<openparen>map<openparen>lambda<space>t:<space><apos><opencurly><closecurly>:<opencurly><closecurly><apos>.format<openparen>*t<closeparen><comma><space>params.items<openparen><closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>blob_path<space>=<space><apos><solidus><apos>.join<openparen><openparen>container<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s?%s<apos><space>%<space><openparen>self.account<comma><space>blob_path<comma>querystring<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen><closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>blob_path<comma><space>querystringencoded<space>=<space>querystringencoded<comma><space>http_method<space>=<space><apos>GET<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>self.session.get<openparen>url<comma><space>headers=headers<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>200:<lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>ERROR<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>ERROR<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>root<space>=<space>ElementTree.fromstring<openparen>r.content.decode<openparen><apos>utf-8-sig<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen>unicode<openparen>ElementTree.tostring<openparen>root<comma><space>encoding=<quote>utf8<quote><comma><space>method=<quote>xml<quote><closeparen><comma><space><apos>utf8<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>offset<space>=<space>0<lf><space><space><space><space><space><space><space><space>for<space>block<space>in<space>root.find<openparen><apos>CommittedBlocks<apos><closeparen>.iter<openparen><apos>Block<apos><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>name<space>=<space>base64.b64decode<openparen>block.find<openparen><apos>Name<apos><closeparen>.text<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>size<space>=<space>int<openparen>block.find<openparen><apos>Size<apos><closeparen>.text<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>yield<space>name<comma><space>offset<comma><space>size<lf><space><space><space><space><space><space><space><space><space><space><space><space>offset<space>+=<space>size<lf><space><space><space><space>def<space>getblock<openparen>self<comma><space>container<comma><space>blob_name<comma><space>offset<comma><space>length<closeparen>:<lf><space><space><space><space><space><space><space><space>range<space>=<space><apos>bytes=<opencurly><closecurly>-<opencurly><closecurly><apos>.format<openparen>offset<comma><space>offset<space>+<space>length<closeparen><lf><space><space><space><space><space><space><space><space>blob_path<space>=<space><apos><solidus><apos>.join<openparen><openparen>container<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>blob_path<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>xtra_headers=<opencurly><apos>x-ms-range<apos>:range<closecurly><closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>blob_path<comma><space>http_method<space>=<space><apos>GET<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>self.session.get<openparen>url<comma><space>headers=headers<comma><space>stream=True<closeparen><lf><space><space><space><space><space><space><space><space>if<space>not<space>r.status_code<space>in<space><openparen>200<comma><space>206<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><apos><apos><apos>https:<solidus><solidus>myaccount.blob.core.windows.net<solidus>mycontainer<solidus>myblob<apos><apos><apos><lf><space><space><space><space><space><space><space><space>for<space>chunk<space>in<space>r.iter_content<openparen>io.DEFAULT_BUFFER_SIZE<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>yield<space>chunk<lf><space><space><space><space>def<space>get_blob_properties<openparen>self<comma><space>container<comma><space>blob_name<closeparen>:<lf><space><space><space><space><space><space><space><space>#self.info<openparen><apos>getting<space>properties<space>for<space>blob<space><opencurly><closecurly><solidus><opencurly><closecurly><apos>.format<openparen>container<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus><opencurly><closecurly>.blob.core.windows.net<solidus><opencurly><closecurly><solidus><opencurly><closecurly><apos>.format<openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen><closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<space>=<space>blob_name<comma><space>http_method<space>=<space><apos>HEAD<apos><closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>self.session.head<openparen>url<comma><space>headers=headers<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>200:<lf><space><space><space><space><space><space><space><space><space><space><space><space>self.warn<openparen>r.status_code<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.warn<openparen>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.warn<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen>str<openparen>r.headers<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><apos><apos><apos><lf><space><space><space><space><space><space><space><space><opencurly><space><space><space><space><space><apos>content-length<apos>:<space><apos>1368582383<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-blob-type<apos>:<space><apos>AppendBlob<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>accept-ranges<apos>:<space><apos>bytes<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-blob-committed-block-count<apos>:<space><apos>327<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-version<apos>:<space><apos>2015-02-21<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>server<apos>:<space><apos>Windows-Azure-Blob<solidus>1.0<space>Microsoft-HTTPAPI<solidus>2.0<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-write-protection<apos>:<space><apos>false<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>last-modified<apos>:<space><apos>Thu<comma><space>23<space>Jun<space>2016<space>11:57:16<space>GMT<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>etag<apos>:<space><apos><quote>0x8D39B5D855ED87F<quote><apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-lease-state<apos>:<space><apos>available<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>date<apos>:<space><apos>Wed<comma><space>16<space>Nov<space>2016<space>17:59:04<space>GMT<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>content-type<apos>:<space><apos>application<solidus>octet-stream<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-request-id<apos>:<space><apos>414995ba-0001-0081-2433-40256f000000<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-lease-status<apos>:<space><apos>unlocked<apos><lf><space><space><space><space><space><space><space><space><closecurly><lf><space><space><space><space><space><space><space><space><apos><apos><apos><lf><space><space><space><space><space><space><space><space>return<space>map<openparen>r.headers.get<comma><space><openbracket><apos>last-modified<apos><comma><space><apos>x-ms-blob-type<apos><comma><space><apos>content-length<apos><comma><space><apos>content-type<apos><comma><space><apos>Content-MD5<apos><comma><space><apos>Accept-Ranges<apos><comma><space><apos>x-ms-blob-committed-block-count<apos><closebracket><closeparen><lf><space><space><space><space>def<space>download_blob<openparen>self<comma><space>container<comma><space>blob_name<comma><space>target_filepath<closeparen>:<lf><space><space><space><space><space><space><space><space><apos><apos><apos><lf><space><space><space><space><space><space><space><space>status<space>=<space>azure.download_blob<openparen>container<comma>blob_name<comma>target_filepath<closeparen><lf><space><space><space><space><space><space><space><space>TODO:<space>Eiter<space>get<space>blob<space>type<space>as<space>parameter<space>or<space>perform<space>a<space>Get<space>Blob<space>Properties<space>request<space>in<space>order<space>to<space>find<space>out<space>how<space>to<space>access<space>data.<space>Currently<space>only<space>large<space>blobs<space>that<space>have<space>an<space>accosiated<space>bloclist<space>works.<lf><space><space><space><space><space><space><space><space><apos><apos><apos><lf><space><space><space><space><space><space><space><space>last_mod<comma><space>blob_type<comma><space>content_length<comma><space>content_type<comma><space>content_md5<comma><space>accept_ranges<comma><space>committed_block_count<comma><space>=<space>self.get_blob_properties<openparen>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>content_length<space>=<space>int<openparen>content_length<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen>blob_type<closeparen><lf><space><space><space><space><space><space><space><space>nthreads<space>=<space>10<lf><space><space><space><space><space><space><space><space>readqueue<space>=<space>Queue<openparen>nthreads*2<closeparen><lf><space><space><space><space><space><space><space><space>writequeue<space>=<space>Queue<openparen>nthreads<closeparen><lf><space><space><space><space><space><space><space><space>target_filepath<space>=<space>os.path.normpath<openparen>target_filepath<closeparen><lf><space><space><space><space><space><space><space><space>target_folder<space>=<space>os.path.dirname<openparen>target_filepath<closeparen><lf><space><space><space><space><space><space><space><space>if<space>not<space>os.path.exists<openparen>target_folder<closeparen>:<space>os.makedirs<openparen>target_folder<closeparen><lf><space><space><space><space><space><space><space><space>fout<space>=<space>io.open<openparen>target_filepath<comma><space>mode=<apos>w+b<apos><closeparen><lf><space><space><space><space><space><space><space><space>def<space>get_data<openparen><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>while<space>True:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>blockid<comma><space>offset<comma><space>length<space>=<space>readqueue.get<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos><space>downloading<space>part<space><opencurly><closecurly><apos>.format<openparen>blockid<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>bytesread<space>=<space>0<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>for<space>chunk<space>in<space>self.getblock<openparen>container<comma><space>blob_name<comma><space>offset<comma><space>length<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>writequeue.put<openparen><openparen>chunk<comma><space>offset<space>+<space>bytesread<comma><space>len<openparen>chunk<closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>bytesread<space>+=<space>len<openparen>chunk<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>readqueue.task_done<openparen><closeparen><lf><space><space><space><space><space><space><space><space>def<space>write_data<openparen><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>while<space>True:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>data<comma><space>offset<comma><space>length<space>=<space>writequeue.get<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>fout.seek<openparen>offset<comma><space>0<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>fout.write<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>writequeue.task_done<openparen><closeparen><lf><space><space><space><space><space><space><space><space>for<space>i<space>in<space>range<openparen>nthreads<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>t<space>=<space>Thread<openparen>target=get_data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>t.daemon<space>=<space>True<lf><space><space><space><space><space><space><space><space><space><space><space><space>t.start<openparen><closeparen><lf><space><space><space><space><space><space><space><space>wt<space>=<space>Thread<openparen>target=write_data<closeparen><lf><space><space><space><space><space><space><space><space>wt.daemon<space>=<space>True<lf><space><space><space><space><space><space><space><space>wt.start<openparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>blob_type<space>==<space><apos>BlockBlob<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>committed_block_count:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>for<space>block<space>in<space>self.getblocklist<openparen>container=container<comma><space>blob_name=blob_name<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>readqueue.put<openparen>block<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>readqueue.put<openparen><openparen>uuid.uuid4<openparen><closeparen>.hex<comma><space>0<comma><space>content_length<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>elif<space>blob_type<space>==<space><apos>AppendBlob<apos><space>and<space>accept_ranges<space>==<space><apos>bytes<apos><space>and<space>committed_block_count:<lf><space><space><space><space><space><space><space><space><space><space><space><space>for<space>offset<space>in<space>range<openparen>0<comma><space>content_length<comma><space>PUT_BLOCK_CHUNK_SIZE<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>readqueue.put<openparen><openparen>uuid.uuid4<openparen><closeparen>.hex<comma><space>offset<comma><space>min<openparen>content_length-offset<comma><space>PUT_BLOCK_CHUNK_SIZE<closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>readqueue.join<openparen><closeparen><lf><space><space><space><space><space><space><space><space>writequeue.join<openparen><closeparen><lf><space><space><space><space><space><space><space><space>fout.flush<openparen><closeparen><lf><space><space><space><space><space><space><space><space>fout.close<openparen><closeparen><lf><space><space><space><space><space><space><space><space>return<space>last_mod<comma><space>blob_type<comma><space>content_length<comma><space>content_type<comma><space>content_md5<comma><space>accept_ranges<comma><space>committed_block_count<lf><space><space><space><space>def<space>list_blobs<openparen>self<comma><space>container<comma>prefix=None<comma>delimiter=<apos><solidus><apos><comma>recursive=False<closeparen>:<lf><space><space><space><space><space><space><space><space>#<space>https:<solidus><solidus>myaccount.blob.core.windows.net<solidus>mycontainer?restype=container<amp>comp=list<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen><closeparen><lf><space><space><space><space><space><space><space><space>#CubeSourceDataFile<solidus>coast<lf><space><space><space><space><space><space><space><space>#<lf><space><space><space><space><space><space><space><space>params<space>=<space><opencurly><apos>delimiter<apos><space>:<space>delimiter<comma><space><apos>comp<apos>:<space><apos>list<apos><comma><space><apos>restype<apos>:<space><apos>container<apos><closecurly><lf><space><space><space><space><space><space><space><space>if<space>prefix:<space>params<openbracket><apos>prefix<apos><closebracket><space>=<space>prefix<lf><space><space><space><space><space><space><space><space>params<space>=<space>OrderedDict<openparen>sorted<openparen>params.items<openparen><closeparen><comma><space>key=lambda<space>t:<space>t<openbracket>0<closebracket><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>querystring<space>=<space><apos><amp><apos>.join<openparen>map<openparen>lambda<space>t:<space><apos><opencurly><closecurly>=<opencurly><closecurly><apos>.format<openparen>*t<closeparen><comma><space>params.items<openparen><closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>querystringencoded<space>=<space><apos><backslash>n<apos>.join<openparen>map<openparen>lambda<space>t:<space><apos><opencurly><closecurly>:<opencurly><closecurly><apos>.format<openparen>*t<closeparen><comma><space>params.items<openparen><closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s?%s<apos><space>%<space><openparen>self.account<comma><space>container<comma>querystring<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>querystringencoded<space>=<space>querystringencoded<comma><space>http_method<space>=<space><apos>GET<apos><closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen><apos>Listing<space>blobs<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>self.session.get<openparen>url<comma><space>headers=headers<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>200:<lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>root<space>=<space>ElementTree.fromstring<openparen>r.content.decode<openparen><apos>utf-8-sig<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>for<space>blobprefix<space>in<space>root.iter<openparen><apos>BlobPrefix<apos><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>buf<space>=<space>StringIO<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>ElementTree.ElementTree<openparen>blobprefix<closeparen>.write<openparen>buf<comma><space>encoding=<apos>utf8<apos><comma><space>xml_declaration=False<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>yield<space><apos>BlobPrefix<apos><comma><space>prefix<comma><space>buf.getvalue<openparen><closeparen>.decode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>recursive:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>for<space>returntype<comma><space>used_prefix<comma><space>blob<space>in<space>self.list_blobs<openparen>container<comma><space>prefix=blobprefix.findtext<openparen><apos>Name<apos><closeparen><comma><space>delimiter=delimiter<comma>recursive=True<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>yield<space>returntype<comma><space>used_prefix<comma><space>blob<lf><space><space><space><space><space><space><space><space>for<space>blob<space>in<space>root.iter<openparen><apos>Blob<apos><closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>buf<space>=<space>StringIO<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>ElementTree.ElementTree<openparen>blob<closeparen>.write<openparen>buf<comma><space>encoding=<apos>utf8<apos><comma><space>xml_declaration=False<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>yield<space><apos>Blob<apos><comma><space>prefix<comma><space>buf.getvalue<openparen><closeparen>.decode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space>def<space>_authorize<openparen>self<comma><space>headers<comma><space>container_name<comma><space>blob_name<space>=<space>None<comma><space>querystringencoded<space>=<space>None<comma><space>http_method<space>=<space><apos>PUT<apos><closeparen>:<lf><space><space><space><space><space><space><space><space>fields<space>=<space><openbracket>http_method<closebracket><lf><space><space><space><space><space><space><space><space>field_order<space>=<space><openbracket><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><apos>Content-Encoding<apos><space><space><space><space>#<space><openparen>name<comma><space>always<space>produce<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>Content-Language<apos><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>Content-Length<apos><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>Content-MD5<apos><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>Content-Type<apos><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>Date<apos><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>If-Modified-Since<apos><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>If-None-Match<apos><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>If-Unmodified-Since<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>Range<apos><space><space><space><space><space><space><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>--unknown-filler-001--<apos><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><closebracket><lf><space><space><space><space><space><space><space><space>fields<space>+=<space><openbracket>headers<openbracket>x<closebracket><space>if<space>x<space>in<space>headers<space>and<space>not<space><openparen>x<space>==<space><apos>Content-Length<apos><space>and<space>headers<openbracket>x<closebracket><space>==<space><apos>0<apos><closeparen><space>else<space><apos><apos><space>for<space>x<space>in<space>field_order<closebracket><lf><space><space><space><space><space><space><space><space>fields<space>+=<space><openbracket>u<apos><opencurly><closecurly>:<opencurly><closecurly><apos>.format<openparen>x<comma><space>headers.get<openparen>x<closeparen>.strip<openparen><closeparen><closeparen><space>for<space>x<space>in<space>sorted<openparen>headers.keys<openparen><closeparen><closeparen><space>if<space>x.startswith<openparen><apos>x-ms-<apos><closeparen><closebracket><lf><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space>if<space>blob_name:<lf><space><space><space><space><space><space><space><space><space><space><space><space>fields.append<openparen><apos><solidus>%s<solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container_name<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>fields.append<openparen><apos><solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>querystringencoded:<space>fields.append<openparen>querystringencoded<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>u<apos><backslash>n<apos>.join<openparen>fields<closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen><apos>SIGNING<space>STRING:<apos><closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>signature<space>=<space>AzureAPI._sign_string<openparen>self.secret<space><comma><space>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen><apos>SIGNATURE:<apos><closeparen><lf><space><space><space><space><space><space><space><space>#self.info<openparen>signature<closeparen><lf><space><space><space><space><space><space><space><space>headers<openbracket><apos>Authorization<apos><closebracket><space>=<space><apos>SharedKey<space>%s:%s<apos><space>%<space><openparen>self.account<comma><space>signature<closeparen><lf><space><space><space><space><space><space><space><space>return<space>_string_to_sign<lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_create_headers<openparen>data<space>=<space><apos><apos><comma><space>xtra_headers=<opencurly><closecurly><closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space><opencurly><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><apos>Content-Length<apos>:<space>str<openparen>len<openparen>data<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-date<apos>:<space>AzureAPI._httpdate<openparen>datetime.datetime.utcnow<openparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-version<apos>:<space>AZ_VERSION<lf><space><space><space><space><space><space><space><space><space><space><space><space><closecurly><lf><space><space><space><space><space><space><space><space>headers.update<openparen>xtra_headers<closeparen><lf><space><space><space><space><space><space><space><space>return<space>OrderedDict<openparen>sorted<openparen>headers.items<openparen><closeparen><comma><space>key=lambda<space>t:<space>t<openbracket>0<closebracket><closeparen><closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_httpdate<openparen>dt<closeparen>:<lf><space><space><space><space><space><space><space><space><quote><quote><quote>Return<space>a<space>string<space>representation<space>of<space>a<space>date<space>according<space>to<space>RFC<space>1123<lf><space><space><space><space><space><space><space><space><openparen>HTTP<solidus>1.1<closeparen>.<lf><space><space><space><space><lf><space><space><space><space><space><space><space><space>The<space>supplied<space>date<space>must<space>be<space>in<space>UTC.<lf><space><space><space><space><lf><space><space><space><space><space><space><space><space><quote><quote><quote><lf><space><space><space><space><space><space><space><space>weekday<space>=<space><openbracket><quote>Mon<quote><comma><space><quote>Tue<quote><comma><space><quote>Wed<quote><comma><space><quote>Thu<quote><comma><space><quote>Fri<quote><comma><space><quote>Sat<quote><comma><space><quote>Sun<quote><closebracket><openbracket>dt.weekday<openparen><closeparen><closebracket><lf><space><space><space><space><space><space><space><space>month<space>=<space><openbracket><quote>Jan<quote><comma><space><quote>Feb<quote><comma><space><quote>Mar<quote><comma><space><quote>Apr<quote><comma><space><quote>May<quote><comma><space><quote>Jun<quote><comma><space><quote>Jul<quote><comma><space><quote>Aug<quote><comma><space><quote>Sep<quote><comma><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><quote>Oct<quote><comma><space><quote>Nov<quote><comma><space><quote>Dec<quote><closebracket><openbracket>dt.month<space>-<space>1<closebracket><lf><space><space><space><space><space><space><space><space>return<space><quote>%s<comma><space>%02d<space>%s<space>%04d<space>%02d:%02d:%02d<space>GMT<quote><space>%<space><openparen>weekday<comma><space>dt.day<comma><space>month<comma><lf><space><space><space><space><space><space><space><space><space><space><space><space>dt.year<comma><space>dt.hour<comma><space>dt.minute<comma><space>dt.second<closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_encode_base64<openparen>data<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>encoded<space>=<space>base64.b64encode<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space>return<space>encoded.decode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_decode_base64_to_bytes<openparen>data<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>return<space>base64.b64decode<openparen>data<closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_sign_string<openparen>key<comma><space>string_to_sign<comma><space>key_is_base64=True<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>key_is_base64:<lf><space><space><space><space><space><space><space><space><space><space><space><space>key<space>=<space>AzureAPI._decode_base64_to_bytes<openparen>key<closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>key<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>key<space>=<space>key.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>string_to_sign<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>string_to_sign<space>=<space>string_to_sign.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>signed_hmac_sha256<space>=<space>hmac.HMAC<openparen>key<comma><space>string_to_sign<comma><space>hashlib.sha256<closeparen><lf><space><space><space><space><space><space><space><space>digest<space>=<space>signed_hmac_sha256.digest<openparen><closeparen><lf><space><space><space><space><space><space><space><space>encoded_digest<space>=<space>AzureAPI._encode_base64<openparen>digest<closeparen><lf><space><space><space><space><space><space><space><space>return<space>encoded_digest    OUTPUT PYOUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_PythonCaller_OUTPUT"

# -------------------------------------------------------------------------
Lookup $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_AttributeFilterLut   success ok   fail ok   "" notok   ENCODED

FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_PythonCaller_OUTPUT"    TEST @Lookup($(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_AttributeFilterLut,_azure_blob_uploader_status,ENCODED_ATTR) == "ok"    OUTPUT PASSED FEATURE_TYPE * @FeatureType(SET_FROM_ATTR, _azure_blob_uploader_status, $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter)    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_NullFilter    INPUT FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>    TEST _azure_blob_uploader_status ATTRIBUTE_VALUE_NULL "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_MissingFilter    INPUT FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>    TEST _azure_blob_uploader_status ATTRIBUTE_IS_MISSING "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_BlankFilter    INPUT FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>    TEST _azure_blob_uploader_status ATTRIBUTE_IS_EMPTY "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<EMPTY>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>



# -------------------------------------------------------------------------

INCLUDE [    set macroLine "MACRO $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_fail"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<EMPTY>"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringSearcher_NOT_MATCHED"    OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"        @RemoveAttributes(fme_encoded,_azure_blob_uploader_blob_name,_azure_blob_uploader_key,_azure_blob_uploader_src_data,_azure_blob_uploader_src_type,_azure_blob_uploader_container,_azure_blob_uploader_status,_azure_blob_uploader_storage_account)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP)")

# -------------------------------------------------------------------------

INCLUDE [    set macroLine "MACRO $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_success"    OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_OUTPUT"        @RemoveAttributes(fme_encoded,_azure_blob_uploader_blob_name,_azure_blob_uploader_key,_azure_blob_uploader_src_data,_azure_blob_uploader_error_message,_azure_blob_uploader_src_type,_azure_blob_uploader_container,_azure_blob_uploader_status,_azure_blob_uploader_storage_account)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_LIST_EXP)")

FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_Success1480086354 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Success"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_Fail1480086354 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Fail"
INCLUDE [puts {MACRO WB_CURRENT_CONTEXT $(WB_OLD_CONTEXT_$(AzureBlobUploader_WORKSPACE_NAME))}]
#! <?xml version="1.0" encoding="UTF-8" ?>
#! <TRANSFORMER
# TRANSFORMER_BEGIN AzureBlobUploader,3,"Web Services",0f8ae37e-4004-486d-862b-f3cea02c48fc,"Linked by Default",No,NO_PARALLELISM,,No,16177,YES,No
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Uploads a file to Azure using the Azure Blob Service REST API (https://msdn.microsoft.com/en-us/library/azure/dd135733.aspx)</p>
# <p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">
#     <br/>
# </p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">A key is needed as well as the name of the storage account.</p>
# <p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">
#     <br/>
# </p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Source data can be either from an attribute or a filepath.</p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Maximum file size is roughly 195 GB. </p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Files larger than 64 MB will be uploaded in chunks of 4 MB. </p>
# 
# TRANSFORMER_END
#!   VIEW_POSITION="-496.88 1090.64"
#!   LAST_SAVE_BUILD="FME(R) 2016.0.1.1 (20160224 - Build 16177 - WIN64)"
#!   TITLE="AzureBlobUploader"
#!   MAX_LOOP_ITERATIONS=""
#!   DESCRIPTION="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Uploads a file to Azure using the Azure Blob Service REST API (https://msdn.microsoft.com/en-us/library/azure/dd135733.aspx)&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;A key is needed as well as the name of the storage account.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Source data can be either from an attribute or a filepath.&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Maximum file size is roughly 195 GB. &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Files larger than 64 MB will be uploaded in chunks of 4 MB. &lt;/p&gt;&#10;"
#!   LAST_SAVE_DATE="2016-08-08T13:59:51"
#!   SHOW_ANNOTATIONS="true"
#!   REQUIREMENTS="&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;"
#!   PASSWORD=""
#!   FME_PROCESS_GROUPS_ORDERED="No"
#!   ZOOM_SCALE="100"
#!   LEGAL_TERMS_CONDITIONS="&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;"
#!   BLOCKED_LOOPING="No"
#!   DOC_TOP_LEFT="-76.9399 -818.758"
#!   XFORM_DEPRECATED="No"
#!   WORKSPACE_VERSION="1"
#!   CATEGORY="Web Services"
#!   FME_BUILD_NUM="16177"
#!   FMX_INSERT_MODE="Linked by Default"
#!   HISTORY="2016-06-27,peter.segerstedt&lt;at&gt;eea.europa.eu,Original&lt;space&gt;definition,2016-08-08,peter.segerstedt&lt;at&gt;eea.europa.eu,python&lt;space&gt;code&lt;space&gt;now&lt;space&gt;shares&lt;space&gt;common&lt;space&gt;base&lt;space&gt;with&lt;space&gt;other&lt;space&gt;AzureBlob-transformers"
#!   FME_DOCUMENT_PRIORGUID=""
#!   FME_LINKED_TRANSFORMER_VERSION="3"
#!   FME_PROCESS_COUNT="NO_PARALLELISM"
#!   USAGE="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Storage account:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the storage account. Look for this under the portal.azure.com.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-weight:600;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Access key:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the access key for the blob inside Azure. You can find this when you select the storage inside the protal.azure.com website, go to settings and then search for &quot;Access keys&quot;.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Use access keys to authenticate your applications when making requests to this Azure storage account. Store your access keys securely - for example, using Azure Key Vault - and don&apos;t share them. We recommend regenerating your access keys regularly. You are provided two access keys so that you can maintain connections using one key while regenerating the other. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Container name:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The storage countainer name. These are listed directly under the storage account pannel. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Blob name:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The name of the blob you are about to create. The filename of the source data will be used if this was not provided. You can create folders by simply using the &apos;/&apos; for example &quot;folder1/folder2/blobname&quot;. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Upload from:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Describes what is provided inside the &quot;source data&quot; attribute. When set to &quot;AttributeValue&quot; it means that the source data is a binary file. When set to &quot;file&quot; it means that the source data is a path towards a file.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;This transformer currently only stores &quot;block blobs&quot;&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;block blob: &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Block blobs let you upload large blobs efficiently. Block blobs are comprised of blocks, each of which is identified by a block ID. You create or modify a block blob by writing a set of blocks and committing them by their block IDs. Each block can be a different size, up to a maximum of 4 MB, and a block blob can include up to 50,000 blocks. The maximum size of a block blob is therefore slightly more than 195 GB (4 MB X 50,000 blocks). If you are writing a block blob that is no more than 64 MB in size, you can upload it in its entirety with a single write operation&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;append blob:&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;An append blob is comprised of blocks and is optimized for append operations. When you modify an append blob, blocks are added to the end of the blob only, via the &lt;a href=&quot;https://msdn.microsoft.com/en-us/library/azure/mt427365.aspx&quot;&gt;&#10;        &lt;span style=&quot; text-decoration: underline; color:#0000ff;&quot;&gt;Append Block &lt;/span&gt;&#10;    &lt;/a&gt;operation. Updating or deleting of existing blocks is not supported. Unlike a block blob, an append blob does not expose its block IDs. &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Each block in an append blob can be a different size, up to a maximum of 4 MB, and an append blob can include up to 50,000 blocks. The maximum size of an append blob is therefore slightly more than 195 GB (4 MB X 50,000 blocks).&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;page blob:&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Page blobs are a collection of 512-byte pages optimized for random read and write operations. To create a page blob, you initialize the page blob and specify the maximum size the page blob will grow. To add or update the contents of a page blob, you write a page or pages by specifying an offset and a range that align to 512-byte page boundaries. A write to a page blob can overwrite just one page, some pages, or up to 4 MB of the page blob. Writes to page blobs happen in-place and are immediately committed to the blob. The maximum size for a page blob is 1 TB. &lt;/p&gt;&#10;"
#!   FME_DOCUMENT_GUID="0f8ae37e-4004-486d-862b-f3cea02c48fc"
#!   WARN_INVALID_XFORM_PARAM="Yes"
#!   REQUIREMENTS_KEYWORD="none"
#!   DOC_EXTENTS="3553.91 256.252"
#!   SHOW_INFO_NODES="true"
#!   FME_PROCESS_GROUP_BY=""
#!   FME_SERVER_SERVICES=""
#!   ITERATION_COUNT_ATTR=""
#!   ATTR_TYPE_ENCODING="SDF"
#! >
#! <DATASETS>
#! </DATASETS>
#! <DATA_TYPES>
#! </DATA_TYPES>
#! <GEOM_TYPES>
#! </GEOM_TYPES>
#! <FEATURE_TYPES>
#! </FEATURE_TYPES>
#! <FMESERVER>
#! </FMESERVER>
#! <GLOBAL_PARAMETERS>
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI PASSWORD_OR_ATTR KEY Access key:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="true"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI CHOICE_OR_ATTR SRC_TYPE AttributeValue%FilePath Upload From:"
#!   DEFAULT_VALUE="AttributeValue"
#!   IS_STAND_ALONE="true"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR ACCOUNT &quot; &quot; Storage account:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR CONTAINER &quot; &quot; Container:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR BLOB_NAME &quot; &quot; Blob Name:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR SRC_DATA &quot; &quot; Source Data:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! </GLOBAL_PARAMETERS>
#! <COMMENTS>
#! </COMMENTS>
#! <CONSTANTS>
#! </CONSTANTS>
#! <BOOKMARKS>
#! </BOOKMARKS>
#! <TRANSFORMERS>
#! <TRANSFORMER
#!   IDENTIFIER="16"
#!   TYPE="StringReplacer"
#!   VERSION="4"
#!   POSITION="1223.32 -562.506"
#!   BOUNDING_RECT="1223.32 -562.506 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="SRC_ATTRS" PARM_VALUE="_azure_blob_uploader_blob_name"/>
#!     <XFORM_PARM PARM_NAME="NO_MATCH_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NO_MATCH" PARM_VALUE="_FME_NO_OP_"/>
#!     <XFORM_PARM PARM_NAME="REGEXP" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="FIND_TEXT" PARM_VALUE="&lt;backslash&gt;"/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="StringReplacer"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REPLACE_TEXT" PARM_VALUE="&lt;solidus&gt;"/>
#!     <XFORM_PARM PARM_NAME="CASE" PARM_VALUE="NO"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="10"
#!   TYPE="AttributeCreator"
#!   VERSION="8"
#!   POSITION="491.13 -562.506"
#!   BOUNDING_RECT="491.13 -562.506 618.756 71"
#!   ORDER="5e+14"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_VALUE" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="NUM_PRIOR_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="ATTR_TABLE" PARM_VALUE="&quot;&quot; _azure_blob_uploader_storage_account SET_TO $(ACCOUNT)  _azure_blob_uploader_key SET_TO $(KEY)  _azure_blob_uploader_container SET_TO $(CONTAINER)  _azure_blob_uploader_blob_name SET_TO $(BLOB_NAME)  _azure_blob_uploader_src_type SET_TO $(SRC_TYPE)  _azure_blob_uploader_src_data SET_TO $(SRC_DATA)"/>
#!     <XFORM_PARM PARM_NAME="MULTI_FEATURE_MODE" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_HANDLING" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NUM_SUBSEQUENT_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="FetchParamsAttributeCreator"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_MODE_DISPLAY" PARM_VALUE="No Substitution"/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_GRP" PARM_VALUE=""/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="11"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="2937.03 -562.506"
#!   BOUNDING_RECT="2937.03 -562.506 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_azure_blob_uploader_blob_name,_azure_blob_uploader_key,_azure_blob_uploader_src_data,_azure_blob_uploader_error_message,_azure_blob_uploader_src_type,_azure_blob_uploader_container,_azure_blob_uploader_status,_azure_blob_uploader_storage_account"/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="12"
#!   TYPE="AttributeFilter"
#!   VERSION="4"
#!   POSITION="2343.28 -562.506"
#!   BOUNDING_RECT="2343.28 -562.506 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="success"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="&lt;EMPTY&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <OUTPUT_FEAT NAME="&lt;MISSING&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="2"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <OUTPUT_FEAT NAME="&lt;NULL&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="3"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <OUTPUT_FEAT NAME="&lt;UNFILTERED&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="4"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <OUTPUT_FEAT NAME="fail"/>
#!     <FEAT_COLLAPSED COLLAPSED="5"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_PARM PARM_NAME="ATTR_NAME" PARM_VALUE="_azure_blob_uploader_status"/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeFilter"/>
#!     <XFORM_PARM PARM_NAME="ATTR_VALUES" PARM_VALUE="success,&lt;lt&gt;EMPTY&lt;gt&gt;,&lt;lt&gt;MISSING&lt;gt&gt;,&lt;lt&gt;NULL&lt;gt&gt;,&lt;lt&gt;UNFILTERED&lt;gt&gt;,fail"/>
#!     <XFORM_PARM PARM_NAME="ATTR_GROUP" PARM_VALUE=""/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="13"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="2937.03 -818.758"
#!   BOUNDING_RECT="2937.03 -818.758 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_azure_blob_uploader_blob_name,_azure_blob_uploader_key,_azure_blob_uploader_src_data,_azure_blob_uploader_src_type,_azure_blob_uploader_container,_azure_blob_uploader_status,_azure_blob_uploader_storage_account"/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover_2"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="14"
#!   TYPE="PythonCaller"
#!   VERSION="4"
#!   POSITION="1755.77 -562.506"
#!   BOUNDING_RECT="1755.77 -562.506 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_azure_blob_uploader_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="PYTHONSOURCE" PARM_VALUE="from&lt;space&gt;fmeobjects&lt;space&gt;import&lt;space&gt;FMELogFile&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;comma&gt;&lt;space&gt;FME_WARN&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;lf&gt;from&lt;space&gt;cStringIO&lt;space&gt;import&lt;space&gt;StringIO&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;UploadFeatureProcessor&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile&lt;space&gt;=&lt;space&gt;FMELogFile&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;Make&lt;space&gt;sure&lt;space&gt;to&lt;space&gt;change&lt;space&gt;if&lt;space&gt;Custom&lt;space&gt;transformer&lt;space&gt;is&lt;space&gt;renamed&lt;space&gt;&lt;openparen&gt;not&lt;space&gt;transformer&lt;space&gt;instance&lt;space&gt;name&lt;space&gt;-&lt;space&gt;that&lt;apos&gt;s&lt;space&gt;what&lt;space&gt;we&lt;apos&gt;re&lt;space&gt;fetching&lt;closeparen&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.xformer_name&lt;space&gt;=&lt;space&gt;FME_MacroValues&lt;openbracket&gt;&lt;apos&gt;AzureBlobUploader_WORKSPACE_NAME&lt;apos&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;info&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_WARN&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;while&lt;space&gt;developing&lt;space&gt;for&lt;space&gt;popping&lt;space&gt;out&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;input&lt;openparen&gt;self&lt;comma&gt;feature&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;try:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;account&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_storage_account&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;secret&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_key&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;azure&lt;space&gt;=&lt;space&gt;AzureAPI&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;self.logfile&lt;comma&gt;&lt;space&gt;logprefix&lt;space&gt;=&lt;space&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;loglevel&lt;space&gt;=&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;container&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_container&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_blob_name&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin&lt;space&gt;=&lt;space&gt;None&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;src_type&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_src_type&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;src_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;AttributeValue&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_src_data&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin&lt;space&gt;=&lt;space&gt;StringIO&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;elif&lt;space&gt;src_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;FilePath&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin&lt;space&gt;=&lt;space&gt;open&lt;openparen&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_src_data&lt;apos&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;rb&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;&lt;apos&gt;Unrecognized&lt;space&gt;source&lt;space&gt;type&lt;space&gt;`%s`&lt;apos&gt;&lt;space&gt;%&lt;space&gt;src_type&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#####&lt;space&gt;INSERT&lt;space&gt;CODE&lt;space&gt;HERE&lt;space&gt;TO&lt;space&gt;MANIPULATE&lt;space&gt;CONTENT&lt;space&gt;BEFORE&lt;space&gt;UPLOAD&lt;space&gt;#####&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;azure.put_blob&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.close&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;success&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;except&lt;space&gt;Exception&lt;space&gt;as&lt;space&gt;e:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;fail&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_azure_blob_uploader_error_message&lt;apos&gt;&lt;comma&gt;&lt;space&gt;str&lt;openparen&gt;e&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logException&lt;openparen&gt;e&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.pyoutput&lt;openparen&gt;feature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;close&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;del&lt;space&gt;self.logfile&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;#####&lt;space&gt;Code&lt;space&gt;below&lt;space&gt;*should*&lt;space&gt;be&lt;space&gt;more&lt;space&gt;or&lt;space&gt;less&lt;space&gt;standalone&lt;space&gt;&lt;openparen&gt;no&lt;space&gt;bindings&lt;space&gt;to&lt;space&gt;fme&lt;closeparen&gt;&lt;space&gt;#####&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;import&lt;space&gt;os&lt;lf&gt;import&lt;space&gt;requests&lt;lf&gt;from&lt;space&gt;collections&lt;space&gt;import&lt;space&gt;OrderedDict&lt;lf&gt;import&lt;space&gt;datetime&lt;lf&gt;&lt;lf&gt;&lt;lf&gt;import&lt;space&gt;base64&lt;lf&gt;import&lt;space&gt;uuid&lt;lf&gt;import&lt;space&gt;hashlib&lt;lf&gt;import&lt;space&gt;hmac&lt;lf&gt;import&lt;space&gt;sys&lt;lf&gt;&lt;lf&gt;PUT_BLOB_LIMIT&lt;space&gt;=&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;64&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;64&lt;space&gt;MB&lt;lf&gt;PUT_BLOCK_CHUNK_SIZE&lt;space&gt;=&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;4&lt;space&gt;#&lt;space&gt;4&lt;space&gt;MB&lt;lf&gt;AZ_VERSION&lt;space&gt;=&lt;space&gt;&lt;apos&gt;2015-02-21&lt;apos&gt;&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;StdoutLogger&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;simple&lt;space&gt;log&lt;space&gt;class&lt;space&gt;to&lt;space&gt;mimic&lt;space&gt;fme&lt;space&gt;api&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;logMessageString&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;msg&lt;comma&gt;&lt;space&gt;level&lt;space&gt;=&lt;space&gt;0&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;print&lt;space&gt;msg&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;logException&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;e&lt;comma&gt;&lt;space&gt;level&lt;space&gt;=&lt;space&gt;0&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logMessageString&lt;openparen&gt;str&lt;openparen&gt;e&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;level&lt;closeparen&gt;&lt;lf&gt;class&lt;space&gt;AzureAPI&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;sys.version_info&lt;space&gt;&lt;lt&gt;&lt;space&gt;&lt;openparen&gt;3&lt;comma&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;from&lt;space&gt;collections&lt;space&gt;import&lt;space&gt;Iterable&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_unicode_type&lt;space&gt;=&lt;space&gt;unicode&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;from&lt;space&gt;collections.abc&lt;space&gt;import&lt;space&gt;Iterable&lt;space&gt;#&lt;space&gt;TODO:&lt;space&gt;this&lt;space&gt;code&lt;space&gt;was&lt;space&gt;found&lt;space&gt;somewhere&lt;space&gt;but&lt;space&gt;its&lt;space&gt;logic&lt;space&gt;is&lt;space&gt;not&lt;space&gt;clear&lt;space&gt;to&lt;space&gt;me...&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_unicode_type&lt;space&gt;=&lt;space&gt;str&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;logfile&lt;space&gt;=&lt;space&gt;StdoutLogger&lt;openparen&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;logprefix&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;comma&gt;&lt;space&gt;loglevel&lt;space&gt;=&lt;space&gt;0&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile&lt;space&gt;=&lt;space&gt;logfile&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logprefix&lt;space&gt;=&lt;space&gt;logprefix&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.loglevel&lt;space&gt;=&lt;space&gt;loglevel&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.account&lt;space&gt;=&lt;space&gt;account&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.secret&lt;space&gt;=&lt;space&gt;secret&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;info&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.logprefix&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;self.loglevel&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;append_block&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=appendblock&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Appending&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp:appendblock&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;ERROR&lt;space&gt;status&lt;space&gt;%s:&lt;space&gt;`%s`&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;r.status_code&lt;comma&gt;&lt;space&gt;_string_to_sign&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_block&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;block_id&lt;space&gt;=&lt;space&gt;base64.b64encode&lt;openparen&gt;uuid.uuid4&lt;openparen&gt;&lt;closeparen&gt;.hex&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#https:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;mycontainer&lt;solidus&gt;myblob?comp=block&lt;amp&gt;blockid=id&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=block&lt;amp&gt;blockid=%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_id&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;block&lt;space&gt;of&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;blockid:%s&lt;backslash&gt;ncomp:block&lt;apos&gt;&lt;space&gt;%&lt;space&gt;block_id&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;block_id&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_block_list&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_list&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;list_fragments&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;s:&lt;space&gt;&lt;apos&gt;&lt;lt&gt;Uncommitted&lt;gt&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;lt&gt;&lt;solidus&gt;Uncommitted&lt;gt&gt;&lt;apos&gt;.format&lt;openparen&gt;s&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;block_list&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;lt&gt;?xml&lt;space&gt;version=&lt;quote&gt;1.0&lt;quote&gt;&lt;space&gt;encoding=&lt;quote&gt;utf-8&lt;quote&gt;?&lt;gt&gt;&lt;lt&gt;BlockList&lt;gt&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;lt&gt;&lt;solidus&gt;BlockList&lt;gt&gt;&lt;apos&gt;.format&lt;openparen&gt;list_fragments&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=blocklist&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp:blocklist&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_blob&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.seek&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;os.SEEK_END&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;size&lt;space&gt;=&lt;space&gt;fin.tell&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.seek&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;os.SEEK_SET&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;size&lt;space&gt;&lt;lt&gt;&lt;space&gt;PUT_BLOB_LIMIT:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;fin.read&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ids&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;offset&lt;space&gt;in&lt;space&gt;range&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;size&lt;comma&gt;&lt;space&gt;PUT_BLOCK_CHUNK_SIZE&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;`%s`&lt;comma&gt;&lt;space&gt;%s%%&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;blob_name&lt;comma&gt;&lt;space&gt;int&lt;openparen&gt;round&lt;openparen&gt;offset&lt;space&gt;*&lt;space&gt;100&lt;space&gt;&lt;solidus&gt;&lt;space&gt;size&lt;closeparen&gt;&lt;closeparen&gt;&lt;space&gt;&lt;closeparen&gt;&lt;space&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;block_size&lt;space&gt;=&lt;space&gt;min&lt;openparen&gt;PUT_BLOCK_CHUNK_SIZE&lt;comma&gt;&lt;space&gt;size&lt;space&gt;-&lt;space&gt;offset&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ids.append&lt;openparen&gt;self.put_block&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin.read&lt;openparen&gt;block_size&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.put_block_list&lt;openparen&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;ids&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;&lt;apos&gt;ID&lt;space&gt;LIST&lt;space&gt;COMMITTED:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;backslash&gt;t&lt;apos&gt;.join&lt;openparen&gt;ids&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Done&lt;space&gt;uploading&lt;space&gt;%s&lt;space&gt;bytes&lt;space&gt;of&lt;space&gt;data&lt;apos&gt;&lt;space&gt;%&lt;space&gt;size&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;list_blobs&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;container&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;https:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;mycontainer?restype=container&lt;amp&gt;comp=list&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;AzureAPI._create_headers&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s?restype=container&lt;amp&gt;comp=list&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;self._authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;&lt;apos&gt;comp:list&lt;backslash&gt;nrestype:container&lt;apos&gt;&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;GET&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;block&lt;space&gt;of&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.get&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;200:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;r.content&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_authorize&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;headers&lt;comma&gt;&lt;space&gt;container_name&lt;comma&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;None&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;None&lt;comma&gt;&lt;space&gt;http_method&lt;space&gt;=&lt;space&gt;&lt;apos&gt;PUT&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;content_length&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Content-Length&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;!=&lt;space&gt;&lt;apos&gt;0&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;content_length&lt;space&gt;=&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Content-Length&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;http_method&lt;space&gt;#&lt;space&gt;VERB&lt;space&gt;&lt;openparen&gt;http-method&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-Encoding&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-Language&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;content_length&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-MD5&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Date&lt;apos&gt;&lt;comma&gt;&lt;apos&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;Date&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-Modified-Since&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-None-Match&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-Unmodified-Since&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Range&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;?&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;?&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;comma&gt;&lt;space&gt;None&lt;closeparen&gt;:&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-date:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-date&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-version:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;blob_name:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container_name&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;container_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;querystringencoded:&lt;space&gt;fields.append&lt;openparen&gt;querystringencoded&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;.join&lt;openparen&gt;fields&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;signature&lt;space&gt;=&lt;space&gt;AzureAPI._sign_string&lt;openparen&gt;self.secret&lt;space&gt;&lt;comma&gt;&lt;space&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;Authorization&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;SharedKey&lt;space&gt;%s:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.account&lt;comma&gt;&lt;space&gt;signature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;_string_to_sign&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_create_headers&lt;openparen&gt;data&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;OrderedDict&lt;openparen&gt;&lt;opencurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;Content-Length&lt;apos&gt;:&lt;space&gt;str&lt;openparen&gt;len&lt;openparen&gt;data&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-date&lt;apos&gt;:&lt;space&gt;AzureAPI._httpdate&lt;openparen&gt;datetime.datetime.utcnow&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;:&lt;space&gt;AZ_VERSION&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closecurly&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_httpdate&lt;openparen&gt;dt&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;Return&lt;space&gt;a&lt;space&gt;string&lt;space&gt;representation&lt;space&gt;of&lt;space&gt;a&lt;space&gt;date&lt;space&gt;according&lt;space&gt;to&lt;space&gt;RFC&lt;space&gt;1123&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;openparen&gt;HTTP&lt;solidus&gt;1.1&lt;closeparen&gt;.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;The&lt;space&gt;supplied&lt;space&gt;date&lt;space&gt;must&lt;space&gt;be&lt;space&gt;in&lt;space&gt;UTC.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;weekday&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;quote&gt;Mon&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Tue&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Wed&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Thu&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Fri&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sat&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sun&lt;quote&gt;&lt;closebracket&gt;&lt;openbracket&gt;dt.weekday&lt;openparen&gt;&lt;closeparen&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;month&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;quote&gt;Jan&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Feb&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Mar&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Apr&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;May&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Jun&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Jul&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Aug&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sep&lt;quote&gt;&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;Oct&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Nov&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Dec&lt;quote&gt;&lt;closebracket&gt;&lt;openbracket&gt;dt.month&lt;space&gt;-&lt;space&gt;1&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;&lt;quote&gt;%s&lt;comma&gt;&lt;space&gt;%02d&lt;space&gt;%s&lt;space&gt;%04d&lt;space&gt;%02d:%02d:%02d&lt;space&gt;GMT&lt;quote&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;weekday&lt;comma&gt;&lt;space&gt;dt.day&lt;comma&gt;&lt;space&gt;month&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;dt.year&lt;comma&gt;&lt;space&gt;dt.hour&lt;comma&gt;&lt;space&gt;dt.minute&lt;comma&gt;&lt;space&gt;dt.second&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_encode_base64&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;encoded&lt;space&gt;=&lt;space&gt;base64.b64encode&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;encoded.decode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_decode_base64_to_bytes&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;base64.b64decode&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;at&gt;staticmethod&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;_sign_string&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;string_to_sign&lt;comma&gt;&lt;space&gt;key_is_base64=True&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;key_is_base64:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;key&lt;space&gt;=&lt;space&gt;AzureAPI._decode_base64_to_bytes&lt;openparen&gt;key&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;key&lt;space&gt;=&lt;space&gt;key.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;string_to_sign&lt;comma&gt;&lt;space&gt;AzureAPI._unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;string_to_sign&lt;space&gt;=&lt;space&gt;string_to_sign.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;signed_hmac_sha256&lt;space&gt;=&lt;space&gt;hmac.HMAC&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;string_to_sign&lt;comma&gt;&lt;space&gt;hashlib.sha256&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;digest&lt;space&gt;=&lt;space&gt;signed_hmac_sha256.digest&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;encoded_digest&lt;space&gt;=&lt;space&gt;AzureAPI._encode_base64&lt;openparen&gt;digest&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;encoded_digest&lt;lf&gt;"/>
#!     <XFORM_PARM PARM_NAME="ADVANCED_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NEW_ATTRIBUTES" PARM_VALUE="_azure_blob_uploader_status _azure_blob_uploader_error_message"/>
#!     <XFORM_PARM PARM_NAME="HIDE_ATTRIBUTES" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="PythonCaller"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PYTHONSYMBOL" PARM_VALUE="UploadFeatureProcessor"/>
#! </TRANSFORMER>
#! </TRANSFORMERS>
#! <SUBDOCUMENT_IOS>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="6"
#!   NAME="Input"
#!   POSITION="-76.9399 -562.506"
#!   BOUNDING_RECT="-76.9399 -562.506 -1 -1"
#!   COLLAPSED="true"
#!   PUBLISHED="true"
#!   IS_SOURCE="true"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="7"
#!   NAME="Success"
#!   POSITION="3476.97 -562.506"
#!   BOUNDING_RECT="3476.97 -562.506 -1 -1"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="8"
#!   NAME="Fail"
#!   POSITION="3476.97 -818.758"
#!   BOUNDING_RECT="3476.97 -818.758 -1 -1"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! </SUBDOCUMENT_IOS>
#! <FEAT_LINKS>
#! <FEAT_LINK
#!   IDENTIFIER="17"
#!   SOURCE_NODE="10"
#!   TARGET_NODE="16"
#!   SOURCE_PORT_DESC="fo 0"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="15"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="11"
#!   SOURCE_PORT_DESC="fo 0"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="18"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 5"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="20"
#!   SOURCE_NODE="14"
#!   TARGET_NODE="12"
#!   SOURCE_PORT_DESC="fo 0"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="21"
#!   SOURCE_NODE="6"
#!   TARGET_NODE="10"
#!   SOURCE_PORT_DESC="0"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="22"
#!   SOURCE_NODE="16"
#!   TARGET_NODE="14"
#!   SOURCE_PORT_DESC="fo 0"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="19"
#!   SOURCE_NODE="11"
#!   TARGET_NODE="7"
#!   SOURCE_PORT_DESC="fo 0"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="23"
#!   SOURCE_NODE="13"
#!   TARGET_NODE="8"
#!   SOURCE_PORT_DESC="fo 0"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="24"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 1"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="25"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 2"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="26"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 3"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="27"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="13"
#!   SOURCE_PORT_DESC="fo 4"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! </FEAT_LINKS>
#! <BREAKPOINTS>
#! </BREAKPOINTS>
#! <ATTR_LINKS>
#! </ATTR_LINKS>
#! <SUBDOCUMENTS>
#! </SUBDOCUMENTS>
#! <LOOKUP_TABLES>
#! </LOOKUP_TABLES>
#! </TRANSFORMER>
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_KEY 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_SRC_TYPE AttributeValue
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_ACCOUNT 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_CONTAINER 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_BLOB_NAME 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_SRC_DATA 
#! START_HEADER
#! END_HEADER

LOG_FILTER_MASK -1
DEFAULT_MACRO WB_CURRENT_CONTEXT
DEFAULT_MACRO AzureBlobUploader_WORKSPACE_NAME ""
INCLUDE [puts {MACRO WB_OLD_CONTEXT_$(AzureBlobUploader_WORKSPACE_NAME) $(WB_CURRENT_CONTEXT)};          puts {MACRO WB_CURRENT_CONTEXT $(AzureBlobUploader_WORKSPACE_NAME)}]
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_Input1470657591 Input Splitter"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Input"   OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Input"
# -------------------------------------------------------------------------

FACTORY_DEF * AttrSetFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_FetchParamsAttributeCreator    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Input"    MULTI_FEATURE_MODE NO 	 NULL_ATTR_MODE NO_OP 	 ATTRSET_CREATE_DIRECTIVES _PROPAGATE_MISSING_FDIV 	 ATTR_ACTION "" "_azure_blob_uploader_storage_account" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_ACCOUNT)"     ATTR_ACTION "" "_azure_blob_uploader_key" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_KEY$encode)"     ATTR_ACTION "" "_azure_blob_uploader_container" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_CONTAINER)"     ATTR_ACTION "" "_azure_blob_uploader_blob_name" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_BLOB_NAME)"     ATTR_ACTION "" "_azure_blob_uploader_src_type" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_SRC_TYPE$encode)"     ATTR_ACTION "" "_azure_blob_uploader_src_data" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_SRC_DATA)"    OUTPUT OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_FetchParamsAttributeCreator_OUTPUT"


# -------------------------------------------------------------------------

MACRO casemac
INCLUDE [ if { {NO} == {NO} } { puts {MACRO casemac -nocase}} ]
Tcl2 proc $(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_db03922c_e760_476f_8a42_c734c9191a9a1_replacer { findText replaceText invalidValue} {     set attrs [split \"_azure_blob_uploader_blob_name\" {,}];     set findValue [FME_DecodeText $findText];     set replaceValue [FME_DecodeText $replaceText];     foreach attr $attrs {       set attrVal [FME_GetAttribute $attr];       set noMatch true;       if {{NO} == {YES}} {         set newAttrVal [FME_ReplaceRegex $(casemac) $findValue $attrVal $replaceValue];       } else {         set newAttrVal [string map $(casemac) [list $findValue $replaceValue] $attrVal];       };       if { $newAttrVal ne $attrVal } {         set noMatch false;         FME_SetAttribute $attr $newAttrVal;       };       if {$noMatch} {          if { $invalidValue == {FME_NULL_VALUE} } {             FME_SetAttributeNull $attr;          } elseif { $invalidValue != {_FME_NO_OP_} }  {             FME_SetAttribute $attr [FME_DecodeText $invalidValue];          };       };     }; }
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_FetchParamsAttributeCreator_OUTPUT"    OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_OUTPUT"         @Tcl2("$(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_db03922c_e760_476f_8a42_c734c9191a9a1_replacer {<backslash>} {<solidus>} {_FME_NO_OP_}")

# -------------------------------------------------------------------------


FME_PYTHON_PATH "$(FME_MF_DIR)"

FACTORY_DEF * PythonFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_PythonCaller    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_OUTPUT"    SYMBOL_NAME UploadFeatureProcessor    PYTHON_NAMESPACE FMEOBJECTS    SOURCE_CODE from<space>fmeobjects<space>import<space>FMELogFile<comma><space>FME_INFORM<comma><space>FME_WARN<comma><space>FME_ERROR<lf>from<space>cStringIO<space>import<space>StringIO<lf><lf>class<space>UploadFeatureProcessor<openparen>object<closeparen>:<lf><space><space><space><space>def<space>__init__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile<space>=<space>FMELogFile<openparen><closeparen><lf><space><space><space><space><space><space><space><space>#<space>Make<space>sure<space>to<space>change<space>if<space>Custom<space>transformer<space>is<space>renamed<space><openparen>not<space>transformer<space>instance<space>name<space>-<space>that<apos>s<space>what<space>we<apos>re<space>fetching<closeparen><space><lf><space><space><space><space><space><space><space><space>self.xformer_name<space>=<space>FME_MacroValues<openbracket><apos>AzureBlobUploader_WORKSPACE_NAME<apos><closebracket><lf><space><space><space><space>def<space>info<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_INFORM<closeparen><lf><space><space><space><space><space><space><space><space>#self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_WARN<closeparen><space>#<space>while<space>developing<space>for<space>popping<space>out<lf><space><space><space><space>def<space>input<openparen>self<comma>feature<closeparen>:<lf><space><space><space><space><space><space><space><space>try:<lf><space><space><space><space><space><space><space><space><space><space><space><space>account<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_storage_account<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>secret<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_key<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>azure<space>=<space>AzureAPI<openparen>account<comma><space>secret<comma><space>self.logfile<comma><space>logprefix<space>=<space>self.xformer_name<comma><space>loglevel<space>=<space>FME_INFORM<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>container<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_container<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>blob_name<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_blob_name<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>fin<space>=<space>None<lf><space><space><space><space><space><space><space><space><space><space><space><space>src_type<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_src_type<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>src_type<space>==<space><apos>AttributeValue<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>feature.getAttribute<openparen><apos>_azure_blob_uploader_src_data<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>AzureAPI._unicode_type<closeparen>:<space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>fin<space>=<space>StringIO<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>elif<space>src_type<space>==<space><apos>FilePath<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>fin<space>=<space>open<openparen>feature.getAttribute<openparen><apos>_azure_blob_uploader_src_data<apos><closeparen><comma><space><apos>rb<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>else:<space>raise<space>Exception<openparen><apos>Unrecognized<space>source<space>type<space>`%s`<apos><space>%<space>src_type<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space>#####<space>INSERT<space>CODE<space>HERE<space>TO<space>MANIPULATE<space>CONTENT<space>BEFORE<space>UPLOAD<space>#####<lf><space><space><space><space><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space><space><space><space><space>azure.put_blob<openparen>container<comma><space>blob_name<comma><space>fin<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>fin.close<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_uploader_status<apos><comma><space><apos>success<apos><closeparen><lf><space><space><space><space><space><space><space><space>except<space>Exception<space>as<space>e:<lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_uploader_status<apos><comma><space><apos>fail<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_azure_blob_uploader_error_message<apos><comma><space>str<openparen>e<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.logfile.logException<openparen>e<comma><space>FME_ERROR<closeparen><lf><space><space><space><space><space><space><space><space>self.pyoutput<openparen>feature<closeparen><lf><space><space><space><space>def<space>close<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>del<space>self.logfile<lf><space><space><space><space><space><space><space><space><lf>#####<space>Code<space>below<space>*should*<space>be<space>more<space>or<space>less<space>standalone<space><openparen>no<space>bindings<space>to<space>fme<closeparen><space>#####<lf><space><space><space><space><space><space><space><space><lf>import<space>os<lf>import<space>requests<lf>from<space>collections<space>import<space>OrderedDict<lf>import<space>datetime<lf><lf><lf>import<space>base64<lf>import<space>uuid<lf>import<space>hashlib<lf>import<space>hmac<lf>import<space>sys<lf><lf>PUT_BLOB_LIMIT<space>=<space>1024<space>*<space>1024<space>*<space>64<space><space><space><space><space><space>#<space>64<space>MB<lf>PUT_BLOCK_CHUNK_SIZE<space>=<space>1024<space>*<space>1024<space>*<space>4<space>#<space>4<space>MB<lf>AZ_VERSION<space>=<space><apos>2015-02-21<apos><lf><lf>class<space>StdoutLogger<openparen>object<closeparen>:<lf><space><space><space><space><apos><apos><apos><lf><space><space><space><space>simple<space>log<space>class<space>to<space>mimic<space>fme<space>api<lf><space><space><space><space><apos><apos><apos><lf><space><space><space><space>def<space>logMessageString<openparen>self<comma><space>msg<comma><space>level<space>=<space>0<closeparen>:<lf><space><space><space><space><space><space><space><space>print<space>msg<lf><space><space><space><space>def<space>logException<openparen>self<comma><space>e<comma><space>level<space>=<space>0<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logMessageString<openparen>str<openparen>e<closeparen><comma><space>level<closeparen><lf>class<space>AzureAPI<openparen>object<closeparen>:<lf><space><space><space><space>if<space>sys.version_info<space><lt><space><openparen>3<comma><closeparen>:<lf><space><space><space><space><space><space><space><space>from<space>collections<space>import<space>Iterable<lf><space><space><space><space><space><space><space><space>_unicode_type<space>=<space>unicode<lf><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space>from<space>collections.abc<space>import<space>Iterable<space>#<space>TODO:<space>this<space>code<space>was<space>found<space>somewhere<space>but<space>its<space>logic<space>is<space>not<space>clear<space>to<space>me...<space><lf><space><space><space><space><space><space><space><space>_unicode_type<space>=<space>str<lf><space><space><space><space>def<space>__init__<openparen>self<comma><space>account<comma><space>secret<comma><space>logfile<space>=<space>StdoutLogger<openparen><closeparen><comma><space>logprefix<space>=<space><apos><apos><comma><space>loglevel<space>=<space>0<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile<space>=<space>logfile<space><lf><space><space><space><space><space><space><space><space>self.logprefix<space>=<space>logprefix<lf><space><space><space><space><space><space><space><space>self.loglevel<space>=<space>loglevel<lf><space><space><space><space><space><space><space><space>self.account<space>=<space>account<lf><space><space><space><space><space><space><space><space>self.secret<space>=<space>secret<lf><space><space><space><space>def<space>info<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.logprefix<comma><space>message<closeparen><comma><space>self.loglevel<closeparen><lf><space><space><space><space>def<space>append_block<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_data<closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>block_data<closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=appendblock<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Appending<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>comp:appendblock<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data<space>=<space>block_data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>ERROR<space>status<space>%s:<space>`%s`<apos><space>%<space><openparen>r.status_code<comma><space>_string_to_sign<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space>def<space>put_block<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_data<closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>block_data<closeparen><lf><space><space><space><space><space><space><space><space>headers<openbracket><apos>x-ms-blob-type<apos><closebracket><space>=<space><apos>BlockBlob<apos><lf><space><space><space><space><space><space><space><space>block_id<space>=<space>base64.b64encode<openparen>uuid.uuid4<openparen><closeparen>.hex<closeparen><lf><space><space><space><space><space><space><space><space>#https:<solidus><solidus>myaccount.blob.core.windows.net<solidus>mycontainer<solidus>myblob?comp=block<amp>blockid=id<lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=block<amp>blockid=%s<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<comma><space>block_id<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>block<space>of<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>blockid:%s<backslash>ncomp:block<apos><space>%<space>block_id<closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=block_data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>return<space>block_id<lf><space><space><space><space>def<space>put_block_list<openparen>self<comma><space>container<comma><space>blob_name<comma><space>block_list<closeparen>:<lf><space><space><space><space><space><space><space><space>list_fragments<space>=<space><apos><apos>.join<openparen>map<openparen>lambda<space>s:<space><apos><lt>Uncommitted<gt><opencurly><closecurly><lt><solidus>Uncommitted<gt><apos>.format<openparen>s<closeparen><comma><space>block_list<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>data<space>=<space><apos><lt>?xml<space>version=<quote>1.0<quote><space>encoding=<quote>utf-8<quote>?<gt><lt>BlockList<gt><opencurly><closecurly><lt><solidus>BlockList<gt><apos>.format<openparen>list_fragments<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=blocklist<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<comma><space><apos>comp:blocklist<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space>def<space>put_blob<openparen>self<comma><space>container<comma><space>blob_name<comma><space>fin<closeparen>:<lf><space><space><space><space><space><space><space><space>fin.seek<openparen>0<comma><space>os.SEEK_END<closeparen><lf><space><space><space><space><space><space><space><space>size<space>=<space>fin.tell<openparen><closeparen><lf><space><space><space><space><space><space><space><space>fin.seek<openparen>0<comma><space>os.SEEK_SET<closeparen><lf><space><space><space><space><space><space><space><space>if<space>size<space><lt><space>PUT_BLOB_LIMIT:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>fin.read<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<openbracket><apos>x-ms-blob-type<apos><closebracket><space>=<space><apos>BlockBlob<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space>self._authorize<openparen>headers<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>ids<space>=<space><openbracket><closebracket><lf><space><space><space><space><space><space><space><space><space><space><space><space>for<space>offset<space>in<space>range<openparen>0<comma><space>size<comma><space>PUT_BLOCK_CHUNK_SIZE<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>`%s`<comma><space>%s%%<apos><space>%<space><openparen>blob_name<comma><space>int<openparen>round<openparen>offset<space>*<space>100<space><solidus><space>size<closeparen><closeparen><space><closeparen><space><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>block_size<space>=<space>min<openparen>PUT_BLOCK_CHUNK_SIZE<comma><space>size<space>-<space>offset<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>ids.append<openparen>self.put_block<openparen>container<comma><space>blob_name<comma><space>fin.read<openparen>block_size<closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.put_block_list<openparen>container<comma><space>blob_name<comma><space>ids<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>#self.info<openparen><apos>ID<space>LIST<space>COMMITTED:<space>%s<apos><space>%<space><apos><backslash>n<backslash>t<apos>.join<openparen>ids<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Done<space>uploading<space>%s<space>bytes<space>of<space>data<apos><space>%<space>size<closeparen><lf><space><space><space><space>def<space>list_blobs<openparen>self<comma><space>container<closeparen>:<lf><space><space><space><space><space><space><space><space>#<space>https:<solidus><solidus>myaccount.blob.core.windows.net<solidus>mycontainer?restype=container<amp>comp=list<lf><space><space><space><space><space><space><space><space>headers<space>=<space>AzureAPI._create_headers<openparen><closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s?restype=container<amp>comp=list<apos><space>%<space><openparen>self.account<comma><space>container<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>self._authorize<openparen>headers<comma><space>container<comma><space>querystringencoded<space>=<space><apos>comp:list<backslash>nrestype:container<apos><comma><space>http_method<space>=<space><apos>GET<apos><closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>block<space>of<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.get<openparen>url<comma><space>headers=headers<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>200:<lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>return<space>r.content<lf><space><space><space><space>def<space>_authorize<openparen>self<comma><space>headers<comma><space>container_name<comma><space>blob_name<space>=<space>None<comma><space>querystringencoded<space>=<space>None<comma><space>http_method<space>=<space><apos>PUT<apos><closeparen>:<lf><space><space><space><space><space><space><space><space>content_length<space>=<space><apos><apos><lf><space><space><space><space><space><space><space><space>if<space>headers.get<openparen><apos>Content-Length<apos><closeparen><space>!=<space><apos>0<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>content_length<space>=<space>headers.get<openparen><apos>Content-Length<apos><closeparen><lf><space><space><space><space><space><space><space><space>fields<space>=<space><openbracket><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>http_method<space>#<space>VERB<space><openparen>http-method<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-Encoding<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-Language<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space>content_length<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-MD5<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space>headers.get<openparen><apos>Date<apos><comma><apos><apos><closeparen><space>#<space>Date<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-Modified-Since<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-None-Match<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-Unmodified-Since<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Range<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>?<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>?<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><closebracket><lf><space><space><space><space><space><space><space><space>if<space>headers.get<openparen><apos>x-ms-blob-type<apos><comma><space>None<closeparen>:<space>fields.append<openparen><apos>x-ms-blob-type:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-blob-type<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>fields.append<openparen><apos>x-ms-date:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-date<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>fields.append<openparen><apos>x-ms-version:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-version<apos><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>blob_name:<lf><space><space><space><space><space><space><space><space><space><space><space><space>fields.append<openparen><apos><solidus>%s<solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container_name<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>fields.append<openparen><apos><solidus>%s<solidus>%s<apos><space>%<space><openparen>self.account<comma><space>container_name<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>querystringencoded:<space>fields.append<openparen>querystringencoded<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space><apos><backslash>n<apos>.join<openparen>fields<closeparen><lf><space><space><space><space><space><space><space><space>signature<space>=<space>AzureAPI._sign_string<openparen>self.secret<space><comma><space>_string_to_sign<closeparen><lf><space><space><space><space><space><space><space><space>headers<openbracket><apos>Authorization<apos><closebracket><space>=<space><apos>SharedKey<space>%s:%s<apos><space>%<space><openparen>self.account<comma><space>signature<closeparen><lf><space><space><space><space><space><space><space><space>return<space>_string_to_sign<lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_create_headers<openparen>data<space>=<space><apos><apos><closeparen>:<lf><space><space><space><space><space><space><space><space>return<space>OrderedDict<openparen><opencurly><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><apos>Content-Length<apos>:<space>str<openparen>len<openparen>data<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-date<apos>:<space>AzureAPI._httpdate<openparen>datetime.datetime.utcnow<openparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-version<apos>:<space>AZ_VERSION<lf><space><space><space><space><space><space><space><space><space><space><space><space><closecurly><closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_httpdate<openparen>dt<closeparen>:<lf><space><space><space><space><space><space><space><space><quote><quote><quote>Return<space>a<space>string<space>representation<space>of<space>a<space>date<space>according<space>to<space>RFC<space>1123<lf><space><space><space><space><space><space><space><space><openparen>HTTP<solidus>1.1<closeparen>.<lf><space><space><space><space><lf><space><space><space><space><space><space><space><space>The<space>supplied<space>date<space>must<space>be<space>in<space>UTC.<lf><space><space><space><space><lf><space><space><space><space><space><space><space><space><quote><quote><quote><lf><space><space><space><space><space><space><space><space>weekday<space>=<space><openbracket><quote>Mon<quote><comma><space><quote>Tue<quote><comma><space><quote>Wed<quote><comma><space><quote>Thu<quote><comma><space><quote>Fri<quote><comma><space><quote>Sat<quote><comma><space><quote>Sun<quote><closebracket><openbracket>dt.weekday<openparen><closeparen><closebracket><lf><space><space><space><space><space><space><space><space>month<space>=<space><openbracket><quote>Jan<quote><comma><space><quote>Feb<quote><comma><space><quote>Mar<quote><comma><space><quote>Apr<quote><comma><space><quote>May<quote><comma><space><quote>Jun<quote><comma><space><quote>Jul<quote><comma><space><quote>Aug<quote><comma><space><quote>Sep<quote><comma><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><quote>Oct<quote><comma><space><quote>Nov<quote><comma><space><quote>Dec<quote><closebracket><openbracket>dt.month<space>-<space>1<closebracket><lf><space><space><space><space><space><space><space><space>return<space><quote>%s<comma><space>%02d<space>%s<space>%04d<space>%02d:%02d:%02d<space>GMT<quote><space>%<space><openparen>weekday<comma><space>dt.day<comma><space>month<comma><lf><space><space><space><space><space><space><space><space><space><space><space><space>dt.year<comma><space>dt.hour<comma><space>dt.minute<comma><space>dt.second<closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_encode_base64<openparen>data<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>encoded<space>=<space>base64.b64encode<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space>return<space>encoded.decode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_decode_base64_to_bytes<openparen>data<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>return<space>base64.b64decode<openparen>data<closeparen><lf><space><space><space><space><at>staticmethod<lf><space><space><space><space>def<space>_sign_string<openparen>key<comma><space>string_to_sign<comma><space>key_is_base64=True<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>key_is_base64:<lf><space><space><space><space><space><space><space><space><space><space><space><space>key<space>=<space>AzureAPI._decode_base64_to_bytes<openparen>key<closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>key<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>key<space>=<space>key.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>string_to_sign<comma><space>AzureAPI._unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>string_to_sign<space>=<space>string_to_sign.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>signed_hmac_sha256<space>=<space>hmac.HMAC<openparen>key<comma><space>string_to_sign<comma><space>hashlib.sha256<closeparen><lf><space><space><space><space><space><space><space><space>digest<space>=<space>signed_hmac_sha256.digest<openparen><closeparen><lf><space><space><space><space><space><space><space><space>encoded_digest<space>=<space>AzureAPI._encode_base64<openparen>digest<closeparen><lf><space><space><space><space><space><space><space><space>return<space>encoded_digest<lf>    OUTPUT PYOUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_PythonCaller_OUTPUT"

# -------------------------------------------------------------------------
Lookup $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_AttributeFilterLut   success ok   fail ok   "" notok   ENCODED

Tcl2 proc $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_setFeatType {} {     global FME_FeatureType;     set ft {$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_};     append ft [FME_EncodeText [FME_GetAttribute [FME_DecodeText {_azure_blob_uploader_status}]]];     set FME_FeatureType $ft; }
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_PythonCaller_OUTPUT"    TEST @Lookup($(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_AttributeFilterLut,_azure_blob_uploader_status,ENCODED_ATTR) == "ok"    OUTPUT PASSED FEATURE_TYPE * @Tcl2($(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_setFeatType)    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_NullFilter    INPUT FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>    TEST _azure_blob_uploader_status ATTRIBUTE_VALUE_NULL "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_MissingFilter    INPUT FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>    TEST _azure_blob_uploader_status ATTRIBUTE_IS_MISSING "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_BlankFilter    INPUT FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>    TEST _azure_blob_uploader_status ATTRIBUTE_IS_EMPTY "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<EMPTY>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>



# -------------------------------------------------------------------------

INCLUDE [    set macroLine "MACRO $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<EMPTY>"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>"    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_fail"    OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"        @RemoveAttributes(fme_encoded,_azure_blob_uploader_blob_name,_azure_blob_uploader_key,_azure_blob_uploader_src_data,_azure_blob_uploader_src_type,_azure_blob_uploader_container,_azure_blob_uploader_status,_azure_blob_uploader_storage_account)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP)")

# -------------------------------------------------------------------------

INCLUDE [    set macroLine "MACRO $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_success"    OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_OUTPUT"        @RemoveAttributes(fme_encoded,_azure_blob_uploader_blob_name,_azure_blob_uploader_key,_azure_blob_uploader_src_data,_azure_blob_uploader_error_message,_azure_blob_uploader_src_type,_azure_blob_uploader_container,_azure_blob_uploader_status,_azure_blob_uploader_storage_account)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_LIST_EXP)")

FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_Success1470657591 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Success"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_Fail1470657591 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Fail"
INCLUDE [puts {MACRO WB_CURRENT_CONTEXT $(WB_OLD_CONTEXT_$(AzureBlobUploader_WORKSPACE_NAME))}]
#! <?xml version="1.0" encoding="UTF-8" ?>
#! <TRANSFORMER
# TRANSFORMER_BEGIN AzureBlobUploader,2,"Web Services",0b7cd016-7127-4c4e-9287-356274442971,"Linked by Default",No,NO_PARALLELISM,,No,16177,YES,No
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Uploads a file to Azure using the Azure Blob Service REST API (https://msdn.microsoft.com/en-us/library/azure/dd135733.aspx)</p>
# <p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">
#     <br/>
# </p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">A key is needed as well as the name of the storage account.</p>
# <p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">
#     <br/>
# </p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Source data can be either from an attribute or a filepath.</p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Maximum file size is roughly 195 GB. </p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Files larger than 64 MB will be uploaded in chunks of 4 MB. </p>
# 
# TRANSFORMER_END
#!   SHOW_ANNOTATIONS="true"
#!   CATEGORY="Web Services"
#!   WORKSPACE_VERSION="1"
#!   LAST_SAVE_DATE="2016-08-05T14:54:08"
#!   DOC_EXTENTS="3553.91 256.252"
#!   ITERATION_COUNT_ATTR=""
#!   WARN_INVALID_XFORM_PARAM="Yes"
#!   LEGAL_TERMS_CONDITIONS="&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;"
#!   VIEW_POSITION="-496.88 1090.64"
#!   DOC_TOP_LEFT="-76.9399 -818.758"
#!   TITLE="AzureBlobUploader"
#!   HISTORY="2016-06-27,peter.segerstedt&lt;at&gt;eea.europa.eu,Original&lt;space&gt;definition"
#!   FME_DOCUMENT_PRIORGUID=""
#!   XFORM_DEPRECATED="No"
#!   BLOCKED_LOOPING="No"
#!   PASSWORD=""
#!   DESCRIPTION="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Uploads a file to Azure using the Azure Blob Service REST API (https://msdn.microsoft.com/en-us/library/azure/dd135733.aspx)&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;A key is needed as well as the name of the storage account.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Source data can be either from an attribute or a filepath.&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Maximum file size is roughly 195 GB. &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Files larger than 64 MB will be uploaded in chunks of 4 MB. &lt;/p&gt;&#10;"
#!   USAGE="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Storage account:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the storage account. Look for this under the portal.azure.com.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-weight:600;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Access key:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the access key for the blob inside Azure. You can find this when you select the storage inside the protal.azure.com website, go to settings and then search for &quot;Access keys&quot;.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Use access keys to authenticate your applications when making requests to this Azure storage account. Store your access keys securely - for example, using Azure Key Vault - and don&apos;t share them. We recommend regenerating your access keys regularly. You are provided two access keys so that you can maintain connections using one key while regenerating the other. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Container name:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The storage countainer name. These are listed directly under the storage account pannel. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Blob name:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The name of the blob you are about to create. The filename of the source data will be used if this was not provided. You can create folders by simply using the &apos;/&apos; for example &quot;folder1/folder2/blobname&quot;. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Upload from:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Describes what is provided inside the &quot;source data&quot; attribute. When set to &quot;AttributeValue&quot; it means that the source data is a binary file. When set to &quot;file&quot; it means that the source data is a path towards a file.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;This transformer currently only stores &quot;block blobs&quot;&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;block blob: &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Block blobs let you upload large blobs efficiently. Block blobs are comprised of blocks, each of which is identified by a block ID. You create or modify a block blob by writing a set of blocks and committing them by their block IDs. Each block can be a different size, up to a maximum of 4 MB, and a block blob can include up to 50,000 blocks. The maximum size of a block blob is therefore slightly more than 195 GB (4 MB X 50,000 blocks). If you are writing a block blob that is no more than 64 MB in size, you can upload it in its entirety with a single write operation&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;append blob:&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;An append blob is comprised of blocks and is optimized for append operations. When you modify an append blob, blocks are added to the end of the blob only, via the &lt;a href=&quot;https://msdn.microsoft.com/en-us/library/azure/mt427365.aspx&quot;&gt;&#10;        &lt;span style=&quot; text-decoration: underline; color:#0000ff;&quot;&gt;Append Block &lt;/span&gt;&#10;    &lt;/a&gt;operation. Updating or deleting of existing blocks is not supported. Unlike a block blob, an append blob does not expose its block IDs. &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Each block in an append blob can be a different size, up to a maximum of 4 MB, and an append blob can include up to 50,000 blocks. The maximum size of an append blob is therefore slightly more than 195 GB (4 MB X 50,000 blocks).&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;page blob:&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Page blobs are a collection of 512-byte pages optimized for random read and write operations. To create a page blob, you initialize the page blob and specify the maximum size the page blob will grow. To add or update the contents of a page blob, you write a page or pages by specifying an offset and a range that align to 512-byte page boundaries. A write to a page blob can overwrite just one page, some pages, or up to 4 MB of the page blob. Writes to page blobs happen in-place and are immediately committed to the blob. The maximum size for a page blob is 1 TB. &lt;/p&gt;&#10;"
#!   FME_SERVER_SERVICES=""
#!   REQUIREMENTS_KEYWORD="none"
#!   FME_PROCESS_COUNT="NO_PARALLELISM"
#!   ZOOM_SCALE="100"
#!   FMX_INSERT_MODE="Linked by Default"
#!   FME_PROCESS_GROUP_BY=""
#!   LAST_SAVE_BUILD="FME(R) 2016.0.1.1 (20160224 - Build 16177 - WIN64)"
#!   ATTR_TYPE_ENCODING="SDF"
#!   REQUIREMENTS="&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;"
#!   FME_PROCESS_GROUPS_ORDERED="No"
#!   MAX_LOOP_ITERATIONS=""
#!   FME_LINKED_TRANSFORMER_VERSION="2"
#!   FME_DOCUMENT_GUID="0b7cd016-7127-4c4e-9287-356274442971"
#!   FME_BUILD_NUM="16177"
#!   SHOW_INFO_NODES="true"
#! >
#! <DATASETS>
#! </DATASETS>
#! <DATA_TYPES>
#! </DATA_TYPES>
#! <GEOM_TYPES>
#! </GEOM_TYPES>
#! <FEATURE_TYPES>
#! </FEATURE_TYPES>
#! <FMESERVER>
#! </FMESERVER>
#! <GLOBAL_PARAMETERS>
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI PASSWORD_OR_ATTR KEY Access key:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="true"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR ACCOUNT &quot; &quot; Storage account:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR CONTAINER &quot; &quot; Container:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR BLOB_NAME &quot; &quot; Blob Name:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI CHOICE_OR_ATTR SRC_TYPE AttributeValue%FilePath Upload From:"
#!   DEFAULT_VALUE="AttributeValue"
#!   IS_STAND_ALONE="true"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR SRC_DATA &quot; &quot; Source Data:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! </GLOBAL_PARAMETERS>
#! <COMMENTS>
#! </COMMENTS>
#! <CONSTANTS>
#! </CONSTANTS>
#! <BOOKMARKS>
#! </BOOKMARKS>
#! <TRANSFORMERS>
#! <TRANSFORMER
#!   IDENTIFIER="1"
#!   TYPE="AttributeCreator"
#!   VERSION="8"
#!   POSITION="487.316 -562.506"
#!   BOUNDING_RECT="487.316 -562.506 618.756 71"
#!   ORDER="5e+14"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="FetchParamsAttributeCreator"/>
#!     <XFORM_PARM PARM_NAME="NUM_PRIOR_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="ATTR_TABLE" PARM_VALUE="&quot;&quot; _storage_account SET_TO $(ACCOUNT)  _key SET_TO $(KEY)  _container SET_TO $(CONTAINER)  _blob_name SET_TO $(BLOB_NAME)  _src_type SET_TO $(SRC_TYPE)  _src_data SET_TO $(SRC_DATA)"/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_GRP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_VALUE" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_MODE_DISPLAY" PARM_VALUE="No Substitution"/>
#!     <XFORM_PARM PARM_NAME="NUM_SUBSEQUENT_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_HANDLING" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="MULTI_FEATURE_MODE" PARM_VALUE="NO"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="2"
#!   TYPE="PythonCaller"
#!   VERSION="4"
#!   POSITION="1773.83 -562.506"
#!   BOUNDING_RECT="1773.83 -562.506 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <XFORM_ATTR ATTR_NAME="_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_upload_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="PythonCaller"/>
#!     <XFORM_PARM PARM_NAME="NEW_ATTRIBUTES" PARM_VALUE="_upload_status _error_message"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PYTHONSYMBOL" PARM_VALUE="FeatureProcessor"/>
#!     <XFORM_PARM PARM_NAME="PYTHONSOURCE" PARM_VALUE="from&lt;space&gt;fmeobjects&lt;space&gt;import&lt;space&gt;FMELogFile&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;comma&gt;&lt;space&gt;FME_WARN&lt;lf&gt;from&lt;space&gt;cStringIO&lt;space&gt;import&lt;space&gt;StringIO&lt;lf&gt;import&lt;space&gt;os&lt;lf&gt;import&lt;space&gt;requests&lt;lf&gt;from&lt;space&gt;collections&lt;space&gt;import&lt;space&gt;OrderedDict&lt;lf&gt;import&lt;space&gt;datetime&lt;lf&gt;&lt;lf&gt;&lt;lf&gt;import&lt;space&gt;base64&lt;lf&gt;import&lt;space&gt;uuid&lt;lf&gt;import&lt;space&gt;hashlib&lt;lf&gt;import&lt;space&gt;hmac&lt;lf&gt;import&lt;space&gt;sys&lt;lf&gt;&lt;lf&gt;PUT_BLOB_LIMIT&lt;space&gt;=&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;64&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;64&lt;space&gt;MB&lt;lf&gt;PUT_BLOCK_CHUNK_SIZE&lt;space&gt;=&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;4&lt;space&gt;#&lt;space&gt;4&lt;space&gt;MB&lt;lf&gt;AZ_VERSION&lt;space&gt;=&lt;space&gt;&lt;apos&gt;2015-02-21&lt;apos&gt;&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;FeatureProcessor&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile&lt;space&gt;=&lt;space&gt;FMELogFile&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;Make&lt;space&gt;sure&lt;space&gt;to&lt;space&gt;change&lt;space&gt;if&lt;space&gt;Custom&lt;space&gt;transformer&lt;space&gt;is&lt;space&gt;renamed&lt;space&gt;&lt;openparen&gt;not&lt;space&gt;transformer&lt;space&gt;instance&lt;space&gt;name&lt;space&gt;-&lt;space&gt;that&lt;apos&gt;s&lt;space&gt;what&lt;space&gt;we&lt;apos&gt;re&lt;space&gt;fetching&lt;closeparen&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.xformer_name&lt;space&gt;=&lt;space&gt;FME_MacroValues&lt;openbracket&gt;&lt;apos&gt;AzureBlobUploader_WORKSPACE_NAME&lt;apos&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;info&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_WARN&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;while&lt;space&gt;developing&lt;space&gt;for&lt;space&gt;popping&lt;space&gt;out&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;input&lt;openparen&gt;self&lt;comma&gt;feature&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;try:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;account&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_storage_account&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;secret&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_key&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;container&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_container&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_blob_name&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;src_type&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_src_type&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;src_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;AttributeValue&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_src_data&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;_unicode_type&lt;closeparen&gt;:&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.put_blob&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;StringIO&lt;openparen&gt;data&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;elif&lt;space&gt;src_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;FilePath&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;with&lt;space&gt;open&lt;openparen&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_src_data&lt;apos&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;rb&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;as&lt;space&gt;fin:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.put_blob&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;&lt;apos&gt;Unrecognized&lt;space&gt;source&lt;space&gt;type&lt;space&gt;`%s`&lt;apos&gt;&lt;space&gt;%&lt;space&gt;src_type&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_upload_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;success&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;except&lt;space&gt;Exception&lt;space&gt;as&lt;space&gt;e:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_upload_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;fail&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_error_message&lt;apos&gt;&lt;comma&gt;&lt;space&gt;str&lt;openparen&gt;e&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logException&lt;openparen&gt;e&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.pyoutput&lt;openparen&gt;feature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;append_block&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;create_headers&lt;openparen&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=appendblock&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Appending&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp:appendblock&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;ERROR&lt;space&gt;status&lt;space&gt;%s:&lt;space&gt;`%s`&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;r.status_code&lt;comma&gt;&lt;space&gt;_string_to_sign&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_block&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;create_headers&lt;openparen&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;block_id&lt;space&gt;=&lt;space&gt;base64.b64encode&lt;openparen&gt;uuid.uuid4&lt;openparen&gt;&lt;closeparen&gt;.hex&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#https:&lt;solidus&gt;&lt;solidus&gt;myaccount.blob.core.windows.net&lt;solidus&gt;mycontainer&lt;solidus&gt;myblob?comp=block&lt;amp&gt;blockid=id&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=block&lt;amp&gt;blockid=%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_id&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;block&lt;space&gt;of&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;&lt;apos&gt;blockid:%s&lt;backslash&gt;ncomp:block&lt;apos&gt;&lt;space&gt;%&lt;space&gt;block_id&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;block_id&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_block_list&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_list&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;list_fragments&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;.join&lt;openparen&gt;map&lt;openparen&gt;lambda&lt;space&gt;s:&lt;space&gt;&lt;apos&gt;&lt;lt&gt;Uncommitted&lt;gt&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;lt&gt;&lt;solidus&gt;Uncommitted&lt;gt&gt;&lt;apos&gt;.format&lt;openparen&gt;s&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;block_list&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;lt&gt;?xml&lt;space&gt;version=&lt;quote&gt;1.0&lt;quote&gt;&lt;space&gt;encoding=&lt;quote&gt;utf-8&lt;quote&gt;?&lt;gt&gt;&lt;lt&gt;BlockList&lt;gt&gt;&lt;opencurly&gt;&lt;closecurly&gt;&lt;lt&gt;&lt;solidus&gt;BlockList&lt;gt&gt;&lt;apos&gt;.format&lt;openparen&gt;list_fragments&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;create_headers&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=blocklist&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp:blocklist&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_blob&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.seek&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;os.SEEK_END&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;size&lt;space&gt;=&lt;space&gt;fin.tell&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.seek&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;os.SEEK_SET&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;size&lt;space&gt;&lt;lt&gt;&lt;space&gt;PUT_BLOB_LIMIT:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;fin.read&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;create_headers&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;secret&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ids&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;offset&lt;space&gt;in&lt;space&gt;range&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;size&lt;comma&gt;&lt;space&gt;PUT_BLOCK_CHUNK_SIZE&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;`%s`&lt;comma&gt;&lt;space&gt;%s%%&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;blob_name&lt;comma&gt;&lt;space&gt;int&lt;openparen&gt;round&lt;openparen&gt;offset&lt;space&gt;*&lt;space&gt;100&lt;space&gt;&lt;solidus&gt;&lt;space&gt;size&lt;closeparen&gt;&lt;closeparen&gt;&lt;space&gt;&lt;closeparen&gt;&lt;space&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;block_size&lt;space&gt;=&lt;space&gt;min&lt;openparen&gt;PUT_BLOCK_CHUNK_SIZE&lt;comma&gt;&lt;space&gt;size&lt;space&gt;-&lt;space&gt;offset&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;ids.append&lt;openparen&gt;self.put_block&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin.read&lt;openparen&gt;block_size&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.put_block_list&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;ids&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.info&lt;openparen&gt;&lt;apos&gt;ID&lt;space&gt;LIST&lt;space&gt;COMMITTED:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;backslash&gt;t&lt;apos&gt;.join&lt;openparen&gt;ids&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Done&lt;space&gt;uploading&lt;space&gt;%s&lt;space&gt;bytes&lt;space&gt;of&lt;space&gt;data&lt;apos&gt;&lt;space&gt;%&lt;space&gt;size&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;close&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;pass&lt;lf&gt;&lt;lf&gt;def&lt;space&gt;authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;storage_account&lt;comma&gt;&lt;space&gt;container_name&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;None&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;content_length&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Content-Length&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;!=&lt;space&gt;&lt;apos&gt;0&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;content_length&lt;space&gt;=&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Content-Length&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;PUT&lt;apos&gt;&lt;space&gt;#&lt;space&gt;VERB&lt;space&gt;&lt;openparen&gt;http-method&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-Encoding&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-Language&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;content_length&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-MD5&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Date&lt;apos&gt;&lt;comma&gt;&lt;apos&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;Date&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-Modified-Since&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-None-Match&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-Unmodified-Since&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Range&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;?&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;?&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;comma&gt;&lt;space&gt;None&lt;closeparen&gt;:&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-date:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-date&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-version:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;storage_account&lt;comma&gt;&lt;space&gt;container_name&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;querystringencoded:&lt;space&gt;fields.append&lt;openparen&gt;querystringencoded&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;.join&lt;openparen&gt;fields&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;signature&lt;space&gt;=&lt;space&gt;_sign_string&lt;openparen&gt;secret&lt;space&gt;&lt;comma&gt;&lt;space&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;Authorization&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;SharedKey&lt;space&gt;%s:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;storage_account&lt;comma&gt;&lt;space&gt;signature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;_string_to_sign&lt;lf&gt;def&lt;space&gt;create_headers&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;OrderedDict&lt;openparen&gt;&lt;opencurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;Content-Length&lt;apos&gt;:&lt;space&gt;str&lt;openparen&gt;len&lt;openparen&gt;data&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-date&lt;apos&gt;:&lt;space&gt;_httpdate&lt;openparen&gt;datetime.datetime.utcnow&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;:&lt;space&gt;AZ_VERSION&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closecurly&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;def&lt;space&gt;_httpdate&lt;openparen&gt;dt&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;Return&lt;space&gt;a&lt;space&gt;string&lt;space&gt;representation&lt;space&gt;of&lt;space&gt;a&lt;space&gt;date&lt;space&gt;according&lt;space&gt;to&lt;space&gt;RFC&lt;space&gt;1123&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;openparen&gt;HTTP&lt;solidus&gt;1.1&lt;closeparen&gt;.&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;The&lt;space&gt;supplied&lt;space&gt;date&lt;space&gt;must&lt;space&gt;be&lt;space&gt;in&lt;space&gt;UTC.&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;weekday&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;quote&gt;Mon&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Tue&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Wed&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Thu&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Fri&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sat&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sun&lt;quote&gt;&lt;closebracket&gt;&lt;openbracket&gt;dt.weekday&lt;openparen&gt;&lt;closeparen&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;month&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;quote&gt;Jan&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Feb&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Mar&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Apr&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;May&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Jun&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Jul&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Aug&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sep&lt;quote&gt;&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;Oct&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Nov&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Dec&lt;quote&gt;&lt;closebracket&gt;&lt;openbracket&gt;dt.month&lt;space&gt;-&lt;space&gt;1&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;&lt;quote&gt;%s&lt;comma&gt;&lt;space&gt;%02d&lt;space&gt;%s&lt;space&gt;%04d&lt;space&gt;%02d:%02d:%02d&lt;space&gt;GMT&lt;quote&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;weekday&lt;comma&gt;&lt;space&gt;dt.day&lt;comma&gt;&lt;space&gt;month&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;dt.year&lt;comma&gt;&lt;space&gt;dt.hour&lt;comma&gt;&lt;space&gt;dt.minute&lt;comma&gt;&lt;space&gt;dt.second&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;if&lt;space&gt;sys.version_info&lt;space&gt;&lt;lt&gt;&lt;space&gt;&lt;openparen&gt;3&lt;comma&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;from&lt;space&gt;collections&lt;space&gt;import&lt;space&gt;Iterable&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_unicode_type&lt;space&gt;=&lt;space&gt;unicode&lt;lf&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;from&lt;space&gt;collections.abc&lt;space&gt;import&lt;space&gt;Iterable&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_unicode_type&lt;space&gt;=&lt;space&gt;str&lt;lf&gt;&lt;lf&gt;def&lt;space&gt;_encode_base64&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;_unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;encoded&lt;space&gt;=&lt;space&gt;base64.b64encode&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;encoded.decode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;def&lt;space&gt;_decode_base64_to_bytes&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;_unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;base64.b64decode&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;def&lt;space&gt;_sign_string&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;string_to_sign&lt;comma&gt;&lt;space&gt;key_is_base64=True&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;key_is_base64:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;key&lt;space&gt;=&lt;space&gt;_decode_base64_to_bytes&lt;openparen&gt;key&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;_unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;key&lt;space&gt;=&lt;space&gt;key.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;string_to_sign&lt;comma&gt;&lt;space&gt;_unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;string_to_sign&lt;space&gt;=&lt;space&gt;string_to_sign.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;signed_hmac_sha256&lt;space&gt;=&lt;space&gt;hmac.HMAC&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;string_to_sign&lt;comma&gt;&lt;space&gt;hashlib.sha256&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;digest&lt;space&gt;=&lt;space&gt;signed_hmac_sha256.digest&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;encoded_digest&lt;space&gt;=&lt;space&gt;_encode_base64&lt;openparen&gt;digest&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;encoded_digest"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ADVANCED_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="HIDE_ATTRIBUTES" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="3"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="2883.21 -562.506"
#!   BOUNDING_RECT="2883.21 -562.506 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover"/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_src_data,_key,_storage_account,_src_type,_error_message,_upload_status,_blob_name,_container"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="4"
#!   TYPE="AttributeFilter"
#!   VERSION="4"
#!   POSITION="2289.46 -562.506"
#!   BOUNDING_RECT="2289.46 -562.506 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="&lt;EMPTY&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_upload_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="&lt;MISSING&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="_storage_account" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_key" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_container" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_blob_name" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_src_type" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_src_data" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_upload_status" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_error_message" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <OUTPUT_FEAT NAME="&lt;NULL&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="2"/>
#!     <XFORM_ATTR ATTR_NAME="_storage_account" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_key" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_container" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_blob_name" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_src_type" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_src_data" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_upload_status" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_error_message" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <OUTPUT_FEAT NAME="&lt;UNFILTERED&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="3"/>
#!     <XFORM_ATTR ATTR_NAME="_storage_account" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_key" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_container" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_blob_name" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_src_type" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_src_data" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_upload_status" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_error_message" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <OUTPUT_FEAT NAME="success"/>
#!     <FEAT_COLLAPSED COLLAPSED="4"/>
#!     <XFORM_ATTR ATTR_NAME="_storage_account" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_key" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_container" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_blob_name" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_src_type" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_src_data" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_upload_status" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_error_message" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <OUTPUT_FEAT NAME="fail"/>
#!     <FEAT_COLLAPSED COLLAPSED="5"/>
#!     <XFORM_ATTR ATTR_NAME="_storage_account" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_key" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_container" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_blob_name" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_src_type" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_src_data" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_upload_status" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_error_message" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeFilter"/>
#!     <XFORM_PARM PARM_NAME="ATTR_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTR_NAME" PARM_VALUE="_upload_status"/>
#!     <XFORM_PARM PARM_NAME="ATTR_VALUES" PARM_VALUE="&lt;lt&gt;EMPTY&lt;gt&gt;,&lt;lt&gt;MISSING&lt;gt&gt;,&lt;lt&gt;NULL&lt;gt&gt;,&lt;lt&gt;UNFILTERED&lt;gt&gt;,success,fail"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="5"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="2883.21 -818.758"
#!   BOUNDING_RECT="2883.21 -818.758 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover_2"/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_src_data,_key,_storage_account,_src_type,_upload_status,_blob_name,_container"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="16"
#!   TYPE="StringReplacer"
#!   VERSION="4"
#!   POSITION="1223.32 -562.506"
#!   BOUNDING_RECT="1223.32 -562.506 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16492"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="StringReplacer"/>
#!     <XFORM_PARM PARM_NAME="NO_MATCH_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NO_MATCH" PARM_VALUE="_FME_NO_OP_"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="FIND_TEXT" PARM_VALUE="&lt;backslash&gt;"/>
#!     <XFORM_PARM PARM_NAME="CASE" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REPLACE_TEXT" PARM_VALUE="&lt;solidus&gt;"/>
#!     <XFORM_PARM PARM_NAME="SRC_ATTRS" PARM_VALUE="_blob_name"/>
#!     <XFORM_PARM PARM_NAME="REGEXP" PARM_VALUE="NO"/>
#! </TRANSFORMER>
#! </TRANSFORMERS>
#! <SUBDOCUMENT_IOS>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="6"
#!   NAME="Input"
#!   POSITION="-76.9399 -562.506"
#!   BOUNDING_RECT="-76.9399 -562.506 -1 -1"
#!   COLLAPSED="true"
#!   PUBLISHED="true"
#!   IS_SOURCE="true"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="7"
#!   NAME="Success"
#!   POSITION="3476.97 -562.506"
#!   BOUNDING_RECT="3476.97 -562.506 -1 -1"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="8"
#!   NAME="Fail"
#!   POSITION="3476.97 -818.758"
#!   BOUNDING_RECT="3476.97 -818.758 -1 -1"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! </SUBDOCUMENT_IOS>
#! <FEAT_LINKS>
#! <FEAT_LINK
#!   IDENTIFIER="9"
#!   SOURCE_NODE="6"
#!   TARGET_NODE="1"
#!   SOURCE_PORT_DESC="0"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="17"
#!   SOURCE_NODE="1"
#!   TARGET_NODE="16"
#!   SOURCE_PORT_DESC="fo 0"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="11"
#!   SOURCE_NODE="2"
#!   TARGET_NODE="4"
#!   SOURCE_PORT_DESC="fo 0"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="13"
#!   SOURCE_NODE="3"
#!   TARGET_NODE="7"
#!   SOURCE_PORT_DESC="fo 0"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="12"
#!   SOURCE_NODE="5"
#!   TARGET_NODE="8"
#!   SOURCE_PORT_DESC="fo 0"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="18"
#!   SOURCE_NODE="16"
#!   TARGET_NODE="2"
#!   SOURCE_PORT_DESC="fo 0"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="14"
#!   SOURCE_NODE="4"
#!   TARGET_NODE="3"
#!   SOURCE_PORT_DESC="fo 4"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="15"
#!   SOURCE_NODE="4"
#!   TARGET_NODE="5"
#!   SOURCE_PORT_DESC="fo 5"
#!   TARGET_PORT_DESC="fi 0"
#!   ENABLED="true"
#!   EXTRA_POINTS=""
#! />
#! </FEAT_LINKS>
#! <BREAKPOINTS>
#! </BREAKPOINTS>
#! <ATTR_LINKS>
#! </ATTR_LINKS>
#! <SUBDOCUMENTS>
#! </SUBDOCUMENTS>
#! <LOOKUP_TABLES>
#! </LOOKUP_TABLES>
#! </TRANSFORMER>
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_KEY 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_ACCOUNT 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_CONTAINER 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_BLOB_NAME 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_SRC_TYPE AttributeValue
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_SRC_DATA 
#! START_HEADER
#! END_HEADER

LOG_FILTER_MASK -1
DEFAULT_MACRO WB_CURRENT_CONTEXT
DEFAULT_MACRO AzureBlobUploader_WORKSPACE_NAME ""
INCLUDE [puts {MACRO WB_OLD_CONTEXT_$(AzureBlobUploader_WORKSPACE_NAME) $(WB_CURRENT_CONTEXT)};          puts {MACRO WB_CURRENT_CONTEXT $(AzureBlobUploader_WORKSPACE_NAME)}]
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_Input1470401648 Input Splitter"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Input"   OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Input"
# -------------------------------------------------------------------------

FACTORY_DEF * AttrSetFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_FetchParamsAttributeCreator    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Input"    MULTI_FEATURE_MODE NO 	 NULL_ATTR_MODE NO_OP 	 ATTRSET_CREATE_DIRECTIVES _PROPAGATE_MISSING_FDIV 	 ATTR_ACTION "" "_storage_account" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_ACCOUNT)"     ATTR_ACTION "" "_key" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_KEY$encode)"     ATTR_ACTION "" "_container" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_CONTAINER)"     ATTR_ACTION "" "_blob_name" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_BLOB_NAME)"     ATTR_ACTION "" "_src_type" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_SRC_TYPE$encode)"     ATTR_ACTION "" "_src_data" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_SRC_DATA)"    OUTPUT OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_FetchParamsAttributeCreator_OUTPUT"


# -------------------------------------------------------------------------

MACRO casemac
INCLUDE [ if { {NO} == {NO} } { puts {MACRO casemac -nocase}} ]
Tcl2 proc $(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_abd915eb_39b3_402b_95a6_6d5d172047d20_replacer { findText replaceText invalidValue} {     set attrs [split \"_blob_name\" {,}];     set findValue [FME_DecodeText $findText];     set replaceValue [FME_DecodeText $replaceText];     foreach attr $attrs {       set attrVal [FME_GetAttribute $attr];       set noMatch true;       if {{NO} == {YES}} {         set newAttrVal [FME_ReplaceRegex $(casemac) $findValue $attrVal $replaceValue];       } else {         set newAttrVal [string map $(casemac) [list $findValue $replaceValue] $attrVal];       };       if { $newAttrVal ne $attrVal } {         set noMatch false;         FME_SetAttribute $attr $newAttrVal;       };       if {$noMatch} {          if { $invalidValue == {FME_NULL_VALUE} } {             FME_SetAttributeNull $attr;          } elseif { $invalidValue != {_FME_NO_OP_} }  {             FME_SetAttribute $attr [FME_DecodeText $invalidValue];          };       };     }; }
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_FetchParamsAttributeCreator_OUTPUT"    OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_OUTPUT"         @Tcl2("$(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_abd915eb_39b3_402b_95a6_6d5d172047d20_replacer {<backslash>} {<solidus>} {_FME_NO_OP_}")

# -------------------------------------------------------------------------


FME_PYTHON_PATH "$(FME_MF_DIR)"

FACTORY_DEF * PythonFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_PythonCaller    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_OUTPUT"    SYMBOL_NAME FeatureProcessor    PYTHON_NAMESPACE FMEOBJECTS    SOURCE_CODE from<space>fmeobjects<space>import<space>FMELogFile<comma><space>FME_INFORM<comma><space>FME_WARN<lf>from<space>cStringIO<space>import<space>StringIO<lf>import<space>os<lf>import<space>requests<lf>from<space>collections<space>import<space>OrderedDict<lf>import<space>datetime<lf><lf><lf>import<space>base64<lf>import<space>uuid<lf>import<space>hashlib<lf>import<space>hmac<lf>import<space>sys<lf><lf>PUT_BLOB_LIMIT<space>=<space>1024<space>*<space>1024<space>*<space>64<space><space><space><space><space><space>#<space>64<space>MB<lf>PUT_BLOCK_CHUNK_SIZE<space>=<space>1024<space>*<space>1024<space>*<space>4<space>#<space>4<space>MB<lf>AZ_VERSION<space>=<space><apos>2015-02-21<apos><lf><lf>class<space>FeatureProcessor<openparen>object<closeparen>:<lf><space><space><space><space>def<space>__init__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile<space>=<space>FMELogFile<openparen><closeparen><lf><space><space><space><space><space><space><space><space>#<space>Make<space>sure<space>to<space>change<space>if<space>Custom<space>transformer<space>is<space>renamed<space><openparen>not<space>transformer<space>instance<space>name<space>-<space>that<apos>s<space>what<space>we<apos>re<space>fetching<closeparen><space><lf><space><space><space><space><space><space><space><space>self.xformer_name<space>=<space>FME_MacroValues<openbracket><apos>AzureBlobUploader_WORKSPACE_NAME<apos><closebracket><lf><space><space><space><space>def<space>info<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_INFORM<closeparen><lf><space><space><space><space><space><space><space><space>#self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_WARN<closeparen><space>#<space>while<space>developing<space>for<space>popping<space>out<lf><space><space><space><space>def<space>input<openparen>self<comma>feature<closeparen>:<lf><space><space><space><space><space><space><space><space>try:<lf><space><space><space><space><space><space><space><space><space><space><space><space>account<space>=<space>feature.getAttribute<openparen><apos>_storage_account<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>secret<space>=<space>feature.getAttribute<openparen><apos>_key<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>container<space>=<space>feature.getAttribute<openparen><apos>_container<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>blob_name<space>=<space>feature.getAttribute<openparen><apos>_blob_name<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>src_type<space>=<space>feature.getAttribute<openparen><apos>_src_type<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>src_type<space>==<space><apos>AttributeValue<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>feature.getAttribute<openparen><apos>_src_data<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>_unicode_type<closeparen>:<space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.put_blob<openparen>account<comma><space>secret<comma><space>container<comma><space>blob_name<comma><space>StringIO<openparen>data<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>elif<space>src_type<space>==<space><apos>FilePath<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>with<space>open<openparen>feature.getAttribute<openparen><apos>_src_data<apos><closeparen><comma><space><apos>rb<apos><closeparen><space>as<space>fin:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.put_blob<openparen>account<comma><space>secret<comma><space>container<comma><space>blob_name<comma><space>fin<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>else:<space>raise<space>Exception<openparen><apos>Unrecognized<space>source<space>type<space>`%s`<apos><space>%<space>src_type<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_upload_status<apos><comma><space><apos>success<apos><closeparen><lf><space><space><space><space><space><space><space><space>except<space>Exception<space>as<space>e:<lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_upload_status<apos><comma><space><apos>fail<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_error_message<apos><comma><space>str<openparen>e<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.logfile.logException<openparen>e<comma><space>FME_ERROR<closeparen><lf><space><space><space><space><space><space><space><space>self.pyoutput<openparen>feature<closeparen><lf><space><space><space><space>def<space>append_block<openparen>self<comma><space>account<comma><space>secret<comma><space>container<comma><space>blob_name<comma><space>block_data<closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space>create_headers<openparen>block_data<closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=appendblock<apos><space>%<space><openparen>account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Appending<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>authorize<openparen>headers<comma><space>account<comma><space>container<comma><space>blob_name<comma><space>secret<comma><space><apos>comp:appendblock<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data<space>=<space>block_data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>ERROR<space>status<space>%s:<space>`%s`<apos><space>%<space><openparen>r.status_code<comma><space>_string_to_sign<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space>def<space>put_block<openparen>self<comma><space>account<comma><space>secret<comma><space>container<comma><space>blob_name<comma><space>block_data<closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space>create_headers<openparen>block_data<closeparen><lf><space><space><space><space><space><space><space><space>headers<openbracket><apos>x-ms-blob-type<apos><closebracket><space>=<space><apos>BlockBlob<apos><lf><space><space><space><space><space><space><space><space>block_id<space>=<space>base64.b64encode<openparen>uuid.uuid4<openparen><closeparen>.hex<closeparen><lf><space><space><space><space><space><space><space><space>#https:<solidus><solidus>myaccount.blob.core.windows.net<solidus>mycontainer<solidus>myblob?comp=block<amp>blockid=id<lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=block<amp>blockid=%s<apos><space>%<space><openparen>account<comma><space>container<comma><space>blob_name<comma><space>block_id<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>block<space>of<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>authorize<openparen>headers<comma><space>account<comma><space>container<comma><space>blob_name<comma><space>secret<comma><space><apos>blockid:%s<backslash>ncomp:block<apos><space>%<space>block_id<closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=block_data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>return<space>block_id<lf><space><space><space><space>def<space>put_block_list<openparen>self<comma><space>account<comma><space>secret<comma><space>container<comma><space>blob_name<comma><space>block_list<closeparen>:<lf><space><space><space><space><space><space><space><space>list_fragments<space>=<space><apos><apos>.join<openparen>map<openparen>lambda<space>s:<space><apos><lt>Uncommitted<gt><opencurly><closecurly><lt><solidus>Uncommitted<gt><apos>.format<openparen>s<closeparen><comma><space>block_list<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>data<space>=<space><apos><lt>?xml<space>version=<quote>1.0<quote><space>encoding=<quote>utf-8<quote>?<gt><lt>BlockList<gt><opencurly><closecurly><lt><solidus>BlockList<gt><apos>.format<openparen>list_fragments<closeparen><lf><space><space><space><space><space><space><space><space>headers<space>=<space>create_headers<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=blocklist<apos><space>%<space><openparen>account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>authorize<openparen>headers<comma><space>account<comma><space>container<comma><space>blob_name<comma><space>secret<comma><space><apos>comp:blocklist<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space>def<space>put_blob<openparen>self<comma><space>account<comma><space>secret<comma><space>container<comma><space>blob_name<comma><space>fin<closeparen>:<lf><space><space><space><space><space><space><space><space>fin.seek<openparen>0<comma><space>os.SEEK_END<closeparen><lf><space><space><space><space><space><space><space><space>size<space>=<space>fin.tell<openparen><closeparen><lf><space><space><space><space><space><space><space><space>fin.seek<openparen>0<comma><space>os.SEEK_SET<closeparen><lf><space><space><space><space><space><space><space><space>if<space>size<space><lt><space>PUT_BLOB_LIMIT:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>fin.read<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<space>=<space>create_headers<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<openbracket><apos>x-ms-blob-type<apos><closebracket><space>=<space><apos>BlockBlob<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space>authorize<openparen>headers<comma><space>account<comma><space>container<comma><space>blob_name<comma><space>secret<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s<apos><space>%<space><openparen>account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>ids<space>=<space><openbracket><closebracket><lf><space><space><space><space><space><space><space><space><space><space><space><space>for<space>offset<space>in<space>range<openparen>0<comma><space>size<comma><space>PUT_BLOCK_CHUNK_SIZE<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>`%s`<comma><space>%s%%<apos><space>%<space><openparen>blob_name<comma><space>int<openparen>round<openparen>offset<space>*<space>100<space><solidus><space>size<closeparen><closeparen><space><closeparen><space><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>block_size<space>=<space>min<openparen>PUT_BLOCK_CHUNK_SIZE<comma><space>size<space>-<space>offset<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>ids.append<openparen>self.put_block<openparen>account<comma><space>secret<comma><space>container<comma><space>blob_name<comma><space>fin.read<openparen>block_size<closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.put_block_list<openparen>account<comma><space>secret<comma><space>container<comma><space>blob_name<comma><space>ids<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>#self.info<openparen><apos>ID<space>LIST<space>COMMITTED:<space>%s<apos><space>%<space><apos><backslash>n<backslash>t<apos>.join<openparen>ids<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Done<space>uploading<space>%s<space>bytes<space>of<space>data<apos><space>%<space>size<closeparen><lf><space><space><space><space>def<space>close<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>pass<lf><lf>def<space>authorize<openparen>headers<comma><space>storage_account<comma><space>container_name<comma><space>blob_name<comma><space>secret<comma><space>querystringencoded<space>=<space>None<closeparen>:<lf><space><space><space><space>content_length<space>=<space><apos><apos><lf><space><space><space><space>if<space>headers.get<openparen><apos>Content-Length<apos><closeparen><space>!=<space><apos>0<apos>:<lf><space><space><space><space><space><space><space><space>content_length<space>=<space>headers.get<openparen><apos>Content-Length<apos><closeparen><lf><space><space><space><space>fields<space>=<space><openbracket><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><apos>PUT<apos><space>#<space>VERB<space><openparen>http-method<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-Encoding<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-Language<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space>content_length<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-MD5<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space>headers.get<openparen><apos>Date<apos><comma><apos><apos><closeparen><space>#<space>Date<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-Modified-Since<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-None-Match<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-Unmodified-Since<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Range<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>?<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>?<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><closebracket><lf><space><space><space><space>if<space>headers.get<openparen><apos>x-ms-blob-type<apos><comma><space>None<closeparen>:<space>fields.append<openparen><apos>x-ms-blob-type:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-blob-type<apos><closeparen><closeparen><lf><space><space><space><space>fields.append<openparen><apos>x-ms-date:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-date<apos><closeparen><closeparen><lf><space><space><space><space>fields.append<openparen><apos>x-ms-version:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-version<apos><closeparen><closeparen><lf><space><space><space><space>fields.append<openparen><apos><solidus>%s<solidus>%s<solidus>%s<apos><space>%<space><openparen>storage_account<comma><space>container_name<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space>if<space>querystringencoded:<space>fields.append<openparen>querystringencoded<closeparen><lf><space><space><space><space>_string_to_sign<space>=<space><apos><backslash>n<apos>.join<openparen>fields<closeparen><lf><space><space><space><space>signature<space>=<space>_sign_string<openparen>secret<space><comma><space>_string_to_sign<closeparen><lf><space><space><space><space>headers<openbracket><apos>Authorization<apos><closebracket><space>=<space><apos>SharedKey<space>%s:%s<apos><space>%<space><openparen>storage_account<comma><space>signature<closeparen><lf><space><space><space><space>return<space>_string_to_sign<lf>def<space>create_headers<openparen>data<closeparen>:<lf><space><space><space><space>return<space>OrderedDict<openparen><opencurly><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><apos>Content-Length<apos>:<space>str<openparen>len<openparen>data<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-date<apos>:<space>_httpdate<openparen>datetime.datetime.utcnow<openparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-version<apos>:<space>AZ_VERSION<lf><space><space><space><space><space><space><space><space><closecurly><closeparen><lf><lf>def<space>_httpdate<openparen>dt<closeparen>:<lf><space><space><space><space><quote><quote><quote>Return<space>a<space>string<space>representation<space>of<space>a<space>date<space>according<space>to<space>RFC<space>1123<lf><space><space><space><space><openparen>HTTP<solidus>1.1<closeparen>.<lf><lf><space><space><space><space>The<space>supplied<space>date<space>must<space>be<space>in<space>UTC.<lf><lf><space><space><space><space><quote><quote><quote><lf><space><space><space><space>weekday<space>=<space><openbracket><quote>Mon<quote><comma><space><quote>Tue<quote><comma><space><quote>Wed<quote><comma><space><quote>Thu<quote><comma><space><quote>Fri<quote><comma><space><quote>Sat<quote><comma><space><quote>Sun<quote><closebracket><openbracket>dt.weekday<openparen><closeparen><closebracket><lf><space><space><space><space>month<space>=<space><openbracket><quote>Jan<quote><comma><space><quote>Feb<quote><comma><space><quote>Mar<quote><comma><space><quote>Apr<quote><comma><space><quote>May<quote><comma><space><quote>Jun<quote><comma><space><quote>Jul<quote><comma><space><quote>Aug<quote><comma><space><quote>Sep<quote><comma><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><quote>Oct<quote><comma><space><quote>Nov<quote><comma><space><quote>Dec<quote><closebracket><openbracket>dt.month<space>-<space>1<closebracket><lf><space><space><space><space>return<space><quote>%s<comma><space>%02d<space>%s<space>%04d<space>%02d:%02d:%02d<space>GMT<quote><space>%<space><openparen>weekday<comma><space>dt.day<comma><space>month<comma><lf><space><space><space><space><space><space><space><space>dt.year<comma><space>dt.hour<comma><space>dt.minute<comma><space>dt.second<closeparen><lf><lf>if<space>sys.version_info<space><lt><space><openparen>3<comma><closeparen>:<lf><space><space><space><space>from<space>collections<space>import<space>Iterable<lf><space><space><space><space>_unicode_type<space>=<space>unicode<lf>else:<lf><space><space><space><space>from<space>collections.abc<space>import<space>Iterable<lf><space><space><space><space>_unicode_type<space>=<space>str<lf><lf>def<space>_encode_base64<openparen>data<closeparen>:<lf><space><space><space><space>if<space>isinstance<openparen>data<comma><space>_unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space>encoded<space>=<space>base64.b64encode<openparen>data<closeparen><lf><space><space><space><space>return<space>encoded.decode<openparen><apos>utf-8<apos><closeparen><lf>def<space>_decode_base64_to_bytes<openparen>data<closeparen>:<lf><space><space><space><space>if<space>isinstance<openparen>data<comma><space>_unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space>return<space>base64.b64decode<openparen>data<closeparen><lf>def<space>_sign_string<openparen>key<comma><space>string_to_sign<comma><space>key_is_base64=True<closeparen>:<lf><space><space><space><space>if<space>key_is_base64:<lf><space><space><space><space><space><space><space><space>key<space>=<space>_decode_base64_to_bytes<openparen>key<closeparen><lf><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>key<comma><space>_unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>key<space>=<space>key.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space>if<space>isinstance<openparen>string_to_sign<comma><space>_unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space>string_to_sign<space>=<space>string_to_sign.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space>signed_hmac_sha256<space>=<space>hmac.HMAC<openparen>key<comma><space>string_to_sign<comma><space>hashlib.sha256<closeparen><lf><space><space><space><space>digest<space>=<space>signed_hmac_sha256.digest<openparen><closeparen><lf><space><space><space><space>encoded_digest<space>=<space>_encode_base64<openparen>digest<closeparen><lf><space><space><space><space>return<space>encoded_digest    OUTPUT PYOUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_PythonCaller_OUTPUT"

# -------------------------------------------------------------------------
Lookup $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_AttributeFilterLut   success ok   fail ok   "" notok   ENCODED

Tcl2 proc $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_setFeatType {} {     global FME_FeatureType;     set ft {$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_};     append ft [FME_EncodeText [FME_GetAttribute [FME_DecodeText {_upload_status}]]];     set FME_FeatureType $ft; }
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_PythonCaller_OUTPUT"    TEST @Lookup($(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_AttributeFilterLut,_upload_status,ENCODED_ATTR) == "ok"    OUTPUT PASSED FEATURE_TYPE * @Tcl2($(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_setFeatType)    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_NullFilter    INPUT FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>    TEST _upload_status ATTRIBUTE_VALUE_NULL "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_MissingFilter    INPUT FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>    TEST _upload_status ATTRIBUTE_IS_MISSING "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_BlankFilter    INPUT FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>    TEST _upload_status ATTRIBUTE_IS_EMPTY "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<EMPTY>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>



FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter <EMPTY> Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<EMPTY>"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter <MISSING> Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter <NULL> Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter <UNFILTERED> Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>"
# -------------------------------------------------------------------------

INCLUDE [    set macroLine "MACRO $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_fail"    OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"        @RemoveAttributes(fme_encoded,_src_data,_key,_storage_account,_src_type,_upload_status,_blob_name,_container)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP)")

# -------------------------------------------------------------------------

INCLUDE [    set macroLine "MACRO $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_success"    OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_OUTPUT"        @RemoveAttributes(fme_encoded,_src_data,_key,_storage_account,_src_type,_error_message,_upload_status,_blob_name,_container)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_LIST_EXP)")

FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_Success1470401648 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Success"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_Fail1470401648 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Fail"
INCLUDE [puts {MACRO WB_CURRENT_CONTEXT $(WB_OLD_CONTEXT_$(AzureBlobUploader_WORKSPACE_NAME))}]
#! <?xml version="1.0" encoding="UTF-8" ?>
#! <TRANSFORMER
# TRANSFORMER_BEGIN AzureBlobUploader,1,"Web Services",2e8d00c9-fcbc-4edd-85d5-0c02c915d7bb,"Linked by Default",No,NO_PARALLELISM,,No,16492,YES,No
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Uploads a file to Azure using the Azure Blob Service REST API (https://msdn.microsoft.com/en-us/library/azure/dd135733.aspx)</p>
# <p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">
#     <br/>
# </p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">A key is needed as well as the name of the storage account.</p>
# <p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">
#     <br/>
# </p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Source data can be either from an attribute or a filepath.</p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Maximum file size is roughly 195 GB. </p>
# <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Files larger than 64 MB will be uploaded in chunks of 4 MB. </p>
# 
# TRANSFORMER_END
#!   CATEGORY="Web Services"
#!   FME_SERVER_SERVICES=""
#!   VIEW_POSITION="121.876 546.88"
#!   SHOW_INFO_NODES="true"
#!   FME_DOCUMENT_PRIORGUID="1fc96b47-53dd-454b-88ae-d3554cb967e8,bae5eede-3431-4c22-a002-27e10fe7b625,2d4d4d9a-f031-49da-bd7e-c22bad44349d"
#!   FME_LINKED_TRANSFORMER_VERSION="1"
#!   HISTORY="2016-06-27,peter.segerstedt&lt;at&gt;eea.europa.eu,Original&lt;space&gt;definition"
#!   REQUIREMENTS_KEYWORD="none"
#!   DOC_EXTENTS="3553.91 256.252"
#!   FME_DOCUMENT_GUID="2e8d00c9-fcbc-4edd-85d5-0c02c915d7bb"
#!   LAST_SAVE_DATE="2016-07-05T14:29:24"
#!   FMX_INSERT_MODE="Linked by Default"
#!   ITERATION_COUNT_ATTR=""
#!   FME_PROCESS_GROUP_BY=""
#!   EXPLICIT_BOOKMARK_ORDER="false"
#!   LEGAL_TERMS_CONDITIONS="&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;"
#!   WORKSPACE_VERSION="1"
#!   WARN_INVALID_XFORM_PARAM="Yes"
#!   FME_PROCESS_COUNT="NO_PARALLELISM"
#!   ATTR_TYPE_ENCODING="SDF"
#!   PASSWORD=""
#!   ZOOM_SCALE="100"
#!   FMX_ATTRIBUTE_PROPOGATION_MODE="AUTO"
#!   FME_PROCESS_GROUPS_ORDERED="No"
#!   REQUIREMENTS="&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;"
#!   MAX_LOOP_ITERATIONS=""
#!   BLOCKED_LOOPING="No"
#!   LAST_SAVE_BUILD="FME(R) 2016.1.0.0 (20160419 - Build 16492 - WIN64)"
#!   SHOW_ANNOTATIONS="true"
#!   DOC_TOP_LEFT="-76.9399 -818.758"
#!   FME_BUILD_NUM="16492"
#!   DESCRIPTION="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Uploads a file to Azure using the Azure Blob Service REST API (https://msdn.microsoft.com/en-us/library/azure/dd135733.aspx)&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;A key is needed as well as the name of the storage account.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Source data can be either from an attribute or a filepath.&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Maximum file size is roughly 195 GB. &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Files larger than 64 MB will be uploaded in chunks of 4 MB. &lt;/p&gt;&#10;"
#!   USAGE="&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Storage account:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the storage account. Look for this under the portal.azure.com.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-weight:600;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Access key:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Provide the access key for the blob inside Azure. You can find this when you select the storage inside the protal.azure.com website, go to settings and then search for &quot;Access keys&quot;.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Use access keys to authenticate your applications when making requests to this Azure storage account. Store your access keys securely - for example, using Azure Key Vault - and don&apos;t share them. We recommend regenerating your access keys regularly. You are provided two access keys so that you can maintain connections using one key while regenerating the other. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Container name:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The storage countainer name. These are listed directly under the storage account pannel. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Blob name:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The name of the blob you are about to create. The filename of the source data will be used if this was not provided. You can create folders by simply using the &apos;/&apos; for example &quot;folder1/folder2/blobname&quot;. &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;span style=&quot; font-weight:600;&quot;&gt;Upload from:&lt;/span&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Describes what is provided inside the &quot;source data&quot; attribute. When set to &quot;AttributeValue&quot; it means that the source data is a binary file. When set to &quot;file&quot; it means that the source data is a path towards a file.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;This transformer currently only stores &quot;block blobs&quot;&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;block blob: &lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Block blobs let you upload large blobs efficiently. Block blobs are comprised of blocks, each of which is identified by a block ID. You create or modify a block blob by writing a set of blocks and committing them by their block IDs. Each block can be a different size, up to a maximum of 4 MB, and a block blob can include up to 50,000 blocks. The maximum size of a block blob is therefore slightly more than 195 GB (4 MB X 50,000 blocks). If you are writing a block blob that is no more than 64 MB in size, you can upload it in its entirety with a single write operation&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;append blob:&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;An append blob is comprised of blocks and is optimized for append operations. When you modify an append blob, blocks are added to the end of the blob only, via the &lt;a href=&quot;https://msdn.microsoft.com/en-us/library/azure/mt427365.aspx&quot;&gt;&#10;        &lt;span style=&quot; text-decoration: underline; color:#0000ff;&quot;&gt;Append Block &lt;/span&gt;&#10;    &lt;/a&gt;operation. Updating or deleting of existing blocks is not supported. Unlike a block blob, an append blob does not expose its block IDs. &lt;/p&gt;&#10;&lt;p style=&quot; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Each block in an append blob can be a different size, up to a maximum of 4 MB, and an append blob can include up to 50,000 blocks. The maximum size of an append blob is therefore slightly more than 195 GB (4 MB X 50,000 blocks).&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;page blob:&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&#10;    &lt;br/&gt;&#10;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Page blobs are a collection of 512-byte pages optimized for random read and write operations. To create a page blob, you initialize the page blob and specify the maximum size the page blob will grow. To add or update the contents of a page blob, you write a page or pages by specifying an offset and a range that align to 512-byte page boundaries. A write to a page blob can overwrite just one page, some pages, or up to 4 MB of the page blob. Writes to page blobs happen in-place and are immediately committed to the blob. The maximum size for a page blob is 1 TB. &lt;/p&gt;&#10;"
#!   XFORM_DEPRECATED="No"
#!   TITLE="AzureBlobUploader"
#! >
#! <DATASETS>
#! </DATASETS>
#! <DATA_TYPES>
#! </DATA_TYPES>
#! <GEOM_TYPES>
#! </GEOM_TYPES>
#! <FEATURE_TYPES>
#! </FEATURE_TYPES>
#! <FMESERVER>
#! </FMESERVER>
#! <GLOBAL_PARAMETERS>
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI PASSWORD_OR_ATTR KEY Access key:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="true"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR ACCOUNT &quot; &quot; Storage account:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR CONTAINER &quot; &quot; Container:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR BLOB_NAME &quot; &quot; Blob Name:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI CHOICE_OR_ATTR SRC_TYPE AttributeValue%FilePath Upload From:"
#!   DEFAULT_VALUE="AttributeValue"
#!   IS_STAND_ALONE="true"
#! />
#! <GLOBAL_PARAMETER
#!   GUI_LINE="GUI TEXT_EDIT_OR_NUM_MULTI_FEATURE_OR_ATTR SRC_DATA &quot; &quot; Source Data:"
#!   DEFAULT_VALUE=""
#!   IS_STAND_ALONE="false"
#! />
#! </GLOBAL_PARAMETERS>
#! <COMMENTS>
#! </COMMENTS>
#! <CONSTANTS>
#! </CONSTANTS>
#! <BOOKMARKS>
#! </BOOKMARKS>
#! <TRANSFORMERS>
#! <TRANSFORMER
#!   IDENTIFIER="1"
#!   TYPE="AttributeCreator"
#!   VERSION="8"
#!   POSITION="487.316 -562.506"
#!   BOUNDING_RECT="487.316 -562.506 618.756 71"
#!   ORDER="5e+14"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_VALUE" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="NULL_ATTR_MODE_DISPLAY" PARM_VALUE="No Substitution"/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_HANDLING" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NUM_PRIOR_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="FetchParamsAttributeCreator"/>
#!     <XFORM_PARM PARM_NAME="ATTR_TABLE" PARM_VALUE="&quot;&quot; _storage_account SET_TO $(ACCOUNT)  _key SET_TO $(KEY)  _container SET_TO $(CONTAINER)  _blob_name SET_TO $(BLOB_NAME)  _src_type SET_TO $(SRC_TYPE)  _src_data SET_TO $(SRC_DATA)"/>
#!     <XFORM_PARM PARM_NAME="MULTI_FEATURE_MODE" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTRIBUTE_GRP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NUM_SUBSEQUENT_FEATURES" PARM_VALUE="&lt;Unused&gt;"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="2"
#!   TYPE="PythonCaller"
#!   VERSION="4"
#!   POSITION="1773.83 -562.506"
#!   BOUNDING_RECT="1773.83 -562.506 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16492"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <XFORM_ATTR ATTR_NAME="_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_upload_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="NEW_ATTRIBUTES" PARM_VALUE="_upload_status _error_message"/>
#!     <XFORM_PARM PARM_NAME="PYTHONSYMBOL" PARM_VALUE="FeatureProcessor"/>
#!     <XFORM_PARM PARM_NAME="ADVANCED_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PYTHONSOURCE" PARM_VALUE="from&lt;space&gt;fmeobjects&lt;space&gt;import&lt;space&gt;FMELogFile&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;comma&gt;&lt;space&gt;FME_WARN&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;lf&gt;from&lt;space&gt;cStringIO&lt;space&gt;import&lt;space&gt;StringIO&lt;lf&gt;import&lt;space&gt;os&lt;lf&gt;import&lt;space&gt;requests&lt;lf&gt;from&lt;space&gt;collections&lt;space&gt;import&lt;space&gt;OrderedDict&lt;lf&gt;import&lt;space&gt;datetime&lt;lf&gt;&lt;lf&gt;&lt;lf&gt;import&lt;space&gt;base64&lt;lf&gt;import&lt;space&gt;hashlib&lt;lf&gt;import&lt;space&gt;hmac&lt;lf&gt;import&lt;space&gt;sys&lt;lf&gt;&lt;lf&gt;PUT_BLOB_LIMIT&lt;space&gt;=&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;64&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;64&lt;space&gt;MB&lt;lf&gt;PUT_BLOCK_CHUNK_SIZE&lt;space&gt;=&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;1024&lt;space&gt;*&lt;space&gt;4&lt;space&gt;#&lt;space&gt;4&lt;space&gt;MB&lt;lf&gt;AZ_VERSION&lt;space&gt;=&lt;space&gt;&lt;apos&gt;2015-02-21&lt;apos&gt;&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;FeatureProcessor&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile&lt;space&gt;=&lt;space&gt;FMELogFile&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;Make&lt;space&gt;sure&lt;space&gt;to&lt;space&gt;change&lt;space&gt;if&lt;space&gt;Custom&lt;space&gt;transformer&lt;space&gt;is&lt;space&gt;renamed&lt;space&gt;&lt;openparen&gt;not&lt;space&gt;transformer&lt;space&gt;instance&lt;space&gt;name&lt;space&gt;-&lt;space&gt;that&lt;apos&gt;s&lt;space&gt;what&lt;space&gt;we&lt;apos&gt;re&lt;space&gt;fetching&lt;closeparen&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.xformer_name&lt;space&gt;=&lt;space&gt;FME_MacroValues&lt;openbracket&gt;&lt;apos&gt;AzureBlobUploader_WORKSPACE_NAME&lt;apos&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;info&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_INFORM&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#self.logfile.logMessageString&lt;openparen&gt;&lt;apos&gt;%s:&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;self.xformer_name&lt;comma&gt;&lt;space&gt;message&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;FME_WARN&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;while&lt;space&gt;developing&lt;space&gt;for&lt;space&gt;popping&lt;space&gt;out&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;input&lt;openparen&gt;self&lt;comma&gt;feature&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;try:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;account&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_storage_account&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;secret&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_key&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;container&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_container&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;blob_name&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_blob_name&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;src_type&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_src_type&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;src_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;AttributeValue&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_src_data&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;_unicode_type&lt;closeparen&gt;:&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.put_blob&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;StringIO&lt;openparen&gt;data&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;elif&lt;space&gt;src_type&lt;space&gt;==&lt;space&gt;&lt;apos&gt;FilePath&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;with&lt;space&gt;open&lt;openparen&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;_src_data&lt;apos&gt;&lt;closeparen&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;rb&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;as&lt;space&gt;fin:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.put_blob&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;&lt;apos&gt;Unrecognized&lt;space&gt;source&lt;space&gt;type&lt;space&gt;`%s`&lt;apos&gt;&lt;space&gt;%&lt;space&gt;src_type&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_upload_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;success&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;except&lt;space&gt;Exception&lt;space&gt;as&lt;space&gt;e:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_upload_status&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;fail&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;_error_message&lt;apos&gt;&lt;comma&gt;&lt;space&gt;str&lt;openparen&gt;e&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.logfile.logException&lt;openparen&gt;e&lt;comma&gt;&lt;space&gt;FME_ERROR&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.pyoutput&lt;openparen&gt;feature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;append_block&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;block_data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;create_headers&lt;openparen&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s?comp=appendblock&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Appending&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;&lt;apos&gt;comp:appendblock&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;block_data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;ERROR&lt;space&gt;status&lt;space&gt;%s:&lt;space&gt;`%s`&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;r.status_code&lt;comma&gt;&lt;space&gt;_string_to_sign&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;put_blob&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.seek&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;os.SEEK_END&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;size&lt;space&gt;=&lt;space&gt;fin.tell&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fin.seek&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;os.SEEK_SET&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;size&lt;space&gt;&lt;lt&gt;&lt;space&gt;PUT_BLOB_LIMIT:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;fin.read&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;create_headers&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;BlockBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;secret&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;data&lt;space&gt;to&lt;space&gt;blob&lt;space&gt;using&lt;space&gt;url&lt;space&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;url&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;comma&gt;&lt;space&gt;data=data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;space&gt;=&lt;space&gt;create_headers&lt;openparen&gt;&lt;apos&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;AppendBlob&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;secret&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;url&lt;space&gt;=&lt;space&gt;&lt;apos&gt;https:&lt;solidus&gt;&lt;solidus&gt;%s.blob.core.windows.net&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;r&lt;space&gt;=&lt;space&gt;requests.put&lt;openparen&gt;url&lt;comma&gt;&lt;space&gt;headers=headers&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;r.status_code&lt;space&gt;!=&lt;space&gt;201:&lt;space&gt;raise&lt;space&gt;Exception&lt;openparen&gt;str&lt;openparen&gt;r.content&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;offset&lt;space&gt;in&lt;space&gt;range&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;size&lt;comma&gt;&lt;space&gt;PUT_BLOCK_CHUNK_SIZE&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Uploading&lt;space&gt;`%s`&lt;comma&gt;&lt;space&gt;%s%%&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;blob_name&lt;comma&gt;&lt;space&gt;int&lt;openparen&gt;round&lt;openparen&gt;offset&lt;space&gt;*&lt;space&gt;100&lt;space&gt;&lt;solidus&gt;&lt;space&gt;size&lt;closeparen&gt;&lt;closeparen&gt;&lt;space&gt;&lt;closeparen&gt;&lt;space&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;block_size&lt;space&gt;=&lt;space&gt;min&lt;openparen&gt;PUT_BLOCK_CHUNK_SIZE&lt;comma&gt;&lt;space&gt;size&lt;space&gt;-&lt;space&gt;offset&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.append_block&lt;openparen&gt;account&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;container&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;fin.read&lt;openparen&gt;block_size&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.info&lt;openparen&gt;&lt;apos&gt;Done&lt;space&gt;uploading&lt;space&gt;%s&lt;space&gt;bytes&lt;space&gt;of&lt;space&gt;data&lt;apos&gt;&lt;space&gt;%&lt;space&gt;size&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;close&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;pass&lt;lf&gt;&lt;lf&gt;def&lt;space&gt;authorize&lt;openparen&gt;headers&lt;comma&gt;&lt;space&gt;storage_account&lt;comma&gt;&lt;space&gt;container_name&lt;comma&gt;&lt;space&gt;blob_name&lt;comma&gt;&lt;space&gt;secret&lt;comma&gt;&lt;space&gt;querystringencoded&lt;space&gt;=&lt;space&gt;None&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;content_length&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Content-Length&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;!=&lt;space&gt;&lt;apos&gt;0&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;content_length&lt;space&gt;=&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Content-Length&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;PUT&lt;apos&gt;&lt;space&gt;#&lt;space&gt;VERB&lt;space&gt;&lt;openparen&gt;http-method&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-Encoding&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-Language&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;content_length&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Content-MD5&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;Date&lt;apos&gt;&lt;comma&gt;&lt;apos&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;space&gt;#&lt;space&gt;Date&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-Modified-Since&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-None-Match&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;If-Unmodified-Since&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;Range&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;?&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;space&gt;#&lt;space&gt;?&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;comma&gt;&lt;space&gt;None&lt;closeparen&gt;:&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-blob-type&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-date:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-date&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;x-ms-version:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;headers.get&lt;openparen&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fields.append&lt;openparen&gt;&lt;apos&gt;&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;solidus&gt;%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;storage_account&lt;comma&gt;&lt;space&gt;container_name&lt;comma&gt;&lt;space&gt;blob_name&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;querystringencoded:&lt;space&gt;fields.append&lt;openparen&gt;querystringencoded&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_string_to_sign&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;backslash&gt;n&lt;apos&gt;.join&lt;openparen&gt;fields&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;signature&lt;space&gt;=&lt;space&gt;_sign_string&lt;openparen&gt;secret&lt;space&gt;&lt;comma&gt;&lt;space&gt;_string_to_sign&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;headers&lt;openbracket&gt;&lt;apos&gt;Authorization&lt;apos&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;apos&gt;SharedKey&lt;space&gt;%s:%s&lt;apos&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;storage_account&lt;comma&gt;&lt;space&gt;signature&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;_string_to_sign&lt;lf&gt;def&lt;space&gt;create_headers&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;OrderedDict&lt;openparen&gt;&lt;opencurly&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;Content-Length&lt;apos&gt;:&lt;space&gt;str&lt;openparen&gt;len&lt;openparen&gt;data&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-date&lt;apos&gt;:&lt;space&gt;_httpdate&lt;openparen&gt;datetime.datetime.utcnow&lt;openparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;x-ms-version&lt;apos&gt;:&lt;space&gt;AZ_VERSION&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closecurly&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;def&lt;space&gt;_httpdate&lt;openparen&gt;dt&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;Return&lt;space&gt;a&lt;space&gt;string&lt;space&gt;representation&lt;space&gt;of&lt;space&gt;a&lt;space&gt;date&lt;space&gt;according&lt;space&gt;to&lt;space&gt;RFC&lt;space&gt;1123&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;openparen&gt;HTTP&lt;solidus&gt;1.1&lt;closeparen&gt;.&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;The&lt;space&gt;supplied&lt;space&gt;date&lt;space&gt;must&lt;space&gt;be&lt;space&gt;in&lt;space&gt;UTC.&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;weekday&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;quote&gt;Mon&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Tue&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Wed&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Thu&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Fri&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sat&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sun&lt;quote&gt;&lt;closebracket&gt;&lt;openbracket&gt;dt.weekday&lt;openparen&gt;&lt;closeparen&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;month&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;quote&gt;Jan&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Feb&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Mar&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Apr&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;May&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Jun&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Jul&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Aug&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Sep&lt;quote&gt;&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;Oct&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Nov&lt;quote&gt;&lt;comma&gt;&lt;space&gt;&lt;quote&gt;Dec&lt;quote&gt;&lt;closebracket&gt;&lt;openbracket&gt;dt.month&lt;space&gt;-&lt;space&gt;1&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;&lt;quote&gt;%s&lt;comma&gt;&lt;space&gt;%02d&lt;space&gt;%s&lt;space&gt;%04d&lt;space&gt;%02d:%02d:%02d&lt;space&gt;GMT&lt;quote&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;weekday&lt;comma&gt;&lt;space&gt;dt.day&lt;comma&gt;&lt;space&gt;month&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;dt.year&lt;comma&gt;&lt;space&gt;dt.hour&lt;comma&gt;&lt;space&gt;dt.minute&lt;comma&gt;&lt;space&gt;dt.second&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;if&lt;space&gt;sys.version_info&lt;space&gt;&lt;lt&gt;&lt;space&gt;&lt;openparen&gt;3&lt;comma&gt;&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;from&lt;space&gt;collections&lt;space&gt;import&lt;space&gt;Iterable&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_unicode_type&lt;space&gt;=&lt;space&gt;unicode&lt;lf&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;from&lt;space&gt;collections.abc&lt;space&gt;import&lt;space&gt;Iterable&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;_unicode_type&lt;space&gt;=&lt;space&gt;str&lt;lf&gt;&lt;lf&gt;def&lt;space&gt;_encode_base64&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;_unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;encoded&lt;space&gt;=&lt;space&gt;base64.b64encode&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;encoded.decode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;def&lt;space&gt;_decode_base64_to_bytes&lt;openparen&gt;data&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;data&lt;comma&gt;&lt;space&gt;_unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;data&lt;space&gt;=&lt;space&gt;data.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;base64.b64decode&lt;openparen&gt;data&lt;closeparen&gt;&lt;lf&gt;def&lt;space&gt;_sign_string&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;string_to_sign&lt;comma&gt;&lt;space&gt;key_is_base64=True&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;key_is_base64:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;key&lt;space&gt;=&lt;space&gt;_decode_base64_to_bytes&lt;openparen&gt;key&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;_unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;key&lt;space&gt;=&lt;space&gt;key.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;isinstance&lt;openparen&gt;string_to_sign&lt;comma&gt;&lt;space&gt;_unicode_type&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;string_to_sign&lt;space&gt;=&lt;space&gt;string_to_sign.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;signed_hmac_sha256&lt;space&gt;=&lt;space&gt;hmac.HMAC&lt;openparen&gt;key&lt;comma&gt;&lt;space&gt;string_to_sign&lt;comma&gt;&lt;space&gt;hashlib.sha256&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;digest&lt;space&gt;=&lt;space&gt;signed_hmac_sha256.digest&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;encoded_digest&lt;space&gt;=&lt;space&gt;_encode_base64&lt;openparen&gt;digest&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;encoded_digest"/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="PythonCaller"/>
#!     <XFORM_PARM PARM_NAME="HIDE_ATTRIBUTES" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="3"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="2883.21 -562.506"
#!   BOUNDING_RECT="2883.21 -562.506 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_src_data,_key,_storage_account,_src_type,_error_message,_upload_status,_blob_name,_container"/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="4"
#!   TYPE="AttributeFilter"
#!   VERSION="4"
#!   POSITION="2289.46 -562.506"
#!   BOUNDING_RECT="2289.46 -562.506 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="&lt;EMPTY&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_upload_status" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="&lt;MISSING&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="_storage_account" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_key" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_container" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_blob_name" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_src_type" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_src_data" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_upload_status" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="_error_message" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <OUTPUT_FEAT NAME="&lt;NULL&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="2"/>
#!     <XFORM_ATTR ATTR_NAME="_storage_account" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_key" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_container" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_blob_name" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_src_type" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_src_data" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_upload_status" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="_error_message" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <OUTPUT_FEAT NAME="&lt;UNFILTERED&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="3"/>
#!     <XFORM_ATTR ATTR_NAME="_storage_account" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_key" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_container" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_blob_name" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_src_type" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_src_data" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_upload_status" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="_error_message" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <OUTPUT_FEAT NAME="success"/>
#!     <FEAT_COLLAPSED COLLAPSED="4"/>
#!     <XFORM_ATTR ATTR_NAME="_storage_account" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_key" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_container" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_blob_name" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_src_type" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_src_data" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_upload_status" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <XFORM_ATTR ATTR_NAME="_error_message" IS_USER_CREATED="false" FEAT_INDEX="4" />
#!     <OUTPUT_FEAT NAME="fail"/>
#!     <FEAT_COLLAPSED COLLAPSED="5"/>
#!     <XFORM_ATTR ATTR_NAME="_storage_account" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_key" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_container" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_blob_name" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_src_type" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_src_data" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_upload_status" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_ATTR ATTR_NAME="_error_message" IS_USER_CREATED="false" FEAT_INDEX="5" />
#!     <XFORM_PARM PARM_NAME="ATTR_VALUES" PARM_VALUE="&lt;lt&gt;EMPTY&lt;gt&gt;,&lt;lt&gt;MISSING&lt;gt&gt;,&lt;lt&gt;NULL&lt;gt&gt;,&lt;lt&gt;UNFILTERED&lt;gt&gt;,success,fail"/>
#!     <XFORM_PARM PARM_NAME="ATTR_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeFilter"/>
#!     <XFORM_PARM PARM_NAME="ATTR_NAME" PARM_VALUE="_upload_status"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="5"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="2883.21 -818.758"
#!   BOUNDING_RECT="2883.21 -818.758 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="false"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16177"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_error_message" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="_src_data,_key,_storage_account,_src_type,_upload_status,_blob_name,_container"/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover_2"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="16"
#!   TYPE="StringReplacer"
#!   VERSION="4"
#!   POSITION="1223.32 -562.506"
#!   BOUNDING_RECT="1223.32 -562.506 -1 -1"
#!   ORDER="5e+14"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="16492"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="_storage_account" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_key" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_container" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_blob_name" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_src_type" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="_src_data" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="CASE" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="SRC_ATTRS" PARM_VALUE="_blob_name"/>
#!     <XFORM_PARM PARM_NAME="NO_MATCH" PARM_VALUE="_FME_NO_OP_"/>
#!     <XFORM_PARM PARM_NAME="NO_MATCH_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REPLACE_TEXT" PARM_VALUE="&lt;solidus&gt;"/>
#!     <XFORM_PARM PARM_NAME="FIND_TEXT" PARM_VALUE="&lt;backslash&gt;"/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="StringReplacer"/>
#!     <XFORM_PARM PARM_NAME="REGEXP" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#! </TRANSFORMER>
#! </TRANSFORMERS>
#! <SUBDOCUMENT_IOS>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="6"
#!   NAME="Input"
#!   POSITION="-76.9399 -562.506"
#!   BOUNDING_RECT="-76.9399 -562.506 -1 -1"
#!   COLLAPSED="true"
#!   PUBLISHED="true"
#!   IS_SOURCE="true"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="7"
#!   NAME="Success"
#!   POSITION="3476.97 -562.506"
#!   BOUNDING_RECT="3476.97 -562.506 -1 -1"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="8"
#!   NAME="Fail"
#!   POSITION="3476.97 -818.758"
#!   BOUNDING_RECT="3476.97 -818.758 -1 -1"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! </SUBDOCUMENT_IOS>
#! <FEAT_LINKS>
#! <FEAT_LINK
#!   IDENTIFIER="9"
#!   SOURCE_NODE="6"
#!   TARGET_NODE="1"
#!   SOURCE_PORT_DESC="0"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="17"
#!   SOURCE_NODE="1"
#!   TARGET_NODE="16"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="11"
#!   SOURCE_NODE="2"
#!   TARGET_NODE="4"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="13"
#!   SOURCE_NODE="3"
#!   TARGET_NODE="7"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="12"
#!   SOURCE_NODE="5"
#!   TARGET_NODE="8"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="18"
#!   SOURCE_NODE="16"
#!   TARGET_NODE="2"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="14"
#!   SOURCE_NODE="4"
#!   TARGET_NODE="3"
#!   SOURCE_PORT_DESC="fo 4 success"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="15"
#!   SOURCE_NODE="4"
#!   TARGET_NODE="5"
#!   SOURCE_PORT_DESC="fo 5 fail"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! </FEAT_LINKS>
#! <BREAKPOINTS>
#! </BREAKPOINTS>
#! <ATTR_LINKS>
#! </ATTR_LINKS>
#! <SUBDOCUMENTS>
#! </SUBDOCUMENTS>
#! <LOOKUP_TABLES>
#! </LOOKUP_TABLES>
#! </TRANSFORMER>
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_KEY 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_ACCOUNT 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_CONTAINER 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_BLOB_NAME 
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_SRC_TYPE AttributeValue
DEFAULT_MACRO $(AzureBlobUploader_WORKSPACE_NAME)_SRC_DATA 
#! START_HEADER
#! END_HEADER

LOG_TIMINGS YES
LOG_FILTER_MASK -1
DEFAULT_MACRO WB_CURRENT_CONTEXT
DEFAULT_MACRO AzureBlobUploader_WORKSPACE_NAME ""
INCLUDE [puts {MACRO WB_OLD_CONTEXT_$(AzureBlobUploader_WORKSPACE_NAME) $(WB_CURRENT_CONTEXT)};          puts {MACRO WB_CURRENT_CONTEXT $(AzureBlobUploader_WORKSPACE_NAME)}]
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_Input1467721764 Input Splitter"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Input"   OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Input"
# -------------------------------------------------------------------------

FACTORY_DEF * AttrSetFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_FetchParamsAttributeCreator    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Input"    MULTI_FEATURE_MODE NO 	 NULL_ATTR_MODE NO_OP 	 ATTRSET_CREATE_DIRECTIVES _PROPAGATE_MISSING_FDIV 	 ATTR_ACTION "" "_storage_account" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_ACCOUNT)"     ATTR_ACTION "" "_key" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_KEY$encode)"     ATTR_ACTION "" "_container" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_CONTAINER)"     ATTR_ACTION "" "_blob_name" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_BLOB_NAME)"     ATTR_ACTION "" "_src_type" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_SRC_TYPE$encode)"     ATTR_ACTION "" "_src_data" "SET_TO" "$($(AzureBlobUploader_WORKSPACE_NAME)_SRC_DATA)"    OUTPUT OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_FetchParamsAttributeCreator_OUTPUT"


# -------------------------------------------------------------------------

MACRO casemac
INCLUDE [ if { {NO} == {NO} } { puts {MACRO casemac -nocase}} ]
Tcl2 proc $(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_5bff7e40_59da_4119_93df_a7d9caa43cf91_replacer { findText replaceText invalidValue} {     set attrs [split \"_blob_name\" {,}];     set findValue [FME_DecodeText $findText];     set replaceValue [FME_DecodeText $replaceText];     foreach attr $attrs {       set attrVal [FME_GetAttribute $attr];       set noMatch true;       if {{NO} == {YES}} {         set newAttrVal [FME_ReplaceRegex $(casemac) $findValue $attrVal $replaceValue];       } else {         set newAttrVal [string map $(casemac) [list $findValue $replaceValue] $attrVal];       };       if { $newAttrVal ne $attrVal } {         set noMatch false;         FME_SetAttribute $attr $newAttrVal;       };       if {$noMatch} {          if { $invalidValue == {FME_NULL_VALUE} } {             FME_SetAttributeNull $attr;          } elseif { $invalidValue != {_FME_NO_OP_} }  {             FME_SetAttribute $attr [FME_DecodeText $invalidValue];          };       };     }; }
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_FetchParamsAttributeCreator_OUTPUT"    OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_OUTPUT"         @Tcl2("$(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_5bff7e40_59da_4119_93df_a7d9caa43cf91_replacer {<backslash>} {<solidus>} {_FME_NO_OP_}")

# -------------------------------------------------------------------------


FME_PYTHON_PATH "$(FME_MF_DIR)"

FACTORY_DEF * PythonFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_PythonCaller    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_StringReplacer_OUTPUT"    SYMBOL_NAME FeatureProcessor    PYTHON_NAMESPACE FMEOBJECTS    SOURCE_CODE from<space>fmeobjects<space>import<space>FMELogFile<comma><space>FME_INFORM<comma><space>FME_WARN<comma><space>FME_ERROR<lf>from<space>cStringIO<space>import<space>StringIO<lf>import<space>os<lf>import<space>requests<lf>from<space>collections<space>import<space>OrderedDict<lf>import<space>datetime<lf><lf><lf>import<space>base64<lf>import<space>hashlib<lf>import<space>hmac<lf>import<space>sys<lf><lf>PUT_BLOB_LIMIT<space>=<space>1024<space>*<space>1024<space>*<space>64<space><space><space><space><space><space>#<space>64<space>MB<lf>PUT_BLOCK_CHUNK_SIZE<space>=<space>1024<space>*<space>1024<space>*<space>4<space>#<space>4<space>MB<lf>AZ_VERSION<space>=<space><apos>2015-02-21<apos><lf><lf>class<space>FeatureProcessor<openparen>object<closeparen>:<lf><space><space><space><space>def<space>__init__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile<space>=<space>FMELogFile<openparen><closeparen><lf><space><space><space><space><space><space><space><space>#<space>Make<space>sure<space>to<space>change<space>if<space>Custom<space>transformer<space>is<space>renamed<space><openparen>not<space>transformer<space>instance<space>name<space>-<space>that<apos>s<space>what<space>we<apos>re<space>fetching<closeparen><space><lf><space><space><space><space><space><space><space><space>self.xformer_name<space>=<space>FME_MacroValues<openbracket><apos>AzureBlobUploader_WORKSPACE_NAME<apos><closebracket><lf><space><space><space><space>def<space>info<openparen>self<comma><space>message<closeparen>:<lf><space><space><space><space><space><space><space><space>self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_INFORM<closeparen><lf><space><space><space><space><space><space><space><space>#self.logfile.logMessageString<openparen><apos>%s:<space>%s<apos><space>%<space><openparen>self.xformer_name<comma><space>message<closeparen><comma><space>FME_WARN<closeparen><space>#<space>while<space>developing<space>for<space>popping<space>out<lf><space><space><space><space>def<space>input<openparen>self<comma>feature<closeparen>:<lf><space><space><space><space><space><space><space><space>try:<lf><space><space><space><space><space><space><space><space><space><space><space><space>account<space>=<space>feature.getAttribute<openparen><apos>_storage_account<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>secret<space>=<space>feature.getAttribute<openparen><apos>_key<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>container<space>=<space>feature.getAttribute<openparen><apos>_container<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>blob_name<space>=<space>feature.getAttribute<openparen><apos>_blob_name<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>src_type<space>=<space>feature.getAttribute<openparen><apos>_src_type<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>src_type<space>==<space><apos>AttributeValue<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>feature.getAttribute<openparen><apos>_src_data<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>data<comma><space>_unicode_type<closeparen>:<space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.put_blob<openparen>account<comma><space>secret<comma><space>container<comma><space>blob_name<comma><space>StringIO<openparen>data<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>elif<space>src_type<space>==<space><apos>FilePath<apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>with<space>open<openparen>feature.getAttribute<openparen><apos>_src_data<apos><closeparen><comma><space><apos>rb<apos><closeparen><space>as<space>fin:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.put_blob<openparen>account<comma><space>secret<comma><space>container<comma><space>blob_name<comma><space>fin<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>else:<space>raise<space>Exception<openparen><apos>Unrecognized<space>source<space>type<space>`%s`<apos><space>%<space>src_type<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_upload_status<apos><comma><space><apos>success<apos><closeparen><lf><space><space><space><space><space><space><space><space>except<space>Exception<space>as<space>e:<lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_upload_status<apos><comma><space><apos>fail<apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>_error_message<apos><comma><space>str<openparen>e<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.logfile.logException<openparen>e<comma><space>FME_ERROR<closeparen><lf><space><space><space><space><space><space><space><space>self.pyoutput<openparen>feature<closeparen><lf><space><space><space><space>def<space>append_block<openparen>self<comma><space>account<comma><space>secret<comma><space>container<comma><space>blob_name<comma><space>block_data<closeparen>:<lf><space><space><space><space><space><space><space><space>headers<space>=<space>create_headers<openparen>block_data<closeparen><lf><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s?comp=appendblock<apos><space>%<space><openparen>account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Appending<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space>_string_to_sign<space>=<space>authorize<openparen>headers<comma><space>account<comma><space>container<comma><space>blob_name<comma><space>secret<comma><space><apos>comp:appendblock<apos><closeparen><lf><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data<space>=<space>block_data<closeparen><lf><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>ERROR<space>status<space>%s:<space>`%s`<apos><space>%<space><openparen>r.status_code<comma><space>_string_to_sign<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space>def<space>put_blob<openparen>self<comma><space>account<comma><space>secret<comma><space>container<comma><space>blob_name<comma><space>fin<closeparen>:<lf><space><space><space><space><space><space><space><space>fin.seek<openparen>0<comma><space>os.SEEK_END<closeparen><lf><space><space><space><space><space><space><space><space>size<space>=<space>fin.tell<openparen><closeparen><lf><space><space><space><space><space><space><space><space>fin.seek<openparen>0<comma><space>os.SEEK_SET<closeparen><lf><space><space><space><space><space><space><space><space>if<space>size<space><lt><space>PUT_BLOB_LIMIT:<lf><space><space><space><space><space><space><space><space><space><space><space><space>data<space>=<space>fin.read<openparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<space>=<space>create_headers<openparen>data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<openbracket><apos>x-ms-blob-type<apos><closebracket><space>=<space><apos>BlockBlob<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space>authorize<openparen>headers<comma><space>account<comma><space>container<comma><space>blob_name<comma><space>secret<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s<apos><space>%<space><openparen>account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>data<space>to<space>blob<space>using<space>url<space>%s<apos><space>%<space>url<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<comma><space>data=data<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<space>=<space>create_headers<openparen><apos><apos><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>headers<openbracket><apos>x-ms-blob-type<apos><closebracket><space>=<space><apos>AppendBlob<apos><lf><space><space><space><space><space><space><space><space><space><space><space><space>authorize<openparen>headers<comma><space>account<comma><space>container<comma><space>blob_name<comma><space>secret<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>url<space>=<space><apos>https:<solidus><solidus>%s.blob.core.windows.net<solidus>%s<solidus>%s<apos><space>%<space><openparen>account<comma><space>container<comma><space>blob_name<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>r<space>=<space>requests.put<openparen>url<comma><space>headers=headers<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>r.status_code<space>!=<space>201:<space>raise<space>Exception<openparen>str<openparen>r.content<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>for<space>offset<space>in<space>range<openparen>0<comma><space>size<comma><space>PUT_BLOCK_CHUNK_SIZE<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.info<openparen><apos>Uploading<space>`%s`<comma><space>%s%%<apos><space>%<space><openparen>blob_name<comma><space>int<openparen>round<openparen>offset<space>*<space>100<space><solidus><space>size<closeparen><closeparen><space><closeparen><space><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>block_size<space>=<space>min<openparen>PUT_BLOCK_CHUNK_SIZE<comma><space>size<space>-<space>offset<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>self.append_block<openparen>account<comma><space>secret<comma><space>container<comma><space>blob_name<comma><space>fin.read<openparen>block_size<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>self.info<openparen><apos>Done<space>uploading<space>%s<space>bytes<space>of<space>data<apos><space>%<space>size<closeparen><lf><space><space><space><space>def<space>close<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>pass<lf><lf>def<space>authorize<openparen>headers<comma><space>storage_account<comma><space>container_name<comma><space>blob_name<comma><space>secret<comma><space>querystringencoded<space>=<space>None<closeparen>:<lf><space><space><space><space>content_length<space>=<space><apos><apos><lf><space><space><space><space>if<space>headers.get<openparen><apos>Content-Length<apos><closeparen><space>!=<space><apos>0<apos>:<lf><space><space><space><space><space><space><space><space>content_length<space>=<space>headers.get<openparen><apos>Content-Length<apos><closeparen><lf><space><space><space><space>fields<space>=<space><openbracket><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><apos>PUT<apos><space>#<space>VERB<space><openparen>http-method<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-Encoding<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-Language<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space>content_length<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Content-MD5<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space>headers.get<openparen><apos>Date<apos><comma><apos><apos><closeparen><space>#<space>Date<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-Modified-Since<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-None-Match<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>If-Unmodified-Since<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>Range<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>?<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos><apos><space>#<space>?<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><closebracket><lf><space><space><space><space>if<space>headers.get<openparen><apos>x-ms-blob-type<apos><comma><space>None<closeparen>:<space>fields.append<openparen><apos>x-ms-blob-type:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-blob-type<apos><closeparen><closeparen><lf><space><space><space><space>fields.append<openparen><apos>x-ms-date:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-date<apos><closeparen><closeparen><lf><space><space><space><space>fields.append<openparen><apos>x-ms-version:%s<apos><space>%<space>headers.get<openparen><apos>x-ms-version<apos><closeparen><closeparen><lf><space><space><space><space>fields.append<openparen><apos><solidus>%s<solidus>%s<solidus>%s<apos><space>%<space><openparen>storage_account<comma><space>container_name<comma><space>blob_name<closeparen><closeparen><lf><space><space><space><space>if<space>querystringencoded:<space>fields.append<openparen>querystringencoded<closeparen><lf><space><space><space><space>_string_to_sign<space>=<space><apos><backslash>n<apos>.join<openparen>fields<closeparen><lf><space><space><space><space>signature<space>=<space>_sign_string<openparen>secret<space><comma><space>_string_to_sign<closeparen><lf><space><space><space><space>headers<openbracket><apos>Authorization<apos><closebracket><space>=<space><apos>SharedKey<space>%s:%s<apos><space>%<space><openparen>storage_account<comma><space>signature<closeparen><lf><space><space><space><space>return<space>_string_to_sign<lf>def<space>create_headers<openparen>data<closeparen>:<lf><space><space><space><space>return<space>OrderedDict<openparen><opencurly><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><apos>Content-Length<apos>:<space>str<openparen>len<openparen>data<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-date<apos>:<space>_httpdate<openparen>datetime.datetime.utcnow<openparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><comma><space><apos>x-ms-version<apos>:<space>AZ_VERSION<lf><space><space><space><space><space><space><space><space><closecurly><closeparen><lf><lf>def<space>_httpdate<openparen>dt<closeparen>:<lf><space><space><space><space><quote><quote><quote>Return<space>a<space>string<space>representation<space>of<space>a<space>date<space>according<space>to<space>RFC<space>1123<lf><space><space><space><space><openparen>HTTP<solidus>1.1<closeparen>.<lf><lf><space><space><space><space>The<space>supplied<space>date<space>must<space>be<space>in<space>UTC.<lf><lf><space><space><space><space><quote><quote><quote><lf><space><space><space><space>weekday<space>=<space><openbracket><quote>Mon<quote><comma><space><quote>Tue<quote><comma><space><quote>Wed<quote><comma><space><quote>Thu<quote><comma><space><quote>Fri<quote><comma><space><quote>Sat<quote><comma><space><quote>Sun<quote><closebracket><openbracket>dt.weekday<openparen><closeparen><closebracket><lf><space><space><space><space>month<space>=<space><openbracket><quote>Jan<quote><comma><space><quote>Feb<quote><comma><space><quote>Mar<quote><comma><space><quote>Apr<quote><comma><space><quote>May<quote><comma><space><quote>Jun<quote><comma><space><quote>Jul<quote><comma><space><quote>Aug<quote><comma><space><quote>Sep<quote><comma><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><quote>Oct<quote><comma><space><quote>Nov<quote><comma><space><quote>Dec<quote><closebracket><openbracket>dt.month<space>-<space>1<closebracket><lf><space><space><space><space>return<space><quote>%s<comma><space>%02d<space>%s<space>%04d<space>%02d:%02d:%02d<space>GMT<quote><space>%<space><openparen>weekday<comma><space>dt.day<comma><space>month<comma><lf><space><space><space><space><space><space><space><space>dt.year<comma><space>dt.hour<comma><space>dt.minute<comma><space>dt.second<closeparen><lf><lf>if<space>sys.version_info<space><lt><space><openparen>3<comma><closeparen>:<lf><space><space><space><space>from<space>collections<space>import<space>Iterable<lf><space><space><space><space>_unicode_type<space>=<space>unicode<lf>else:<lf><space><space><space><space>from<space>collections.abc<space>import<space>Iterable<lf><space><space><space><space>_unicode_type<space>=<space>str<lf><lf>def<space>_encode_base64<openparen>data<closeparen>:<lf><space><space><space><space>if<space>isinstance<openparen>data<comma><space>_unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space>encoded<space>=<space>base64.b64encode<openparen>data<closeparen><lf><space><space><space><space>return<space>encoded.decode<openparen><apos>utf-8<apos><closeparen><lf>def<space>_decode_base64_to_bytes<openparen>data<closeparen>:<lf><space><space><space><space>if<space>isinstance<openparen>data<comma><space>_unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space>data<space>=<space>data.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space>return<space>base64.b64decode<openparen>data<closeparen><lf>def<space>_sign_string<openparen>key<comma><space>string_to_sign<comma><space>key_is_base64=True<closeparen>:<lf><space><space><space><space>if<space>key_is_base64:<lf><space><space><space><space><space><space><space><space>key<space>=<space>_decode_base64_to_bytes<openparen>key<closeparen><lf><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space>if<space>isinstance<openparen>key<comma><space>_unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>key<space>=<space>key.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space>if<space>isinstance<openparen>string_to_sign<comma><space>_unicode_type<closeparen>:<lf><space><space><space><space><space><space><space><space>string_to_sign<space>=<space>string_to_sign.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space>signed_hmac_sha256<space>=<space>hmac.HMAC<openparen>key<comma><space>string_to_sign<comma><space>hashlib.sha256<closeparen><lf><space><space><space><space>digest<space>=<space>signed_hmac_sha256.digest<openparen><closeparen><lf><space><space><space><space>encoded_digest<space>=<space>_encode_base64<openparen>digest<closeparen><lf><space><space><space><space>return<space>encoded_digest    OUTPUT PYOUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_PythonCaller_OUTPUT"

# -------------------------------------------------------------------------
Lookup $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_AttributeFilterLut   success ok   fail ok   "" notok   ENCODED

FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_PythonCaller_OUTPUT"    TEST @Lookup($(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_AttributeFilterLut,_upload_status,ENCODED_ATTR) == "ok"    OUTPUT PASSED FEATURE_TYPE * @FeatureType(SET_FROM_ATTR, _upload_status, $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter)    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_NullFilter    INPUT FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>    TEST _upload_status ATTRIBUTE_VALUE_NULL "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_MissingFilter    INPUT FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>    TEST _upload_status ATTRIBUTE_IS_MISSING "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>
FACTORY_DEF * TestFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_BlankFilter    INPUT FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>    TEST _upload_status ATTRIBUTE_IS_EMPTY "" ENCODED    OUTPUT PASSED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<EMPTY>    OUTPUT FAILED FEATURE_TYPE $(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>



FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter <EMPTY> Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<EMPTY>"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter <MISSING> Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<MISSING>"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter <NULL> Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<NULL>"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter <UNFILTERED> Output Nuker"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_<UNFILTERED>"
# -------------------------------------------------------------------------

INCLUDE [    set macroLine "MACRO $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_fail"    OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"        @RemoveAttributes(fme_encoded,_src_data,_key,_storage_account,_src_type,_upload_status,_blob_name,_container)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_LIST_EXP)")

# -------------------------------------------------------------------------

INCLUDE [    set macroLine "MACRO $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF * TeeFactory    FACTORY_NAME $(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover    INPUT  FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeFilter_success"    OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_OUTPUT"        @RemoveAttributes(fme_encoded,_src_data,_key,_storage_account,_src_type,_error_message,_upload_status,_blob_name,_container)        @RemoveAttributes(fme_pcre_match"$($(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_LIST_EXP)")

FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_Success1467721764 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Success"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(AzureBlobUploader_WORKSPACE_NAME)_Fail1467721764 Output Collector"   INPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_AttributeRemover_2_OUTPUT"   OUTPUT FEATURE_TYPE "$(AzureBlobUploader_WORKSPACE_NAME)_Fail"
INCLUDE [puts {MACRO WB_CURRENT_CONTEXT $(WB_OLD_CONTEXT_$(AzureBlobUploader_WORKSPACE_NAME))}]








